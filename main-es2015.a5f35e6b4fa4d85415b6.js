(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(e,t,n){e.exports=n("zUnb")},"3Kre":function(e,t,n){"use strict";n.r(t),n.d(t,"factory",(function(){return T})),n.d(t,"registerAnalytics",(function(){return I})),n.d(t,"resetGlobalVars",(function(){return C})),n.d(t,"settings",(function(){return E}));var r,i,o,s=n("wj3C"),a=n.n(s),l=n("mrSG"),u=(n("fSjL"),n("zVF4")),c="measurementId",h="firebase_id",d="origin",p="https://www.googletagmanager.com/gtag/js",f=function(e){return e.EVENT="event",e.SET="set",e.CONFIG="config",e}({}),g=function(e){return e.ADD_PAYMENT_INFO="add_payment_info",e.ADD_TO_CART="add_to_cart",e.ADD_TO_WISHLIST="add_to_wishlist",e.BEGIN_CHECKOUT="begin_checkout",e.CHECKOUT_PROGRESS="checkout_progress",e.EXCEPTION="exception",e.GENERATE_LEAD="generate_lead",e.LOGIN="login",e.PAGE_VIEW="page_view",e.PURCHASE="purchase",e.REFUND="refund",e.REMOVE_FROM_CART="remove_from_cart",e.SCREEN_VIEW="screen_view",e.SEARCH="search",e.SELECT_CONTENT="select_content",e.SET_CHECKOUT_OPTION="set_checkout_option",e.SHARE="share",e.SIGN_UP="sign_up",e.TIMING_COMPLETE="timing_complete",e.VIEW_ITEM="view_item",e.VIEW_ITEM_LIST="view_item_list",e.VIEW_PROMOTION="view_promotion",e.VIEW_SEARCH_RESULTS="view_search_results",e}({}),m=((r={})["no-ga-id"]='"'+c+'" field is empty in Firebase config. Firebase Analytics requires this field to contain a valid measurement ID.',r["already-exists"]="A Firebase Analytics instance with the measurement ID ${id}  already exists. Only one Firebase Analytics instance can be created for each measurement ID.",r["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",r),y=new u.ErrorFactory("analytics","Analytics",m),v={},_="dataLayer",b="gtag",w=!1;function C(e,t){void 0===e&&(e=!1),void 0===t&&(t={}),w=e,v=t,_="dataLayer",b="gtag"}function E(e){if(w)throw y.create("already-initialized");e.dataLayerName&&(_=e.dataLayerName),e.gtagName&&(b=e.gtagName)}function T(e,t){var n=e.options[c];if(!n)throw y.create("no-ga-id");if(null!=v[n])throw y.create("already-exists",{id:n});if(!w){(function(){for(var e=window.document.getElementsByTagName("script"),t=0,n=Object.values(e);t<n.length;t++){var r=n[t];if(r.src&&r.src.includes(p))return r}return null})()||function(e){var t=document.createElement("script");t.src=p+"?l="+e,t.async=!0,document.head.appendChild(t)}(_),function(e){var t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(_);var r=function(e,t,n){var r=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];window[t].push(arguments)};return window[n]&&"function"==typeof window[n]&&(r=window[n]),window[n]=function(e,t){return function(n,r,i){if(n===f.EVENT){var o=[];if(i&&i.send_to){var s=i.send_to;Array.isArray(s)||(s=[s]);for(var a=0,l=s;a<l.length;a++){var u=t[l[a]];if(!u){o=[];break}o.push(u)}}if(0===o.length)for(var c=0,h=Object.values(t);c<h.length;c++)o.push(h[c]);Promise.all(o).then((function(){return e(f.EVENT,r,i||{})})).catch((function(e){return console.error(e)}))}else n===f.CONFIG?(t[r]||Promise.resolve()).then((function(){e(f.CONFIG,r,i)})).catch((function(e){return console.error(e)})):e(f.SET,r)}}(r,e),{gtagCore:r,wrappedGtag:window[n]}}(v,_,b);o=r.wrappedGtag,i=r.gtagCore,w=!0}v[n]=function(e,t){return Object(l.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(l.__generator)(this,(function(i){switch(i.label){case 0:return[4,e.installations().getId()];case 1:return n=i.sent(),t("js",new Date),t(f.CONFIG,e.options[c],((r={})[h]=n,r[d]="firebase",r.update=!0,r)),[2]}}))}))}(e,i);var s={app:e,logEvent:function(e,t,r){return function(e,t,n,r,i){var o=r||{};i&&i.global||(o=Object(l.__assign)(Object(l.__assign)({},r),{send_to:t})),e(f.EVENT,n,o||{})}(o,n,e,t,r)},setCurrentScreen:function(e,t){return function(e,t,n,r){r&&r.global?e(f.SET,{screen_name:n}):e(f.CONFIG,t,{update:!0,screen_name:n})}(o,n,e,t)},setUserId:function(e,t){return function(e,t,n,r){r&&r.global?e(f.SET,{user_id:n}):e(f.CONFIG,t,{update:!0,user_id:n})}(o,n,e,t)},setUserProperties:function(e,t){return function(e,t,n,r){if(r&&r.global){for(var i={},o=0,s=Object.keys(n);o<s.length;o++){var a=s[o];i["user_properties."+a]=n[a]}e(f.SET,i)}else e(f.CONFIG,t,{update:!0,user_properties:n})}(o,n,e,t)},setAnalyticsCollectionEnabled:function(e){return function(e,t){window["ga-disable-"+e]=!t}(n,e)}};return t({INTERNAL:{analytics:{logEvent:s.logEvent}}}),s}var S="analytics";function I(e){e.INTERNAL.registerService(S,T,{settings:E,EventName:g},void 0,!1)}I(a.a)},"6Joi":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r,o=n("mrSG"),s=n("q/0M"),a=n("zVF4"),l=n("x7I3"),u=i.SDK_VERSION,c=new s.Logger("@firebase/firestore"),h=function(e){return e[e.DEBUG=0]="DEBUG",e[e.ERROR=1]="ERROR",e[e.SILENT=2]="SILENT",e}({});function d(){return c.logLevel===s.LogLevel.DEBUG?h.DEBUG:c.logLevel===s.LogLevel.SILENT?h.SILENT:h.ERROR}function p(e){switch(e){case h.DEBUG:c.logLevel=s.LogLevel.DEBUG;break;case h.ERROR:c.logLevel=s.LogLevel.ERROR;break;case h.SILENT:c.logLevel=s.LogLevel.SILENT;break;default:c.error("Firestore ("+u+"): Invalid value passed to `setLogLevel`")}}function f(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(c.logLevel<=s.LogLevel.DEBUG){var i=n.map(m);c.debug.apply(c,o.__spreadArrays(["Firestore ("+u+") ["+e+"]: "+t],i))}}function g(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(c.logLevel<=s.LogLevel.ERROR){var r=t.map(m);c.error.apply(c,o.__spreadArrays(["Firestore ("+u+"): "+e],r))}}function m(e){if("string"==typeof e)return e;var t=_.getPlatform();try{return t.formatJSON(e)}catch(n){return e}}function y(e){var t="FIRESTORE ("+u+") INTERNAL ASSERTION FAILED: "+e;throw g(t),new Error(t)}function v(e,t){e||y(t)}var _=function(){function e(){}return e.setPlatform=function(t){e.platform&&y("Platform already defined"),e.platform=t},e.getPlatform=function(){return e.platform||y("Platform not set"),e.platform},e}();function b(){return _.getPlatform().emptyByteString}var w={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},C=function(e){function t(t,n){var r=e.call(this,n)||this;return r.code=t,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return o.__extends(t,e),t}(Error);function E(e,t){function n(){var e="This constructor is private.";throw t&&(e+=" ",e+=t),new C(w.INVALID_ARGUMENT,e)}for(var r in n.prototype=e.prototype,e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n}function T(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function S(e,t){return void 0!==e?e:t}function I(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Number(n);isNaN(r)||t(r,e[n])}}function k(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function A(e){for(var t in v(null!=e&&"object"==typeof e,"isEmpty() expects object parameter."),e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function N(e,t){if(0!==t.length)throw new C(w.INVALID_ARGUMENT,"Function "+e+"() does not support arguments, but was called with "+G(t.length,"argument")+".")}function D(e,t,n){if(t.length!==n)throw new C(w.INVALID_ARGUMENT,"Function "+e+"() requires "+G(n,"argument")+", but was called with "+G(t.length,"argument")+".")}function R(e,t,n){if(t.length<n)throw new C(w.INVALID_ARGUMENT,"Function "+e+"() requires at least "+G(n,"argument")+", but was called with "+G(t.length,"argument")+".")}function O(e,t,n,r){if(t.length<n||t.length>r)throw new C(w.INVALID_ARGUMENT,"Function "+e+"() requires between "+n+" and "+r+" arguments, but was called with "+G(t.length,"argument")+".")}function P(e,t,n,r){V(e,t,z(n)+" argument",r)}function x(e,t,n,r){void 0!==r&&P(e,t,n,r)}function M(e,t,n,r){V(e,t,n+" option",r)}function L(e,t,n,r){void 0!==r&&M(e,t,n,r)}function F(e,t,n,r,i){void 0!==r&&function(e,t,n,r,i){for(var o=[],s=0,a=i;s<a.length;s++){var l=a[s];if(l===r)return;o.push(q(l))}var u=q(r);throw new C(w.INVALID_ARGUMENT,"Invalid value "+u+" provided to function "+e+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(e,0,n,r,i)}function U(e,t,n,r){if(!t.some((function(e){return e===r})))throw new C(w.INVALID_ARGUMENT,"Invalid value "+q(r)+" provided to function "+e+"() for its "+z(n)+" argument. Acceptable values: "+t.join(", "))}function V(e,t,n,r){if(!("object"===t?j(r):"non-empty string"===t?"string"==typeof r&&""!==r:typeof r===t)){var i=q(r);throw new C(w.INVALID_ARGUMENT,"Function "+e+"() requires its "+n+" to be of type "+t+", but it was: "+i)}}function j(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function q(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&t.length>1)return t[1]}return null}(e);return t?"a custom "+t+" object":"an object"}return"function"==typeof e?"a function":y("Unknown wrong type: "+typeof e)}function B(e,t,n){if(void 0===n)throw new C(w.INVALID_ARGUMENT,"Function "+e+"() requires a valid "+z(t)+" argument, but it was undefined.")}function W(e,t,n){k(t,(function(t,r){if(n.indexOf(t)<0)throw new C(w.INVALID_ARGUMENT,"Unknown option '"+t+"' passed to function "+e+"(). Available options: "+n.join(", "))}))}function H(e,t,n,r){var i=q(r);return new C(w.INVALID_ARGUMENT,"Function "+e+"() requires its "+z(n)+" argument to be a "+t+", but it was: "+i)}function K(e,t,n){if(n<=0)throw new C(w.INVALID_ARGUMENT,'Function "'+e+'()" requires its '+z(t)+" argument to be a positive number, but it was: "+n+".")}function z(e){switch(e){case 1:return"first";case 2:return"second";case 3:return"third";default:return e+"th"}}function G(e,t){return e+" "+t+(1===e?"":"s")}var Q=function(){function e(){}return e.newId=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="",n=0;n<20;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return v(20===t.length,"Invalid auto ID: "+t),t},e}();function $(e,t){return e<t?-1:e>t?1:0}function Y(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].isEqual(t[n]))return!1;return!0}function X(e){return e+"\0"}function J(){if("undefined"==typeof Uint8Array)throw new C(w.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Z(){if(!_.getPlatform().base64Available)throw new C(w.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var ee=function(){function e(e){Z(),this._binaryString=e}return e.fromBase64String=function(t){D("Blob.fromBase64String",arguments,1),P("Blob.fromBase64String","string",1,t),Z();try{var n=_.getPlatform().atob(t);return new e(n)}catch(r){throw new C(w.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+r)}},e.fromUint8Array=function(t){if(D("Blob.fromUint8Array",arguments,1),J(),!(t instanceof Uint8Array))throw H("Blob.fromUint8Array","Uint8Array",1,t);var n=Array.prototype.map.call(t,(function(e){return String.fromCharCode(e)})).join("");return new e(n)},e.prototype.toBase64=function(){return D("Blob.toBase64",arguments,0),Z(),_.getPlatform().btoa(this._binaryString)},e.prototype.toUint8Array=function(){D("Blob.toUint8Array",arguments,0),J();for(var e=new Uint8Array(this._binaryString.length),t=0;t<this._binaryString.length;t++)e[t]=this._binaryString.charCodeAt(t);return e},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(e){return this._binaryString===e._binaryString},e.prototype._compareTo=function(e){return $(this._binaryString,e._binaryString)},e}(),te=E(ee,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),ne=function(){return function(e,t,n,r,i){this.databaseId=e,this.persistenceKey=t,this.host=n,this.ssl=r,this.forceLongPolling=i}}(),re="(default)",ie=function(){function e(e,t){this.projectId=e,this.database=t||re}return Object.defineProperty(e.prototype,"isDefaultDatabase",{get:function(){return this.database===re},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e.prototype.compareTo=function(e){return $(this.projectId,e.projectId)||$(this.database,e.database)},e}(),oe=function(){function e(e,t){var n=this;this.previousValue=e,t&&(t.sequenceNumberHandler=function(e){return n.setPreviousValue(e)},this.writeNewSequenceNumber=function(e){return t.writeSequenceNumber(e)})}return e.prototype.setPreviousValue=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},e.prototype.next=function(){var e=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(e),e},e.INVALID=-1,e}(),se=function(){function e(e,t,n){void 0===t?t=0:t>e.length&&y("offset "+t+" out of range "+e.length),void 0===n?n=e.length-t:n>e.length-t&&y("length "+n+" out of range "+(e.length-t)),this.segments=e,this.offset=t,this.len=n}return Object.defineProperty(e.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return 0===e.comparator(this,t)},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.popFirst=function(e){return v(this.length>=(e=void 0===e?1:e),"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+e,this.length-e)},e.prototype.popLast=function(){return v(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},e.prototype.firstSegment=function(){return v(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},e.prototype.lastSegment=function(){return this.get(this.length-1)},e.prototype.get=function(e){return v(e<this.length,"Index out of range"),this.segments[this.offset+e]},e.prototype.isEmpty=function(){return 0===this.length},e.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.forEach=function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])},e.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},e.comparator=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),o=t.get(r);if(i<o)return-1;if(i>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0},e}(),ae=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(e){if(e.indexOf("//")>=0)throw new C(w.INVALID_ARGUMENT,"Invalid path ("+e+"). Paths must not contain // in them.");return new t(e.split("/").filter((function(e){return e.length>0})))},t.EMPTY_PATH=new t([]),t}(se),le=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ue=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.isValidIdentifier=function(e){return le.test(e)},t.prototype.canonicalString=function(){return this.toArray().map((function(e){return e=e.replace("\\","\\\\").replace("`","\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},t.keyField=function(){return new t(["__name__"])},t.fromServerFormat=function(e){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new C(w.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<e.length;){var a=e[i];if("\\"===a){if(i+1===e.length)throw new C(w.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var l=e[i+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new C(w.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new C(w.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)},t.EMPTY_PATH=new t([]),t}(se),ce=function(){function e(t){this.path=t,v(e.isDocumentKey(t),"Invalid DocumentKey with an odd number of segments: "+t.toArray().join("/"))}return e.prototype.hasCollectionId=function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e},e.prototype.isEqual=function(e){return null!==e&&0===ae.comparator(this.path,e.path)},e.prototype.toString=function(){return this.path.toString()},e.comparator=function(e,t){return ae.comparator(e.path,t.path)},e.isDocumentKey=function(e){return e.length%2==0},e.fromSegments=function(t){return new e(new ae(t.slice()))},e.fromPathString=function(t){return new e(ae.fromString(t))},e.EMPTY=new e(new ae([])),e}(),he=function(){return function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}}(),de=function(e){return e.All="all",e.ListenStreamIdle="listen_stream_idle",e.ListenStreamConnectionBackoff="listen_stream_connection_backoff",e.WriteStreamIdle="write_stream_idle",e.WriteStreamConnectionBackoff="write_stream_connection_backoff",e.OnlineStateTimeout="online_state_timeout",e.ClientMetadataRefresh="client_metadata_refresh",e.LruGarbageCollection="lru_garbage_collection",e.RetryTransaction="retry_transaction",e}({}),pe=function(){function e(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new he,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return e.createAndSchedule=function(t,n,r,i,o){var s=new e(t,n,Date.now()+r,i,o);return s.start(r),s},e.prototype.start=function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)},e.prototype.skipDelay=function(){return this.handleDelayElapsed()},e.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new C(w.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},e.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))},e.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},e}(),fe=function(){function e(){this.tail=Promise.resolve(),this._isShuttingDown=!1,this.delayedOperations=[],this.failure=null,this.operationInProgress=!1,this.timerIdsToSkip=[]}return Object.defineProperty(e.prototype,"isShuttingDown",{get:function(){return this._isShuttingDown},enumerable:!0,configurable:!0}),e.prototype.enqueueAndForget=function(e){this.enqueue(e)},e.prototype.enqueueAndForgetEvenAfterShutdown=function(e){this.verifyNotFailed(),this.enqueueInternal(e)},e.prototype.enqueueEvenAfterShutdown=function(e){return this.verifyNotFailed(),this.enqueueInternal(e)},e.prototype.enqueueAndInitiateShutdown=function(e){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return this.verifyNotFailed(),this._isShuttingDown?[3,2]:(this._isShuttingDown=!0,[4,this.enqueueEvenAfterShutdown(e)]);case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},e.prototype.enqueue=function(e){return this.verifyNotFailed(),this._isShuttingDown?new Promise((function(e){})):this.enqueueInternal(e)},e.prototype.enqueueInternal=function(e){var t=this,n=this.tail.then((function(){return t.operationInProgress=!0,e().catch((function(e){t.failure=e,t.operationInProgress=!1;var n=e.stack||e.message||"";throw g("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout((function(){throw e}),0),e})).then((function(e){return t.operationInProgress=!1,e}))}));return this.tail=n,n},e.prototype.enqueueAfterDelay=function(e,t,n){var r=this;this.verifyNotFailed(),v(t>=0,"Attempted to schedule an operation with a negative delay of "+t),this.timerIdsToSkip.indexOf(e)>-1&&(t=0);var i=pe.createAndSchedule(this,e,t,n,(function(e){return r.removeDelayedOperation(e)}));return this.delayedOperations.push(i),i},e.prototype.verifyNotFailed=function(){this.failure&&y("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},e.prototype.verifyOperationInProgress=function(){v(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},e.prototype.drain=function(){return this.enqueueEvenAfterShutdown((function(){return Promise.resolve()}))},e.prototype.containsDelayedOperation=function(e){for(var t=0,n=this.delayedOperations;t<n.length;t++)if(n[t].timerId===e)return!0;return!1},e.prototype.runDelayedOperationsEarly=function(e){var t=this;return this.drain().then((function(){v(e===de.All||t.containsDelayedOperation(e),"Attempted to drain to missing operation "+e),t.delayedOperations.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));for(var n=0,r=t.delayedOperations;n<r.length;n++){var i=r[n];if(i.skipDelay(),e!==de.All&&i.timerId===e)break}return t.drain()}))},e.prototype.skipDelaysForTimerId=function(e){this.timerIdsToSkip.push(e)},e.prototype.removeDelayedOperation=function(e){var t=this.delayedOperations.indexOf(e);v(t>=0,"Delayed operation not found."),this.delayedOperations.splice(t,1)},e}(),ge="\x01",me="\x01",ye="\x10",ve="\x11";function _e(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=we(t)),t=be(e.get(n),t);return we(t)}function be(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+=ge+ye;break;case ge:n+=ge+ve;break;default:n+=o}}return n}function we(e){return e+ge+me}function Ce(e){var t=e.length;if(v(t>=2,"Invalid path "+e),2===t)return v(e.charAt(0)===ge&&e.charAt(1)===me,"Non-empty path "+e+" had length 2"),ae.EMPTY_PATH;for(var n=t-2,r=[],i="",o=0;o<t;){var s=e.indexOf(ge,o);switch((s<0||s>n)&&y('Invalid encoded resource path: "'+e+'"'),e.charAt(s+1)){case me:var a=e.substring(o,s),l=void 0;0===i.length?l=a:(l=i+=a,i=""),r.push(l);break;case ye:i+=e.substring(o,s),i+="\0";break;case ve:i+=e.substring(o,s+1);break;default:y('Invalid encoded resource path: "'+e+'"')}o=s+2}return new ae(r)}var Ee=function(){function e(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new C(w.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new C(w.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new C(w.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new C(w.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var n=Math.floor(t/1e3);return new e(n,1e6*(t-1e3*n))},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype._compareTo=function(e){return this.seconds===e.seconds?$(this.nanoseconds,e.nanoseconds):$(this.seconds,e.seconds)},e.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},e}(),Te=function(){function e(e){this.timestamp=e}return e.fromMicroseconds=function(t){var n=Math.floor(t/1e6);return new e(new Ee(n,t%1e6*1e3))},e.fromTimestamp=function(t){return new e(t)},e.forDeletedDoc=function(){return e.MIN},e.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},e.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},e.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.toTimestamp=function(){return this.timestamp},e.MIN=new e(new Ee(0,0)),e}(),Se=function(){function e(e,t){this.comparator=e,this.root=t||ke.EMPTY}return e.prototype.insert=function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,ke.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ke.BLACK,null,null))},e.prototype.get=function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null},e.prototype.indexOf=function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1},e.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),e.prototype.minKey=function(){return this.root.minKey()},e.prototype.maxKey=function(){return this.root.maxKey()},e.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},e.prototype.forEach=function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))},e.prototype.toString=function(){var e=[];return this.inorderTraversal((function(t,n){return e.push(t+":"+n),!1})),"{"+e.join(", ")+"}"},e.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},e.prototype.getIterator=function(){return new Ie(this.root,null,this.comparator,!1)},e.prototype.getIteratorFrom=function(e){return new Ie(this.root,e,this.comparator,!1)},e.prototype.getReverseIterator=function(){return new Ie(this.root,null,this.comparator,!0)},e.prototype.getReverseIteratorFrom=function(e){return new Ie(this.root,e,this.comparator,!0)},e}(),Ie=function(){function e(e,t,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}return e.prototype.getNext=function(){v(this.nodeStack.length>0,"getNext() called on iterator when hasNext() is false.");var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t},e.prototype.hasNext=function(){return this.nodeStack.length>0},e.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},e}(),ke=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=o?o:e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},e.prototype.minKey=function(){return this.min().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()},e.prototype.removeMin=function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},e.prototype.remove=function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()},e.prototype.isRed=function(){return this.color},e.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},e.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},e.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},e.prototype.rotateLeft=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},e.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw y("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw y("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check();if(e!==this.right.check())throw y("Black depths differ");return e+(this.isRed()?0:1)},e.EMPTY=null,e.RED=!0,e.BLACK=!1,e}(),Ae=function(){function e(){this.size=0}return Object.defineProperty(e.prototype,"key",{get:function(){throw y("LLRBEmptyNode has no key.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){throw y("LLRBEmptyNode has no value.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){throw y("LLRBEmptyNode has no color.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){throw y("LLRBEmptyNode has no left child.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){throw y("LLRBEmptyNode has no right child.")},enumerable:!0,configurable:!0}),e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new ke(e,t)},e.prototype.remove=function(e,t){return this},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.isRed=function(){return!1},e.prototype.checkMaxDepth=function(){return!0},e.prototype.check=function(){return 0},e}();ke.EMPTY=new Ae;var Ne=function(){function e(e){this.comparator=e,this.data=new Se(this.comparator)}return e.fromMapKeys=function(t){var n=new e(t.comparator);return t.forEach((function(e){n=n.add(e)})),n},e.prototype.has=function(e){return null!==this.data.get(e)},e.prototype.first=function(){return this.data.minKey()},e.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),e.prototype.indexOf=function(e){return this.data.indexOf(e)},e.prototype.forEach=function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))},e.prototype.forEachInRange=function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}},e.prototype.forEachWhile=function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return},e.prototype.firstAfterOrEqual=function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null},e.prototype.getIterator=function(){return new De(this.data.getIterator())},e.prototype.getIteratorFrom=function(e){return new De(this.data.getIteratorFrom(e))},e.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},e.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},e.prototype.isEmpty=function(){return this.data.isEmpty()},e.prototype.unionWith=function(e){var t=this;return e.forEach((function(e){t=t.add(e)})),t},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},e.prototype.toArray=function(){var e=[];return this.forEach((function(t){e.push(t)})),e},e.prototype.toString=function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"},e.prototype.copy=function(t){var n=new e(this.comparator);return n.data=t,n},e}(),De=function(){function e(e){this.iter=e}return e.prototype.getNext=function(){return this.iter.getNext().key},e.prototype.hasNext=function(){return this.iter.hasNext()},e}(),Re=new Se(ce.comparator);function Oe(){return Re}function Pe(){return Oe()}var xe=new Se(ce.comparator);function Me(){return xe}var Le=new Se(ce.comparator);function Fe(){return Le}var Ue=new Ne(ce.comparator);function Ve(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=Ue,r=0,i=e;r<i.length;r++)n=n.add(i[r]);return n}var je=new Ne($);function qe(){return je}var Be=function(){function e(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r,v(r.length>0,"Cannot create an empty mutation batch")}return e.prototype.applyToRemoteDocument=function(e,t,n){t&&v(t.key.isEqual(e),"applyToRemoteDocument: key "+e+" should match maybeDoc key\n        "+t.key);var r=n.mutationResults;v(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(e)&&(t=o.applyToRemoteDocument(t,r[i]))}return t},e.prototype.applyToLocalView=function(e,t){t&&v(t.key.isEqual(e),"applyToLocalDocument: key "+e+" should match maybeDoc key\n        "+t.key);for(var n=0,r=this.baseMutations;n<r.length;n++)(a=r[n]).key.isEqual(e)&&(t=a.applyToLocalView(t,t,this.localWriteTime));for(var i=t,o=0,s=this.mutations;o<s.length;o++){var a;(a=s[o]).key.isEqual(e)&&(t=a.applyToLocalView(t,i,this.localWriteTime))}return t},e.prototype.applyToLocalDocumentSet=function(e){var t=this,n=e;return this.mutations.forEach((function(r){var i=t.applyToLocalView(r.key,e.get(r.key));i&&(n=n.insert(r.key,i))})),n},e.prototype.keys=function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Ve())},e.prototype.isEqual=function(e){return this.batchId===e.batchId&&Y(this.mutations,e.mutations)&&Y(this.baseMutations,e.baseMutations)},e}(),We=function(){function e(e,t,n,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.streamToken=r,this.docVersions=i}return e.from=function(t,n,r,i){v(t.mutations.length===r.length,"Mutations sent "+t.mutations.length+" must equal results received "+r.length);for(var o=Fe(),s=t.mutations,a=0;a<s.length;a++)o=o.insert(s[a].key,r[a].version);return new e(t,n,r,i,o)},e}(),He=function(){function e(e){var t=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((function(e){t.isDone=!0,t.result=e,t.nextCallback&&t.nextCallback(e)}),(function(e){t.isDone=!0,t.error=e,t.catchCallback&&t.catchCallback(e)}))}return e.prototype.catch=function(e){return this.next(void 0,e)},e.prototype.next=function(t,n){var r=this;return this.callbackAttached&&y("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))},e.prototype.toPromise=function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))},e.prototype.wrapUserFunction=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(r){return e.reject(r)}},e.prototype.wrapSuccess=function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)},e.prototype.wrapFailure=function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)},e.resolve=function(t){return new e((function(e,n){e(t)}))},e.reject=function(t){return new e((function(e,n){n(t)}))},e.waitFor=function(t){return new e((function(e,n){var r=0,i=0,o=!1;t.forEach((function(t){++r,t.next((function(){++i,o&&i===r&&e()}),(function(e){return n(e)}))})),o=!0,i===r&&e()}))},e.or=function(t){for(var n=e.resolve(!1),r=function(t){n=n.next((function(n){return n?e.resolve(n):t()}))},i=0,o=t;i<o.length;i++)r(o[i]);return n},e.forEach=function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)},e}(),Ke="SimpleDb",ze=function(){function e(t){this.db=t,12.2===e.getIOSVersion(a.getUA())&&g("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e.openOrCreate=function(t,n,r){return v(e.isAvailable(),"IndexedDB not supported in current environment."),f(Ke,"Opening database:",t),new He((function(i,o){var s=window.indexedDB.open(t,n);s.onsuccess=function(t){i(new e(t.target.result))},s.onblocked=function(){o(new C(w.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=function(e){var t=e.target.error;o("VersionError"===t.name?new C(w.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):t)},s.onupgradeneeded=function(e){f(Ke,'Database "'+t+'" requires upgrade from version:',e.oldVersion),r.createOrUpgrade(e.target.result,s.transaction,e.oldVersion,tn).next((function(){f(Ke,"Database upgrade to version "+tn+" complete")}))}})).toPromise()},e.delete=function(e){return f(Ke,"Removing database:",e),Ye(window.indexedDB.deleteDatabase(e)).toPromise()},e.isAvailable=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(e.isMockPersistence())return!0;if(void 0===window.navigator)return!1;var t=a.getUA(),n=e.getIOSVersion(t),r=0<n&&n<10,i=e.getAndroidVersion(t),o=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||o)},e.isMockPersistence=function(){return"undefined"!=typeof process&&"YES"===process.env.USE_MOCK_PERSISTENCE},e.getStore=function(e,t){return e.store(t)},e.getIOSVersion=function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)},e.getAndroidVersion=function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)},e.prototype.setVersionChangeListener=function(e){this.db.onversionchange=function(t){return e(t)}},e.prototype.runTransaction=function(e,t,n){return o.__awaiter(this,void 0,void 0,(function(){var r,i,s,a,l,u;return o.__generator(this,(function(c){switch(c.label){case 0:r=e.startsWith("readonly"),i=e.endsWith("idempotent"),s=0,a=function(){var e,a,u,c;return o.__generator(this,(function(o){switch(o.label){case 0:++s,e=Qe.open(l.db,r?"readonly":"readwrite",t),o.label=1;case 1:return o.trys.push([1,3,,4]),(a=n(e).catch((function(t){return e.abort(t),He.reject(t)})).toPromise()).catch((function(){})),[4,e.completionPromise];case 2:return o.sent(),[2,{value:a}];case 3:return u=o.sent(),f(Ke,"Transaction failed with error: %s. Retrying: %s.",u.message,c=i&&"FirebaseError"!==u.name&&s<3),c?[3,4]:[2,{value:Promise.reject(u)}];case 4:return[2]}}))},l=this,c.label=1;case 1:return[5,a()];case 2:return"object"==typeof(u=c.sent())?[2,u.value]:[3,1];case 3:return[2]}}))}))},e.prototype.close=function(){this.db.close()},e}(),Ge=function(){function e(e){this.dbCursor=e,this.shouldStop=!1,this.nextKey=null}return Object.defineProperty(e.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(e){this.dbCursor=e},enumerable:!0,configurable:!0}),e.prototype.done=function(){this.shouldStop=!0},e.prototype.skip=function(e){this.nextKey=e},e.prototype.delete=function(){return Ye(this.dbCursor.delete())},e}(),Qe=function(){function e(e){var t=this;this.transaction=e,this.aborted=!1,this.completionDeferred=new he,this.transaction.oncomplete=function(){t.completionDeferred.resolve()},this.transaction.onabort=function(){e.error?t.completionDeferred.reject(e.error):t.completionDeferred.resolve()},this.transaction.onerror=function(e){var n=Je(e.target.error);t.completionDeferred.reject(n)}}return e.open=function(t,n,r){return new e(t.transaction(r,n))},Object.defineProperty(e.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),e.prototype.abort=function(e){e&&this.completionDeferred.reject(e),this.aborted||(f(Ke,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(e){var t=this.transaction.objectStore(e);return v(!!t,"Object store not part of transaction: "+e),new $e(t)},e}(),$e=function(){function e(e){this.store=e}return e.prototype.put=function(e,t){var n;return void 0!==t?(f(Ke,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(f(Ke,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Ye(n)},e.prototype.add=function(e){return f(Ke,"ADD",this.store.name,e,e),Ye(this.store.add(e))},e.prototype.get=function(e){var t=this;return Ye(this.store.get(e)).next((function(n){return void 0===n&&(n=null),f(Ke,"GET",t.store.name,e,n),n}))},e.prototype.delete=function(e){return f(Ke,"DELETE",this.store.name,e),Ye(this.store.delete(e))},e.prototype.count=function(){return f(Ke,"COUNT",this.store.name),Ye(this.store.count())},e.prototype.loadAll=function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.iterateCursor(n,(function(e,t){r.push(t)})).next((function(){return r}))},e.prototype.deleteAll=function(e,t){f(Ke,"DELETE ALL",this.store.name);var n=this.options(e,t);n.keysOnly=!1;var r=this.cursor(n);return this.iterateCursor(r,(function(e,t,n){return n.delete()}))},e.prototype.iterate=function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.iterateCursor(r,t)},e.prototype.iterateSerial=function(e){var t=this.cursor({});return new He((function(n,r){t.onerror=function(e){var t=Je(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))},e.prototype.iterateCursor=function(e,t){var n=[];return new He((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var o=new Ge(i),s=t(i.primaryKey,i.value,o);if(s instanceof He){var a=s.catch((function(e){return o.done(),He.reject(e)}));n.push(a)}o.isDone?r():null===o.skipToKey?i.continue():i.continue(o.skipToKey)}else r()}})).next((function(){return He.waitFor(n)}))},e.prototype.options=function(e,t){var n=void 0;return void 0!==e&&("string"==typeof e?n=e:(v(void 0===t,"3rd argument must not be defined if 2nd is a range."),t=e)),{index:n,range:t}},e.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.keysOnly?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},e}();function Ye(e){return new He((function(t,n){e.onsuccess=function(e){t(e.target.result)},e.onerror=function(e){var t=Je(e.target.error);n(t)}}))}var Xe=!1;function Je(e){var t=ze.getIOSVersion(a.getUA());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new C("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Xe||(Xe=!0,setTimeout((function(){throw r}),0)),r}}return e}var Ze=function(){function e(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.documentKeysByBatchId={}}return e.forUser=function(t,n,r,i){return v(""!==t.uid,"UserID must not be an empty string."),new e(t.isAuthenticated()?t.uid:"",n,r,i)},e.prototype.checkEmpty=function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return rt(e).iterate({index:an.userMutationsIndex,range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))},e.prototype.acknowledgeBatch=function(e,t,n){return this.getMutationQueueMetadata(e).next((function(t){return t.lastStreamToken=nt(n),ot(e).put(t)}))},e.prototype.getLastStreamToken=function(e){return this.getMutationQueueMetadata(e).next((function(e){return e.lastStreamToken}))},e.prototype.setLastStreamToken=function(e,t){return this.getMutationQueueMetadata(e).next((function(n){return n.lastStreamToken=nt(t),ot(e).put(n)}))},e.prototype.addMutationBatch=function(e,t,n,r){var i=this,o=it(e),s=rt(e);return s.add({}).next((function(a){v("number"==typeof a,"Auto-generated key is not a number");for(var l=new Be(a,t,n,r),u=i.serializer.toDbMutationBatch(i.userId,l),c=[],h=new Ne((function(e,t){return $(e.canonicalString(),t.canonicalString())})),d=0,p=r;d<p.length;d++){var f=p[d],g=ln.key(i.userId,f.key.path,a);h=h.add(f.key.path.popLast()),c.push(s.put(u)),c.push(o.put(g,ln.PLACEHOLDER))}return h.forEach((function(t){c.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.documentKeysByBatchId[a]=l.keys()})),He.waitFor(c).next((function(){return l}))}))},e.prototype.lookupMutationBatch=function(e,t){var n=this;return rt(e).get(t).next((function(e){return e?(v(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),n.serializer.fromDbMutationBatch(e)):null}))},e.prototype.lookupMutationKeys=function(e,t){var n=this;return this.documentKeysByBatchId[t]?He.resolve(this.documentKeysByBatchId[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.documentKeysByBatchId[t]=r,r}return null}))},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return rt(e).iterate({index:an.userMutationsIndex,range:i},(function(e,t,i){t.userId===n.userId&&(v(t.batchId>=r,"Should have found mutation after "+r),o=n.serializer.fromDbMutationBatch(t)),i.done()})).next((function(){return o}))},e.prototype.getHighestUnacknowledgedBatchId=function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return rt(e).iterate({index:an.userMutationsIndex,range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))},e.prototype.getAllMutationBatches=function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return rt(e).loadAll(an.userMutationsIndex,n).next((function(e){return e.map((function(e){return t.serializer.fromDbMutationBatch(e)}))}))},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=ln.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return it(e).iterate({range:i},(function(r,i,s){var a=r[0],l=r[2],u=Ce(r[1]);if(a===n.userId&&t.path.isEqual(u))return rt(e).get(l).next((function(e){if(!e)throw y("Dangling document-mutation reference found: "+r+" which points to "+l);v(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+l),o.push(n.serializer.fromDbMutationBatch(e))}));s.done()})).next((function(){return o}))},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new Ne($),i=[];return t.forEach((function(t){var o=ln.prefixForPath(n.userId,t.path),s=IDBKeyRange.lowerBound(o),a=it(e).iterate({range:s},(function(e,i,o){var s=e[0],a=e[2],l=Ce(e[1]);s===n.userId&&t.path.isEqual(l)?r=r.add(a):o.done()}));i.push(a)})),He.waitFor(i).next((function(){return n.lookupMutationBatches(e,r)}))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=this;v(!t.isDocumentQuery(),"Document queries shouldn't go down this path"),v(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=t.path,i=r.length+1,o=ln.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Ne($);return it(e).iterate({range:s},(function(e,t,o){var s=e[0],l=e[2],u=Ce(e[1]);s===n.userId&&r.isPrefixOf(u)?u.length===i&&(a=a.add(l)):o.done()})).next((function(){return n.lookupMutationBatches(e,a)}))},e.prototype.lookupMutationBatches=function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(rt(e).get(t).next((function(e){if(null===e)throw y("Dangling document-mutation reference found, which points to "+t);v(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),r.push(n.serializer.fromDbMutationBatch(e))})))})),He.waitFor(i).next((function(){return r}))},e.prototype.removeMutationBatch=function(e,t){var n=this;return tt(e.simpleDbTransaction,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.removeCachedMutationKeys(t.batchId)})),He.forEach(r,(function(t){return n.referenceDelegate.removeMutationReference(e,t)}))}))},e.prototype.removeCachedMutationKeys=function(e){delete this.documentKeysByBatchId[e]},e.prototype.performConsistencyCheck=function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return He.resolve();var r=IDBKeyRange.lowerBound(ln.prefixForUser(t.userId)),i=[];return it(e).iterate({range:r},(function(e,n,r){if(e[0]===t.userId){var o=Ce(e[1]);i.push(o)}else r.done()})).next((function(){v(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map((function(e){return e.canonicalString()})))}))}))},e.prototype.containsKey=function(e,t){return et(e,this.userId,t)},e.prototype.getMutationQueueMetadata=function(e){var t=this;return ot(e).get(this.userId).next((function(e){return e||new sn(t.userId,-1,"")}))},e}();function et(e,t,n){var r=ln.prefixForPath(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return it(e).iterate({range:o,keysOnly:!0},(function(e,n,r){e[0]===t&&e[1]===i&&(s=!0),r.done()})).next((function(){return s}))}function tt(e,t,n){var r=e.store(an.store),i=e.store(ln.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,l=r.iterate({range:s},(function(e,t,n){return a++,n.delete()}));o.push(l.next((function(){v(1===a,"Dangling document-mutation reference found: Missing batch "+n.batchId)})));for(var u=[],c=0,h=n.mutations;c<h.length;c++){var d=h[c],p=ln.key(t,d.key.path,n.batchId);o.push(i.delete(p)),u.push(d.key)}return He.waitFor(o).next((function(){return u}))}function nt(e){return e instanceof Uint8Array?(v(ze.isMockPersistence(),"Persisting non-string stream tokens is only supported with mock persistence."),e.toString()):e}function rt(e){return Un.getStore(e,an.store)}function it(e){return Un.getStore(e,ln.store)}function ot(e){return Un.getStore(e,sn.store)}var st=1,at=function(e){return e[e.QueryCache=0]="QueryCache",e[e.SyncEngine=1]="SyncEngine",e}({}),lt=function(){function e(e,t){this.generatorId=e,v((e&st)===e,"Generator ID "+e+" contains more than "+st+" reserved bits"),this.seek(void 0!==t?t:this.generatorId)}return e.prototype.next=function(){var e=this.nextId;return this.nextId+=1<<st,e},e.prototype.after=function(e){return this.seek(e+(1<<st)),this.next()},e.prototype.seek=function(e){v((e&st)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=e},e.forTargetCache=function(){return new e(at.QueryCache,2)},e.forSyncEngine=function(){return new e(at.SyncEngine)},e}(),ut=function(){function e(e,t){this.referenceDelegate=e,this.serializer=t,this.targetIdGenerator=lt.forTargetCache()}return e.prototype.allocateTargetId=function(e){var t=this;return this.retrieveMetadata(e).next((function(n){return n.highestTargetId=t.targetIdGenerator.after(n.highestTargetId),t.saveMetadata(e,n).next((function(){return n.highestTargetId}))}))},e.prototype.getLastRemoteSnapshotVersion=function(e){return this.retrieveMetadata(e).next((function(e){return Te.fromTimestamp(new Ee(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))},e.prototype.getHighestSequenceNumber=function(e){return dt(e.simpleDbTransaction)},e.prototype.setTargetsMetadata=function(e,t,n){var r=this;return this.retrieveMetadata(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.saveMetadata(e,i)}))},e.prototype.addTargetData=function(e,t){var n=this;return this.saveTargetData(e,t).next((function(){return n.retrieveMetadata(e).next((function(r){return r.targetCount+=1,n.updateMetadataFromTargetData(t,r),n.saveMetadata(e,r)}))}))},e.prototype.updateTargetData=function(e,t){return this.saveTargetData(e,t)},e.prototype.removeTargetData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return ct(e).delete(t.targetId)})).next((function(){return n.retrieveMetadata(e)})).next((function(t){return v(t.targetCount>0,"Removing from an empty target cache"),t.targetCount-=1,n.saveMetadata(e,t)}))},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return ct(e).iterate((function(s,a){var l=r.serializer.fromDbTarget(a);l.sequenceNumber<=t&&null===n.get(l.targetId)&&(i++,o.push(r.removeTargetData(e,l)))})).next((function(){return He.waitFor(o)})).next((function(){return i}))},e.prototype.forEachTarget=function(e,t){var n=this;return ct(e).iterate((function(e,r){var i=n.serializer.fromDbTarget(r);t(i)}))},e.prototype.retrieveMetadata=function(e){return ht(e.simpleDbTransaction)},e.prototype.saveMetadata=function(e,t){return(n=e,Un.getStore(n,gn.store)).put(gn.key,t);var n},e.prototype.saveTargetData=function(e,t){return ct(e).put(this.serializer.toDbTarget(t))},e.prototype.updateMetadataFromTargetData=function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n},e.prototype.getTargetCount=function(e){return this.retrieveMetadata(e).next((function(e){return e.targetCount}))},e.prototype.getTargetData=function(e,t){var n=this,r=t.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return ct(e).iterate({range:i,index:pn.queryTargetsIndexName},(function(e,r,i){var s=n.serializer.fromDbTarget(r);t.isEqual(s.target)&&(o=s,i.done())})).next((function(){return o}))},e.prototype.addMatchingKeys=function(e,t,n){var r=this,i=[],o=pt(e);return t.forEach((function(t){var s=_e(t.path);i.push(o.put(new fn(n,s))),i.push(r.referenceDelegate.addReference(e,t))})),He.waitFor(i)},e.prototype.removeMatchingKeys=function(e,t,n){var r=this,i=pt(e);return He.forEach(t,(function(t){var o=_e(t.path);return He.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(e,t)])}))},e.prototype.removeMatchingKeysForTargetId=function(e,t){var n=pt(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=pt(e),i=Ve();return r.iterate({range:n,keysOnly:!0},(function(e,t,n){var r=Ce(e[1]),o=new ce(r);i=i.add(o)})).next((function(){return i}))},e.prototype.containsKey=function(e,t){var n=_e(t.path),r=IDBKeyRange.bound([n],[X(n)],!1,!0),i=0;return pt(e).iterate({index:fn.documentTargetsIndex,keysOnly:!0,range:r},(function(e,t,n){0!==e[0]&&(i++,n.done())})).next((function(){return i>0}))},e.prototype.getTargetDataForTarget=function(e,t){var n=this;return ct(e).get(t).next((function(e){return e?n.serializer.fromDbTarget(e):null}))},e}();function ct(e){return Un.getStore(e,pn.store)}function ht(e){return ze.getStore(e,gn.store).get(gn.key).next((function(e){return v(null!==e,"Missing metadata row."),e}))}function dt(e){return ht(e).next((function(e){return e.highestListenSequenceNumber}))}function pt(e){return Un.getStore(e,fn.store)}var ft=function(){function e(e){this.fields=e}return e.fromSet=function(t){return new e(t)},e.fromArray=function(t){var n=new Ne(ue.comparator);return t.forEach((function(e){return n=n.add(e)})),new e(n)},e.prototype.covers=function(e){var t=!1;return this.fields.forEach((function(n){n.isPrefixOf(e)&&(t=!0)})),t},e.prototype.isEqual=function(e){return this.fields.isEqual(e.fields)},e}(),gt=function(){function e(e,t){this.field=e,this.transform=t}return e.prototype.isEqual=function(e){return this.field.isEqual(e.field)&&this.transform.isEqual(e.transform)},e}(),mt=function(){return function(e,t){this.version=e,this.transformResults=t}}(),yt=function(e){return e[e.Set=0]="Set",e[e.Patch=1]="Patch",e[e.Transform=2]="Transform",e[e.Delete=3]="Delete",e}({}),vt=function(){function e(e,t){this.updateTime=e,this.exists=t,v(void 0===e||void 0===t,'Precondition can specify "exists" or "updateTime" but not both')}return e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),e.prototype.isValidFor=function(e){return void 0!==this.updateTime?e instanceof Wt&&e.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===e instanceof Wt:(v(this.isNone,"Precondition should be empty"),!0)},e.prototype.isEqual=function(e){return n=e.updateTime,(null!=(t=this.updateTime)?!(!n||!t.isEqual(n)):t===n)&&this.exists===e.exists;var t,n},e.NONE=new e,e}(),_t=function(){function e(){}return e.prototype.verifyKeyMatches=function(e){null!=e&&v(e.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},e.getPostMutationVersion=function(e){return e instanceof Wt?e.version:Te.MIN},e}(),bt=function(e){function t(t,n,r){var i=e.call(this)||this;return i.key=t,i.value=n,i.precondition=r,i.type=yt.Set,i}return o.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){return this.verifyKeyMatches(e),v(null==t.transformResults,"Transform results received by SetMutation."),new Wt(this.key,t.version,{hasCommittedMutations:!0},this.value)},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=_t.getPostMutationVersion(e);return new Wt(this.key,r,{hasLocalMutations:!0},this.value)},t.prototype.extractBaseValue=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.value.isEqual(e.value)&&this.precondition.isEqual(e.precondition)},t}(_t),wt=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o.key=t,o.data=n,o.fieldMask=r,o.precondition=i,o.type=yt.Patch,o}return o.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),v(null==t.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(e))return new Kt(this.key,t.version);var n=this.patchDocument(e);return new Wt(this.key,t.version,{hasCommittedMutations:!0},n)},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=_t.getPostMutationVersion(e),i=this.patchDocument(e);return new Wt(this.key,r,{hasLocalMutations:!0},i)},t.prototype.extractBaseValue=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.fieldMask.isEqual(e.fieldMask)&&this.precondition.isEqual(e.precondition)},t.prototype.patchDocument=function(e){var t;return t=e instanceof Wt?e.data():jt.EMPTY,this.patchObject(t)},t.prototype.patchObject=function(e){var t=this;return this.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e=null!==r?e.set(n,r):e.delete(n)}})),e},t}(_t),Ct=function(e){function t(t,n){var r=e.call(this)||this;return r.key=t,r.fieldTransforms=n,r.type=yt.Transform,r.precondition=vt.exists(!0),r}return o.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),v(null!=t.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(e))return new Kt(this.key,t.version);var n=this.requireDocument(e),r=this.serverTransformResults(e,t.transformResults),i=t.version,o=this.transformObject(n.data(),r);return new Wt(this.key,i,{hasCommittedMutations:!0},o)},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=this.requireDocument(e),i=this.localTransformResults(n,e,t),o=this.transformObject(r.data(),i);return new Wt(this.key,r.version,{hasLocalMutations:!0},o)},t.prototype.extractBaseValue=function(e){for(var t=null,n=0,r=this.fieldTransforms;n<r.length;n++){var i=r[n],o=e instanceof Wt?e.field(i.field):void 0,s=i.transform.computeBaseValue(o||null);null!=s&&(t=null==t?jt.EMPTY.set(i.field,s):t.set(i.field,s))}return t},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&Y(this.fieldTransforms,e.fieldTransforms)&&this.precondition.isEqual(e.precondition)},t.prototype.requireDocument=function(e){v(e instanceof Wt,"Unknown MaybeDocument type "+e);var t=e;return v(t.key.isEqual(this.key),"Can only transform a document with the same key"),t},t.prototype.serverTransformResults=function(e,t){var n=[];v(this.fieldTransforms.length===t.length,"server transform result count ("+t.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<t.length;r++){var i=this.fieldTransforms[r],o=i.transform,s=null;e instanceof Wt&&(s=e.field(i.field)),n.push(o.applyToRemoteDocument(s,t[r]))}return n},t.prototype.localTransformResults=function(e,t,n){for(var r=[],i=0,o=this.fieldTransforms;i<o.length;i++){var s=o[i],a=s.transform,l=null;t instanceof Wt&&(l=t.field(s.field)),null===l&&n instanceof Wt&&(l=n.field(s.field)),r.push(a.applyToLocalView(l,e))}return r},t.prototype.transformObject=function(e,t){v(t.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++)e=e.set(this.fieldTransforms[n].field,t[n]);return e},t}(_t),Et=function(e){function t(t,n){var r=e.call(this)||this;return r.key=t,r.precondition=n,r.type=yt.Delete,r}return o.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){return this.verifyKeyMatches(e),v(null==t.transformResults,"Transform results received by DeleteMutation."),new Ht(this.key,t.version,{hasCommittedMutations:!0})},t.prototype.applyToLocalView=function(e,t,n){return this.verifyKeyMatches(e),this.precondition.isValidFor(e)?(e&&v(e.key.isEqual(this.key),"Can only apply mutation to document with same key"),new Ht(this.key,Te.forDeletedDoc())):e},t.prototype.extractBaseValue=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.precondition.isEqual(e.precondition)},t}(_t),Tt=function(e){return e[e.NullValue=0]="NullValue",e[e.BooleanValue=1]="BooleanValue",e[e.NumberValue=2]="NumberValue",e[e.TimestampValue=3]="TimestampValue",e[e.StringValue=4]="StringValue",e[e.BlobValue=5]="BlobValue",e[e.RefValue=6]="RefValue",e[e.GeoPointValue=7]="GeoPointValue",e[e.ArrayValue=8]="ArrayValue",e[e.ObjectValue=9]="ObjectValue",e}({}),St=function(e){return e[e.Default=0]="Default",e[e.Estimate=1]="Estimate",e[e.Previous=2]="Previous",e}({}),It=function(){function e(e,t){this.serverTimestampBehavior=e,this.timestampsInSnapshots=t}return e.fromSnapshotOptions=function(t,n){switch(t.serverTimestamps){case"estimate":return new e(St.Estimate,n);case"previous":return new e(St.Previous,n);case"none":case void 0:return new e(St.Default,n);default:return y("fromSnapshotOptions() called with invalid options.")}},e}(),kt=function(){function e(){}return e.prototype.toString=function(){var e=this.value();return null===e?"null":e.toString()},e.prototype.defaultCompareTo=function(e){return v(this.typeOrder!==e.typeOrder,"Default compareTo should not be used for values of same type."),$(this.typeOrder,e.typeOrder)},e}(),At=function(e){function t(){var t=e.call(this)||this;return t.typeOrder=Tt.NullValue,t.internalValue=null,t}return o.__extends(t,e),t.prototype.value=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t},t.prototype.compareTo=function(e){return e instanceof t?0:this.defaultCompareTo(e)},t.INSTANCE=new t,t}(kt),Nt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=Tt.BooleanValue,n}return o.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue===e.internalValue},t.prototype.compareTo=function(e){return e instanceof t?$(this,e):this.defaultCompareTo(e)},t.of=function(e){return e?t.TRUE:t.FALSE},t.TRUE=new t(!0),t.FALSE=new t(!1),t}(kt),Dt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=Tt.NumberValue,n}return o.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.compareTo=function(e){return e instanceof t?(n=this.internalValue)<(r=e.internalValue)?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1:this.defaultCompareTo(e);var n,r},t}(kt);function Rt(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}var Ot=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.isEqual=function(e){return e instanceof t&&Rt(this.internalValue,e.internalValue)},t}(Dt),Pt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.isEqual=function(e){return e instanceof t&&Rt(this.internalValue,e.internalValue)},t.NAN=new t(NaN),t.POSITIVE_INFINITY=new t(1/0),t.NEGATIVE_INFINITY=new t(-1/0),t}(Dt),xt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=Tt.StringValue,n}return o.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue===e.internalValue},t.prototype.compareTo=function(e){return e instanceof t?$(this.internalValue,e.internalValue):this.defaultCompareTo(e)},t}(kt),Mt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=Tt.TimestampValue,n}return o.__extends(t,e),t.prototype.value=function(e){return!e||e.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):e instanceof Lt?-1:this.defaultCompareTo(e)},t}(kt),Lt=function(e){function t(t,n){var r=e.call(this)||this;return r.localWriteTime=t,r.previousValue=n,r.typeOrder=Tt.TimestampValue,r}return o.__extends(t,e),t.prototype.value=function(e){return e&&e.serverTimestampBehavior===St.Estimate?new Mt(this.localWriteTime).value(e):e&&e.serverTimestampBehavior===St.Previous&&this.previousValue?this.previousValue.value(e):null},t.prototype.isEqual=function(e){return e instanceof t&&this.localWriteTime.isEqual(e.localWriteTime)},t.prototype.compareTo=function(e){return e instanceof t?this.localWriteTime._compareTo(e.localWriteTime):e instanceof Mt?1:this.defaultCompareTo(e)},t.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},t}(kt),Ft=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=Tt.BlobValue,n}return o.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},t}(kt),Ut=function(e){function t(t,n){var r=e.call(this)||this;return r.databaseId=t,r.key=n,r.typeOrder=Tt.RefValue,r}return o.__extends(t,e),t.prototype.value=function(e){return this.key},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.databaseId.isEqual(e.databaseId)},t.prototype.compareTo=function(e){if(e instanceof t){var n=this.databaseId.compareTo(e.databaseId);return 0!==n?n:ce.comparator(this.key,e.key)}return this.defaultCompareTo(e)},t}(kt),Vt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=Tt.GeoPointValue,n}return o.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},t}(kt),jt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=Tt.ObjectValue,n}return o.__extends(t,e),t.prototype.value=function(e){var t={};return this.internalValue.inorderTraversal((function(n,r){t[n]=r.value(e)})),t},t.prototype.forEach=function(e){this.internalValue.inorderTraversal(e)},t.prototype.isEqual=function(e){if(e instanceof t){for(var n=this.internalValue.getIterator(),r=e.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext();if(i.key!==o.key||!i.value.isEqual(o.value))return!1}return!n.hasNext()&&!r.hasNext()}return!1},t.prototype.compareTo=function(e){if(e instanceof t){for(var n=this.internalValue.getIterator(),r=e.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext(),s=$(i.key,o.key)||i.value.compareTo(o.value);if(s)return s}return $(n.hasNext(),r.hasNext())}return this.defaultCompareTo(e)},t.prototype.set=function(e,n){if(v(!e.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===e.length)return this.setChild(e.firstSegment(),n);var r=this.child(e.firstSegment());r instanceof t||(r=t.EMPTY);var i=r.set(e.popFirst(),n);return this.setChild(e.firstSegment(),i)},t.prototype.delete=function(e){if(v(!e.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===e.length)return new t(this.internalValue.remove(e.firstSegment()));var n=this.child(e.firstSegment());if(n instanceof t){var r=n.delete(e.popFirst());return new t(this.internalValue.insert(e.firstSegment(),r))}return this},t.prototype.contains=function(e){return null!==this.field(e)},t.prototype.field=function(e){v(!e.isEmpty(),"Can't get field of empty path");var n=this;return e.forEach((function(e){n=n instanceof t?n.internalValue.get(e):null})),n},t.prototype.fieldMask=function(){var e=new Ne(ue.comparator);return this.internalValue.forEach((function(n,r){var i=new ue([n]);if(r instanceof t){var o=r.fieldMask().fields;o.isEmpty()?e=e.add(i):o.forEach((function(t){e=e.add(i.child(t))}))}else e=e.add(i)})),ft.fromSet(e)},t.prototype.toString=function(){return this.internalValue.toString()},t.prototype.child=function(e){return this.internalValue.get(e)||void 0},t.prototype.setChild=function(e,n){return new t(this.internalValue.insert(e,n))},t.EMPTY=new t(new Se($)),t}(kt),qt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=Tt.ArrayValue,n}return o.__extends(t,e),t.prototype.value=function(e){return this.internalValue.map((function(t){return t.value(e)}))},t.prototype.contains=function(e){for(var t=0,n=this.internalValue;t<n.length;t++)if(n[t].isEqual(e))return!0;return!1},t.prototype.forEach=function(e){this.internalValue.forEach(e)},t.prototype.isEqual=function(e){if(e instanceof t){if(this.internalValue.length!==e.internalValue.length)return!1;for(var n=0;n<this.internalValue.length;n++)if(!this.internalValue[n].isEqual(e.internalValue[n]))return!1;return!0}return!1},t.prototype.compareTo=function(e){if(e instanceof t){for(var n=Math.min(this.internalValue.length,e.internalValue.length),r=0;r<n;r++){var i=this.internalValue[r].compareTo(e.internalValue[r]);if(i)return i}return $(this.internalValue.length,e.internalValue.length)}return this.defaultCompareTo(e)},t.prototype.toString=function(){return"["+this.internalValue.map((function(e){return e.toString()})).join(",")+"]"},t}(kt),Bt=function(){function e(e,t){this.key=e,this.version=t}return e.compareByKey=function(e,t){return ce.comparator(e.key,t.key)},e}(),Wt=function(e){function t(t,n,r,i,o,s){var a=e.call(this,t,n)||this;return a.objectValue=i,a.proto=o,a.converter=s,v(void 0!==a.objectValue||void 0!==a.proto&&void 0!==a.converter,"If objectValue is not defined, proto and converter need to be set."),a.hasLocalMutations=!!r.hasLocalMutations,a.hasCommittedMutations=!!r.hasCommittedMutations,a}return o.__extends(t,e),t.prototype.field=function(e){if(this.objectValue)return this.objectValue.field(e);this.fieldValueCache||(this.fieldValueCache=new Map);var t=e.canonicalString(),n=this.fieldValueCache.get(t);if(void 0===n){var r=this.getProtoField(e);n=void 0===r?null:this.converter(r),this.fieldValueCache.set(t,n)}return n},t.prototype.data=function(){var e=this;if(!this.objectValue){var t=jt.EMPTY;k(this.proto.fields||{},(function(n,r){t=t.set(new ue([n]),e.converter(r))})),this.objectValue=t,this.fieldValueCache=void 0}return this.objectValue},t.prototype.value=function(){return this.data().value()},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.hasLocalMutations===e.hasLocalMutations&&this.hasCommittedMutations===e.hasCommittedMutations&&this.data().isEqual(e.data())},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data().toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),t.prototype.getProtoField=function(e){v(void 0!==this.proto,"Can only call getProtoField() when proto is defined");for(var t=this.proto.fields?this.proto.fields[e.firstSegment()]:void 0,n=1;n<e.length;++n){if(!t||!t.mapValue||!t.mapValue.fields)return;t=t.mapValue.fields[e.get(n)]}return t},t.compareByField=function(e,t,n){var r=t.field(e),i=n.field(e);return null!==r&&null!==i?r.compareTo(i):y("Trying to compare documents on fields that don't exist")},t}(Bt),Ht=function(e){function t(t,n,r){var i=e.call(this,t,n)||this;return i.hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return o.__extends(t,e),t.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.hasCommittedMutations===this.hasCommittedMutations&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},t}(Bt),Kt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},t}(Bt),zt=function(){function e(e){this.mapKeyFn=e,this.inner={}}return e.prototype.get=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(o[0].isEqual(e))return s}},e.prototype.has=function(e){return void 0!==this.get(e)},e.prototype.set=function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]},e.prototype.delete=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1},e.prototype.forEach=function(e){k(this.inner,(function(t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];e(o[0],o[1])}}))},e.prototype.isEmpty=function(){return A(this.inner)},e}(),Gt=function(){function e(){this.changes=new zt((function(e){return e.toString()})),this.changesApplied=!1}return Object.defineProperty(e.prototype,"readTime",{get:function(){return v(void 0!==this._readTime,"Read time is not set. All removeEntry() calls must include a readTime if `trackRemovals` is used."),this._readTime},set:function(e){v(void 0===this._readTime||this._readTime.isEqual(e),"All changes in a RemoteDocumentChangeBuffer must have the same read time"),this._readTime=e},enumerable:!0,configurable:!0}),e.prototype.addEntry=function(e,t){this.assertNotApplied(),this.readTime=t,this.changes.set(e.key,e)},e.prototype.removeEntry=function(e,t){this.assertNotApplied(),t&&(this.readTime=t),this.changes.set(e,null)},e.prototype.getEntry=function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?He.resolve(n):this.getFromCache(e,t)},e.prototype.getEntries=function(e,t){return this.getAllFromCache(e,t)},e.prototype.apply=function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)},e.prototype.assertNotApplied=function(){v(!this.changesApplied,"Changes have already been applied.")},e}(),Qt=function(){function e(e,t){this.serializer=e,this.indexManager=t}return e.prototype.addEntry=function(e,t,n){return Yt(e).put(Xt(t),n)},e.prototype.removeEntry=function(e,t){var n=Yt(e),r=Xt(t);return n.delete(r)},e.prototype.updateMetadata=function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.setMetadata(e,r)}))},e.prototype.getEntry=function(e,t){var n=this;return Yt(e).get(Xt(t)).next((function(e){return n.maybeDecodeDocument(e)}))},e.prototype.getSizedEntry=function(e,t){var n=this;return Yt(e).get(Xt(t)).next((function(e){var t=n.maybeDecodeDocument(e);return t?{maybeDocument:t,size:Jt(e)}:null}))},e.prototype.getEntries=function(e,t){var n=this,r=Pe();return this.forEachDbEntry(e,t,(function(e,t){var i=n.maybeDecodeDocument(t);r=r.insert(e,i)})).next((function(){return r}))},e.prototype.getSizedEntries=function(e,t){var n=this,r=Pe(),i=new Se(ce.comparator);return this.forEachDbEntry(e,t,(function(e,t){var o=n.maybeDecodeDocument(t);o?(r=r.insert(e,o),i=i.insert(e,Jt(t))):(r=r.insert(e,null),i=i.insert(e,0))})).next((function(){return{maybeDocuments:r,sizeMap:i}}))},e.prototype.forEachDbEntry=function(e,t,n){if(t.isEmpty())return He.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),o=i.getNext();return Yt(e).iterate({range:r},(function(e,t,r){for(var s=ce.fromSegments(e);o&&ce.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,t),o=i.hasNext()?i.getNext():null),o?r.skip(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},e.prototype.getDocumentsMatchingQuery=function(e,t,n){var r=this;v(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var i=Me(),o=t.path.length+1,s={};if(n.isEqual(Te.MIN)){var a=t.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var l=t.path.toArray(),u=this.serializer.toDbTimestampKey(n);s.range=IDBKeyRange.lowerBound([l,u],!0),s.index=hn.collectionReadTimeIndex}return Yt(e).iterate(s,(function(e,n,s){if(e.length===o){var a=r.serializer.fromDbRemoteDocument(n);t.path.isPrefixOf(a.key.path)?a instanceof Wt&&t.matches(a)&&(i=i.insert(a.key,a)):s.done()}})).next((function(){return i}))},e.prototype.getNewDocumentChanges=function(e,t){var n=this,r=Oe(),i=this.serializer.toDbTimestampKey(t),o=Yt(e),s=IDBKeyRange.lowerBound(i,!0);return o.iterate({index:hn.readTimeIndex,range:s},(function(e,t){var o=n.serializer.fromDbRemoteDocument(t);r=r.insert(o.key,o),i=t.readTime})).next((function(){return{changedDocs:r,readTime:n.serializer.fromDbTimestampKey(i)}}))},e.prototype.getLastDocumentChange=function(e){var t,n=this,r=Yt(e),i=Te.MIN;return r.iterate({index:hn.readTimeIndex,reverse:!0},(function(e,r,o){t=n.serializer.fromDbRemoteDocument(r),r.readTime&&(i=n.serializer.fromDbTimestampKey(r.readTime)),o.done()})).next((function(){return{changedDoc:t,readTime:i}}))},e.prototype.newChangeBuffer=function(t){return new e.RemoteDocumentChangeBuffer(this,!!t&&t.trackRemovals)},e.prototype.getSize=function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))},e.prototype.getMetadata=function(e){return $t(e).get(dn.key).next((function(e){return v(!!e,"Missing document cache metadata"),e}))},e.prototype.setMetadata=function(e,t){return $t(e).put(dn.key,t)},e.prototype.maybeDecodeDocument=function(e){if(e){var t=this.serializer.fromDbRemoteDocument(e);return t instanceof Ht&&t.version.isEqual(Te.forDeletedDoc())?null:t}return null},e.RemoteDocumentChangeBuffer=function(e){function t(t,n){var r=e.call(this)||this;return r.documentCache=t,r.trackRemovals=n,r.documentSizes=new zt((function(e){return e.toString()})),r}return o.__extends(t,e),t.prototype.applyChanges=function(e){var t=this,n=[],r=0,i=new Ne((function(e,t){return $(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(o,s){var a=t.documentSizes.get(o);if(v(void 0!==a,"Cannot modify a document that wasn't read (for "+o+")"),s){v(!t.readTime.isEqual(Te.MIN),"Cannot add a document with a read time of zero");var l=t.documentCache.serializer.toDbRemoteDocument(s,t.readTime);i=i.add(o.path.popLast());var u=Jt(l);r+=u-a,n.push(t.documentCache.addEntry(e,o,l))}else if(r-=a,t.trackRemovals){var c=t.documentCache.serializer.toDbRemoteDocument(new Ht(o,Te.forDeletedDoc()),t.readTime);n.push(t.documentCache.addEntry(e,o,c))}else n.push(t.documentCache.removeEntry(e,o))})),i.forEach((function(r){n.push(t.documentCache.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.documentCache.updateMetadata(e,r)),He.waitFor(n)},t.prototype.getFromCache=function(e,t){var n=this;return this.documentCache.getSizedEntry(e,t).next((function(e){return null===e?(n.documentSizes.set(t,0),null):(n.documentSizes.set(t,e.size),e.maybeDocument)}))},t.prototype.getAllFromCache=function(e,t){var n=this;return this.documentCache.getSizedEntries(e,t).next((function(e){var t=e.maybeDocuments;return e.sizeMap.forEach((function(e,t){n.documentSizes.set(e,t)})),t}))},t}(Gt),e}();function $t(e){return Un.getStore(e,dn.store)}function Yt(e){return Un.getStore(e,hn.store)}function Xt(e){return e.path.toArray()}function Jt(e){var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw y("Unknown remote document type");t=e.noDocument}return JSON.stringify(t).length}var Zt=function(){function e(){this.collectionParentIndex=new en}return e.prototype.addToCollectionParentIndex=function(e,t){return this.collectionParentIndex.add(t),He.resolve()},e.prototype.getCollectionParents=function(e,t){return He.resolve(this.collectionParentIndex.getEntries(t))},e}(),en=function(){function e(){this.index={}}return e.prototype.add=function(e){v(e.length%2==1,"Expected a collection path.");var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Ne(ae.comparator),i=!r.has(n);return this.index[t]=r.add(n),i},e.prototype.has=function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)},e.prototype.getEntries=function(e){return(this.index[e]||new Ne(ae.comparator)).toArray()},e}(),tn=9,nn=function(){function e(e){this.serializer=e}return e.prototype.createOrUpgrade=function(e,t,n,r){var i=this;v(n<r&&n>=0&&r<=tn,"Unexpected schema upgrade from v"+n+" to v{toVersion}.");var o=new Qe(t);n<1&&r>=1&&(function(e){e.createObjectStore(on.store)}(e),function(e){e.createObjectStore(sn.store,{keyPath:sn.keyPath}),e.createObjectStore(an.store,{keyPath:an.keyPath,autoIncrement:!0}).createIndex(an.userMutationsIndex,an.userMutationsKeyPath,{unique:!0}),e.createObjectStore(ln.store)}(e),yn(e),function(e){e.createObjectStore(hn.store)}(e));var s=He.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(fn.store),e.deleteObjectStore(pn.store),e.deleteObjectStore(gn.store)}(e),yn(e)),s=s.next((function(){return function(e){var t=e.store(gn.store),n=new gn(0,0,Te.MIN.toTimestamp(),0);return t.put(gn.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(e,t){return t.store(an.store).loadAll().next((function(n){e.deleteObjectStore(an.store),e.createObjectStore(an.store,{keyPath:an.keyPath,autoIncrement:!0}).createIndex(an.userMutationsIndex,an.userMutationsKeyPath,{unique:!0});var r=t.store(an.store),i=n.map((function(e){return r.put(e)}));return He.waitFor(i)}))}(e,o)}))),s=s.next((function(){!function(e){e.createObjectStore(vn.store,{keyPath:vn.keyPath})}(e)}))),n<5&&r>=5&&(s=s.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(e){e.createObjectStore(dn.store)}(e),i.addDocumentGlobal(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.createCollectionParentIndex(e,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore(hn.store);t.createIndex(hn.readTimeIndex,hn.readTimeIndexPath,{unique:!1}),t.createIndex(hn.collectionReadTimeIndex,hn.collectionReadTimeIndexPath,{unique:!1})}(t)}))),s},e.prototype.addDocumentGlobal=function(e){var t=0;return e.store(hn.store).iterate((function(e,n){t+=Jt(n)})).next((function(){var n=new dn(t);return e.store(dn.store).put(dn.key,n)}))},e.prototype.removeAcknowledgedMutations=function(e){var t=this,n=e.store(sn.store),r=e.store(an.store);return n.loadAll().next((function(n){return He.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.loadAll(an.userMutationsIndex,i).next((function(r){return He.forEach(r,(function(r){v(r.userId===n.userId,"Cannot process batch "+r.batchId+" from unexpected user");var i=t.serializer.fromDbMutationBatch(r);return tt(e,n.userId,i).next((function(){}))}))}))}))}))},e.prototype.ensureSequenceNumbers=function(e){var t=e.store(fn.store),n=e.store(hn.store);return dt(e).next((function(e){var r=[];return n.iterate((function(n,i){var o=new ae(n),s=function(e){return[0,_e(e)]}(o);r.push(t.get(s).next((function(n){return n?He.resolve():function(n){return t.put(new fn(0,_e(n),e))}(o)})))})).next((function(){return He.waitFor(r)}))}))},e.prototype.createCollectionParentIndex=function(e,t){e.createObjectStore(mn.store,{keyPath:mn.keyPath});var n=t.store(mn.store),r=new en,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:_e(i)})}};return t.store(hn.store).iterate({keysOnly:!0},(function(e,t){var n=new ae(e);return i(n.popLast())})).next((function(){return t.store(ln.store).iterate({keysOnly:!0},(function(e,t){var n=Ce(e[1]);return i(n.popLast())}))}))},e}(),rn=function(){return function(e,t){this.seconds=e,this.nanoseconds=t}}(),on=function(){function e(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}return e.store="owner",e.key="owner",e}(),sn=function(){function e(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}return e.store="mutationQueues",e.keyPath="userId",e}(),an=function(){function e(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}return e.store="mutations",e.keyPath="batchId",e.userMutationsIndex="userMutationsIndex",e.userMutationsKeyPath=["userId","batchId"],e}(),ln=function(){function e(){}return e.prefixForUser=function(e){return[e]},e.prefixForPath=function(e,t){return[e,_e(t)]},e.key=function(e,t,n){return[e,_e(t),n]},e.store="documentMutations",e.PLACEHOLDER=new e,e}(),un=function(){return function(e,t){this.path=e,this.readTime=t}}(),cn=function(){return function(e,t){this.path=e,this.version=t}}(),hn=function(){function e(e,t,n,r,i,o){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o}return e.store="remoteDocuments",e.readTimeIndex="readTimeIndex",e.readTimeIndexPath="readTime",e.collectionReadTimeIndex="collectionReadTimeIndex",e.collectionReadTimeIndexPath=["parentPath","readTime"],e}(),dn=function(){function e(e){this.byteSize=e}return e.store="remoteDocumentGlobal",e.key="remoteDocumentGlobalKey",e}(),pn=function(){function e(e,t,n,r,i,o,s){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s}return e.store="targets",e.keyPath="targetId",e.queryTargetsIndexName="queryTargetsIndex",e.queryTargetsKeyPath=["canonicalId","targetId"],e}(),fn=function(){function e(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n,v(0===e==(void 0!==n),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}return e.store="targetDocuments",e.keyPath=["targetId","path"],e.documentTargetsIndex="documentTargetsIndex",e.documentTargetsKeyPath=["path","targetId"],e}(),gn=function(){function e(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r}return e.key="targetGlobalKey",e.store="targetGlobal",e}(),mn=function(){function e(e,t){this.collectionId=e,this.parent=t}return e.store="collectionParents",e.keyPath=["collectionId","parent"],e}();function yn(e){e.createObjectStore(fn.store,{keyPath:fn.keyPath}).createIndex(fn.documentTargetsIndex,fn.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(pn.store,{keyPath:pn.keyPath}).createIndex(pn.queryTargetsIndexName,pn.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(gn.store)}var vn=function(){function e(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r}return e.store="clientMetadata",e.keyPath="clientId",e}(),_n=o.__spreadArrays([sn.store,an.store,ln.store,hn.store,pn.store,on.store,gn.store,fn.store],[vn.store]),bn=o.__spreadArrays(_n,[dn.store]),wn=o.__spreadArrays(bn,[mn.store]),Cn=function(){function e(){this.collectionParentsCache=new en}return e.prototype.addToCollectionParentIndex=function(e,t){var n=this;if(v(t.length%2==1,"Expected a collection path."),!this.collectionParentsCache.has(t)){var r=t.lastSegment(),i=t.popLast();return e.addOnCommittedListener((function(){n.collectionParentsCache.add(t)})),En(e).put({collectionId:r,parent:_e(i)})}return He.resolve()},e.prototype.getCollectionParents=function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[X(t),""],!1,!0);return En(e).loadAll(r).next((function(e){for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.collectionId!==t)break;n.push(Ce(o.parent))}return n}))},e}();function En(e){return Un.getStore(e,mn.store)}var Tn=function(e){return e[e.Listen=0]="Listen",e[e.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",e[e.LimboResolution=2]="LimboResolution",e}({}),Sn=function(){function e(e,t,n,r,i,o,s){void 0===i&&(i=Te.MIN),void 0===o&&(o=Te.MIN),void 0===s&&(s=b()),this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return e.prototype.withSequenceNumber=function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},e.prototype.withResumeToken=function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)},e.prototype.withLastLimboFreeSnapshotVersion=function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},e.prototype.isEqual=function(e){return this.targetId===e.targetId&&this.purpose===e.purpose&&this.sequenceNumber===e.sequenceNumber&&this.snapshotVersion.isEqual(e.snapshotVersion)&&this.lastLimboFreeSnapshotVersion.isEqual(e.lastLimboFreeSnapshotVersion)&&this.resumeToken===e.resumeToken&&this.target.isEqual(e.target)},e}(),In=function(){function e(e){this.remoteSerializer=e}return e.prototype.fromDbRemoteDocument=function(e){if(e.document)return this.remoteSerializer.fromDocument(e.document,!!e.hasCommittedMutations);if(e.noDocument){var t=ce.fromSegments(e.noDocument.path),n=this.fromDbTimestamp(e.noDocument.readTime);return new Ht(t,n,{hasCommittedMutations:!!e.hasCommittedMutations})}return e.unknownDocument?(t=ce.fromSegments(e.unknownDocument.path),n=this.fromDbTimestamp(e.unknownDocument.version),new Kt(t,n)):y("Unexpected DbRemoteDocument")},e.prototype.toDbRemoteDocument=function(e,t){var n=this.toDbTimestampKey(t),r=e.key.path.popLast().toArray();if(e instanceof Wt){var i=e.proto?e.proto:this.remoteSerializer.toDocument(e);return new hn(null,null,i,a=e.hasCommittedMutations,n,r)}if(e instanceof Ht){var o=e.key.path.toArray(),s=this.toDbTimestamp(e.version),a=e.hasCommittedMutations;return new hn(null,new un(o,s),null,a,n,r)}if(e instanceof Kt){o=e.key.path.toArray();var l=this.toDbTimestamp(e.version);return new hn(new cn(o,l),null,null,!0,n,r)}return y("Unexpected MaybeDocument")},e.prototype.toDbTimestampKey=function(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]},e.prototype.fromDbTimestampKey=function(e){var t=new Ee(e[0],e[1]);return Te.fromTimestamp(t)},e.prototype.toDbTimestamp=function(e){var t=e.toTimestamp();return new rn(t.seconds,t.nanoseconds)},e.prototype.fromDbTimestamp=function(e){var t=new Ee(e.seconds,e.nanoseconds);return Te.fromTimestamp(t)},e.prototype.toDbMutationBatch=function(e,t){var n=this,r=t.baseMutations.map((function(e){return n.remoteSerializer.toMutation(e)})),i=t.mutations.map((function(e){return n.remoteSerializer.toMutation(e)}));return new an(e,t.batchId,t.localWriteTime.toMillis(),r,i)},e.prototype.fromDbMutationBatch=function(e){var t=this,n=(e.baseMutations||[]).map((function(e){return t.remoteSerializer.fromMutation(e)})),r=e.mutations.map((function(e){return t.remoteSerializer.fromMutation(e)})),i=Ee.fromMillis(e.localWriteTimeMs);return new Be(e.batchId,i,n,r)},e.prototype.toDbResourcePaths=function(e){var t=[];return e.forEach((function(e){t.push(_e(e.path))})),t},e.prototype.fromDbResourcePaths=function(e){for(var t=Ve(),n=0,r=e;n<r.length;n++)t=t.add(new ce(Ce(r[n])));return t},e.prototype.fromDbTarget=function(e){var t,n=this.fromDbTimestamp(e.readTime),r=void 0!==e.lastLimboFreeSnapshotVersion?this.fromDbTimestamp(e.lastLimboFreeSnapshotVersion):Te.MIN,i=e.resumeToken;return t=void 0!==e.query.documents?this.remoteSerializer.fromDocumentsTarget(e.query):this.remoteSerializer.fromQueryTarget(e.query),new Sn(t,e.targetId,Tn.Listen,e.lastListenSequenceNumber,n,r,i)},e.prototype.toDbTarget=function(e){v(Tn.Listen===e.purpose,"Only queries with purpose "+Tn.Listen+" may be stored, got "+e.purpose);var t,n,r=this.toDbTimestamp(e.snapshotVersion),i=this.toDbTimestamp(e.lastLimboFreeSnapshotVersion);return t=e.target.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(e.target):this.remoteSerializer.toQueryTarget(e.target),e.resumeToken instanceof Uint8Array?(v(ze.isMockPersistence(),"Persisting non-string stream tokens is only supported with mock persistence ."),n=e.resumeToken.toString()):n=e.resumeToken,new pn(e.targetId,e.target.canonicalId(),r,n,e.sequenceNumber,i,t)},e}();function kn(e,t){var n=e[1],r=t[1],i=$(e[0],t[0]);return 0===i?$(n,r):i}var An=function(){function e(e){this.maxElements=e,this.buffer=new Ne(kn),this.previousIndex=0}return e.prototype.nextIndex=function(){return++this.previousIndex},e.prototype.addElement=function(e){var t=[e,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();kn(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),e}(),Nn={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Dn=function(){function e(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}return e.withCacheSize=function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},e.COLLECTION_DISABLED=-1,e.MINIMUM_CACHE_SIZE_BYTES=1048576,e.DEFAULT=new e(e.DEFAULT_CACHE_SIZE_BYTES=41943040,e.DEFAULT_COLLECTION_PERCENTILE=10,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3),e.DISABLED=new e(e.COLLECTION_DISABLED,0,0),e}(),Rn=function(){function e(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.hasRun=!1,this.gcTask=null}return e.prototype.start=function(){v(null===this.gcTask,"Cannot start an already started LruScheduler"),this.garbageCollector.params.cacheSizeCollectionThreshold!==Dn.COLLECTION_DISABLED&&this.scheduleGC()},e.prototype.stop=function(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)},Object.defineProperty(e.prototype,"started",{get:function(){return null!==this.gcTask},enumerable:!0,configurable:!0}),e.prototype.scheduleGC=function(){var e=this;v(null===this.gcTask,"Cannot schedule GC while a task is pending");var t=this.hasRun?3e5:6e4;f("LruGarbageCollector","Garbage collection scheduled in "+t+"ms"),this.gcTask=this.asyncQueue.enqueueAfterDelay(de.LruGarbageCollection,t,(function(){return e.gcTask=null,e.hasRun=!0,e.localStore.collectGarbage(e.garbageCollector).then((function(){return e.scheduleGC()})).catch(Vn)}))},e}(),On=function(){function e(e,t){this.delegate=e,this.params=t}return e.prototype.calculateTargetCount=function(e,t){return this.delegate.getSequenceNumberCount(e).next((function(e){return Math.floor(t/100*e)}))},e.prototype.nthSequenceNumber=function(e,t){var n=this;if(0===t)return He.resolve(oe.INVALID);var r=new An(t);return this.delegate.forEachTarget(e,(function(e){return r.addElement(e.sequenceNumber)})).next((function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(e,(function(e){return r.addElement(e)}))})).next((function(){return r.maxValue}))},e.prototype.removeTargets=function(e,t,n){return this.delegate.removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){return this.delegate.removeOrphanedDocuments(e,t)},e.prototype.collect=function(e,t){var n=this;return this.params.cacheSizeCollectionThreshold===Dn.COLLECTION_DISABLED?(f("LruGarbageCollector","Garbage collection skipped; disabled"),He.resolve(Nn)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(f("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Nn):n.runGarbageCollection(e,t)}))},e.prototype.getCacheSize=function(e){return this.delegate.getCacheSize(e)},e.prototype.runGarbageCollection=function(e,t){var n,r,i,o,s,a,l,u=this,c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>u.params.maximumSequenceNumbersToCollect?(f("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+u.params.maximumSequenceNumbersToCollect+" from "+t),r=u.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),u.nthSequenceNumber(e,r)})).next((function(r){return n=r,s=Date.now(),u.removeTargets(e,n,t)})).next((function(t){return i=t,a=Date.now(),u.removeOrphanedDocuments(e,n)})).next((function(e){return l=Date.now(),d()<=h.DEBUG&&f("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-c)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+e+" documents in "+(l-a)+"ms\nTotal Duration: "+(l-c)+"ms"),He.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))},e}(),Pn=function(){function e(){this.onCommittedListeners=[]}return e.prototype.addOnCommittedListener=function(e){this.onCommittedListeners.push(e)},e.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(e){return e()}))},e}(),xn="IndexedDbPersistence",Mn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ln="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",Fn=function(e){function t(t,n){var r=e.call(this)||this;return r.simpleDbTransaction=t,r.currentSequenceNumber=n,r}return o.__extends(t,e),t}(Pn),Un=function(){function e(t,n,r,i,o,s,a,l){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.queue=s,this.sequenceNumberSyncer=l,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.windowUnloadHandler=null,this.inForeground=!1,this.documentVisibilityHandler=null,this.clientMetadataRefresher=null,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(e){return Promise.resolve()},this.referenceDelegate=new Bn(this,o),this.dbName=n+e.MAIN_DATABASE,this.serializer=new In(a),this.document=i.document,this.targetCache=new ut(this.referenceDelegate,this.serializer),this.indexManager=new Cn,this.remoteDocumentCache=new Qt(this.serializer,this.indexManager),!i.window||!i.window.localStorage)throw new C(w.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=i.window,this.webStorage=this.window.localStorage}return e.getStore=function(e,t){if(e instanceof Fn)return ze.getStore(e.simpleDbTransaction,t);throw y("IndexedDbPersistence must use instances of IndexedDbTransaction")},e.createIndexedDbPersistence=function(t){return o.__awaiter(this,void 0,void 0,(function(){var n;return o.__generator(this,(function(r){switch(r.label){case 0:if(!e.isAvailable())throw new C(w.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");return[4,(n=new e(t.allowTabSynchronization,t.persistenceKey,t.clientId,t.platform,t.lruParams,t.queue,t.serializer,t.sequenceNumberSyncer)).start()];case 1:return r.sent(),[2,n]}}))}))},e.prototype.start=function(){var e=this;return v(!this.started,"IndexedDbPersistence double-started!"),v(null!==this.window,"Expected 'window' to be defined"),ze.openOrCreate(this.dbName,tn,new nn(this.serializer)).then((function(t){return e.simpleDb=t,e.updateClientMetadataAndTryBecomePrimary()})).then((function(){return e.attachVisibilityHandler(),e.attachWindowUnloadHook(),e.scheduleClientMetadataAndPrimaryLeaseRefreshes(),e.simpleDb.runTransaction("readonly-idempotent",[gn.store],(function(e){return dt(e)}))})).then((function(t){e.listenSequence=new oe(t,e.sequenceNumberSyncer)})).then((function(){e._started=!0})).catch((function(t){return e.simpleDb&&e.simpleDb.close(),Promise.reject(t)}))},e.prototype.setPrimaryStateListener=function(e){var t=this;return this.primaryStateListener=function(n){return o.__awaiter(t,void 0,void 0,(function(){return o.__generator(this,(function(t){return this.started?[2,e(n)]:[2]}))}))},e(this.isPrimary)},e.prototype.setDatabaseDeletedListener=function(e){var t=this;this.simpleDb.setVersionChangeListener((function(n){return o.__awaiter(t,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return null!==n.newVersion?[3,2]:[4,e()];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))},e.prototype.setNetworkEnabled=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.queue.enqueueAndForget((function(){return o.__awaiter(t,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))})))},e.prototype.updateClientMetadataAndTryBecomePrimary=function(){var e=this;return this.simpleDb.runTransaction("readwrite-idempotent",wn,(function(t){return qn(t).put(new vn(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next((function(){if(e.isPrimary)return e.verifyPrimaryLease(t).next((function(t){t||(e.isPrimary=!1,e.queue.enqueueAndForget((function(){return e.primaryStateListener(!1)})))}))})).next((function(){return e.canActAsPrimary(t)})).next((function(n){return e.isPrimary&&!n?e.releasePrimaryLeaseIfHeld(t).next((function(){return!1})):!!n&&e.acquireOrExtendPrimaryLease(t).next((function(){return!0}))}))})).catch((function(t){if(!e.allowTabSynchronization)throw t;return f(xn,"Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.queue.enqueueAndForget((function(){return e.primaryStateListener(t)})),e.isPrimary=t}))},e.prototype.verifyPrimaryLease=function(e){var t=this;return jn(e).get(on.key).next((function(e){return He.resolve(t.isLocalClient(e))}))},e.prototype.removeClientMetadata=function(e){return qn(e).delete(this.clientId)},e.prototype.maybeGarbageCollectMultiClientState=function(){return o.__awaiter(this,void 0,void 0,(function(){var t=this;return o.__generator(this,(function(n){switch(n.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,18e5)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary-idempotent",(function(n){var r=e.getStore(n,vn.store);return r.loadAll().next((function(e){var n=t.filterActiveClients(e,18e5),i=e.filter((function(e){return-1===n.indexOf(e)}));return He.forEach(i,(function(e){return r.delete(e.clientId)})).next((function(){return i}))}))}))]);case 1:n.sent().forEach((function(e){t.window.localStorage.removeItem(t.zombiedClientLocalStorageKey(e.clientId))})),n.label=2;case 2:return[2]}}))}))},e.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var e=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(de.ClientMetadataRefresh,4e3,(function(){return e.updateClientMetadataAndTryBecomePrimary().then((function(){return e.maybeGarbageCollectMultiClientState()})).then((function(){return e.scheduleClientMetadataAndPrimaryLeaseRefreshes()}))}))},e.prototype.isLocalClient=function(e){return!!e&&e.ownerId===this.clientId},e.prototype.canActAsPrimary=function(e){var t=this;return jn(e).get(on.key).next((function(n){if(null!==n&&t.isWithinAge(n.leaseTimestampMs,5e3)&&!t.isClientZombied(n.ownerId)){if(t.isLocalClient(n)&&t.networkEnabled)return!0;if(!t.isLocalClient(n)){if(!n.allowTabSynchronization)throw new C(w.FAILED_PRECONDITION,Ln);return!1}}return!(!t.networkEnabled||!t.inForeground)||qn(e).loadAll().next((function(e){return void 0===t.filterActiveClients(e,5e3).find((function(e){return!(t.clientId===e.clientId||!(!t.networkEnabled&&e.networkEnabled||!t.inForeground&&e.inForeground&&t.networkEnabled===e.networkEnabled))}))}))})).next((function(e){return t.isPrimary!==e&&f(xn,"Client "+(e?"is":"is not")+" eligible for a primary lease."),e}))},e.prototype.shutdown=function(){return o.__awaiter(this,void 0,void 0,(function(){var e=this;return o.__generator(this,(function(t){switch(t.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&(this.clientMetadataRefresher.cancel(),this.clientMetadataRefresher=null),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite-idempotent",[on.store,vn.store],(function(t){return e.releasePrimaryLeaseIfHeld(t).next((function(){return e.removeClientMetadata(t)}))}))];case 1:return t.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),[2]}}))}))},e.prototype.filterActiveClients=function(e,t){var n=this;return e.filter((function(e){return n.isWithinAge(e.updateTimeMs,t)&&!n.isClientZombied(e.clientId)}))},e.prototype.getActiveClients=function(){var e=this;return this.simpleDb.runTransaction("readonly-idempotent",[vn.store],(function(t){return qn(t).loadAll().next((function(t){return e.filterActiveClients(t,18e5).map((function(e){return e.clientId}))}))}))},e.clearPersistence=function(t){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(n){switch(n.label){case 0:return e.isAvailable()?[4,ze.delete(t+e.MAIN_DATABASE)]:[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))},Object.defineProperty(e.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),e.prototype.getMutationQueue=function(e){return v(this.started,"Cannot initialize MutationQueue before persistence is started."),Ze.forUser(e,this.serializer,this.indexManager,this.referenceDelegate)},e.prototype.getTargetCache=function(){return v(this.started,"Cannot initialize TargetCache before persistence is started."),this.targetCache},e.prototype.getRemoteDocumentCache=function(){return v(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},e.prototype.getIndexManager=function(){return v(this.started,"Cannot initialize IndexManager before persistence is started."),this.indexManager},e.prototype.runTransaction=function(e,t,n){var r=this;f(xn,"Starting transaction:",e);var i,o=t.endsWith("idempotent"),s=t.startsWith("readonly");return this.simpleDb.runTransaction(s?o?"readonly-idempotent":"readonly":o?"readwrite-idempotent":"readwrite",wn,(function(o){return i=new Fn(o,r.listenSequence.next()),"readwrite-primary"===t||"readwrite-primary-idempotent"===t?r.verifyPrimaryLease(o).next((function(e){return!!e||r.canActAsPrimary(o)})).next((function(t){if(!t)throw g("Failed to obtain primary lease for action '"+e+"'."),r.isPrimary=!1,r.queue.enqueueAndForget((function(){return r.primaryStateListener(!1)})),new C(w.FAILED_PRECONDITION,Mn);return n(i)})).next((function(e){return r.acquireOrExtendPrimaryLease(o).next((function(){return e}))})):r.verifyAllowTabSynchronization(o).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))},e.prototype.verifyAllowTabSynchronization=function(e){var t=this;return jn(e).get(on.key).next((function(e){if(null!==e&&t.isWithinAge(e.leaseTimestampMs,5e3)&&!t.isClientZombied(e.ownerId)&&!t.isLocalClient(e)&&!e.allowTabSynchronization)throw new C(w.FAILED_PRECONDITION,Ln)}))},e.prototype.acquireOrExtendPrimaryLease=function(e){var t=new on(this.clientId,this.allowTabSynchronization,Date.now());return jn(e).put(on.key,t)},e.isAvailable=function(){return ze.isAvailable()},e.buildStoragePrefix=function(e){var t=e.databaseId.projectId;return e.databaseId.isDefaultDatabase||(t+="."+e.databaseId.database),"firestore/"+e.persistenceKey+"/"+t+"/"},e.prototype.releasePrimaryLeaseIfHeld=function(e){var t=this,n=jn(e);return n.get(on.key).next((function(e){return t.isLocalClient(e)?(f(xn,"Releasing primary lease."),n.delete(on.key)):He.resolve()}))},e.prototype.isWithinAge=function(e,t){var n=Date.now();return!(e<n-t||e>n&&(g("Detected an update time that is in the future: "+e+" > "+n),1))},e.prototype.attachVisibilityHandler=function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){e.queue.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.updateClientMetadataAndTryBecomePrimary()}))},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},e.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(v(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},e.prototype.attachWindowUnloadHook=function(){var e=this;"function"==typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){e.markClientZombied(),e.queue.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("unload",this.windowUnloadHandler))},e.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(v("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},e.prototype.isClientZombied=function(e){try{var t=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(e));return f(xn,"Client '"+e+"' "+(t?"is":"is not")+" zombied in LocalStorage"),t}catch(n){return g(xn,"Failed to get zombied client id.",n),!1}},e.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(e){g("Failed to set zombie client id.",e)}},e.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(e){}},e.prototype.zombiedClientLocalStorageKey=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},e.MAIN_DATABASE="main",e}();function Vn(e){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){if(!function(e){return e.code===w.FAILED_PRECONDITION&&e.message===Mn}(e))throw e;return f(xn,"Unexpectedly lost primary lease"),[2]}))}))}function jn(e){return e.store(on.store)}function qn(e){return e.store(vn.store)}var Bn=function(){function e(e,t){this.db=e,this.inMemoryPins=null,this.garbageCollector=new On(this,t)}return e.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocmentCount(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))},e.prototype.orphanedDocmentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,(function(e){t++})).next((function(){return t}))},e.prototype.forEachTarget=function(e,t){return this.db.getTargetCache().forEachTarget(e,t)},e.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){return this.forEachOrphanedDocument(e,(function(e,n){return t(n)}))},e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.addReference=function(e,t){return Wn(e,t)},e.prototype.removeReference=function(e,t){return Wn(e,t)},e.prototype.removeTargets=function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)},e.prototype.removeMutationReference=function(e,t){return Wn(e,t)},e.prototype.isPinned=function(e,t){return this.inMemoryPins.containsKey(t)?He.resolve(!0):function(e,t){var n=!1;return ot(e).iterateSerial((function(r){return et(e,r,t).next((function(e){return e&&(n=!0),He.resolve(!e)}))})).next((function(){return n}))}(e,t)},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.forEachOrphanedDocument(e,(function(s,a){if(a<=t){var l=n.isPinned(e,s).next((function(t){if(!t)return o++,r.getEntry(e,s).next((function(){return r.removeEntry(s),pt(e).delete([0,_e(s.path)])}))}));i.push(l)}})).next((function(){return He.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return o}))},e.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)},e.prototype.updateLimboDocument=function(e,t){return Wn(e,t)},e.prototype.forEachOrphanedDocument=function(e,t){var n,r=pt(e),i=oe.INVALID;return r.iterate({index:fn.documentTargetsIndex},(function(e,r){var o=r.path,s=r.sequenceNumber;0===e[0]?(i!==oe.INVALID&&t(new ce(Ce(n)),i),i=s,n=o):i=oe.INVALID})).next((function(){i!==oe.INVALID&&t(new ce(Ce(n)),i)}))},e.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},e}();function Wn(e,t){return pt(e).put(function(e,t){return new fn(0,_e(e.path),t)}(t,e.currentSequenceNumber))}var Hn=function(){function e(e,t,n){this.remoteDocumentCache=e,this.mutationQueue=t,this.indexManager=n}return e.prototype.getDocument=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.getDocumentInternal(e,t,r)}))},e.prototype.getDocumentInternal=function(e,t,n){return this.remoteDocumentCache.getEntry(e,t).next((function(e){for(var r=0,i=n;r<i.length;r++)e=i[r].applyToLocalView(t,e);return e}))},e.prototype.applyLocalMutationsToDocuments=function(e,t,n){var r=Pe();return t.forEach((function(e,t){for(var i=0,o=n;i<o.length;i++)t=o[i].applyToLocalView(e,t);r=r.insert(e,t)})),r},e.prototype.getDocuments=function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t)}))},e.prototype.getLocalViewOfDocuments=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(r){var i=n.applyLocalMutationsToDocuments(e,t,r),o=Oe();return i.forEach((function(e,t){t||(t=new Ht(e,Te.forDeletedDoc())),o=o.insert(e,t)})),o}))},e.prototype.getDocumentsMatchingQuery=function(e,t,n){return t.isDocumentQuery()?this.getDocumentsMatchingDocumentQuery(e,t.path):t.isCollectionGroupQuery()?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)},e.prototype.getDocumentsMatchingDocumentQuery=function(e,t){return this.getDocument(e,new ce(t)).next((function(e){var t=Me();return e instanceof Wt&&(t=t.insert(e.key,e)),t}))},e.prototype.getDocumentsMatchingCollectionGroupQuery=function(e,t,n){var r=this;v(t.path.isEmpty(),"Currently we only support collection group queries at the root.");var i=t.collectionGroup,o=Me();return this.indexManager.getCollectionParents(e,i).next((function(s){return He.forEach(s,(function(s){var a=t.asCollectionQueryAtPath(s.child(i));return r.getDocumentsMatchingCollectionQuery(e,a,n).next((function(e){e.forEach((function(e,t){o=o.insert(e,t)}))}))})).next((function(){return o}))}))},e.prototype.getDocumentsMatchingCollectionQuery=function(e,t,n){var r,i,o=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n).next((function(n){return r=n,o.mutationQueue.getAllMutationBatchesAffectingQuery(e,t)})).next((function(t){return o.addMissingBaseDocuments(e,i=t,r).next((function(e){r=e;for(var t=0,n=i;t<n.length;t++)for(var o=n[t],s=0,a=o.mutations;s<a.length;s++){var l=a[s],u=l.key,c=r.get(u),h=l.applyToLocalView(c,c,o.localWriteTime);r=h instanceof Wt?r.insert(u,h):r.remove(u)}}))})).next((function(){return r.forEach((function(e,n){t.matches(n)||(r=r.remove(e))})),r}))},e.prototype.addMissingBaseDocuments=function(e,t,n){for(var r=Ve(),i=0,o=t;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var l=a[s];l instanceof wt&&null===n.get(l.key)&&(r=r.add(l.key))}var u=n;return this.remoteDocumentCache.getEntries(e,r).next((function(e){return e.forEach((function(e,t){null!==t&&t instanceof Wt&&(u=u.insert(e,t))})),u}))},e}(),Kn=function(){function e(){this.refsByKey=new Ne(zn.compareByKey),this.refsByTarget=new Ne(zn.compareByTargetId)}return e.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},e.prototype.addReference=function(e,t){var n=new zn(e,t);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},e.prototype.addReferences=function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))},e.prototype.removeReference=function(e,t){this.removeRef(new zn(e,t))},e.prototype.removeReferences=function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))},e.prototype.removeReferencesForId=function(e){var t=this,n=ce.EMPTY,r=new zn(n,e),i=new zn(n,e+1),o=[];return this.refsByTarget.forEachInRange([r,i],(function(e){t.removeRef(e),o.push(e.key)})),o},e.prototype.removeAllReferences=function(){var e=this;this.refsByKey.forEach((function(t){return e.removeRef(t)}))},e.prototype.removeRef=function(e){this.refsByKey=this.refsByKey.delete(e),this.refsByTarget=this.refsByTarget.delete(e)},e.prototype.referencesForId=function(e){var t=ce.EMPTY,n=new zn(t,e),r=new zn(t,e+1),i=Ve();return this.refsByTarget.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i},e.prototype.containsKey=function(e){var t=new zn(e,0),n=this.refsByKey.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)},e}(),zn=function(){function e(e,t){this.key=e,this.targetOrBatchId=t}return e.compareByKey=function(e,t){return ce.comparator(e.key,t.key)||$(e.targetOrBatchId,t.targetOrBatchId)},e.compareByTargetId=function(e,t){return $(e.targetOrBatchId,t.targetOrBatchId)||ce.comparator(e.key,t.key)},e}(),Gn=function(){function e(e,t,n){this.persistence=e,this.queryEngine=t,this.localViewReferences=new Kn,this.targetDataByTarget=new Se($),this.targetIdByTarget=new zt((function(e){return e.canonicalId()})),this.lastDocumentChangeReadTime=Te.MIN,v(e.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=e.getMutationQueue(n),this.remoteDocuments=e.getRemoteDocumentCache(),this.targetCache=e.getTargetCache(),this.localDocuments=new Hn(this.remoteDocuments,this.mutationQueue,this.persistence.getIndexManager()),this.queryEngine.setLocalDocumentsView(this.localDocuments)}return e.prototype.start=function(){return this.synchronizeLastDocumentChangeReadTime()},e.prototype.handleUserChange=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n,r,i=this;return o.__generator(this,(function(o){switch(o.label){case 0:return t=this.mutationQueue,n=this.localDocuments,[4,this.persistence.runTransaction("Handle user change","readonly-idempotent",(function(r){var o;return i.mutationQueue.getAllMutationBatches(r).next((function(s){return o=s,t=i.persistence.getMutationQueue(e),n=new Hn(i.remoteDocuments,t,i.persistence.getIndexManager()),t.getAllMutationBatches(r)})).next((function(e){for(var t=[],i=[],s=Ve(),a=0,l=o;a<l.length;a++){t.push((p=l[a]).batchId);for(var u=0,c=p.mutations;u<c.length;u++)s=s.add(c[u].key)}for(var h=0,d=e;h<d.length;h++){var p;i.push((p=d[h]).batchId);for(var f=0,g=p.mutations;f<g.length;f++)s=s.add(g[f].key)}return n.getDocuments(r,s).next((function(e){return{affectedDocuments:e,removedBatchIds:t,addedBatchIds:i}}))}))}))];case 1:return r=o.sent(),this.mutationQueue=t,this.localDocuments=n,this.queryEngine.setLocalDocumentsView(this.localDocuments),[2,r]}}))}))},e.prototype.localWrite=function(e){var t,n=this,r=Ee.now(),i=e.reduce((function(e,t){return e.add(t.key)}),Ve());return this.persistence.runTransaction("Locally write mutations","readwrite-idempotent",(function(o){return n.localDocuments.getDocuments(o,i).next((function(i){t=i;for(var s=[],a=0,l=e;a<l.length;a++){var u=l[a],c=u.extractBaseValue(t.get(u.key));null!=c&&s.push(new wt(u.key,c,c.fieldMask(),vt.exists(!0)))}return n.mutationQueue.addMutationBatch(o,r,s,e)}))})).then((function(e){var n=e.applyToLocalDocumentSet(t);return{batchId:e.batchId,changes:n}}))},e.prototype.lookupMutationDocuments=function(e){var t=this;return this.persistence.runTransaction("Lookup mutation documents","readonly-idempotent",(function(n){return t.mutationQueue.lookupMutationKeys(n,e).next((function(e){return e?t.localDocuments.getDocuments(n,e):He.resolve(null)}))}))},e.prototype.acknowledgeBatch=function(e){var t=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary-idempotent",(function(n){var r=e.batch.keys(),i=t.remoteDocuments.newChangeBuffer({trackRemovals:!0});return t.mutationQueue.acknowledgeBatch(n,e.batch,e.streamToken).next((function(){return t.applyWriteToRemoteDocuments(n,e,i)})).next((function(){return i.apply(n)})).next((function(){return t.mutationQueue.performConsistencyCheck(n)})).next((function(){return t.localDocuments.getDocuments(n,r)}))}))},e.prototype.rejectBatch=function(e){var t=this;return this.persistence.runTransaction("Reject batch","readwrite-primary-idempotent",(function(n){var r;return t.mutationQueue.lookupMutationBatch(n,e).next((function(e){return v(null!==e,"Attempt to reject nonexistent batch!"),r=e.keys(),t.mutationQueue.removeMutationBatch(n,e)})).next((function(){return t.mutationQueue.performConsistencyCheck(n)})).next((function(){return t.localDocuments.getDocuments(n,r)}))}))},e.prototype.getHighestUnacknowledgedBatchId=function(){var e=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly-idempotent",(function(t){return e.mutationQueue.getHighestUnacknowledgedBatchId(t)}))},e.prototype.getLastStreamToken=function(){var e=this;return this.persistence.runTransaction("Get last stream token","readonly-idempotent",(function(t){return e.mutationQueue.getLastStreamToken(t)}))},e.prototype.setLastStreamToken=function(e){var t=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary-idempotent",(function(n){return t.mutationQueue.setLastStreamToken(n,e)}))},e.prototype.getLastRemoteSnapshotVersion=function(){var e=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly-idempotent",(function(t){return e.targetCache.getLastRemoteSnapshotVersion(t)}))},e.prototype.applyRemoteEvent=function(t){var n=this,r=t.snapshotVersion,i=this.targetDataByTarget;return this.persistence.runTransaction("Apply remote event","readwrite-primary-idempotent",(function(o){var s=n.remoteDocuments.newChangeBuffer({trackRemovals:!0});i=n.targetDataByTarget;var a=[];I(t.targetChanges,(function(t,s){var l=i.get(t);if(l){a.push(n.targetCache.removeMatchingKeys(o,s.removedDocuments,t).next((function(){return n.targetCache.addMatchingKeys(o,s.addedDocuments,t)})));var u=s.resumeToken;if(u.length>0){var c=l.withResumeToken(u,r).withSequenceNumber(o.currentSequenceNumber);i=i.insert(t,c),e.shouldPersistTargetData(l,c,s)&&a.push(n.targetCache.updateTargetData(o,c))}}}));var l=Oe(),u=Ve();if(t.documentUpdates.forEach((function(e,t){u=u.add(e)})),a.push(s.getEntries(o,u).next((function(e){t.documentUpdates.forEach((function(i,u){var c=e.get(i);u instanceof Ht&&u.version.isEqual(Te.MIN)?(s.removeEntry(i,r),l=l.insert(i,u)):null==c||u.version.compareTo(c.version)>0||0===u.version.compareTo(c.version)&&c.hasPendingWrites?(Te.MIN.isEqual(r)&&g("LocalStore","Cannot add a document when the remote version is zero"),s.addEntry(u,r),l=l.insert(i,u)):f("LocalStore","Ignoring outdated watch update for ",i,". Current version:",c.version," Watch version:",u.version),t.resolvedLimboDocuments.has(i)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,i))}))}))),!r.isEqual(Te.MIN)){var c=n.targetCache.getLastRemoteSnapshotVersion(o).next((function(e){return v(r.compareTo(e)>=0,"Watch stream reverted to previous snapshot?? "+r+" < "+e),n.targetCache.setTargetsMetadata(o,o.currentSequenceNumber,r)}));a.push(c)}return He.waitFor(a).next((function(){return s.apply(o)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(o,l)}))})).then((function(e){return n.targetDataByTarget=i,e}))},e.shouldPersistTargetData=function(e,t,n){return v(t.resumeToken.length>0,"Attempted to persist target data with no resume token"),0===e.resumeToken.length||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=this.RESUME_TOKEN_MAX_AGE_MICROS||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0},e.prototype.notifyLocalViewChanges=function(e){for(var t=this,n=0,r=e;n<r.length;n++){var i=r[n],o=i.targetId;if(this.localViewReferences.addReferences(i.addedKeys,o),this.localViewReferences.removeReferences(i.removedKeys,o),!i.fromCache){var s=this.targetDataByTarget.get(o);v(null!==s,"Can't set limbo-free snapshot version for unknown target: "+o);var a=s.withLastLimboFreeSnapshotVersion(s.snapshotVersion);this.targetDataByTarget=this.targetDataByTarget.insert(o,a)}}return this.persistence.runTransaction("notifyLocalViewChanges","readwrite-idempotent",(function(n){return He.forEach(e,(function(e){return He.forEach(e.removedKeys,(function(e){return t.persistence.referenceDelegate.removeReference(n,e)}))}))}))},e.prototype.nextMutationBatch=function(e){var t=this;return this.persistence.runTransaction("Get next mutation batch","readonly-idempotent",(function(n){return void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)}))},e.prototype.readDocument=function(e){var t=this;return this.persistence.runTransaction("read document","readonly-idempotent",(function(n){return t.localDocuments.getDocument(n,e)}))},e.prototype.allocateTarget=function(e){var t=this;return this.persistence.runTransaction("Allocate target","readwrite-idempotent",(function(n){var r;return t.targetCache.getTargetData(n,e).next((function(i){return i?He.resolve(r=i):t.targetCache.allocateTargetId(n).next((function(i){return r=new Sn(e,i,Tn.Listen,n.currentSequenceNumber),t.targetCache.addTargetData(n,r).next((function(){return r}))}))}))})).then((function(n){return null===t.targetDataByTarget.get(n.targetId)&&(t.targetDataByTarget=t.targetDataByTarget.insert(n.targetId,n),t.targetIdByTarget.set(e,n.targetId)),n}))},e.prototype.getTargetData=function(e,t){var n=this.targetIdByTarget.get(t);return void 0!==n?He.resolve(this.targetDataByTarget.get(n)):this.targetCache.getTargetData(e,t)},e.prototype.releaseTarget=function(e,t){var n=this,r=this.targetDataByTarget.get(e);return r?this.persistence.runTransaction("Release target",t?"readwrite-idempotent":"readwrite-primary-idempotent",(function(i){var o=n.localViewReferences.removeReferencesForId(e);return t?He.resolve():He.forEach(o,(function(e){return n.persistence.referenceDelegate.removeReference(i,e)})).next((function(){n.persistence.referenceDelegate.removeTarget(i,r)}))})).then((function(){n.targetDataByTarget=n.targetDataByTarget.remove(e),n.targetIdByTarget.delete(r.target)})):Promise.resolve()},e.prototype.executeQuery=function(e,t){var n=this,r=Te.MIN,i=Ve();return this.persistence.runTransaction("Execute query","readonly-idempotent",(function(o){return n.getTargetData(o,e.toTarget()).next((function(e){if(e)return r=e.lastLimboFreeSnapshotVersion,n.targetCache.getMatchingKeysForTargetId(o,e.targetId).next((function(e){i=e}))})).next((function(){return n.queryEngine.getDocumentsMatchingQuery(o,e,t?r:Te.MIN,t?i:Ve())})).next((function(e){return{documents:e,remoteKeys:i}}))}))},e.prototype.remoteDocumentKeys=function(e){var t=this;return this.persistence.runTransaction("Remote document keys","readonly-idempotent",(function(n){return t.targetCache.getMatchingKeysForTargetId(n,e)}))},e.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},e.prototype.removeCachedMutationBatchMetadata=function(e){this.mutationQueue.removeCachedMutationKeys(e)},e.prototype.setNetworkEnabled=function(e){this.persistence.setNetworkEnabled(e)},e.prototype.applyWriteToRemoteDocuments=function(e,t,n){var r=this,i=t.batch,o=i.keys(),s=He.resolve();return o.forEach((function(r){s=s.next((function(){return n.getEntry(e,r)})).next((function(e){var o=e,s=t.docVersions.get(r);v(null!==s,"ackVersions should contain every doc in the write."),(!o||o.version.compareTo(s)<0)&&((o=i.applyToRemoteDocument(r,o,t))?n.addEntry(o,t.commitVersion):v(!e,"Mutation batch "+i+" applied to document "+e+" resulted in null"))}))})),s.next((function(){return r.mutationQueue.removeMutationBatch(e,i)}))},e.prototype.collectGarbage=function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary-idempotent",(function(n){return e.collect(n,t.targetDataByTarget)}))},e.prototype.getTarget=function(e){var t=this,n=this.targetDataByTarget.get(e);return n?Promise.resolve(n.target):this.persistence.runTransaction("Get target data","readonly-idempotent",(function(n){return t.targetCache.getTargetDataForTarget(n,e).next((function(e){return e?e.target:null}))}))},e.prototype.getNewDocumentChanges=function(){var e=this;return this.persistence.runTransaction("Get new document changes","readonly-idempotent",(function(t){return e.remoteDocuments.getNewDocumentChanges(t,e.lastDocumentChangeReadTime)})).then((function(t){var n=t.changedDocs;return e.lastDocumentChangeReadTime=t.readTime,n}))},e.prototype.synchronizeLastDocumentChangeReadTime=function(){return o.__awaiter(this,void 0,void 0,(function(){var e,t=this;return o.__generator(this,(function(n){return this.remoteDocuments instanceof Qt?(e=this.remoteDocuments,[2,this.persistence.runTransaction("Synchronize last document change read time","readonly-idempotent",(function(t){return e.getLastDocumentChange(t)})).then((function(e){t.lastDocumentChangeReadTime=e.readTime}))]):[2]}))}))},e.RESUME_TOKEN_MAX_AGE_MICROS=3e8,e}(),Qn=function(){function e(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nextBatchId=1,this.lastStreamToken=b(),this.batchesByDocumentKey=new Ne(zn.compareByKey)}return e.prototype.checkEmpty=function(e){return He.resolve(0===this.mutationQueue.length)},e.prototype.acknowledgeBatch=function(e,t,n){var r=t.batchId,i=this.indexOfExistingBatchId(r,"acknowledged");v(0===i,"Can only acknowledge the first batch in the mutation queue");var o=this.mutationQueue[i];return v(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),this.lastStreamToken=n,He.resolve()},e.prototype.getLastStreamToken=function(e){return He.resolve(this.lastStreamToken)},e.prototype.setLastStreamToken=function(e,t){return this.lastStreamToken=t,He.resolve()},e.prototype.addMutationBatch=function(e,t,n,r){v(0!==r.length,"Mutation batches should not be empty");var i=this.nextBatchId;this.nextBatchId++,this.mutationQueue.length>0&&v(this.mutationQueue[this.mutationQueue.length-1].batchId<i,"Mutation batchIDs must be monotonically increasing order");var o=new Be(i,t,n,r);this.mutationQueue.push(o);for(var s=0,a=r;s<a.length;s++){var l=a[s];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new zn(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast())}return He.resolve(o)},e.prototype.lookupMutationBatch=function(e,t){return He.resolve(this.findMutationBatch(t))},e.prototype.lookupMutationKeys=function(e,t){var n=this.findMutationBatch(t);return v(null!=n,"Failed to find local mutation batch."),He.resolve(n.keys())},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this.indexOfBatchId(t+1),r=n<0?0:n;return He.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)},e.prototype.getHighestUnacknowledgedBatchId=function(){return He.resolve(0===this.mutationQueue.length?-1:this.nextBatchId-1)},e.prototype.getAllMutationBatches=function(e){return He.resolve(this.mutationQueue.slice())},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=new zn(t,0),i=new zn(t,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([r,i],(function(e){v(t.isEqual(e.key),"Should only iterate over a single key's batches");var r=n.findMutationBatch(e.targetOrBatchId);v(null!==r,"Batches in the index must exist in the main table"),o.push(r)})),He.resolve(o)},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new Ne($);return t.forEach((function(e){var t=new zn(e,0),i=new zn(e,Number.POSITIVE_INFINITY);n.batchesByDocumentKey.forEachInRange([t,i],(function(t){v(e.isEqual(t.key),"For each key, should only iterate over a single key's batches"),r=r.add(t.targetOrBatchId)}))})),He.resolve(this.findMutationBatches(r))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){v(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var n=t.path,r=n.length+1,i=n;ce.isDocumentKey(i)||(i=i.child(""));var o=new zn(new ce(i),0),s=new Ne($);return this.batchesByDocumentKey.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(s=s.add(e.targetOrBatchId)),!0)}),o),He.resolve(this.findMutationBatches(s))},e.prototype.findMutationBatches=function(e){var t=this,n=[];return e.forEach((function(e){var r=t.findMutationBatch(e);null!==r&&n.push(r)})),n},e.prototype.removeMutationBatch=function(e,t){var n=this;v(0===this.indexOfExistingBatchId(t.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift();var r=this.batchesByDocumentKey;return He.forEach(t.mutations,(function(i){var o=new zn(i.key,t.batchId);return r=r.delete(o),n.referenceDelegate.removeMutationReference(e,i.key)})).next((function(){n.batchesByDocumentKey=r}))},e.prototype.removeCachedMutationKeys=function(e){},e.prototype.containsKey=function(e,t){var n=new zn(t,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return He.resolve(t.isEqual(r&&r.key))},e.prototype.performConsistencyCheck=function(e){return 0===this.mutationQueue.length&&v(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),He.resolve()},e.prototype.indexOfExistingBatchId=function(e,t){var n=this.indexOfBatchId(e);return v(n>=0&&n<this.mutationQueue.length,"Batches must exist to be "+t),n},e.prototype.indexOfBatchId=function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId},e.prototype.findMutationBatch=function(e){var t=this.indexOfBatchId(e);if(t<0||t>=this.mutationQueue.length)return null;var n=this.mutationQueue[t];return v(n.batchId===e,"If found batch must match"),n},e}(),$n=function(){function e(e,t){this.indexManager=e,this.sizer=t,this.docs=new Se(ce.comparator),this.size=0}return e.prototype.addEntry=function(e,t,n){v(!n.isEqual(Te.MIN),"Cannot add a document with a read time of zero");var r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.sizer(t);return this.docs=this.docs.insert(r,{maybeDocument:t,size:s,readTime:n}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())},e.prototype.removeEntry=function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)},e.prototype.getEntry=function(e,t){var n=this.docs.get(t);return He.resolve(n?n.maybeDocument:null)},e.prototype.getEntries=function(e,t){var n=this,r=Pe();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.maybeDocument:null)})),He.resolve(r)},e.prototype.getDocumentsMatchingQuery=function(e,t,n){v(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");for(var r=Me(),i=new ce(t.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,l=a.maybeDocument,u=a.readTime;if(!t.path.isPrefixOf(s.key.path))break;u.compareTo(n)<=0||l instanceof Wt&&t.matches(l)&&(r=r.insert(l.key,l))}return He.resolve(r)},e.prototype.forEachDocumentKey=function(e,t){return He.forEach(this.docs,(function(e){return t(e)}))},e.prototype.getNewDocumentChanges=function(e,t){throw new Error("getNewDocumentChanges() is not supported with MemoryPersistence")},e.prototype.newChangeBuffer=function(t){return new e.RemoteDocumentChangeBuffer(this)},e.prototype.getSize=function(e){return He.resolve(this.size)},e.RemoteDocumentChangeBuffer=function(e){function t(t){var n=e.call(this)||this;return n.documentCache=t,n}return o.__extends(t,e),t.prototype.applyChanges=function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i?n.push(t.documentCache.addEntry(e,i,t.readTime)):t.documentCache.removeEntry(r)})),He.waitFor(n)},t.prototype.getFromCache=function(e,t){return this.documentCache.getEntry(e,t)},t.prototype.getAllFromCache=function(e,t){return this.documentCache.getEntries(e,t)},t}(Gt),e}(),Yn=function(){function e(e){this.persistence=e,this.targets=new zt((function(e){return e.canonicalId()})),this.lastRemoteSnapshotVersion=Te.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new Kn,this.targetCount=0,this.targetIdGenerator=lt.forTargetCache()}return e.prototype.forEachTarget=function(e,t){return this.targets.forEach((function(e,n){return t(n)})),He.resolve()},e.prototype.getLastRemoteSnapshotVersion=function(e){return He.resolve(this.lastRemoteSnapshotVersion)},e.prototype.getHighestSequenceNumber=function(e){return He.resolve(this.highestSequenceNumber)},e.prototype.allocateTargetId=function(e){var t=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=t,He.resolve(t)},e.prototype.setTargetsMetadata=function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.highestSequenceNumber&&(this.highestSequenceNumber=t),He.resolve()},e.prototype.saveTargetData=function(e){this.targets.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.highestTargetId=t),e.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=e.sequenceNumber)},e.prototype.addTargetData=function(e,t){return v(!this.targets.has(t.target),"Adding a target that already exists"),this.saveTargetData(t),this.targetCount+=1,He.resolve()},e.prototype.updateTargetData=function(e,t){return v(this.targets.has(t.target),"Updating a non-existent target"),this.saveTargetData(t),He.resolve()},e.prototype.removeTargetData=function(e,t){return v(this.targetCount>0,"Removing a target from an empty cache"),v(this.targets.has(t.target),"Removing a non-existent target from the cache"),this.targets.delete(t.target),this.references.removeReferencesForId(t.targetId),this.targetCount-=1,He.resolve()},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return this.targets.forEach((function(s,a){a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r.targets.delete(s),o.push(r.removeMatchingKeysForTargetId(e,a.targetId)),i++)})),He.waitFor(o).next((function(){return i}))},e.prototype.getTargetCount=function(e){return He.resolve(this.targetCount)},e.prototype.getTargetData=function(e,t){var n=this.targets.get(t)||null;return He.resolve(n)},e.prototype.getTargetDataForTarget=function(e,t){return y("Not yet implemented.")},e.prototype.addMatchingKeys=function(e,t,n){this.references.addReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.addReference(e,t))})),He.waitFor(i)},e.prototype.removeMatchingKeys=function(e,t,n){this.references.removeReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.removeReference(e,t))})),He.waitFor(i)},e.prototype.removeMatchingKeysForTargetId=function(e,t){return this.references.removeReferencesForId(t),He.resolve()},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=this.references.referencesForId(t);return He.resolve(n)},e.prototype.containsKey=function(e,t){return He.resolve(this.references.containsKey(t))},e}(),Xn=function(){function e(e,t){var n=this;this.clientId=e,this.mutationQueues={},this.listenSequence=new oe(0),this._started=!1,this._started=!0,this.referenceDelegate=t(this),this.targetCache=new Yn(this),this.indexManager=new Zt,this.remoteDocumentCache=new $n(this.indexManager,(function(e){return n.referenceDelegate.documentSize(e)}))}return e.createLruPersistence=function(t,n,r){return new e(t,(function(e){return new er(e,new In(n),r)}))},e.createEagerPersistence=function(t){return new e(t,(function(e){return new Zn(e)}))},e.prototype.shutdown=function(){return this._started=!1,Promise.resolve()},Object.defineProperty(e.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),e.prototype.getActiveClients=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){return[2,[this.clientId]]}))}))},e.prototype.setPrimaryStateListener=function(e){return e(!0)},e.prototype.setDatabaseDeletedListener=function(){},e.prototype.setNetworkEnabled=function(e){},e.prototype.getIndexManager=function(){return this.indexManager},e.prototype.getMutationQueue=function(e){var t=this.mutationQueues[e.toKey()];return t||(t=new Qn(this.indexManager,this.referenceDelegate),this.mutationQueues[e.toKey()]=t),t},e.prototype.getTargetCache=function(){return this.targetCache},e.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},e.prototype.runTransaction=function(e,t,n){var r=this;f("MemoryPersistence","Starting transaction:",e);var i=new Jn(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(i).next((function(e){return r.referenceDelegate.onTransactionCommitted(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))},e.prototype.mutationQueuesContainKey=function(e,t){return He.or((n=this.mutationQueues,r=[],k(n,(function(e,t){return r.push(t)})),r).map((function(n){return function(){return n.containsKey(e,t)}})));var n,r},e}(),Jn=function(e){function t(t){var n=e.call(this)||this;return n.currentSequenceNumber=t,n}return o.__extends(t,e),t}(Pn),Zn=function(){function e(e){this.persistence=e,this.inMemoryPins=null,this._orphanedDocuments=null}return Object.defineProperty(e.prototype,"orphanedDocuments",{get:function(){if(this._orphanedDocuments)return this._orphanedDocuments;throw y("orphanedDocuments is only valid during a transaction.")},enumerable:!0,configurable:!0}),e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.addReference=function(e,t){return this.orphanedDocuments.delete(t),He.resolve()},e.prototype.removeReference=function(e,t){return this.orphanedDocuments.add(t),He.resolve()},e.prototype.removeMutationReference=function(e,t){return this.orphanedDocuments.add(t),He.resolve()},e.prototype.removeTarget=function(e,t){var n=this,r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.orphanedDocuments.add(e)}))})).next((function(){return r.removeTargetData(e,t)}))},e.prototype.onTransactionStarted=function(){this._orphanedDocuments=new Set},e.prototype.onTransactionCommitted=function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return He.forEach(this.orphanedDocuments,(function(r){return t.isReferenced(e,r).next((function(e){e||n.removeEntry(r)}))})).next((function(){return t._orphanedDocuments=null,n.apply(e)}))},e.prototype.updateLimboDocument=function(e,t){var n=this;return this.isReferenced(e,t).next((function(e){e?n.orphanedDocuments.delete(t):n.orphanedDocuments.add(t)}))},e.prototype.documentSize=function(e){return 0},e.prototype.isReferenced=function(e,t){var n=this;return He.or([function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.mutationQueuesContainKey(e,t)},function(){return He.resolve(n.inMemoryPins.containsKey(t))}])},e}(),er=function(){function e(e,t,n){this.persistence=e,this.serializer=t,this.inMemoryPins=null,this.orphanedSequenceNumbers=new zt((function(e){return _e(e.path)})),this.garbageCollector=new On(this,n)}return e.prototype.onTransactionStarted=function(){},e.prototype.onTransactionCommitted=function(e){return He.resolve()},e.prototype.forEachTarget=function(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)},e.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocumentCount(e);return this.persistence.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))},e.prototype.orphanedDocumentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,(function(e){t++})).next((function(){return t}))},e.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){var n=this;return He.forEach(this.orphanedSequenceNumbers,(function(r,i){return n.isPinned(e,r,i).next((function(e){return e?He.resolve():t(i)}))}))},e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.removeTargets=function(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.forEachDocumentKey(e,(function(i){return n.isPinned(e,i,t).next((function(e){e||(r++,o.removeEntry(i))}))})).next((function(){return o.apply(e)})).next((function(){return r}))},e.prototype.removeMutationReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),He.resolve()},e.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)},e.prototype.addReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),He.resolve()},e.prototype.removeReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),He.resolve()},e.prototype.updateLimboDocument=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),He.resolve()},e.prototype.documentSize=function(e){var t,n=this.serializer.toDbRemoteDocument(e,e.version);if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw y("Unknown remote document type");t=n.noDocument}return JSON.stringify(t).length},e.prototype.isPinned=function(e,t,n){var r=this;return He.or([function(){return r.persistence.mutationQueuesContainKey(e,t)},function(){return He.resolve(r.inMemoryPins.containsKey(t))},function(){return r.persistence.getTargetCache().containsKey(e,t)},function(){var e=r.orphanedSequenceNumbers.get(t);return He.resolve(void 0!==e&&e>n)}])},e.prototype.getCacheSize=function(e){return this.persistence.getRemoteDocumentCache().getSize(e)},e}(),tr=function(){function e(){}return e.prototype.setLocalDocumentsView=function(e){this.localDocumentsView=e},e.prototype.getDocumentsMatchingQuery=function(e,t,n,r){return v(void 0!==this.localDocumentsView,"setLocalDocumentsView() not called"),this.localDocumentsView.getDocumentsMatchingQuery(e,t,Te.MIN)},e}(),nr=Number,rr=nr.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),ir=nr.MAX_SAFE_INTEGER||Math.pow(2,53)-1,or=nr.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function sr(e){return null==e}function ar(e){return or(e)&&e<=ir&&e>=rr}var lr=1e3,ur=1.5,cr=6e4,hr=function(){function e(e,t,n,r,i){void 0===n&&(n=lr),void 0===r&&(r=ur),void 0===i&&(i=cr),this.queue=e,this.timerId=t,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=i,this.currentBaseMs=0,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}return e.prototype.reset=function(){this.currentBaseMs=0},e.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},e.prototype.backoffAndRun=function(e){var t=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),i=Math.max(0,n-r);this.currentBaseMs>0&&f("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.currentBaseMs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,i,(function(){return t.lastAttemptTime=Date.now(),e()})),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},e.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},e.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},e}(),dr=function(e){return e[e.Initial=0]="Initial",e[e.Starting=1]="Starting",e[e.Open=2]="Open",e[e.Error=3]="Error",e[e.Backoff=4]="Backoff",e}({}),pr=function(){function e(e,t,n,r,i,o){this.queue=e,this.idleTimerId=n,this.connection=r,this.credentialsProvider=i,this.listener=o,this.state=dr.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new hr(e,t)}return e.prototype.isStarted=function(){return this.state===dr.Starting||this.state===dr.Open||this.state===dr.Backoff},e.prototype.isOpen=function(){return this.state===dr.Open},e.prototype.start=function(){this.state!==dr.Error?(v(this.state===dr.Initial,"Already started"),this.auth()):this.performBackoff()},e.prototype.stop=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return this.isStarted()?[4,this.close(dr.Initial)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.inhibitBackoff=function(){v(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=dr.Initial,this.backoff.reset()},e.prototype.markIdle=function(){var e=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,(function(){return e.handleIdleCloseTimer()})))},e.prototype.sendRequest=function(e){this.cancelIdleCheck(),this.stream.send(e)},e.prototype.handleIdleCloseTimer=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){return this.isOpen()?[2,this.close(dr.Initial)]:[2]}))}))},e.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},e.prototype.close=function(e,t){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(n){switch(n.label){case 0:return v(this.isStarted(),"Only started streams should be closed."),v(e===dr.Error||sr(t),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,e!==dr.Error?this.backoff.reset():t&&t.code===w.RESOURCE_EXHAUSTED?(g(t.toString()),g("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):t&&t.code===w.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.onClose(t)];case 1:return n.sent(),[2]}}))}))},e.prototype.tearDown=function(){},e.prototype.auth=function(){var e=this;v(this.state===dr.Initial,"Must be in initial state to auth"),this.state=dr.Starting;var t=this.getCloseGuardedDispatcher(this.closeCount),n=this.closeCount;this.credentialsProvider.getToken().then((function(t){e.closeCount===n&&e.startStream(t)}),(function(n){t((function(){var t=new C(w.UNKNOWN,"Fetching auth token failed: "+n.message);return e.handleStreamClose(t)}))}))},e.prototype.startStream=function(e){var t=this;v(this.state===dr.Starting,"Trying to start stream in a non-starting state");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(e),this.stream.onOpen((function(){n((function(){return v(t.state===dr.Starting,"Expected stream to be in state Starting, but was "+t.state),t.state=dr.Open,t.listener.onOpen()}))})),this.stream.onClose((function(e){n((function(){return t.handleStreamClose(e)}))})),this.stream.onMessage((function(e){n((function(){return t.onMessage(e)}))}))},e.prototype.performBackoff=function(){var e=this;v(this.state===dr.Error,"Should only perform backoff when in Error state"),this.state=dr.Backoff,this.backoff.backoffAndRun((function(){return o.__awaiter(e,void 0,void 0,(function(){return o.__generator(this,(function(e){return v(this.state===dr.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=dr.Initial,this.start(),v(this.isStarted(),"PersistentStream should have started"),[2]}))}))}))},e.prototype.handleStreamClose=function(e){return v(this.isStarted(),"Can't handle server close on non-started stream"),f("PersistentStream","close with error: "+e),this.stream=null,this.close(dr.Error,e)},e.prototype.getCloseGuardedDispatcher=function(e){var t=this;return function(n){t.queue.enqueueAndForget((function(){return t.closeCount===e?n():(f("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},e}(),fr=function(e){function t(t,n,r,i,o){var s=e.call(this,t,de.ListenStreamConnectionBackoff,de.ListenStreamIdle,n,r,o)||this;return s.serializer=i,s}return o.__extends(t,e),t.prototype.startRpc=function(e){return this.connection.openStream("Listen",e)},t.prototype.onMessage=function(e){this.backoff.reset();var t=this.serializer.fromWatchChange(e),n=this.serializer.versionFromListenResponse(e);return this.listener.onWatchChange(t,n)},t.prototype.watch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.addTarget=this.serializer.toTarget(e);var n=this.serializer.toListenRequestLabels(e);n&&(t.labels=n),this.sendRequest(t)},t.prototype.unwatch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.removeTarget=e,this.sendRequest(t)},t}(pr),gr=function(e){function t(t,n,r,i,o){var s=e.call(this,t,de.WriteStreamConnectionBackoff,de.WriteStreamIdle,n,r,o)||this;return s.serializer=i,s.handshakeComplete_=!1,s.lastStreamToken=b(),s}return o.__extends(t,e),Object.defineProperty(t.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),t.prototype.start=function(){this.handshakeComplete_=!1,e.prototype.start.call(this)},t.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},t.prototype.startRpc=function(e){return this.connection.openStream("Write",e)},t.prototype.onMessage=function(e){if(v(!!e.streamToken,"Got a write response without a stream token"),this.lastStreamToken=e.streamToken,this.handshakeComplete_){this.backoff.reset();var t=this.serializer.fromWriteResults(e.writeResults,e.commitTime),n=this.serializer.fromVersion(e.commitTime);return this.listener.onMutationResult(n,t)}return v(!e.writeResults||0===e.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},t.prototype.writeHandshake=function(){v(this.isOpen(),"Writing handshake requires an opened stream"),v(!this.handshakeComplete_,"Handshake already completed");var e={};e.database=this.serializer.encodedDatabaseId,this.sendRequest(e)},t.prototype.writeMutations=function(e){var t=this;v(this.isOpen(),"Writing mutations requires an opened stream"),v(this.handshakeComplete_,"Handshake must be complete before writing mutations"),v(this.lastStreamToken.length>0,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:e.map((function(e){return t.serializer.toMutation(e)}))};this.sendRequest(n)},t}(pr),mr=function(){function e(e,t,n,r){this.queue=e,this.connection=t,this.credentials=n,this.serializer=r}return e.prototype.newPersistentWriteStream=function(e){return new gr(this.queue,this.connection,this.credentials,this.serializer,e)},e.prototype.newPersistentWatchStream=function(e){return new fr(this.queue,this.connection,this.credentials,this.serializer,e)},e.prototype.commit=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,writes:e.map((function(e){return t.serializer.toMutation(e)}))};return this.invokeRPC("Commit",n).then((function(e){return t.serializer.fromWriteResults(e.writeResults,e.commitTime)}))},e.prototype.lookup=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,documents:e.map((function(e){return t.serializer.toName(e)}))};return this.invokeStreamingRPC("BatchGetDocuments",n).then((function(n){var r=Oe();n.forEach((function(e){var n=t.serializer.fromMaybeDocument(e);r=r.insert(n.key,n)}));var i=[];return e.forEach((function(e){var t=r.get(e);v(!!t,"Missing entity in write response for "+e),i.push(t)})),i}))},e.prototype.invokeRPC=function(e,t){var n=this;return this.credentials.getToken().then((function(r){return n.connection.invokeRPC(e,t,r)})).catch((function(e){throw e.code===w.UNAUTHENTICATED&&n.credentials.invalidateToken(),e}))},e.prototype.invokeStreamingRPC=function(e,t){var n=this;return this.credentials.getToken().then((function(r){return n.connection.invokeStreamingRPC(e,t,r)})).catch((function(e){throw e.code===w.UNAUTHENTICATED&&n.credentials.invalidateToken(),e}))},e}(),yr=function(){function e(e){this.datastore=e,this.readVersions=Fe(),this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return e.prototype.lookup=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n=this;return o.__generator(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new C(w.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,this.datastore.lookup(e)];case 1:return(t=r.sent()).forEach((function(e){e instanceof Ht||e instanceof Wt?n.recordVersion(e):y("Document in a transaction was a "+e.constructor.name)})),[2,t]}}))}))},e.prototype.set=function(e,t){this.write(t.toMutations(e,this.precondition(e))),this.writtenDocs.add(e)},e.prototype.update=function(e,t){try{this.write(t.toMutations(e,this.preconditionForUpdate(e)))}catch(n){this.lastWriteError=n}this.writtenDocs.add(e)},e.prototype.delete=function(e){this.write([new Et(e,this.precondition(e))]),this.writtenDocs.add(e)},e.prototype.commit=function(){return o.__awaiter(this,void 0,void 0,(function(){var e;return o.__generator(this,(function(t){switch(t.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;if(e=this.readVersions,this.mutations.forEach((function(t){e=e.remove(t.key)})),!e.isEmpty())throw new C(w.INVALID_ARGUMENT,"Every document read in a transaction must also be written.");return[4,this.datastore.commit(this.mutations)];case 1:return t.sent(),this.committed=!0,[2]}}))}))},e.prototype.recordVersion=function(e){var t;if(e instanceof Wt)t=e.version;else{if(!(e instanceof Ht))throw y("Document in a transaction was a "+e.constructor.name);t=Te.forDeletedDoc()}var n=this.readVersions.get(e.key);if(null!==n){if(!t.isEqual(n))throw new C(w.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(e.key,t)},e.prototype.precondition=function(e){var t=this.readVersions.get(e);return!this.writtenDocs.has(e)&&t?vt.updateTime(t):vt.NONE},e.prototype.preconditionForUpdate=function(e){var t=this.readVersions.get(e);if(!this.writtenDocs.has(e)&&t){if(t.isEqual(Te.forDeletedDoc()))throw new C(w.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return vt.updateTime(t)}return vt.exists(!0)},e.prototype.write=function(e){this.ensureCommitNotCalled(),this.mutations=this.mutations.concat(e)},e.prototype.ensureCommitNotCalled=function(){v(!this.committed,"A transaction object cannot be used after its update callback has been invoked.")},e}(),vr=function(e){return e[e.Unknown=0]="Unknown",e[e.Online=1]="Online",e[e.Offline=2]="Offline",e}({}),_r=function(e){return e[e.RemoteStore=0]="RemoteStore",e[e.SharedClientState=1]="SharedClientState",e}({}),br=function(){function e(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state=vr.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}return e.prototype.handleWatchStreamStart=function(){var e=this;0===this.watchStreamFailures&&(this.setAndBroadcast(vr.Unknown),v(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(de.OnlineStateTimeout,1e4,(function(){return e.onlineStateTimer=null,v(e.state===vr.Unknown,"Timer should be canceled if we transitioned to a different state."),e.logClientOfflineWarningIfNecessary("Backend didn't respond within 10 seconds."),e.setAndBroadcast(vr.Offline),Promise.resolve()})))},e.prototype.handleWatchStreamFailure=function(e){this.state===vr.Online?(this.setAndBroadcast(vr.Unknown),v(0===this.watchStreamFailures,"watchStreamFailures must be 0"),v(null===this.onlineStateTimer,"onlineStateTimer must be null")):(this.watchStreamFailures++,this.watchStreamFailures>=1&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed 1 times. Most recent error: "+e.toString()),this.setAndBroadcast(vr.Offline)))},e.prototype.set=function(e){this.clearOnlineStateTimer(),this.watchStreamFailures=0,e===vr.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(e)},e.prototype.setAndBroadcast=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},e.prototype.logClientOfflineWarningIfNecessary=function(e){var t="Could not reach Cloud Firestore backend. "+e+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(g(t),this.shouldWarnClientIsOffline=!1):f("OnlineStateTracker",t)},e.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},e}(),wr=function(e){return e[e.OK=0]="OK",e[e.CANCELLED=1]="CANCELLED",e[e.UNKNOWN=2]="UNKNOWN",e[e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",e[e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",e[e.NOT_FOUND=5]="NOT_FOUND",e[e.ALREADY_EXISTS=6]="ALREADY_EXISTS",e[e.PERMISSION_DENIED=7]="PERMISSION_DENIED",e[e.UNAUTHENTICATED=16]="UNAUTHENTICATED",e[e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",e[e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",e[e.ABORTED=10]="ABORTED",e[e.OUT_OF_RANGE=11]="OUT_OF_RANGE",e[e.UNIMPLEMENTED=12]="UNIMPLEMENTED",e[e.INTERNAL=13]="INTERNAL",e[e.UNAVAILABLE=14]="UNAVAILABLE",e[e.DATA_LOSS=15]="DATA_LOSS",e}({});function Cr(e){switch(e){case w.OK:return y("Treated status OK as error");case w.CANCELLED:case w.UNKNOWN:case w.DEADLINE_EXCEEDED:case w.RESOURCE_EXHAUSTED:case w.INTERNAL:case w.UNAVAILABLE:case w.UNAUTHENTICATED:return!1;case w.INVALID_ARGUMENT:case w.NOT_FOUND:case w.ALREADY_EXISTS:case w.PERMISSION_DENIED:case w.FAILED_PRECONDITION:case w.ABORTED:case w.OUT_OF_RANGE:case w.UNIMPLEMENTED:case w.DATA_LOSS:return!0;default:return y("Unknown status code: "+e)}}function Er(e){if(void 0===e)return g("GRPC error has no .code"),w.UNKNOWN;switch(e){case wr.OK:return w.OK;case wr.CANCELLED:return w.CANCELLED;case wr.UNKNOWN:return w.UNKNOWN;case wr.DEADLINE_EXCEEDED:return w.DEADLINE_EXCEEDED;case wr.RESOURCE_EXHAUSTED:return w.RESOURCE_EXHAUSTED;case wr.INTERNAL:return w.INTERNAL;case wr.UNAVAILABLE:return w.UNAVAILABLE;case wr.UNAUTHENTICATED:return w.UNAUTHENTICATED;case wr.INVALID_ARGUMENT:return w.INVALID_ARGUMENT;case wr.NOT_FOUND:return w.NOT_FOUND;case wr.ALREADY_EXISTS:return w.ALREADY_EXISTS;case wr.PERMISSION_DENIED:return w.PERMISSION_DENIED;case wr.FAILED_PRECONDITION:return w.FAILED_PRECONDITION;case wr.ABORTED:return w.ABORTED;case wr.OUT_OF_RANGE:return w.OUT_OF_RANGE;case wr.UNIMPLEMENTED:return w.UNIMPLEMENTED;case wr.DATA_LOSS:return w.DATA_LOSS;default:return y("Unknown status code: "+e)}}function Tr(e){if(void 0===e)return wr.OK;switch(e){case w.OK:return wr.OK;case w.CANCELLED:return wr.CANCELLED;case w.UNKNOWN:return wr.UNKNOWN;case w.DEADLINE_EXCEEDED:return wr.DEADLINE_EXCEEDED;case w.RESOURCE_EXHAUSTED:return wr.RESOURCE_EXHAUSTED;case w.INTERNAL:return wr.INTERNAL;case w.UNAVAILABLE:return wr.UNAVAILABLE;case w.UNAUTHENTICATED:return wr.UNAUTHENTICATED;case w.INVALID_ARGUMENT:return wr.INVALID_ARGUMENT;case w.NOT_FOUND:return wr.NOT_FOUND;case w.ALREADY_EXISTS:return wr.ALREADY_EXISTS;case w.PERMISSION_DENIED:return wr.PERMISSION_DENIED;case w.FAILED_PRECONDITION:return wr.FAILED_PRECONDITION;case w.ABORTED:return wr.ABORTED;case w.OUT_OF_RANGE:return wr.OUT_OF_RANGE;case w.UNIMPLEMENTED:return wr.UNIMPLEMENTED;case w.DATA_LOSS:return wr.DATA_LOSS;default:return y("Unknown status code: "+e)}}var Sr=function(){function e(e){this.comparator=e?function(t,n){return e(t,n)||ce.comparator(t.key,n.key)}:function(e,t){return ce.comparator(e.key,t.key)},this.keyedMap=Me(),this.sortedSet=new Se(this.comparator)}return e.emptySet=function(t){return new e(t.comparator)},e.prototype.has=function(e){return null!=this.keyedMap.get(e)},e.prototype.get=function(e){return this.keyedMap.get(e)},e.prototype.first=function(){return this.sortedSet.minKey()},e.prototype.last=function(){return this.sortedSet.maxKey()},e.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},e.prototype.indexOf=function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),e.prototype.forEach=function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))},e.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))},e.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},e.prototype.toString=function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},e.prototype.copy=function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r},e}(),Ir=function(e){return e[e.Added=0]="Added",e[e.Removed=1]="Removed",e[e.Modified=2]="Modified",e[e.Metadata=3]="Metadata",e}({}),kr=function(e){return e[e.Local=0]="Local",e[e.Synced=1]="Synced",e}({}),Ar=function(){function e(){this.changeMap=new Se(ce.comparator)}return e.prototype.track=function(e){var t=e.doc.key,n=this.changeMap.get(t);n?e.type!==Ir.Added&&n.type===Ir.Metadata?this.changeMap=this.changeMap.insert(t,e):e.type===Ir.Metadata&&n.type!==Ir.Removed?this.changeMap=this.changeMap.insert(t,{type:n.type,doc:e.doc}):e.type===Ir.Modified&&n.type===Ir.Modified?this.changeMap=this.changeMap.insert(t,{type:Ir.Modified,doc:e.doc}):e.type===Ir.Modified&&n.type===Ir.Added?this.changeMap=this.changeMap.insert(t,{type:Ir.Added,doc:e.doc}):e.type===Ir.Removed&&n.type===Ir.Added?this.changeMap=this.changeMap.remove(t):e.type===Ir.Removed&&n.type===Ir.Modified?this.changeMap=this.changeMap.insert(t,{type:Ir.Removed,doc:n.doc}):e.type===Ir.Added&&n.type===Ir.Removed?this.changeMap=this.changeMap.insert(t,{type:Ir.Modified,doc:e.doc}):y("unsupported combination of changes: "+JSON.stringify(e)+" after "+JSON.stringify(n)):this.changeMap=this.changeMap.insert(t,e)},e.prototype.getChanges=function(){var e=[];return this.changeMap.inorderTraversal((function(t,n){e.push(n)})),e},e}(),Nr=function(){function e(e,t,n,r,i,o,s,a){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return e.fromInitialDocuments=function(t,n,r,i){var o=[];return n.forEach((function(e){o.push({type:Ir.Added,doc:e})})),new e(t,n,Sr.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&this.query.isEqual(e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0},e}(),Dr=function(){function e(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return e.createSynthesizedRemoteEventForCurrentChange=function(t,n){var r,i=((r={})[t]=Rr.createSynthesizedTargetChangeForCurrentChange(t,n),r);return new e(Te.MIN,i,qe(),Oe(),Ve())},e}(),Rr=function(){function e(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return e.createSynthesizedTargetChangeForCurrentChange=function(t,n){return new e(b(),n,Ve(),Ve(),Ve())},e}(),Or=function(){return function(e,t,n,r){this.updatedTargetIds=e,this.removedTargetIds=t,this.key=n,this.newDoc=r}}(),Pr=function(){return function(e,t){this.targetId=e,this.existenceFilter=t}}(),xr=function(e){return e[e.NoChange=0]="NoChange",e[e.Added=1]="Added",e[e.Removed=2]="Removed",e[e.Current=3]="Current",e[e.Reset=4]="Reset",e}({}),Mr=function(){return function(e,t,n,r){void 0===n&&(n=b()),void 0===r&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}(),Lr=function(){function e(){this.pendingResponses=0,this.documentChanges=Vr(),this._resumeToken=b(),this._current=!1,this._hasPendingChanges=!0}return Object.defineProperty(e.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),e.prototype.updateResumeToken=function(e){e.length>0&&(this._hasPendingChanges=!0,this._resumeToken=e)},e.prototype.toTargetChange=function(){var e=Ve(),t=Ve(),n=Ve();return this.documentChanges.forEach((function(r,i){switch(i){case Ir.Added:e=e.add(r);break;case Ir.Modified:t=t.add(r);break;case Ir.Removed:n=n.add(r);break;default:y("Encountered invalid change type: "+i)}})),new Rr(this._resumeToken,this._current,e,t,n)},e.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=Vr()},e.prototype.addDocumentChange=function(e,t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(e,t)},e.prototype.removeDocumentChange=function(e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(e)},e.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},e.prototype.recordTargetResponse=function(){this.pendingResponses-=1},e.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},e}(),Fr=function(){function e(e){this.metadataProvider=e,this.targetStates={},this.pendingDocumentUpdates=Oe(),this.pendingDocumentTargetMapping=Ur(),this.pendingTargetResets=new Ne($)}return e.prototype.handleDocumentChange=function(e){for(var t=0,n=e.updatedTargetIds;t<n.length;t++){var r=n[t];e.newDoc instanceof Wt?this.addDocumentToTarget(r,e.newDoc):e.newDoc instanceof Ht&&this.removeDocumentFromTarget(r,e.key,e.newDoc)}for(var i=0,o=e.removedTargetIds;i<o.length;i++)this.removeDocumentFromTarget(r=o[i],e.key,e.newDoc)},e.prototype.handleTargetChange=function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.ensureTargetState(n);switch(e.state){case xr.NoChange:t.isActiveTarget(n)&&r.updateResumeToken(e.resumeToken);break;case xr.Added:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(e.resumeToken);break;case xr.Removed:r.recordTargetResponse(),r.isPending||t.removeTarget(n),v(!e.cause,"WatchChangeAggregator does not handle errored targets");break;case xr.Current:t.isActiveTarget(n)&&(r.markCurrent(),r.updateResumeToken(e.resumeToken));break;case xr.Reset:t.isActiveTarget(n)&&(t.resetTarget(n),r.updateResumeToken(e.resumeToken));break;default:y("Unknown target watch change state: "+e.state)}}))},e.prototype.forEachTarget=function(e,t){e.targetIds.length>0?e.targetIds.forEach(t):I(this.targetStates,t)},e.prototype.handleExistenceFilter=function(e){var t=e.targetId,n=e.existenceFilter.count,r=this.targetDataForActiveTarget(t);if(r){var i=r.target;if(i.isDocumentQuery())if(0===n){var o=new ce(i.path);this.removeDocumentFromTarget(t,o,new Ht(o,Te.forDeletedDoc()))}else v(1===n,"Single document existence filter with count: "+n);else this.getCurrentDocumentCountForTarget(t)!==n&&(this.resetTarget(t),this.pendingTargetResets=this.pendingTargetResets.add(t))}},e.prototype.createRemoteEvent=function(e){var t=this,n={};I(this.targetStates,(function(r,i){var o=t.targetDataForActiveTarget(r);if(o){if(i.current&&o.target.isDocumentQuery()){var s=new ce(o.target.path);null!==t.pendingDocumentUpdates.get(s)||t.targetContainsDocument(r,s)||t.removeDocumentFromTarget(r,s,new Ht(s,e))}i.hasPendingChanges&&(n[r]=i.toTargetChange(),i.clearPendingChanges())}}));var r=Ve();this.pendingDocumentTargetMapping.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.targetDataForActiveTarget(e);return!n||n.purpose===Tn.LimboResolution||(i=!1,!1)})),i&&(r=r.add(e))}));var i=new Dr(e,n,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=Oe(),this.pendingDocumentTargetMapping=Ur(),this.pendingTargetResets=new Ne($),i},e.prototype.addDocumentToTarget=function(e,t){if(this.isActiveTarget(e)){var n=this.targetContainsDocument(e,t.key)?Ir.Modified:Ir.Added;this.ensureTargetState(e).addDocumentChange(t.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t.key,t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t.key,this.ensureDocumentTargetMapping(t.key).add(e))}},e.prototype.removeDocumentFromTarget=function(e,t,n){if(this.isActiveTarget(e)){var r=this.ensureTargetState(e);this.targetContainsDocument(e,t)?r.addDocumentChange(t,Ir.Removed):r.removeDocumentChange(t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,this.ensureDocumentTargetMapping(t).delete(e)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t,n))}},e.prototype.removeTarget=function(e){delete this.targetStates[e]},e.prototype.getCurrentDocumentCountForTarget=function(e){var t=this.ensureTargetState(e).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size},e.prototype.recordPendingTargetRequest=function(e){this.ensureTargetState(e).recordPendingTargetRequest()},e.prototype.ensureTargetState=function(e){return this.targetStates[e]||(this.targetStates[e]=new Lr),this.targetStates[e]},e.prototype.ensureDocumentTargetMapping=function(e){var t=this.pendingDocumentTargetMapping.get(e);return t||(t=new Ne($),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,t)),t},e.prototype.isActiveTarget=function(e){var t=null!==this.targetDataForActiveTarget(e);return t||f("WatchChangeAggregator","Detected inactive target",e),t},e.prototype.targetDataForActiveTarget=function(e){var t=this.targetStates[e];return t&&t.isPending?null:this.metadataProvider.getTargetDataForTarget(e)},e.prototype.resetTarget=function(e){var t=this;v(!this.targetStates[e].isPending,"Should only reset active targets"),this.targetStates[e]=new Lr,this.metadataProvider.getRemoteKeysForTarget(e).forEach((function(n){t.removeDocumentFromTarget(e,n,null)}))},e.prototype.targetContainsDocument=function(e,t){return this.metadataProvider.getRemoteKeysForTarget(e).has(t)},e}();function Ur(){return new Se(ce.comparator)}function Vr(){return new Se(ce.comparator)}var jr="RemoteStore",qr=function(){function e(e,t,n,r,i){var s=this;this.localStore=e,this.datastore=t,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.connectivityMonitor=i,this.connectivityMonitor.addCallback((function(e){n.enqueueAndForget((function(){return o.__awaiter(s,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return this.canUseNetwork()?(f(jr,"Restarting streams for network reachability change."),[4,this.restartNetwork()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))})),this.onlineStateTracker=new br(n,r),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}return e.prototype.start=function(){return this.enableNetwork()},e.prototype.enableNetwork=function(){return o.__awaiter(this,void 0,void 0,(function(){var e;return o.__generator(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(e=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return e.lastStreamToken=t.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(vr.Unknown),[4,this.fillWritePipeline()];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},e.prototype.disableNetwork=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(vr.Offline),[2]}}))}))},e.prototype.disableNetworkInternal=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return[4,this.writeStream.stop()];case 1:return e.sent(),[4,this.watchStream.stop()];case 2:return e.sent(),this.writePipeline.length>0&&(f(jr,"Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}}))}))},e.prototype.shutdown=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return f(jr,"RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.connectivityMonitor.shutdown(),this.onlineStateTracker.set(vr.Unknown),[2]}}))}))},e.prototype.listen=function(e){T(this.listenTargets,e.targetId)||(this.listenTargets[e.targetId]=e,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(e))},e.prototype.unlisten=function(e){T(this.listenTargets,e)&&(delete this.listenTargets[e],this.watchStream.isOpen()&&this.sendUnwatchRequest(e),A(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(vr.Unknown)))},e.prototype.getTargetDataForTarget=function(e){return this.listenTargets[e]||null},e.prototype.getRemoteKeysForTarget=function(e){return this.syncEngine.getRemoteKeysForTarget(e)},e.prototype.sendWatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e.targetId),this.watchStream.watch(e)},e.prototype.sendUnwatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e),this.watchStream.unwatch(e)},e.prototype.startWatchStream=function(){v(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new Fr(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},e.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!A(this.listenTargets)},e.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},e.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},e.prototype.onWatchStreamOpen=function(){return o.__awaiter(this,void 0,void 0,(function(){var e=this;return o.__generator(this,(function(t){return I(this.listenTargets,(function(t,n){e.sendWatchRequest(n)})),[2]}))}))},e.prototype.onWatchStreamClose=function(e){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){return void 0===e&&v(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(e),this.startWatchStream()):this.onlineStateTracker.set(vr.Unknown),[2]}))}))},e.prototype.onWatchStreamChange=function(e,t){return o.__awaiter(this,void 0,void 0,(function(){var n;return o.__generator(this,(function(r){switch(r.label){case 0:return this.onlineStateTracker.set(vr.Online),e instanceof Mr&&e.state===xr.Removed&&e.cause?[2,this.handleTargetError(e)]:(e instanceof Or?this.watchChangeAggregator.handleDocumentChange(e):e instanceof Pr?this.watchChangeAggregator.handleExistenceFilter(e):(v(e instanceof Mr,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(e)),t.isEqual(Te.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return n=r.sent(),t.compareTo(n)>=0?[4,this.raiseWatchSnapshot(t)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},e.prototype.raiseWatchSnapshot=function(e){var t=this;v(!e.isEqual(Te.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.watchChangeAggregator.createRemoteEvent(e);return I(n.targetChanges,(function(n,r){if(r.resumeToken.length>0){var i=t.listenTargets[n];i&&(t.listenTargets[n]=i.withResumeToken(r.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.listenTargets[e];if(n){t.listenTargets[e]=n.withResumeToken(b(),n.snapshotVersion),t.sendUnwatchRequest(e);var r=new Sn(n.target,e,Tn.ExistenceFilterMismatch,n.sequenceNumber);t.sendWatchRequest(r)}})),this.syncEngine.applyRemoteEvent(n)},e.prototype.handleTargetError=function(e){var t=this;v(!!e.cause,"Handling target error without a cause");var n=e.cause,r=Promise.resolve();return e.targetIds.forEach((function(e){r=r.then((function(){return o.__awaiter(t,void 0,void 0,(function(){return o.__generator(this,(function(t){return T(this.listenTargets,e)?(delete this.listenTargets[e],this.watchChangeAggregator.removeTarget(e),[2,this.syncEngine.rejectListen(e,n)]):[2]}))}))}))})),r},e.prototype.fillWritePipeline=function(){return o.__awaiter(this,void 0,void 0,(function(){var e;return o.__generator(this,(function(t){switch(t.label){case 0:return this.canAddToWritePipeline()?[4,this.localStore.nextMutationBatch(this.writePipeline.length>0?this.writePipeline[this.writePipeline.length-1].batchId:-1)]:[3,4];case 1:return null!==(e=t.sent())?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(e),[4,this.fillWritePipeline()];case 3:t.sent(),t.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}}))}))},e.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<10},e.prototype.outstandingWrites=function(){return this.writePipeline.length},e.prototype.addToWritePipeline=function(e){v(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(e),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(e.mutations)},e.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&this.writePipeline.length>0},e.prototype.startWriteStream=function(){v(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},e.prototype.onWriteStreamOpen=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){return this.writeStream.writeHandshake(),[2]}))}))},e.prototype.onWriteHandshakeComplete=function(){var e=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then((function(){for(var t=0,n=e.writePipeline;t<n.length;t++)e.writeStream.writeMutations(n[t].mutations)})).catch(Vn)},e.prototype.onMutationResult=function(e,t){var n=this;v(this.writePipeline.length>0,"Got result for empty write pipeline");var r=this.writePipeline.shift(),i=We.from(r,e,t,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(i).then((function(){return n.fillWritePipeline()}))},e.prototype.onWriteStreamClose=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t=this;return o.__generator(this,(function(n){return void 0===e&&v(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),e&&this.writePipeline.length>0?[2,(this.writeStream.handshakeComplete?this.handleWriteError(e):this.handleHandshakeError(e)).then((function(){t.shouldStartWriteStream()&&t.startWriteStream()}))]:[2]}))}))},e.prototype.handleHandshakeError=function(e){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){return Cr(e.code)?(f(jr,"RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=b(),[2,this.localStore.setLastStreamToken(b()).catch(Vn)]):[2]}))}))},e.prototype.handleWriteError=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n=this;return o.__generator(this,(function(r){return Cr(i=e.code)&&i!==w.ABORTED?(t=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(t.batchId,e).then((function(){return n.fillWritePipeline()}))]):[2];var i}))}))},e.prototype.createTransaction=function(){return new yr(this.datastore)},e.prototype.restartNetwork=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(vr.Unknown),[4,this.enableNetwork()];case 2:return e.sent(),[2]}}))}))},e.prototype.handleCredentialChange=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return this.canUseNetwork()?(f(jr,"RemoteStore restarting streams for new credential"),[4,this.restartNetwork()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.applyPrimaryState=function(e){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return this.isPrimary=e,e&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return t.sent(),[3,4];case 2:return e?[3,4]:[4,this.disableNetworkInternal()];case 3:t.sent(),this.onlineStateTracker.set(vr.Unknown),t.label=4;case 4:return[2]}}))}))},e}(),Br=function(){function e(e,t){if(D("GeoPoint",arguments,2),P("GeoPoint","number",1,e),P("GeoPoint","number",2,t),!isFinite(e)||e<-90||e>90)throw new C(w.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new C(w.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},e.prototype._compareTo=function(e){return $(this._lat,e._lat)||$(this._long,e._long)},e}(),Wr=function(){function e(e,t,n,r,i,o,s){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.memoizedCanonicalId=null}return e.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var e=this.path.canonicalString();null!==this.collectionGroup&&(e+="|cg:"+this.collectionGroup),e+="|f:";for(var t=0,n=this.filters;t<n.length;t++)e+=n[t].canonicalId(),e+=",";e+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++)e+=i[r].canonicalId(),e+=",";sr(this.limit)||(e+="|l:",e+=this.limit),this.startAt&&(e+="|lb:",e+=this.startAt.canonicalId()),this.endAt&&(e+="|ub:",e+=this.endAt.canonicalId()),this.memoizedCanonicalId=e}return this.memoizedCanonicalId},e.prototype.toString=function(){var e=this.path.canonicalString();return null!==this.collectionGroup&&(e+=" collectionGroup="+this.collectionGroup),this.filters.length>0&&(e+=", filters: ["+this.filters.join(", ")+"]"),sr(this.limit)||(e+=", limit: "+this.limit),this.orderBy.length>0&&(e+=", orderBy: ["+this.orderBy.join(", ")+"]"),this.startAt&&(e+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(e+=", endAt: "+this.endAt.canonicalId()),"Target("+e+")"},e.prototype.isEqual=function(e){if(this.limit!==e.limit)return!1;if(this.orderBy.length!==e.orderBy.length)return!1;for(var t=0;t<this.orderBy.length;t++)if(!this.orderBy[t].isEqual(e.orderBy[t]))return!1;if(this.filters.length!==e.filters.length)return!1;for(t=0;t<this.filters.length;t++)if(!this.filters[t].isEqual(e.filters[t]))return!1;return this.collectionGroup===e.collectionGroup&&!!this.path.isEqual(e.path)&&!(null!==this.startAt?!this.startAt.isEqual(e.startAt):null!==e.startAt)&&(null!==this.endAt?this.endAt.isEqual(e.endAt):null===e.endAt)},e.prototype.isDocumentQuery=function(){return ce.isDocumentKey(this.path)&&null===this.collectionGroup&&0===this.filters.length},e}(),Hr=function(e){return e.First="F",e.Last="L",e}({}),Kr=function(){function e(e,t,n,r,i,o,s,a){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=Hr.First),void 0===s&&(s=null),void 0===a&&(a=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.memoizedOrderBy=null,this.memorizedTarget=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}return e.atPath=function(t){return new e(t)},Object.defineProperty(e.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var e=this.getInequalityFilterField(),t=this.getFirstOrderByField();if(null!==e&&null===t)this.memoizedOrderBy=e.isKeyField()?[ri]:[new ni(e),ri];else{v(null===e||null!==t&&e.isEqual(t),"First orderBy should match inequality field."),this.memoizedOrderBy=[];for(var n=!1,r=0,i=this.explicitOrderBy;r<i.length;r++){var o=i[r];this.memoizedOrderBy.push(o),o.field.isKeyField()&&(n=!0)}n||this.memoizedOrderBy.push((this.explicitOrderBy.length>0?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:ei.ASCENDING)===ei.ASCENDING?ri:ii)}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),e.prototype.addFilter=function(t){v(null==this.getInequalityFilterField()||!(t instanceof Qr)||!t.isInequality()||t.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),v(!this.isDocumentQuery(),"No filtering allowed for document query");var n=this.filters.concat([t]);return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),n,this.limit,this.limitType,this.startAt,this.endAt)},e.prototype.addOrderBy=function(t){v(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var n=this.explicitOrderBy.concat([t]);return new e(this.path,this.collectionGroup,n,this.filters.slice(),this.limit,this.limitType,this.startAt,this.endAt)},e.prototype.withLimitToFirst=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),t,Hr.First,this.startAt,this.endAt)},e.prototype.withLimitToLast=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),t,Hr.Last,this.startAt,this.endAt)},e.prototype.withStartAt=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,t,this.endAt)},e.prototype.withEndAt=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,this.startAt,t)},e.prototype.asCollectionQueryAtPath=function(t){return new e(t,null,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,this.startAt,this.endAt)},e.prototype.matchesAllDocuments=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.explicitOrderBy.length||1===this.explicitOrderBy.length&&this.explicitOrderBy[0].field.isKeyField())},e.prototype.canonicalId=function(){return this.toTarget().canonicalId()+"|lt:"+this.limitType},e.prototype.toString=function(){return"Query(target="+this.toTarget().toString()+"; limitType="+this.limitType+")"},e.prototype.isEqual=function(e){return this.toTarget().isEqual(e.toTarget())&&this.limitType===e.limitType},e.prototype.docComparator=function(e,t){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],s=o.compare(e,t);if(0!==s)return s;n=n||o.field.isKeyField()}return v(n,"orderBy used that doesn't compare on key field"),0},e.prototype.matches=function(e){return this.matchesPathAndCollectionGroup(e)&&this.matchesOrderBy(e)&&this.matchesFilters(e)&&this.matchesBounds(e)},e.prototype.hasLimitToFirst=function(){return!sr(this.limit)&&this.limitType===Hr.First},e.prototype.hasLimitToLast=function(){return!sr(this.limit)&&this.limitType===Hr.Last},e.prototype.getFirstOrderByField=function(){return this.explicitOrderBy.length>0?this.explicitOrderBy[0].field:null},e.prototype.getInequalityFilterField=function(){for(var e=0,t=this.filters;e<t.length;e++){var n=t[e];if(n instanceof Qr&&n.isInequality())return n.field}return null},e.prototype.findFilterOperator=function(e){for(var t=0,n=this.filters;t<n.length;t++){var r=n[t];if(r instanceof Qr&&e.indexOf(r.op)>=0)return r.op}return null},e.prototype.isDocumentQuery=function(){return this.toTarget().isDocumentQuery()},e.prototype.isCollectionGroupQuery=function(){return null!==this.collectionGroup},e.prototype.toTarget=function(){if(!this.memorizedTarget)if(this.limitType===Hr.First)this.memorizedTarget=new Wr(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var e=[],t=0,n=this.orderBy;t<n.length;t++){var r=n[t];e.push(new ni(r.field,r.dir===ei.DESCENDING?ei.ASCENDING:ei.DESCENDING))}var i=this.endAt?new ti(this.endAt.position,!this.endAt.before):null,o=this.startAt?new ti(this.startAt.position,!this.startAt.before):null;this.memorizedTarget=new Wr(this.path,this.collectionGroup,e,this.filters,this.limit,i,o)}return this.memorizedTarget},e.prototype.matchesPathAndCollectionGroup=function(e){var t=e.key.path;return null!==this.collectionGroup?e.key.hasCollectionId(this.collectionGroup)&&this.path.isPrefixOf(t):ce.isDocumentKey(this.path)?this.path.isEqual(t):this.path.isImmediateParentOf(t)},e.prototype.matchesOrderBy=function(e){for(var t=0,n=this.explicitOrderBy;t<n.length;t++){var r=n[t];if(!r.field.isKeyField()&&null===e.field(r.field))return!1}return!0},e.prototype.matchesFilters=function(e){for(var t=0,n=this.filters;t<n.length;t++)if(!n[t].matches(e))return!1;return!0},e.prototype.matchesBounds=function(e){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,e)||this.endAt&&this.endAt.sortsBeforeDocument(this.orderBy,e))},e.prototype.assertValidBound=function(e){v(e.position.length<=this.orderBy.length,"Bound is longer than orderBy")},e}(),zr=function(){return function(){}}(),Gr=function(){function e(e){this.name=e}return e.fromString=function(t){switch(t){case"<":return e.LESS_THAN;case"<=":return e.LESS_THAN_OR_EQUAL;case"==":return e.EQUAL;case">=":return e.GREATER_THAN_OR_EQUAL;case">":return e.GREATER_THAN;case"array-contains":return e.ARRAY_CONTAINS;case"in":return e.IN;case"array-contains-any":return e.ARRAY_CONTAINS_ANY;default:return y("Unknown FieldFilter operator: "+t)}},e.prototype.toString=function(){return this.name},e.prototype.isEqual=function(e){return this.name===e.name},e.LESS_THAN=new e("<"),e.LESS_THAN_OR_EQUAL=new e("<="),e.EQUAL=new e("=="),e.GREATER_THAN=new e(">"),e.GREATER_THAN_OR_EQUAL=new e(">="),e.ARRAY_CONTAINS=new e("array-contains"),e.IN=new e("in"),e.ARRAY_CONTAINS_ANY=new e("array-contains-any"),e}(),Qr=function(e){function t(t,n,r){var i=e.call(this)||this;return i.field=t,i.op=n,i.value=r,i}return o.__extends(t,e),t.create=function(e,n,r){if(e.isKeyField())return n===Gr.IN?(v(r instanceof qt,"Comparing on key with IN, but filter value not an ArrayValue"),v(r.internalValue.every((function(e){return e instanceof Ut})),"Comparing on key with IN, but an array value was not a RefValue"),new Yr(e,r)):(v(r instanceof Ut,"Comparing on key, but filter value not a RefValue"),v(n!==Gr.ARRAY_CONTAINS&&n!==Gr.ARRAY_CONTAINS_ANY,"'"+n.toString()+"' queries don't make sense on document keys."),new $r(e,n,r));if(r.isEqual(At.INSTANCE)){if(n!==Gr.EQUAL)throw new C(w.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new t(e,n,r)}if(r.isEqual(Pt.NAN)){if(n!==Gr.EQUAL)throw new C(w.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new t(e,n,r)}return n===Gr.ARRAY_CONTAINS?new Xr(e,r):n===Gr.IN?(v(r instanceof qt,"IN filter has invalid value: "+r.toString()),new Jr(e,r)):n===Gr.ARRAY_CONTAINS_ANY?(v(r instanceof qt,"ARRAY_CONTAINS_ANY filter has invalid value: "+r.toString()),new Zr(e,r)):new t(e,n,r)},t.prototype.matches=function(e){var t=e.field(this.field);return null!==t&&this.value.typeOrder===t.typeOrder&&this.matchesComparison(t.compareTo(this.value))},t.prototype.matchesComparison=function(e){switch(this.op){case Gr.LESS_THAN:return e<0;case Gr.LESS_THAN_OR_EQUAL:return e<=0;case Gr.EQUAL:return 0===e;case Gr.GREATER_THAN:return e>0;case Gr.GREATER_THAN_OR_EQUAL:return e>=0;default:return y("Unknown FieldFilter operator: "+this.op)}},t.prototype.isInequality=function(){return[Gr.LESS_THAN,Gr.LESS_THAN_OR_EQUAL,Gr.GREATER_THAN,Gr.GREATER_THAN_OR_EQUAL].indexOf(this.op)>=0},t.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},t.prototype.isEqual=function(e){return e instanceof t&&this.op.isEqual(e.op)&&this.field.isEqual(e.field)&&this.value.isEqual(e.value)},t.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},t}(zr),$r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.matches=function(e){var t=ce.comparator(e.key,this.value.key);return this.matchesComparison(t)},t}(Qr),Yr=function(e){function t(t,n){var r=e.call(this,t,Gr.IN,n)||this;return r.value=n,r}return o.__extends(t,e),t.prototype.matches=function(e){return this.value.internalValue.some((function(t){return e.key.isEqual(t.key)}))},t}(Qr),Xr=function(e){function t(t,n){return e.call(this,t,Gr.ARRAY_CONTAINS,n)||this}return o.__extends(t,e),t.prototype.matches=function(e){var t=e.field(this.field);return t instanceof qt&&t.contains(this.value)},t}(Qr),Jr=function(e){function t(t,n){var r=e.call(this,t,Gr.IN,n)||this;return r.value=n,r}return o.__extends(t,e),t.prototype.matches=function(e){var t=this.value,n=e.field(this.field);return null!==n&&t.contains(n)},t}(Qr),Zr=function(e){function t(t,n){var r=e.call(this,t,Gr.ARRAY_CONTAINS_ANY,n)||this;return r.value=n,r}return o.__extends(t,e),t.prototype.matches=function(e){var t=this,n=e.field(this.field);return n instanceof qt&&n.internalValue.some((function(e){return t.value.contains(e)}))},t}(Qr),ei=function(){function e(e){this.name=e}return e.prototype.toString=function(){return this.name},e.ASCENDING=new e("asc"),e.DESCENDING=new e("desc"),e}(),ti=function(){function e(e,t){this.position=e,this.before=t}return e.prototype.canonicalId=function(){for(var e=this.before?"b:":"a:",t=0,n=this.position;t<n.length;t++)e+=n[t].toString();return e},e.prototype.sortsBeforeDocument=function(e,t){v(this.position.length<=e.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=e[r],o=this.position[r];if(i.field.isKeyField())v(o instanceof Ut,"Bound has a non-key value where the key path is being used."),n=ce.comparator(o.key,t.key);else{var s=t.field(i.field);v(null!==s,"Field should exist since document matched the orderBy already."),n=o.compareTo(s)}if(i.dir===ei.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},e.prototype.isEqual=function(e){if(null===e)return!1;if(this.before!==e.before||this.position.length!==e.position.length)return!1;for(var t=0;t<this.position.length;t++)if(!this.position[t].isEqual(e.position[t]))return!1;return!0},e}(),ni=function(){function e(e,t){this.field=e,void 0===t&&(t=ei.ASCENDING),this.dir=t,this.isKeyOrderBy=e.isKeyField()}return e.prototype.compare=function(e,t){var n=this.isKeyOrderBy?Wt.compareByKey(e,t):Wt.compareByField(this.field,e,t);switch(this.dir){case ei.ASCENDING:return n;case ei.DESCENDING:return-1*n;default:return y("Unknown direction: "+this.dir)}},e.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},e.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},e.prototype.isEqual=function(e){return this.dir===e.dir&&this.field.isEqual(e.field)},e}(),ri=new ni(ue.keyField(),ei.ASCENDING),ii=new ni(ue.keyField(),ei.DESCENDING),oi=function(){function e(){}return e.prototype.applyToLocalView=function(e,t){return new Lt(t,e)},e.prototype.applyToRemoteDocument=function(e,t){return t},e.prototype.computeBaseValue=function(e){return null},e.prototype.isEqual=function(t){return t instanceof e},e.instance=new e,e}(),si=function(){function e(e){this.elements=e}return e.prototype.applyToLocalView=function(e,t){return this.apply(e)},e.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},e.prototype.apply=function(e){for(var t=ui(e),n=function(e){t.find((function(t){return t.isEqual(e)}))||t.push(e)},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new qt(t)},e.prototype.computeBaseValue=function(e){return null},e.prototype.isEqual=function(t){return t instanceof e&&Y(t.elements,this.elements)},e}(),ai=function(){function e(e){this.elements=e}return e.prototype.applyToLocalView=function(e,t){return this.apply(e)},e.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},e.prototype.apply=function(e){for(var t=ui(e),n=function(e){t=t.filter((function(t){return!t.isEqual(e)}))},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new qt(t)},e.prototype.computeBaseValue=function(e){return null},e.prototype.isEqual=function(t){return t instanceof e&&Y(t.elements,this.elements)},e}(),li=function(){function e(e){this.operand=e}return e.prototype.applyToLocalView=function(e,t){var n=this.computeBaseValue(e);return n instanceof Ot&&this.operand instanceof Ot?new Ot(n.internalValue+this.operand.internalValue):new Pt(n.internalValue+this.operand.internalValue)},e.prototype.applyToRemoteDocument=function(e,t){return v(null!==t,"Didn't receive transformResult for NUMERIC_ADD transform"),t},e.prototype.computeBaseValue=function(e){return e instanceof Dt?e:new Ot(0)},e.prototype.isEqual=function(t){return t instanceof e&&this.operand.isEqual(t.operand)},e}();function ui(e){return e instanceof qt?e.internalValue.slice():[]}var ci,hi,di=function(){function e(e){this.count=e}return e.prototype.isEqual=function(e){return e&&e.count===this.count},e}(),pi=((ci={})[ei.ASCENDING.name]="ASCENDING",ci[ei.DESCENDING.name]="DESCENDING",ci),fi=((hi={})[Gr.LESS_THAN.name]="LESS_THAN",hi[Gr.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",hi[Gr.GREATER_THAN.name]="GREATER_THAN",hi[Gr.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",hi[Gr.EQUAL.name]="EQUAL",hi[Gr.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",hi[Gr.IN.name]="IN",hi[Gr.ARRAY_CONTAINS_ANY.name]="ARRAY_CONTAINS_ANY",hi),gi=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mi(e,t){v(!sr(e),t+" is missing")}function yi(e){return"number"==typeof e?e:"string"==typeof e?Number(e):y("can't parse "+e)}var vi=function(){function e(e,t){this.databaseId=e,this.options=t}return e.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},e.prototype.unsafeCastProtoByteString=function(e){return e},e.prototype.fromRpcStatus=function(e){var t=void 0===e.code?w.UNKNOWN:Er(e.code);return new C(t,e.message||"")},e.prototype.toInt32Value=function(e){return this.options.useProto3Json||sr(e)?e:{value:e}},e.prototype.fromInt32Value=function(e){var t;return sr(t="object"==typeof e?e.value:e)?null:t},e.prototype.toTimestamp=function(e){return this.options.useProto3Json?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}},e.prototype.fromTimestamp=function(e){if("string"==typeof e)return this.fromIso8601String(e);v(!!e,"Cannot deserialize null or undefined timestamp.");var t=yi(e.seconds||"0");return new Ee(t,e.nanos||0)},e.prototype.fromIso8601String=function(e){var t=0,n=gi.exec(e);if(v(!!n,"invalid timestamp: "+e),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e),o=Math.floor(i.getTime()/1e3);return new Ee(o,t)},e.prototype.toBytes=function(e){return this.options.useProto3Json?e.toBase64():this.unsafeCastProtoByteString(e.toUint8Array())},e.prototype.fromBlob=function(e){return"string"==typeof e?(v(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),ee.fromBase64String(e)):(v(!this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),ee.fromUint8Array(e))},e.prototype.toVersion=function(e){return this.toTimestamp(e.toTimestamp())},e.prototype.fromVersion=function(e){return v(!!e,"Trying to deserialize version that isn't set"),Te.fromTimestamp(this.fromTimestamp(e))},e.prototype.toResourceName=function(e,t){return this.fullyQualifiedPrefixPath(e).child("documents").child(t).canonicalString()},e.prototype.fromResourceName=function(e){var t=ae.fromString(e);return v(this.isValidResourceName(t),"Tried to deserialize invalid key "+t.toString()),t},e.prototype.toName=function(e){return this.toResourceName(this.databaseId,e.path)},e.prototype.fromName=function(e){var t=this.fromResourceName(e);return v(t.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+t.get(1)+" vs "+this.databaseId.projectId),v(!t.get(3)&&!this.databaseId.database||t.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+t.get(3)+" vs "+this.databaseId.database),new ce(this.extractLocalPathFromResourceName(t))},e.prototype.toQueryPath=function(e){return this.toResourceName(this.databaseId,e)},e.prototype.fromQueryPath=function(e){var t=this.fromResourceName(e);return 4===t.length?ae.EMPTY_PATH:this.extractLocalPathFromResourceName(t)},Object.defineProperty(e.prototype,"encodedDatabaseId",{get:function(){return new ae(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),e.prototype.fullyQualifiedPrefixPath=function(e){return new ae(["projects",e.projectId,"databases",e.database])},e.prototype.extractLocalPathFromResourceName=function(e){return v(e.length>4&&"documents"===e.get(4),"tried to deserialize invalid key "+e.toString()),e.popFirst(5)},e.prototype.isValidResourceName=function(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)},e.prototype.toValue=function(e){if(e instanceof At)return{nullValue:"NULL_VALUE"};if(e instanceof Nt)return{booleanValue:e.value()};if(e instanceof Ot)return{integerValue:""+e.value()};if(e instanceof Pt){var t=e.value();if(this.options.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:e.value()}}return e instanceof xt?{stringValue:e.value()}:e instanceof jt?{mapValue:this.toMapValue(e)}:e instanceof qt?{arrayValue:this.toArrayValue(e)}:e instanceof Mt?{timestampValue:this.toTimestamp(e.internalValue)}:e instanceof Vt?{geoPointValue:{latitude:e.value().latitude,longitude:e.value().longitude}}:e instanceof Ft?{bytesValue:this.toBytes(e.value())}:e instanceof Ut?{referenceValue:this.toResourceName(e.databaseId,e.key.path)}:y("Unknown FieldValue "+JSON.stringify(e))},e.prototype.fromValue=function(e){var t=this;if("nullValue"in e)return At.INSTANCE;if("booleanValue"in e)return Nt.of(e.booleanValue);if("integerValue"in e)return new Ot(yi(e.integerValue));if("doubleValue"in e){if(this.options.useProto3Json){if("NaN"===e.doubleValue)return Pt.NAN;if("Infinity"===e.doubleValue)return Pt.POSITIVE_INFINITY;if("-Infinity"===e.doubleValue)return Pt.NEGATIVE_INFINITY}return new Pt(e.doubleValue)}if("stringValue"in e)return new xt(e.stringValue);if("mapValue"in e)return this.fromFields(e.mapValue.fields||{});if("arrayValue"in e)return mi(e.arrayValue,"arrayValue"),new qt((e.arrayValue.values||[]).map((function(e){return t.fromValue(e)})));if("timestampValue"in e)return mi(e.timestampValue,"timestampValue"),new Mt(this.fromTimestamp(e.timestampValue));if("geoPointValue"in e)return mi(e.geoPointValue,"geoPointValue"),new Vt(new Br(e.geoPointValue.latitude||0,e.geoPointValue.longitude||0));if("bytesValue"in e){mi(e.bytesValue,"bytesValue");var n=this.fromBlob(e.bytesValue);return new Ft(n)}if("referenceValue"in e){mi(e.referenceValue,"referenceValue");var r=this.fromResourceName(e.referenceValue),i=new ie(r.get(1),r.get(3)),o=new ce(this.extractLocalPathFromResourceName(r));return new Ut(i,o)}return y("Unknown Value proto "+JSON.stringify(e))},e.prototype.toMutationDocument=function(e,t){return{name:this.toName(e),fields:this.toFields(t)}},e.prototype.toDocument=function(e){return v(!e.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(e.key),fields:this.toFields(e.data()),updateTime:this.toTimestamp(e.version.toTimestamp())}},e.prototype.fromDocument=function(e,t){var n=this,r=this.fromName(e.name),i=this.fromVersion(e.updateTime);return new Wt(r,i,{hasCommittedMutations:!!t},void 0,e,(function(e){return n.fromValue(e)}))},e.prototype.toFields=function(e){var t=this,n={};return e.forEach((function(e,r){n[e]=t.toValue(r)})),n},e.prototype.fromFields=function(e){var t=this,n=jt.EMPTY;return k(e,(function(e,r){n=n.set(new ue([e]),t.fromValue(r))})),n},e.prototype.toMapValue=function(e){return{fields:this.toFields(e)}},e.prototype.toArrayValue=function(e){var t=this,n=[];return e.forEach((function(e){n.push(t.toValue(e))})),{values:n}},e.prototype.fromFound=function(e){var t=this;v(!!e.found,"Tried to deserialize a found document from a missing document."),mi(e.found.name,"doc.found.name"),mi(e.found.updateTime,"doc.found.updateTime");var n=this.fromName(e.found.name),r=this.fromVersion(e.found.updateTime);return new Wt(n,r,{},void 0,e.found,(function(e){return t.fromValue(e)}))},e.prototype.fromMissing=function(e){v(!!e.missing,"Tried to deserialize a missing document from a found document."),v(!!e.readTime,"Tried to deserialize a missing document without a read time.");var t=this.fromName(e.missing),n=this.fromVersion(e.readTime);return new Ht(t,n)},e.prototype.fromMaybeDocument=function(e){return"found"in e?this.fromFound(e):"missing"in e?this.fromMissing(e):y("invalid batch get response: "+JSON.stringify(e))},e.prototype.toWatchTargetChangeState=function(e){switch(e){case xr.Added:return"ADD";case xr.Current:return"CURRENT";case xr.NoChange:return"NO_CHANGE";case xr.Removed:return"REMOVE";case xr.Reset:return"RESET";default:return y("Unknown WatchTargetChangeState: "+e)}},e.prototype.toTestWatchChange=function(e){if(e instanceof Pr)return{filter:{count:e.existenceFilter.count,targetId:e.targetId}};if(e instanceof Or){var t;if(e.newDoc instanceof Wt)return{documentChange:{document:{name:this.toName((t=e.newDoc).key),fields:this.toFields(t.data()),updateTime:this.toVersion(t.version)},targetIds:e.updatedTargetIds,removedTargetIds:e.removedTargetIds}};if(e.newDoc instanceof Ht)return{documentDelete:{document:this.toName((t=e.newDoc).key),readTime:this.toVersion(t.version),removedTargetIds:e.removedTargetIds}};if(null===e.newDoc)return{documentRemove:{document:this.toName(e.key),removedTargetIds:e.removedTargetIds}}}if(e instanceof Mr){var n=void 0;return e.cause&&(n={code:Tr(e.cause.code),message:e.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(e.state),targetIds:e.targetIds,resumeToken:this.unsafeCastProtoByteString(e.resumeToken),cause:n}}}return y("Unrecognized watch change: "+JSON.stringify(e))},e.prototype.fromWatchChange=function(e){var t,n=this;if("targetChange"in e){mi(e.targetChange,"targetChange");var r=this.fromWatchTargetChangeState(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=e.targetChange.resumeToken||this.emptyByteString(),s=e.targetChange.cause,a=s&&this.fromRpcStatus(s);t=new Mr(r,i,o,a||null)}else if("documentChange"in e){mi(e.documentChange,"documentChange"),mi(e.documentChange.document,"documentChange.name"),mi(e.documentChange.document.name,"documentChange.document.name"),mi(e.documentChange.document.updateTime,"documentChange.document.updateTime");var l=e.documentChange,u=this.fromName(l.document.name),c=this.fromVersion(l.document.updateTime),h=new Wt(u,c,{},void 0,l.document,(function(e){return n.fromValue(e)}));t=new Or(l.targetIds||[],l.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){mi(e.documentDelete,"documentDelete"),mi(e.documentDelete.document,"documentDelete.document");var d=e.documentDelete;u=this.fromName(d.document),c=d.readTime?this.fromVersion(d.readTime):Te.forDeletedDoc(),h=new Ht(u,c),t=new Or([],d.removedTargetIds||[],h.key,h)}else if("documentRemove"in e){mi(e.documentRemove,"documentRemove"),mi(e.documentRemove.document,"documentRemove");var p=e.documentRemove;u=this.fromName(p.document),t=new Or([],p.removedTargetIds||[],u,null)}else{if(!("filter"in e))return y("Unknown change type "+JSON.stringify(e));mi(e.filter,"filter"),mi(e.filter.targetId,"filter.targetId");var f=e.filter,g=new di(f.count||0);t=new Pr(f.targetId,g)}return t},e.prototype.fromWatchTargetChangeState=function(e){return"NO_CHANGE"===e?xr.NoChange:"ADD"===e?xr.Added:"REMOVE"===e?xr.Removed:"CURRENT"===e?xr.Current:"RESET"===e?xr.Reset:y("Got unexpected TargetChange.state: "+e)},e.prototype.versionFromListenResponse=function(e){if(!("targetChange"in e))return Te.MIN;var t=e.targetChange;return t.targetIds&&t.targetIds.length?Te.MIN:t.readTime?this.fromVersion(t.readTime):Te.MIN},e.prototype.toMutation=function(e){var t,n=this;if(e instanceof bt)t={update:this.toMutationDocument(e.key,e.value)};else if(e instanceof Et)t={delete:this.toName(e.key)};else if(e instanceof wt)t={update:this.toMutationDocument(e.key,e.data),updateMask:this.toDocumentMask(e.fieldMask)};else{if(!(e instanceof Ct))return y("Unknown mutation type "+e.type);t={transform:{document:this.toName(e.key),fieldTransforms:e.fieldTransforms.map((function(e){return n.toFieldTransform(e)}))}}}return e.precondition.isNone||(t.currentDocument=this.toPrecondition(e.precondition)),t},e.prototype.fromMutation=function(e){var t=this,n=e.currentDocument?this.fromPrecondition(e.currentDocument):vt.NONE;if(e.update){mi(e.update.name,"name");var r=this.fromName(e.update.name),i=this.fromFields(e.update.fields||{});if(e.updateMask){var o=this.fromDocumentMask(e.updateMask);return new wt(r,i,o,n)}return new bt(r,i,n)}if(e.delete)return r=this.fromName(e.delete),new Et(r,n);if(e.transform){r=this.fromName(e.transform.document);var s=e.transform.fieldTransforms.map((function(e){return t.fromFieldTransform(e)}));return v(!0===n.exists,'Transforms only support precondition "exists == true"'),new Ct(r,s)}return y("unknown mutation proto: "+JSON.stringify(e))},e.prototype.toPrecondition=function(e){return v(!e.isNone,"Can't serialize an empty precondition"),void 0!==e.updateTime?{updateTime:this.toVersion(e.updateTime)}:void 0!==e.exists?{exists:e.exists}:y("Unknown precondition")},e.prototype.fromPrecondition=function(e){return void 0!==e.updateTime?vt.updateTime(this.fromVersion(e.updateTime)):void 0!==e.exists?vt.exists(e.exists):vt.NONE},e.prototype.fromWriteResult=function(e,t){var n=this,r=this.fromVersion(e.updateTime?e.updateTime:t);r.isEqual(Te.MIN)&&(r=this.fromVersion(t));var i=null;return e.transformResults&&e.transformResults.length>0&&(i=e.transformResults.map((function(e){return n.fromValue(e)}))),new mt(r,i)},e.prototype.fromWriteResults=function(e,t){var n=this;return e&&e.length>0?(v(void 0!==t,"Received a write result without a commit time"),e.map((function(e){return n.fromWriteResult(e,t)}))):[]},e.prototype.toFieldTransform=function(e){var t=this,n=e.transform;if(n instanceof oi)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof si)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements.map((function(e){return t.toValue(e)}))}};if(n instanceof ai)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements.map((function(e){return t.toValue(e)}))}};if(n instanceof li)return{fieldPath:e.field.canonicalString(),increment:this.toValue(n.operand)};throw y("Unknown transform: "+e.transform)},e.prototype.fromFieldTransform=function(e){var t=this,n=null;if("setToServerValue"in e)v("REQUEST_TIME"===e.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(e)),n=oi.instance;else if("appendMissingElements"in e)n=new si((e.appendMissingElements.values||[]).map((function(e){return t.fromValue(e)})));else if("removeAllFromArray"in e)n=new ai((e.removeAllFromArray.values||[]).map((function(e){return t.fromValue(e)})));else if("increment"in e){var r=this.fromValue(e.increment);v(r instanceof Dt,"NUMERIC_ADD transform requires a NumberValue"),n=new li(r)}else y("Unknown transform proto: "+JSON.stringify(e));var i=ue.fromServerFormat(e.fieldPath);return new gt(i,n)},e.prototype.toDocumentsTarget=function(e){return{documents:[this.toQueryPath(e.path)]}},e.prototype.fromDocumentsTarget=function(e){var t=e.documents.length;return v(1===t,"DocumentsTarget contained other than 1 document: "+t),Kr.atPath(this.fromQueryPath(e.documents[0])).toTarget()},e.prototype.toQueryTarget=function(e){var t={structuredQuery:{}},n=e.path;null!==e.collectionGroup?(v(n.length%2==0,"Collection Group queries should be within a document path or root."),t.parent=this.toQueryPath(n),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(v(n.length%2!=0,"Document queries with filters are not supported."),t.parent=this.toQueryPath(n.popLast()),t.structuredQuery.from=[{collectionId:n.lastSegment()}]);var r=this.toFilter(e.filters);r&&(t.structuredQuery.where=r);var i=this.toOrder(e.orderBy);i&&(t.structuredQuery.orderBy=i);var o=this.toInt32Value(e.limit);return null!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=this.toCursor(e.startAt)),e.endAt&&(t.structuredQuery.endAt=this.toCursor(e.endAt)),t},e.prototype.fromQueryTarget=function(e){var t=this.fromQueryPath(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){v(1===r,"StructuredQuery.from with more than one collection is not supported.");var o=n.from[0];o.allDescendants?i=o.collectionId:t=t.child(o.collectionId)}var s=[];n.where&&(s=this.fromFilter(n.where));var a=[];n.orderBy&&(a=this.fromOrder(n.orderBy));var l=null;n.limit&&(l=this.fromInt32Value(n.limit));var u=null;n.startAt&&(u=this.fromCursor(n.startAt));var c=null;return n.endAt&&(c=this.fromCursor(n.endAt)),new Kr(t,i,a,s,l,Hr.First,u,c).toTarget()},e.prototype.toListenRequestLabels=function(e){var t=this.toLabel(e.purpose);return null==t?null:{"goog-listen-tags":t}},e.prototype.toLabel=function(e){switch(e){case Tn.Listen:return null;case Tn.ExistenceFilterMismatch:return"existence-filter-mismatch";case Tn.LimboResolution:return"limbo-document";default:return y("Unrecognized query purpose: "+e)}},e.prototype.toTarget=function(e){var t,n=e.target;return(t=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)}).targetId=e.targetId,e.resumeToken.length>0&&(t.resumeToken=this.unsafeCastProtoByteString(e.resumeToken)),t},e.prototype.toFilter=function(e){var t=this;if(0!==e.length){var n=e.map((function(e){return e instanceof Qr?t.toUnaryOrFieldFilter(e):y("Unrecognized filter: "+JSON.stringify(e))}));return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},e.prototype.fromFilter=function(e){var t=this;return e?void 0!==e.unaryFilter?[this.fromUnaryFilter(e)]:void 0!==e.fieldFilter?[this.fromFieldFilter(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t.fromFilter(e)})).reduce((function(e,t){return e.concat(t)})):y("Unknown filter: "+JSON.stringify(e)):[]},e.prototype.toOrder=function(e){var t=this;if(0!==e.length)return e.map((function(e){return t.toPropertyOrder(e)}))},e.prototype.fromOrder=function(e){var t=this;return e.map((function(e){return t.fromPropertyOrder(e)}))},e.prototype.toCursor=function(e){var t=this;return{before:e.before,values:e.position.map((function(e){return t.toValue(e)}))}},e.prototype.fromCursor=function(e){var t=this,n=!!e.before,r=e.values.map((function(e){return t.fromValue(e)}));return new ti(r,n)},e.prototype.toDirection=function(e){return pi[e.name]},e.prototype.fromDirection=function(e){switch(e){case"ASCENDING":return ei.ASCENDING;case"DESCENDING":return ei.DESCENDING;default:return}},e.prototype.toOperatorName=function(e){return fi[e.name]},e.prototype.fromOperatorName=function(e){switch(e){case"EQUAL":return Gr.EQUAL;case"GREATER_THAN":return Gr.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return Gr.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return Gr.LESS_THAN;case"LESS_THAN_OR_EQUAL":return Gr.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return Gr.ARRAY_CONTAINS;case"IN":return Gr.IN;case"ARRAY_CONTAINS_ANY":return Gr.ARRAY_CONTAINS_ANY;case"OPERATOR_UNSPECIFIED":return y("Unspecified operator");default:return y("Unknown operator")}},e.prototype.toFieldPathReference=function(e){return{fieldPath:e.canonicalString()}},e.prototype.fromFieldPathReference=function(e){return ue.fromServerFormat(e.fieldPath)},e.prototype.toPropertyOrder=function(e){return{field:this.toFieldPathReference(e.field),direction:this.toDirection(e.dir)}},e.prototype.fromPropertyOrder=function(e){return new ni(this.fromFieldPathReference(e.field),this.fromDirection(e.direction))},e.prototype.fromFieldFilter=function(e){return Qr.create(this.fromFieldPathReference(e.fieldFilter.field),this.fromOperatorName(e.fieldFilter.op),this.fromValue(e.fieldFilter.value))},e.prototype.toUnaryOrFieldFilter=function(e){if(e.op===Gr.EQUAL){if(e.value.isEqual(Pt.NAN))return{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NAN"}};if(e.value.isEqual(At.INSTANCE))return{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.toFieldPathReference(e.field),op:this.toOperatorName(e.op),value:this.toValue(e.value)}}},e.prototype.fromUnaryFilter=function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=this.fromFieldPathReference(e.unaryFilter.field);return Qr.create(t,Gr.EQUAL,Pt.NAN);case"IS_NULL":var n=this.fromFieldPathReference(e.unaryFilter.field);return Qr.create(n,Gr.EQUAL,At.INSTANCE);case"OPERATOR_UNSPECIFIED":return y("Unspecified filter");default:return y("Unknown filter")}},e.prototype.toDocumentMask=function(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}},e.prototype.fromDocumentMask=function(e){var t=(e.fieldPaths||[]).map((function(e){return ue.fromServerFormat(e)}));return ft.fromArray(t)},e}(),_i=function(){return function(){this.viewSnap=null,this.targetId=0,this.listeners=[]}}(),bi=function(){function e(e){this.syncEngine=e,this.queries=new zt((function(e){return e.canonicalId()})),this.onlineState=vr.Unknown,this.snapshotsInSyncListeners=new Set,this.syncEngine.subscribe(this)}return e.prototype.listen=function(e){var t=e.query,n=!1,r=this.queries.get(t);return r||(n=!0,r=new _i,this.queries.set(t,r)),r.listeners.push(e),v(!e.applyOnlineStateChange(this.onlineState),"applyOnlineStateChange() shouldn't raise an event for brand-new listeners."),r.viewSnap&&e.onViewSnapshot(r.viewSnap)&&this.raiseSnapshotsInSyncEvent(),n?this.syncEngine.listen(t).then((function(e){return r.targetId=e,e})):Promise.resolve(r.targetId)},e.prototype.unlisten=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n,r,i;return o.__generator(this,(function(o){return n=!1,(r=this.queries.get(t=e.query))&&(i=r.listeners.indexOf(e))>=0&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.queries.delete(t),[2,this.syncEngine.unlisten(t)]):[2]}))}))},e.prototype.onWatchChange=function(e){for(var t=!1,n=0,r=e;n<r.length;n++){var i=r[n],o=this.queries.get(i.query);if(o){for(var s=0,a=o.listeners;s<a.length;s++)a[s].onViewSnapshot(i)&&(t=!0);o.viewSnap=i}}t&&this.raiseSnapshotsInSyncEvent()},e.prototype.onWatchError=function(e,t){var n=this.queries.get(e);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(t);this.queries.delete(e)},e.prototype.onOnlineStateChange=function(e){this.onlineState=e;var t=!1;this.queries.forEach((function(n,r){for(var i=0,o=r.listeners;i<o.length;i++)o[i].applyOnlineStateChange(e)&&(t=!0)})),t&&this.raiseSnapshotsInSyncEvent()},e.prototype.addSnapshotsInSyncListener=function(e){this.snapshotsInSyncListeners.add(e),e.next()},e.prototype.removeSnapshotsInSyncListener=function(e){this.snapshotsInSyncListeners.delete(e)},e.prototype.raiseSnapshotsInSyncEvent=function(){this.snapshotsInSyncListeners.forEach((function(e){e.next()}))},e}(),wi=function(){function e(e,t,n){this.query=e,this.queryObserver=t,this.raisedInitialEvent=!1,this.snap=null,this.onlineState=vr.Unknown,this.options=n||{}}return e.prototype.onViewSnapshot=function(e){if(v(e.docChanges.length>0||e.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var t=[],n=0,r=e.docChanges;n<r.length;n++){var i=r[n];i.type!==Ir.Metadata&&t.push(i)}e=new Nr(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var o=!1;return this.raisedInitialEvent?this.shouldRaiseEvent(e)&&(this.queryObserver.next(e),o=!0):this.shouldRaiseInitialEvent(e,this.onlineState)&&(this.raiseInitialEvent(e),o=!0),this.snap=e,o},e.prototype.onError=function(e){this.queryObserver.error(e)},e.prototype.applyOnlineStateChange=function(e){this.onlineState=e;var t=!1;return this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,e)&&(this.raiseInitialEvent(this.snap),t=!0),t},e.prototype.shouldRaiseInitialEvent=function(e,t){return v(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!e.fromCache||(this.options.waitForSyncWhenOnline&&t!==vr.Offline?(v(e.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!e.docs.isEmpty()||t===vr.Offline)},e.prototype.shouldRaiseEvent=function(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.snap&&this.snap.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges},e.prototype.raiseInitialEvent=function(e){v(!this.raisedInitialEvent,"Trying to raise initial events for second time"),e=Nr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(e)},e}(),Ci=function(){function e(e,t,n,r){this.targetId=e,this.fromCache=t,this.addedKeys=n,this.removedKeys=r}return e.fromSnapshot=function(t,n){for(var r=Ve(),i=Ve(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case Ir.Added:r=r.add(a.doc.key);break;case Ir.Removed:i=i.add(a.doc.key)}}return new e(t,n.fromCache,r,i)},e}(),Ei=function(){return function(e){this.key=e}}(),Ti=function(){return function(e){this.key=e}}(),Si=function(){function e(e,t){this.query=e,this._syncedDocuments=t,this.syncState=null,this.current=!1,this.limboDocuments=Ve(),this.mutatedKeys=Ve(),this.documentSet=new Sr(e.docComparator.bind(e))}return Object.defineProperty(e.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),e.prototype.computeDocChanges=function(e,t){var n=this,r=t?t.changeSet:new Ar,i=t?t.documentSet:this.documentSet,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,l=this.query.hasLimitToFirst()&&i.size===this.query.limit?i.last():null,u=this.query.hasLimitToLast()&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var c=i.get(e),h=t instanceof Wt?t:null;h&&(v(e.isEqual(h.key),"Mismatching keys found in document changes: "+e+" != "+h.key),h=n.query.matches(h)?h:null);var d=!!c&&n.mutatedKeys.has(c.key),p=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),f=!1;c&&h?c.data().isEqual(h.data())?d!==p&&(r.track({type:Ir.Metadata,doc:h}),f=!0):n.shouldWaitForSyncedDocument(c,h)||(r.track({type:Ir.Modified,doc:h}),f=!0,(l&&n.query.docComparator(h,l)>0||u&&n.query.docComparator(h,u)<0)&&(a=!0)):!c&&h?(r.track({type:Ir.Added,doc:h}),f=!0):c&&!h&&(r.track({type:Ir.Removed,doc:c}),f=!0,(l||u)&&(a=!0)),f&&(h?(s=s.add(h),o=p?o.add(e):o.delete(e)):(s=s.delete(e),o=o.delete(e)))})),this.query.hasLimitToFirst()||this.query.hasLimitToLast())for(;s.size>this.query.limit;){var c=this.query.hasLimitToFirst()?s.last():s.first();s=s.delete(c.key),o=o.delete(c.key),r.track({type:Ir.Removed,doc:c})}return v(!a||!t,"View was refilled using docs that themselves needed refilling."),{documentSet:s,changeSet:r,needsRefill:a,mutatedKeys:o}},e.prototype.shouldWaitForSyncedDocument=function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations},e.prototype.applyChanges=function(e,t,n){var r=this;v(!e.needsRefill,"Cannot apply changes that need a refill");var i=this.documentSet;this.documentSet=e.documentSet,this.mutatedKeys=e.mutatedKeys;var o=e.changeSet.getChanges();o.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case Ir.Added:return 1;case Ir.Modified:case Ir.Metadata:return 2;case Ir.Removed:return 0;default:return y("Unknown ChangeType: "+e)}};return n(e)-n(t)}(e.type,t.type)||r.query.docComparator(e.doc,t.doc)})),this.applyTargetChange(n);var s=t?this.updateLimboDocuments():[],a=0===this.limboDocuments.size&&this.current?kr.Synced:kr.Local,l=a!==this.syncState;return this.syncState=a,0!==o.length||l?{snapshot:new Nr(this.query,e.documentSet,i,o,e.mutatedKeys,a===kr.Local,l,!1),limboChanges:s}:{limboChanges:s}},e.prototype.applyOnlineStateChange=function(e){return this.current&&e===vr.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new Ar,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},e.prototype.shouldBeInLimbo=function(e){return!this._syncedDocuments.has(e)&&!!this.documentSet.has(e)&&!this.documentSet.get(e).hasLocalMutations},e.prototype.applyTargetChange=function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t._syncedDocuments=t._syncedDocuments.add(e)})),e.modifiedDocuments.forEach((function(e){return v(t._syncedDocuments.has(e),"Modified document "+e+" not found in view.")})),e.removedDocuments.forEach((function(e){return t._syncedDocuments=t._syncedDocuments.delete(e)})),this.current=e.current)},e.prototype.updateLimboDocuments=function(){var e=this;if(!this.current)return[];var t=this.limboDocuments;this.limboDocuments=Ve(),this.documentSet.forEach((function(t){e.shouldBeInLimbo(t.key)&&(e.limboDocuments=e.limboDocuments.add(t.key))}));var n=[];return t.forEach((function(t){e.limboDocuments.has(t)||n.push(new Ti(t))})),this.limboDocuments.forEach((function(e){t.has(e)||n.push(new Ei(e))})),n},e.prototype.synchronizeWithPersistedState=function(e){this._syncedDocuments=e.remoteKeys,this.limboDocuments=Ve();var t=this.computeDocChanges(e.documents);return this.applyChanges(t,!0)},e.prototype.computeInitialSnapshot=function(){return Nr.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===kr.Local)},e}(),Ii=5,ki=function(){function e(e,t,n,r){this.asyncQueue=e,this.remoteStore=t,this.updateFunction=n,this.deferred=r,this.retries=Ii,this.backoff=new hr(this.asyncQueue,de.RetryTransaction)}return e.prototype.run=function(){this.runWithBackOff()},e.prototype.runWithBackOff=function(){var e=this;this.backoff.backoffAndRun((function(){return o.__awaiter(e,void 0,void 0,(function(){var e,t,n=this;return o.__generator(this,(function(r){return e=this.remoteStore.createTransaction(),(t=this.tryRunUpdateFunction(e))&&t.then((function(t){n.asyncQueue.enqueueAndForget((function(){return e.commit().then((function(){n.deferred.resolve(t)})).catch((function(e){n.handleTransactionError(e)}))}))})).catch((function(e){n.handleTransactionError(e)})),[2]}))}))}))},e.prototype.tryRunUpdateFunction=function(e){try{var t=this.updateFunction(e);return!sr(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(g){return this.deferred.reject(g),null}},e.prototype.handleTransactionError=function(e){var t=this;this.retries>0&&this.isRetryableTransactionError(e)?(this.retries-=1,this.asyncQueue.enqueueAndForget((function(){return t.runWithBackOff(),Promise.resolve()}))):this.deferred.reject(e)},e.prototype.isRetryableTransactionError=function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!Cr(t)}return!1},e}(),Ai=function(){return function(e,t,n){this.query=e,this.targetId=t,this.view=n}}(),Ni=function(){return function(e){this.key=e,this.receivedDocument=!1}}(),Di=function(){function e(e,t,n,r){this.localStore=e,this.remoteStore=t,this.sharedClientState=n,this.currentUser=r,this.syncEngineListener=null,this.queryViewsByQuery=new zt((function(e){return e.canonicalId()})),this.queriesByTarget={},this.limboTargetsByKey=new Se(ce.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new Kn,this.mutationUserCallbacks={},this.pendingWritesCallbacks=new Map,this.limboTargetIdGenerator=lt.forSyncEngine(),this.isPrimary=void 0,this.onlineState=vr.Unknown}return Object.defineProperty(e.prototype,"isPrimaryClient",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),e.prototype.subscribe=function(e){v(null!==e,"SyncEngine listener cannot be null"),v(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=e},e.prototype.listen=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n,r,i,s;return o.__generator(this,(function(o){switch(o.label){case 0:return this.assertSubscribed("listen()"),(r=this.queryViewsByQuery.get(e))?(this.sharedClientState.addLocalQueryTarget(t=r.targetId),n=r.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateTarget(e.toTarget())];case 2:return i=o.sent(),s=this.sharedClientState.addLocalQueryTarget(i.targetId),[4,this.initializeViewAndComputeSnapshot(e,t=i.targetId,"current"===s)];case 3:n=o.sent(),this.isPrimary&&this.remoteStore.listen(i),o.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,t]}}))}))},e.prototype.initializeViewAndComputeSnapshot=function(e,t,n){return o.__awaiter(this,void 0,void 0,(function(){var r,i,s,a,l,u;return o.__generator(this,(function(o){switch(o.label){case 0:return[4,this.localStore.executeQuery(e,!0)];case 1:return r=o.sent(),i=new Si(e,r.remoteKeys),s=i.computeDocChanges(r.documents),a=Rr.createSynthesizedTargetChangeForCurrentChange(t,n&&this.onlineState!==vr.Offline),v(0===(l=i.applyChanges(s,!0===this.isPrimary,a)).limboChanges.length,"View returned limbo docs before target ack from the server."),v(!!l.snapshot,"applyChanges for new view should always return a snapshot"),u=new Ai(e,t,i),this.queryViewsByQuery.set(e,u),this.queriesByTarget[t]||(this.queriesByTarget[t]=[]),this.queriesByTarget[t].push(e),[2,l.snapshot]}}))}))},e.prototype.synchronizeViewAndComputeSnapshot=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n;return o.__generator(this,(function(r){switch(r.label){case 0:return[4,this.localStore.executeQuery(e.query,!0)];case 1:return t=r.sent(),n=e.view.synchronizeWithPersistedState(t),this.isPrimary&&this.updateTrackedLimbos(e.targetId,n.limboChanges),[2,n]}}))}))},e.prototype.unlisten=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n,r=this;return o.__generator(this,(function(i){switch(i.label){case 0:return this.assertSubscribed("unlisten()"),v(!!(t=this.queryViewsByQuery.get(e)),"Trying to unlisten on query not found:"+e),(n=this.queriesByTarget[t.targetId]).length>1?(this.queriesByTarget[t.targetId]=n.filter((function(t){return!t.isEqual(e)})),this.queryViewsByQuery.delete(e),[2]):this.isPrimary?(this.sharedClientState.removeLocalQueryTarget(t.targetId),this.sharedClientState.isActiveQueryTarget(t.targetId)?[3,2]:[4,this.localStore.releaseTarget(t.targetId,!1).then((function(){r.sharedClientState.clearQueryState(t.targetId),r.remoteStore.unlisten(t.targetId),r.removeAndCleanupTarget(t.targetId)})).catch(Vn)]):[3,3];case 1:i.sent(),i.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupTarget(t.targetId),[4,this.localStore.releaseTarget(t.targetId,!0)];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))},e.prototype.write=function(e,t){return o.__awaiter(this,void 0,void 0,(function(){var n;return o.__generator(this,(function(r){switch(r.label){case 0:return this.assertSubscribed("write()"),[4,this.localStore.localWrite(e)];case 1:return n=r.sent(),this.sharedClientState.addPendingMutation(n.batchId),this.addMutationCallback(n.batchId,t),[4,this.emitNewSnapsAndNotifyLocalStore(n.changes)];case 2:return r.sent(),[4,this.remoteStore.fillWritePipeline()];case 3:return r.sent(),[2]}}))}))},e.prototype.runTransaction=function(e,t,n){new ki(e,this.remoteStore,t,n).run()},e.prototype.applyRemoteEvent=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n=this;return o.__generator(this,(function(r){switch(r.label){case 0:this.assertSubscribed("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.applyRemoteEvent(e)];case 2:return t=r.sent(),k(e.targetChanges,(function(e,t){var r=n.limboResolutionsByTarget[Number(e)];r&&(v(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),t.addedDocuments.size>0?r.receivedDocument=!0:t.modifiedDocuments.size>0?v(r.receivedDocument,"Received change for limbo target document without add."):t.removedDocuments.size>0&&(v(r.receivedDocument,"Received remove for limbo target document without add."),r.receivedDocument=!1))})),[4,this.emitNewSnapsAndNotifyLocalStore(t,e)];case 3:return r.sent(),[3,6];case 4:return[4,Vn(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},e.prototype.applyOnlineStateChange=function(e,t){if(this.isPrimary&&t===_r.RemoteStore||!this.isPrimary&&t===_r.SharedClientState){this.assertSubscribed("applyOnlineStateChange()");var n=[];this.queryViewsByQuery.forEach((function(t,r){var i=r.view.applyOnlineStateChange(e);v(0===i.limboChanges.length,"OnlineState should not affect limbo documents."),i.snapshot&&n.push(i.snapshot)})),this.syncEngineListener.onOnlineStateChange(e),this.syncEngineListener.onWatchChange(n),this.onlineState=e,this.isPrimary&&this.sharedClientState.setOnlineState(e)}},e.prototype.rejectListen=function(e,t){return o.__awaiter(this,void 0,void 0,(function(){var n,r,i,s,a,l=this;return o.__generator(this,(function(o){switch(o.label){case 0:return this.assertSubscribed("rejectListens()"),this.sharedClientState.updateQueryState(e,"rejected",t),(r=(n=this.limboResolutionsByTarget[e])&&n.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(r),delete this.limboResolutionsByTarget[e],i=(i=new Se(ce.comparator)).insert(r,new Ht(r,Te.forDeletedDoc())),s=Ve().add(r),a=new Dr(Te.MIN,{},new Ne($),i,s),[2,this.applyRemoteEvent(a)]):[3,1];case 1:return[4,this.localStore.releaseTarget(e,!1).then((function(){return l.removeAndCleanupTarget(e,t)})).catch(Vn)];case 2:o.sent(),o.label=3;case 3:return[2]}}))}))},e.prototype.applyBatchState=function(e,t,n){return o.__awaiter(this,void 0,void 0,(function(){var r;return o.__generator(this,(function(i){switch(i.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(e)];case 1:return null===(r=i.sent())?(f("SyncEngine","Cannot apply mutation batch with id: "+e),[2]):"pending"!==t?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===t||"rejected"===t?(this.processUserCallback(e,n||null),this.localStore.removeCachedMutationBatchMetadata(e)):y("Unknown batchState: "+t),i.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(r)];case 5:return i.sent(),[2]}}))}))},e.prototype.applySuccessfulWrite=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n;return o.__generator(this,(function(r){switch(r.label){case 0:this.assertSubscribed("applySuccessfulWrite()"),this.processUserCallback(t=e.batch.batchId,null),this.triggerPendingWritesCallbacks(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.acknowledgeBatch(e)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(t,"acknowledged"),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,Vn(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},e.prototype.rejectFailedWrite=function(e,t){return o.__awaiter(this,void 0,void 0,(function(){var n;return o.__generator(this,(function(r){switch(r.label){case 0:this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(e,t),this.triggerPendingWritesCallbacks(e),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.rejectBatch(e)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(e,"rejected",t),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,Vn(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},e.prototype.registerPendingWritesCallback=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n;return o.__generator(this,(function(r){switch(r.label){case 0:return this.remoteStore.canUseNetwork()||f("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),[4,this.localStore.getHighestUnacknowledgedBatchId()];case 1:return-1===(t=r.sent())?(e.resolve(),[2]):((n=this.pendingWritesCallbacks.get(t)||[]).push(e),this.pendingWritesCallbacks.set(t,n),[2])}}))}))},e.prototype.triggerPendingWritesCallbacks=function(e){(this.pendingWritesCallbacks.get(e)||[]).forEach((function(e){e.resolve()})),this.pendingWritesCallbacks.delete(e)},e.prototype.rejectOutstandingPendingWritesCallbacks=function(e){this.pendingWritesCallbacks.forEach((function(t){t.forEach((function(t){t.reject(new C(w.CANCELLED,e))}))})),this.pendingWritesCallbacks.clear()},e.prototype.addMutationCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n||(n=new Se($)),n=n.insert(e,t),this.mutationUserCallbacks[this.currentUser.toKey()]=n},e.prototype.processUserCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(e);r&&(v(e===n.minKey(),"Mutation callbacks processed out-of-order?"),t?r.reject(t):r.resolve(),n=n.remove(e)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},e.prototype.removeAndCleanupTarget=function(e,t){var n=this;void 0===t&&(t=null),this.sharedClientState.removeLocalQueryTarget(e),v(this.queriesByTarget[e]&&0!==this.queriesByTarget[e].length,"There are no queries mapped to target id "+e);for(var r=0,i=this.queriesByTarget[e];r<i.length;r++){var o=i[r];this.queryViewsByQuery.delete(o),t&&this.syncEngineListener.onWatchError(o,t)}if(delete this.queriesByTarget[e],this.isPrimary){var s=this.limboDocumentRefs.referencesForId(e);this.limboDocumentRefs.removeReferencesForId(e),s.forEach((function(e){n.limboDocumentRefs.containsKey(e)||n.removeLimboTarget(e)}))}},e.prototype.removeLimboTarget=function(e){var t=this.limboTargetsByKey.get(e);null!==t&&(this.remoteStore.unlisten(t),this.limboTargetsByKey=this.limboTargetsByKey.remove(e),delete this.limboResolutionsByTarget[t])},e.prototype.updateTrackedLimbos=function(e,t){for(var n=0,r=t;n<r.length;n++){var i=r[n];i instanceof Ei?(this.limboDocumentRefs.addReference(i.key,e),this.trackLimboChange(i)):i instanceof Ti?(f("SyncEngine","Document no longer in limbo: "+i.key),this.limboDocumentRefs.removeReference(i.key,e),this.limboDocumentRefs.containsKey(i.key)||this.removeLimboTarget(i.key)):y("Unknown limbo change: "+JSON.stringify(i))}},e.prototype.trackLimboChange=function(e){var t=e.key;if(!this.limboTargetsByKey.get(t)){f("SyncEngine","New document in limbo: "+t);var n=this.limboTargetIdGenerator.next(),r=Kr.atPath(t.path);this.limboResolutionsByTarget[n]=new Ni(t),this.remoteStore.listen(new Sn(r.toTarget(),n,Tn.LimboResolution,oe.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(t,n)}},e.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},e.prototype.emitNewSnapsAndNotifyLocalStore=function(e,t){return o.__awaiter(this,void 0,void 0,(function(){var n,r,i,s=this;return o.__generator(this,(function(o){switch(o.label){case 0:return n=[],r=[],i=[],this.queryViewsByQuery.forEach((function(o,a){i.push(Promise.resolve().then((function(){var t=a.view.computeDocChanges(e);return t.needsRefill?s.localStore.executeQuery(a.query,!1).then((function(e){return a.view.computeDocChanges(e.documents,t)})):t})).then((function(e){var i=a.view.applyChanges(e,!0===s.isPrimary,t&&t.targetChanges[a.targetId]);if(s.updateTrackedLimbos(a.targetId,i.limboChanges),i.snapshot){s.isPrimary&&s.sharedClientState.updateQueryState(a.targetId,i.snapshot.fromCache?"not-current":"current"),n.push(i.snapshot);var o=Ci.fromSnapshot(a.targetId,i.snapshot);r.push(o)}})))})),[4,Promise.all(i)];case 1:return o.sent(),this.syncEngineListener.onWatchChange(n),[4,this.localStore.notifyLocalViewChanges(r)];case 2:return o.sent(),[2]}}))}))},e.prototype.assertSubscribed=function(e){v(null!==this.syncEngineListener,"Trying to call "+e+" before calling subscribe().")},e.prototype.handleCredentialChange=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n;return o.__generator(this,(function(r){switch(r.label){case 0:return t=!this.currentUser.isEqual(e),this.currentUser=e,t?(this.rejectOutstandingPendingWritesCallbacks("'waitForPendingWrites' promise is rejected due to a user change."),[4,this.localStore.handleUserChange(e)]):[3,3];case 1:return n=r.sent(),this.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:r.sent(),r.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return r.sent(),[2]}}))}))},e.prototype.applyPrimaryState=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n,r,i,s,a,l=this;return o.__generator(this,(function(o){switch(o.label){case 0:return!0!==e||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return o.sent(),t=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(t.toArray())];case 2:for(n=o.sent(),r=0,i=n;r<i.length;r++)this.remoteStore.listen(i[r]);return[3,7];case 3:return!1!==e||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,s=[],a=Promise.resolve(),I(this.queriesByTarget,(function(e,t){l.sharedClientState.isLocalQueryTarget(e)?s.push(e):a=a.then((function(){return l.removeAndCleanupTarget(e),l.localStore.releaseTarget(e,!0)})),l.remoteStore.unlisten(e)})),[4,a]);case 4:return o.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(s)];case 5:return o.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:o.sent(),o.label=7;case 7:return[2]}}))}))},e.prototype.resetLimboDocuments=function(){var e=this;I(this.limboResolutionsByTarget,(function(t){e.remoteStore.unlisten(t)})),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new Se(ce.comparator)},e.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n,r,i,s,a,l,u,c,h,d,p,f;return o.__generator(this,(function(o){switch(o.label){case 0:t=[],n=[],r=0,i=e,o.label=1;case 1:return r<i.length?(a=void 0,(l=this.queriesByTarget[s=i[r]])&&0!==l.length?[4,this.localStore.releaseTarget(s,!0)]:[3,8]):[3,14];case 2:return o.sent(),[4,this.localStore.allocateTarget(l[0].toTarget())];case 3:a=o.sent(),u=0,c=l,o.label=4;case 4:return u<c.length?(v(!!(d=this.queryViewsByQuery.get(h=c[u])),"No query view found for "+h),[4,this.synchronizeViewAndComputeSnapshot(d)]):[3,7];case 5:(p=o.sent()).snapshot&&n.push(p.snapshot),o.label=6;case 6:return u++,[3,4];case 7:return[3,12];case 8:return v(!0===this.isPrimary,"A secondary tab should never have an active target without an active query."),[4,this.localStore.getTarget(s)];case 9:return v(!!(f=o.sent()),"Target for id "+s+" not found"),[4,this.localStore.allocateTarget(f)];case 10:return a=o.sent(),[4,this.initializeViewAndComputeSnapshot(this.synthesizeTargetToQuery(f),s,!1)];case 11:o.sent(),o.label=12;case 12:t.push(a),o.label=13;case 13:return r++,[3,1];case 14:return this.syncEngineListener.onWatchChange(n),[2,t]}}))}))},e.prototype.synthesizeTargetToQuery=function(e){return new Kr(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,Hr.First,e.startAt,e.endAt)},e.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},e.prototype.applyTargetState=function(e,t,n){return o.__awaiter(this,void 0,void 0,(function(){var r,i;return o.__generator(this,(function(o){switch(o.label){case 0:if(this.isPrimary)return f("SyncEngine","Ignoring unexpected query state notification."),[2];if(!this.queriesByTarget[e])return[3,7];switch(t){case"current":case"not-current":return[3,1];case"rejected":return[3,4]}return[3,6];case 1:return[4,this.localStore.getNewDocumentChanges()];case 2:return r=o.sent(),i=Dr.createSynthesizedRemoteEventForCurrentChange(e,"current"===t),[4,this.emitNewSnapsAndNotifyLocalStore(r,i)];case 3:return o.sent(),[3,7];case 4:return[4,this.localStore.releaseTarget(e,!0)];case 5:return o.sent(),this.removeAndCleanupTarget(e,n),[3,7];case 6:y("Unexpected target state: "+t),o.label=7;case 7:return[2]}}))}))},e.prototype.applyActiveTargetsChange=function(e,t){return o.__awaiter(this,void 0,void 0,(function(){var n,r,i,s,a,l,u,c,h,d=this;return o.__generator(this,(function(p){switch(p.label){case 0:if(!this.isPrimary)return[2];n=0,r=e,p.label=1;case 1:return n<r.length?(v(!this.queriesByTarget[h=r[n]],"Trying to add an already active target"),[4,this.localStore.getTarget(h)]):[3,6];case 2:return v(!!(i=p.sent()),"Query data for active target "+h+" not found"),[4,this.localStore.allocateTarget(i)];case 3:return s=p.sent(),[4,this.initializeViewAndComputeSnapshot(this.synthesizeTargetToQuery(i),s.targetId,!1)];case 4:p.sent(),this.remoteStore.listen(s),p.label=5;case 5:return n++,[3,1];case 6:a=function(e){return o.__generator(this,(function(t){switch(t.label){case 0:return l.queriesByTarget[e]?[4,l.localStore.releaseTarget(e,!1).then((function(){d.remoteStore.unlisten(e),d.removeAndCleanupTarget(e)})).catch(Vn)]:[2,"continue"];case 1:return t.sent(),[2]}}))},l=this,u=0,c=t,p.label=7;case 7:return u<c.length?[5,a(h=c[u])]:[3,10];case 8:p.sent(),p.label=9;case 9:return u++,[3,7];case 10:return[2]}}))}))},e.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},e.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},e.prototype.getRemoteKeysForTarget=function(e){var t=this.limboResolutionsByTarget[e];if(t&&t.receivedDocument)return Ve().add(t.key);var n=Ve(),r=this.queriesByTarget[e];if(!r)return n;for(var i=0,o=r;i<o.length;i++){var s=o[i],a=this.queryViewsByQuery.get(s);v(!!a,"No query view found for "+s),n=n.unionWith(a.view.syncedDocuments)}return n},e}(),Ri=function(){function e(e){this.uid=e}return e.prototype.isAuthenticated=function(){return null!=this.uid},e.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(e){return e.uid===this.uid},e.UNAUTHENTICATED=new e(null),e.GOOGLE_CREDENTIALS=new e("google-credentials-uid"),e.FIRST_PARTY=new e("first-party-uid"),e}(),Oi="SharedClientState",Pi="firestore_clients",xi="firestore_mutations",Mi="firestore_targets",Li="firestore_online_state",Fi="firestore_sequence_number",Ui=function(){function e(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r,v(void 0!==r==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}return e.fromWebStorageEntry=function(t,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new C(i.error.code,i.error.message)),o?new e(t,n,i.state,s):(g(Oi,"Failed to parse mutation state for ID '"+n+"': "+r),null)},e.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),Vi=function(){function e(e,t,n){this.targetId=e,this.state=t,this.error=n,v(void 0!==n==("rejected"===t),"QueryTargetMetadata must contain an error iff state is 'rejected'")}return e.fromWebStorageEntry=function(t,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new C(r.error.code,r.error.message)),i?new e(t,r.state,o):(g(Oi,"Failed to parse target state for ID '"+t+"': "+n),null)},e.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),ji=function(){function e(e,t){this.clientId=e,this.activeTargetIds=t}return e.fromWebStorageEntry=function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=qe(),s=0;i&&s<r.activeTargetIds.length;++s)i=ar(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new e(t,o):(g(Oi,"Failed to parse client data for instance '"+t+"': "+n),null)},e}(),qi=function(){function e(e,t){this.clientId=e,this.onlineState=t}return e.fromWebStorageEntry=function(t){var n=JSON.parse(t);return"object"==typeof n&&n.onlineState in vr&&"string"==typeof n.clientId?new e(n.clientId,vr[n.onlineState]):(g(Oi,"Failed to parse online state: "+t),null)},e}(),Bi=function(){function e(){this.activeTargetIds=qe()}return e.prototype.addQueryTarget=function(e){this.activeTargetIds=this.activeTargetIds.add(e)},e.prototype.removeQueryTarget=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},e.prototype.toWebStorageJSON=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},e}(),Wi=function(){function e(t,n,r,i,o){if(this.queue=t,this.platform=n,this.persistenceKey=r,this.localClientId=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!e.isAvailable(this.platform))throw new C(w.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=o,this.localClientStorageKey=this.toWebStorageClientStateKey(this.localClientId),this.sequenceNumberKey=Fi+"_"+r,this.activeClients[this.localClientId]=new Bi,this.clientStateKeyRe=new RegExp("^"+Pi+"_"+s+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^"+xi+"_"+s+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^"+Mi+"_"+s+"_(\\d+)$"),this.onlineStateKey=Li+"_"+r,this.platform.window.addEventListener("storage",this.storageListener)}return e.isAvailable=function(e){return!(!e.window||null==e.window.localStorage)},e.prototype.start=function(){return o.__awaiter(this,void 0,void 0,(function(){var e,t,n,r,i,s,a,l,u,c,h=this;return o.__generator(this,(function(o){switch(o.label){case 0:return v(!this.started,"WebStorageSharedClientState already started"),v(null!==this.syncEngine,"syncEngine property must be set before calling start()"),v(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:for(e=o.sent(),t=0,n=e;t<n.length;t++)(r=n[t])!==this.localClientId&&(i=this.getItem(this.toWebStorageClientStateKey(r)))&&(s=ji.fromWebStorageEntry(r,i))&&(this.activeClients[s.clientId]=s);for(this.persistClientState(),(a=this.storage.getItem(this.onlineStateKey))&&(l=this.fromWebStorageOnlineState(a))&&this.handleOnlineStateEvent(l),u=0,c=this.earlyEvents;u<c.length;u++)this.handleWebStorageEvent(c[u]);return this.earlyEvents=[],this.platform.window.addEventListener("unload",(function(){return h.shutdown()})),this.started=!0,[2]}}))}))},e.prototype.writeSequenceNumber=function(e){this.setItem(this.sequenceNumberKey,JSON.stringify(e))},e.prototype.getAllActiveQueryTargets=function(){var e=qe();return k(this.activeClients,(function(t,n){e=e.unionWith(n.activeTargetIds)})),e},e.prototype.isActiveQueryTarget=function(e){for(var t in this.activeClients)if(this.activeClients.hasOwnProperty(t)&&this.activeClients[t].activeTargetIds.has(e))return!0;return!1},e.prototype.addPendingMutation=function(e){this.persistMutationState(e,"pending")},e.prototype.updateMutationState=function(e,t,n){this.persistMutationState(e,t,n),this.removeMutationState(e)},e.prototype.addLocalQueryTarget=function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(this.toWebStorageQueryTargetMetadataKey(e));if(n){var r=Vi.fromWebStorageEntry(e,n);r&&(t=r.state)}}return this.localClientState.addQueryTarget(e),this.persistClientState(),t},e.prototype.removeLocalQueryTarget=function(e){this.localClientState.removeQueryTarget(e),this.persistClientState()},e.prototype.isLocalQueryTarget=function(e){return this.localClientState.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){this.removeItem(this.toWebStorageQueryTargetMetadataKey(e))},e.prototype.updateQueryState=function(e,t,n){this.persistQueryTargetState(e,t,n)},e.prototype.handleUserChange=function(e,t,n){var r=this;t.forEach((function(e){r.removeMutationState(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))},e.prototype.setOnlineState=function(e){this.persistOnlineState(e)},e.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},e.prototype.getItem=function(e){var t=this.storage.getItem(e);return f(Oi,"READ",e,t),t},e.prototype.setItem=function(e,t){f(Oi,"SET",e,t),this.storage.setItem(e,t)},e.prototype.removeItem=function(e){f(Oi,"REMOVE",e),this.storage.removeItem(e)},e.prototype.handleWebStorageEvent=function(e){var t=this;if(e.storageArea===this.storage){if(f(Oi,"EVENT",e.key,e.newValue),e.key===this.localClientStorageKey)return void g("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueAndForget((function(){return o.__awaiter(t,void 0,void 0,(function(){var t,n,r,i,s,a;return o.__generator(this,(function(o){if(!this.started)return this.earlyEvents.push(e),[2];if(null===e.key)return[2];if(this.clientStateKeyRe.test(e.key)){if(null==e.newValue)return n=this.fromWebStorageClientStateKey(e.key),[2,this.handleClientStateEvent(n,null)];if(t=this.fromWebStorageClientState(e.key,e.newValue))return[2,this.handleClientStateEvent(t.clientId,t)]}else if(this.mutationBatchKeyRe.test(e.key)){if(null!==e.newValue&&(r=this.fromWebStorageMutationMetadata(e.key,e.newValue)))return[2,this.handleMutationBatchEvent(r)]}else if(this.queryTargetKeyRe.test(e.key)){if(null!==e.newValue&&(i=this.fromWebStorageQueryTargetMetadata(e.key,e.newValue)))return[2,this.handleQueryTargetEvent(i)]}else if(e.key===this.onlineStateKey){if(null!==e.newValue&&(s=this.fromWebStorageOnlineState(e.newValue)))return[2,this.handleOnlineStateEvent(s)]}else e.key===this.sequenceNumberKey&&(v(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),(a=function(e){var t=oe.INVALID;if(null!=e)try{var n=JSON.parse(e);v("number"==typeof n,"Found non-numeric sequence number"),t=n}catch(r){g(Oi,"Failed to read sequence number from WebStorage",r)}return t}(e.newValue))!==oe.INVALID&&this.sequenceNumberHandler(a));return[2]}))}))}))}},Object.defineProperty(e.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),e.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},e.prototype.persistMutationState=function(e,t,n){var r=new Ui(this.currentUser,e,t,n),i=this.toWebStorageMutationBatchKey(e);this.setItem(i,r.toWebStorageJSON())},e.prototype.removeMutationState=function(e){var t=this.toWebStorageMutationBatchKey(e);this.removeItem(t)},e.prototype.persistOnlineState=function(e){this.storage.setItem(this.onlineStateKey,JSON.stringify({clientId:this.localClientId,onlineState:vr[e]}))},e.prototype.persistQueryTargetState=function(e,t,n){var r=this.toWebStorageQueryTargetMetadataKey(e),i=new Vi(e,t,n);this.setItem(r,i.toWebStorageJSON())},e.prototype.toWebStorageClientStateKey=function(e){return v(-1===e.indexOf("_"),"Client key cannot contain '_', but was '"+e+"'"),Pi+"_"+this.persistenceKey+"_"+e},e.prototype.toWebStorageQueryTargetMetadataKey=function(e){return Mi+"_"+this.persistenceKey+"_"+e},e.prototype.toWebStorageMutationBatchKey=function(e){var t=xi+"_"+this.persistenceKey+"_"+e;return this.currentUser.isAuthenticated()&&(t+="_"+this.currentUser.uid),t},e.prototype.fromWebStorageClientStateKey=function(e){var t=this.clientStateKeyRe.exec(e);return t?t[1]:null},e.prototype.fromWebStorageClientState=function(e,t){var n=this.fromWebStorageClientStateKey(e);return v(null!==n,"Cannot parse client state key '"+e+"'"),ji.fromWebStorageEntry(n,t)},e.prototype.fromWebStorageMutationMetadata=function(e,t){var n=this.mutationBatchKeyRe.exec(e);v(null!==n,"Cannot parse mutation batch key '"+e+"'");var r=Number(n[1]);return Ui.fromWebStorageEntry(new Ri(void 0!==n[2]?n[2]:null),r,t)},e.prototype.fromWebStorageQueryTargetMetadata=function(e,t){var n=this.queryTargetKeyRe.exec(e);v(null!==n,"Cannot parse query target key '"+e+"'");var r=Number(n[1]);return Vi.fromWebStorageEntry(r,t)},e.prototype.fromWebStorageOnlineState=function(e){return qi.fromWebStorageEntry(e)},e.prototype.handleMutationBatchEvent=function(e){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){return e.user.uid!==this.currentUser.uid?(f(Oi,"Ignoring mutation for non-active user "+e.user.uid),[2]):[2,this.syncEngine.applyBatchState(e.batchId,e.state,e.error)]}))}))},e.prototype.handleQueryTargetEvent=function(e){return this.syncEngine.applyTargetState(e.targetId,e.state,e.error)},e.prototype.handleClientStateEvent=function(e,t){var n=this,r=this.getAllActiveQueryTargets();t?this.activeClients[e]=t:delete this.activeClients[e];var i=this.getAllActiveQueryTargets(),s=[],a=[];return i.forEach((function(e){return o.__awaiter(n,void 0,void 0,(function(){return o.__generator(this,(function(t){return r.has(e)||s.push(e),[2]}))}))})),r.forEach((function(e){return o.__awaiter(n,void 0,void 0,(function(){return o.__generator(this,(function(t){return i.has(e)||a.push(e),[2]}))}))})),this.syncEngine.applyActiveTargetsChange(s,a)},e.prototype.handleOnlineStateEvent=function(e){this.activeClients[e.clientId]&&this.onlineStateHandler(e.onlineState)},e}(),Hi=function(){function e(){this.localState=new Bi,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}return e.prototype.addPendingMutation=function(e){},e.prototype.updateMutationState=function(e,t,n){},e.prototype.addLocalQueryTarget=function(e){return this.localState.addQueryTarget(e),this.queryState[e]||"not-current"},e.prototype.updateQueryState=function(e,t,n){this.queryState[e]=t},e.prototype.removeLocalQueryTarget=function(e){this.localState.removeQueryTarget(e)},e.prototype.isLocalQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){delete this.queryState[e]},e.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},e.prototype.isActiveQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},e.prototype.start=function(){return this.localState=new Bi,Promise.resolve()},e.prototype.handleUserChange=function(e,t,n){},e.prototype.setOnlineState=function(e){},e.prototype.shutdown=function(){},e.prototype.writeSequenceNumber=function(e){},e}(),Ki=function(){function e(e,t){this.cacheSizeBytes=e,this.synchronizeTabs=t}return e.prototype.lruParams=function(){return Dn.withCacheSize(this.cacheSizeBytes)},e}(),zi=function(){return function(){}}(),Gi=function(){function e(e,t,n,r){this.platform=e,this.databaseInfo=t,this.credentials=n,this.asyncQueue=r,this.clientId=Q.newId()}return e.prototype.start=function(e){var t=this;this.verifyNotTerminated();var n=new he,r=new he,i=!1;return this.credentials.setChangeListener((function(o){i?t.asyncQueue.enqueueAndForget((function(){return t.handleCredentialChange(o)})):(i=!0,t.initializePersistence(e,r,o).then((function(e){return t.initializeRest(o,e)})).then(n.resolve,n.reject))})),this.asyncQueue.enqueueAndForget((function(){return n.promise})),r.promise},e.prototype.enableNetwork=function(){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return e.syncEngine.enableNetwork()}))},e.prototype.initializePersistence=function(e,t,n){var r=this;return e instanceof Ki?this.startIndexedDbPersistence(n,e).then((function(e){return t.resolve(),e})).catch((function(e){if(t.reject(e),!r.canFallback(e))throw e;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),r.startMemoryPersistence()})):(t.resolve(),this.startMemoryPersistence())},e.prototype.canFallback=function(e){return e instanceof C?e.code===w.FAILED_PRECONDITION||e.code===w.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code},e.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new C(w.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.startIndexedDbPersistence=function(e,t){var n=this,r=Un.buildStoragePrefix(this.databaseInfo),i=new vi(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then((function(){return o.__awaiter(n,void 0,void 0,(function(){var n,s;return o.__generator(this,(function(o){switch(o.label){case 0:if(t.synchronizeTabs&&!Wi.isAvailable(this.platform))throw new C(w.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return n=t.lruParams(),this.sharedClientState=t.synchronizeTabs?new Wi(this.asyncQueue,this.platform,r,this.clientId,e):new Hi,[4,Un.createIndexedDbPersistence({allowTabSynchronization:t.synchronizeTabs,persistenceKey:r,clientId:this.clientId,platform:this.platform,queue:this.asyncQueue,serializer:i,lruParams:n,sequenceNumberSyncer:this.sharedClientState})];case 1:return s=o.sent(),this.persistence=s,[2,s.referenceDelegate.garbageCollector]}}))}))}))},e.prototype.startMemoryPersistence=function(){return this.persistence=Xn.createEagerPersistence(this.clientId),this.sharedClientState=new Hi,Promise.resolve(null)},e.prototype.initializeRest=function(e,t){var n=this;return f("FirestoreClient","Initializing. user=",e.uid),this.platform.loadConnection(this.databaseInfo).then((function(r){return o.__awaiter(n,void 0,void 0,(function(){var n,i,s,a,l,u=this;return o.__generator(this,(function(c){switch(c.label){case 0:return n=new tr,this.localStore=new Gn(this.persistence,n,e),[4,this.localStore.start()];case 1:return c.sent(),t&&(this.lruScheduler=new Rn(t,this.asyncQueue,this.localStore)),i=this.platform.newConnectivityMonitor(),s=this.platform.newSerializer(this.databaseInfo.databaseId),a=new mr(this.asyncQueue,r,this.credentials,s),l=function(e){return u.syncEngine.applyOnlineStateChange(e,_r.SharedClientState)},this.remoteStore=new qr(this.localStore,a,this.asyncQueue,(function(e){return u.syncEngine.applyOnlineStateChange(e,_r.RemoteStore)}),i),this.syncEngine=new Di(this.localStore,this.remoteStore,this.sharedClientState,e),this.sharedClientState.onlineStateHandler=l,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new bi(this.syncEngine),[4,this.sharedClientState.start()];case 2:return c.sent(),[4,this.remoteStore.start()];case 3:return c.sent(),[4,this.persistence.setPrimaryStateListener((function(e){return o.__awaiter(u,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return[4,this.syncEngine.applyPrimaryState(e)];case 1:return t.sent(),this.lruScheduler&&(e&&!this.lruScheduler.started?this.lruScheduler.start():e||this.lruScheduler.stop()),[2]}}))}))}))];case 4:return c.sent(),[4,this.persistence.setDatabaseDeletedListener((function(){return o.__awaiter(u,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return[4,this.terminate()];case 1:return e.sent(),[2]}}))}))}))];case 5:return c.sent(),[2]}}))}))}))},e.prototype.handleCredentialChange=function(e){return this.asyncQueue.verifyOperationInProgress(),f("FirestoreClient","Credential Changed. Current user: "+e.uid),this.syncEngine.handleCredentialChange(e)},e.prototype.disableNetwork=function(){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return e.syncEngine.disableNetwork()}))},e.prototype.terminate=function(){var e=this;return this.asyncQueue.enqueueAndInitiateShutdown((function(){return o.__awaiter(e,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return this.lruScheduler&&this.lruScheduler.stop(),[4,this.remoteStore.shutdown()];case 1:return e.sent(),[4,this.sharedClientState.shutdown()];case 2:return e.sent(),[4,this.persistence.shutdown()];case 3:return e.sent(),this.credentials.removeChangeListener(),[2]}}))}))}))},e.prototype.waitForPendingWrites=function(){var e=this;this.verifyNotTerminated();var t=new he;return this.asyncQueue.enqueueAndForget((function(){return e.syncEngine.registerPendingWritesCallback(t)})),t.promise},e.prototype.listen=function(e,t,n){var r=this;this.verifyNotTerminated();var i=new wi(e,t,n);return this.asyncQueue.enqueueAndForget((function(){return r.eventMgr.listen(i)})),i},e.prototype.unlisten=function(e){var t=this;this.clientTerminated||this.asyncQueue.enqueueAndForget((function(){return t.eventMgr.unlisten(e)}))},e.prototype.getDocumentFromLocalCache=function(e){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return t.localStore.readDocument(e)})).then((function(e){if(e instanceof Wt)return e;if(e instanceof Ht)return null;throw new C(w.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")}))},e.prototype.getDocumentsFromLocalCache=function(e){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return o.__awaiter(t,void 0,void 0,(function(){var t,n,r;return o.__generator(this,(function(i){switch(i.label){case 0:return[4,this.localStore.executeQuery(e,!0)];case 1:return t=i.sent(),n=new Si(e,t.remoteKeys),r=n.computeDocChanges(t.documents),[2,n.applyChanges(r,!1).snapshot]}}))}))}))},e.prototype.write=function(e){var t=this;this.verifyNotTerminated();var n=new he;return this.asyncQueue.enqueueAndForget((function(){return t.syncEngine.write(e,n)})),n.promise},e.prototype.databaseId=function(){return this.databaseInfo.databaseId},e.prototype.addSnapshotsInSyncListener=function(e){var t=this;this.verifyNotTerminated(),this.asyncQueue.enqueueAndForget((function(){return t.eventMgr.addSnapshotsInSyncListener(e),Promise.resolve()}))},e.prototype.removeSnapshotsInSyncListener=function(e){this.clientTerminated||this.eventMgr.removeSnapshotsInSyncListener(e)},Object.defineProperty(e.prototype,"clientTerminated",{get:function(){return this.asyncQueue.isShuttingDown},enumerable:!0,configurable:!0}),e.prototype.transaction=function(e){var t=this;this.verifyNotTerminated();var n=new he;return this.asyncQueue.enqueueAndForget((function(){return t.syncEngine.runTransaction(t.asyncQueue,e,n),Promise.resolve()})),n.promise},e}(),Qi=function(){function e(e){this.observer=e,this.muted=!1}return e.prototype.next=function(e){this.scheduleEvent(this.observer.next,e)},e.prototype.error=function(e){this.scheduleEvent(this.observer.error,e)},e.prototype.mute=function(){this.muted=!0},e.prototype.scheduleEvent=function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)},e}(),$i=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];!function(e,t,n,r){if(!(t instanceof Array)||t.length<1)throw new C(w.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+G(1,"element")+".")}(0,e);for(var n=0;n<e.length;++n)if(P("FieldPath","string",n,e[n]),0===e[n].length)throw new C(w.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ue(e)}return e.documentId=function(){return e._DOCUMENT_ID},e.prototype.isEqual=function(t){if(!(t instanceof e))throw H("isEqual","FieldPath",1,t);return this._internalPath.isEqual(t._internalPath)},e._DOCUMENT_ID=new e(ue.keyField().canonicalString()),e}(),Yi=new RegExp("[~\\*/\\[\\]]"),Xi=function(){return function(e,t){this.user=t,this.type="OAuth",this.authHeaders={Authorization:"Bearer "+e}}}(),Ji=function(){function e(){this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(e){v(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=e,e(Ri.UNAUTHENTICATED)},e.prototype.removeChangeListener=function(){v(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},e}(),Zi=function(){function e(e){var t=this;this.app=e,this.tokenListener=null,this.currentUser=Ri.UNAUTHENTICATED,this.receivedInitialUser=!1,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){t.tokenCounter++,t.currentUser=t.getUser(),t.receivedInitialUser=!0,t.changeListener&&t.changeListener(t.currentUser)},this.tokenCounter=0,this.app.INTERNAL.addAuthTokenListener(this.tokenListener)}return e.prototype.getToken=function(){var e=this;v(null!=this.tokenListener,"getToken cannot be called after listener removed.");var t=this.tokenCounter,n=this.forceRefresh;return this.forceRefresh=!1,this.app.INTERNAL.getToken(n).then((function(n){if(e.tokenCounter!==t)throw new C(w.ABORTED,"getToken aborted due to token change.");return n?(v("string"==typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new Xi(n.accessToken,e.currentUser)):null}))},e.prototype.invalidateToken=function(){this.forceRefresh=!0},e.prototype.setChangeListener=function(e){v(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=e,this.receivedInitialUser&&e(this.currentUser)},e.prototype.removeChangeListener=function(){v(null!=this.tokenListener,"removeChangeListener() called twice"),v(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.app.INTERNAL.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},e.prototype.getUser=function(){var e=this.app.INTERNAL.getUid();return v(null===e||"string"==typeof e,"Received invalid UID: "+e),new Ri(e)},e}(),eo=function(){function e(e,t){this.gapi=e,this.sessionIndex=t,this.type="FirstParty",this.user=Ri.FIRST_PARTY}return Object.defineProperty(e.prototype,"authHeaders",{get:function(){var e={"X-Goog-AuthUser":this.sessionIndex},t=this.gapi.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),e},enumerable:!0,configurable:!0}),e}(),to=function(){function e(e,t){this.gapi=e,this.sessionIndex=t}return e.prototype.getToken=function(){return Promise.resolve(new eo(this.gapi,this.sessionIndex))},e.prototype.setChangeListener=function(e){e(Ri.FIRST_PARTY)},e.prototype.removeChangeListener=function(){},e.prototype.invalidateToken=function(){},e}();function no(e){if(!e)return new Ji;switch(e.type){case"gapi":var t=e.client;return v(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new to(t,e.sessionIndex||"0");case"provider":return e.client;default:throw new C(w.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}function ro(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(e)}var io=function(){function e(e){this._methodName=e}return e.delete=function(){return N("FieldValue.delete",arguments),oo.instance},e.serverTimestamp=function(){return N("FieldValue.serverTimestamp",arguments),so.instance},e.arrayUnion=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return R("FieldValue.arrayUnion",arguments,1),new ao(e)},e.arrayRemove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return R("FieldValue.arrayRemove",arguments,1),new lo(e)},e.increment=function(e){return P("FieldValue.increment","number",1,e),D("FieldValue.increment",arguments,1),new uo(e)},e.prototype.isEqual=function(e){return this===e},e}(),oo=function(e){function t(){return e.call(this,"FieldValue.delete")||this}return o.__extends(t,e),t.instance=new t,t}(io),so=function(e){function t(){return e.call(this,"FieldValue.serverTimestamp")||this}return o.__extends(t,e),t.instance=new t,t}(io),ao=function(e){function t(t){var n=e.call(this,"FieldValue.arrayUnion")||this;return n._elements=t,n}return o.__extends(t,e),t}(io),lo=function(e){function t(t){var n=e.call(this,"FieldValue.arrayRemove")||this;return n._elements=t,n}return o.__extends(t,e),t}(io),uo=function(e){function t(t){var n=e.call(this,"FieldValue.increment")||this;return n._operand=t,n}return o.__extends(t,e),t}(io),co=E(io,"Use FieldValue.<field>() instead."),ho=/^__.*__$/,po=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutations=function(e,t){var n=[];return n.push(null!==this.fieldMask?new wt(e,this.data,this.fieldMask,t):new bt(e,this.data,t)),this.fieldTransforms.length>0&&n.push(new Ct(e,this.fieldTransforms)),n},e}(),fo=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutations=function(e,t){var n=[new wt(e,this.data,this.fieldMask,t)];return this.fieldTransforms.length>0&&n.push(new Ct(e,this.fieldTransforms)),n},e}(),go=function(e){return e[e.Set=0]="Set",e[e.Update=1]="Update",e[e.MergeSet=2]="MergeSet",e[e.Argument=3]="Argument",e[e.ArrayArgument=4]="ArrayArgument",e}({});function mo(e){switch(e){case go.Set:case go.MergeSet:case go.Update:return!0;case go.Argument:case go.ArrayArgument:return!1;default:throw y("Unexpected case for UserDataSource: "+e)}}var yo=function(){function e(e,t,n,r,i,o){this.dataSource=e,this.methodName=t,this.path=n,this.arrayElement=r,void 0===i&&this.validatePath(),this.arrayElement=void 0!==r&&r,this.fieldTransforms=i||[],this.fieldMask=o||[]}return e.prototype.childContextForField=function(t){var n=null==this.path?null:this.path.child(t),r=new e(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePathSegment(t),r},e.prototype.childContextForFieldPath=function(t){var n=null==this.path?null:this.path.child(t),r=new e(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePath(),r},e.prototype.childContextForArray=function(t){return new e(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},e.prototype.createError=function(e){var t=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new C(w.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+e+t)},e.prototype.contains=function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))},e.prototype.validatePath=function(){if(null!==this.path)for(var e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))},e.prototype.validatePathSegment=function(e){if(0===e.length)throw this.createError("Document fields must not be empty");if(mo(this.dataSource)&&ho.test(e))throw this.createError('Document fields cannot begin and end with "__"')},e}(),vo=function(){return function(e,t){this.databaseId=e,this.key=t}}(),_o=function(){function e(e){this.preConverter=e}return e.prototype.parseSetData=function(e,t){var n=new yo(go.Set,e,ue.EMPTY_PATH);wo("Data must be an object, but it was:",n,t);var r=this.parseData(t,n);return new po(r,null,n.fieldTransforms)},e.prototype.parseMergeData=function(e,t,n){var r=new yo(go.MergeSet,e,ue.EMPTY_PATH);wo("Data must be an object, but it was:",r,t);var i,o,s=this.parseData(t,r);if(n){for(var a=new Ne(ue.comparator),l=0,u=n;l<u.length;l++){var c=u[l],h=void 0;if(c instanceof $i)h=c._internalPath;else{if("string"!=typeof c)throw y("Expected stringOrFieldPath to be a string or a FieldPath");h=Eo(e,c)}if(!r.contains(h))throw new C(w.INVALID_ARGUMENT,"Field '"+h+"' is specified in your field mask but missing from your input data.");a=a.add(h)}i=ft.fromSet(a),o=r.fieldTransforms.filter((function(e){return i.covers(e.field)}))}else i=ft.fromArray(r.fieldMask),o=r.fieldTransforms;return new po(s,i,o)},e.prototype.parseUpdateData=function(e,t){var n=this,r=new yo(go.Update,e,ue.EMPTY_PATH);wo("Data must be an object, but it was:",r,t);var i=new Ne(ue.comparator),o=jt.EMPTY;k(t,(function(t,s){var a=Eo(e,t),l=r.childContextForFieldPath(a);if((s=n.runPreConverter(s,l))instanceof oo)i=i.add(a);else{var u=n.parseData(s,l);null!=u&&(i=i.add(a),o=o.set(a,u))}}));var s=ft.fromSet(i);return new fo(o,s,r.fieldTransforms)},e.prototype.parseUpdateVarargs=function(e,t,n,r){var i=new yo(go.Update,e,ue.EMPTY_PATH),o=[Co(e,t)],s=[n];if(r.length%2!=0)throw new C(w.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var a=0;a<r.length;a+=2)o.push(Co(e,r[a])),s.push(r[a+1]);var l=new Ne(ue.comparator),u=jt.EMPTY;for(a=0;a<o.length;++a){var c=o[a],h=i.childContextForFieldPath(c),d=this.runPreConverter(s[a],h);if(d instanceof oo)l=l.add(c);else{var p=this.parseData(d,h);null!=p&&(l=l.add(c),u=u.set(c,p))}}var f=ft.fromSet(l);return new fo(u,f,i.fieldTransforms)},e.prototype.parseQueryValue=function(e,t,n){void 0===n&&(n=!1);var r=new yo(n?go.ArrayArgument:go.Argument,e,ue.EMPTY_PATH),i=this.parseData(t,r);return v(null!=i,"Parsed data should not be null."),v(0===r.fieldTransforms.length,"Field transforms should have been disallowed."),i},e.prototype.runPreConverter=function(e,t){try{return this.preConverter(e)}catch(r){var n=To(r);throw t.createError(n)}},e.prototype.parseData=function(e,t){if(bo(e=this.runPreConverter(e,t)))return wo("Unsupported field value:",t,e),this.parseObject(e,t);if(e instanceof io)return this.parseSentinelFieldValue(e,t),null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.arrayElement&&t.dataSource!==go.ArrayArgument)throw t.createError("Nested arrays are not supported");return this.parseArray(e,t)}return this.parseScalarValue(e,t)},e.prototype.parseObject=function(e,t){var n=this,r=new Se($);return A(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):k(e,(function(e,i){var o=n.parseData(i,t.childContextForField(e));null!=o&&(r=r.insert(e,o))})),new jt(r)},e.prototype.parseArray=function(e,t){for(var n=[],r=0,i=0,o=e;i<o.length;i++){var s=this.parseData(o[i],t.childContextForArray(r));null==s&&(s=At.INSTANCE),n.push(s),r++}return new qt(n)},e.prototype.parseSentinelFieldValue=function(e,t){if(!mo(t.dataSource))throw t.createError(e._methodName+"() can only be used with update() and set()");if(null===t.path)throw t.createError(e._methodName+"() is not currently supported inside arrays");if(e instanceof oo){if(t.dataSource!==go.MergeSet)throw t.dataSource===go.Update?(v(t.path.length>0,"FieldValue.delete() at the top level should have already been handled."),t.createError("FieldValue.delete() can only appear at the top level of your update data")):t.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");t.fieldMask.push(t.path)}else if(e instanceof so)t.fieldTransforms.push(new gt(t.path,oi.instance));else if(e instanceof ao){var n=this.parseArrayTransformElements(e._methodName,e._elements),r=new si(n);t.fieldTransforms.push(new gt(t.path,r))}else if(e instanceof lo){n=this.parseArrayTransformElements(e._methodName,e._elements);var i=new ai(n);t.fieldTransforms.push(new gt(t.path,i))}else if(e instanceof uo){var o=this.parseQueryValue("FieldValue.increment",e._operand),s=new li(o);t.fieldTransforms.push(new gt(t.path,s))}else y("Unknown FieldValue type: "+e)},e.prototype.parseScalarValue=function(e,t){if(null===e)return At.INSTANCE;if("number"==typeof e)return ar(e)?new Ot(e):new Pt(e);if("boolean"==typeof e)return Nt.of(e);if("string"==typeof e)return new xt(e);if(e instanceof Date)return new Mt(Ee.fromDate(e));if(e instanceof Ee)return new Mt(new Ee(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)));if(e instanceof Br)return new Vt(e);if(e instanceof ee)return new Ft(e);if(e instanceof vo)return new Ut(e.databaseId,e.key);throw t.createError("Unsupported field value: "+q(e))},e.prototype.parseArrayTransformElements=function(e,t){var n=this;return t.map((function(t,r){var i=new yo(go.Argument,e,ue.EMPTY_PATH);return n.parseData(t,i.childContextForArray(r))}))},e}();function bo(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Ee||e instanceof Br||e instanceof ee||e instanceof vo||e instanceof io)}function wo(e,t,n){if(!bo(n)||!j(n)){var r=q(n);throw t.createError("an object"===r?e+" a custom object":e+" "+r)}}function Co(e,t){if(t instanceof $i)return t._internalPath;if("string"==typeof t)return Eo(e,t);throw new C(w.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function Eo(e,t){try{return function(e){if(e.search(Yi)>=0)throw new C(w.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new($i.bind.apply($i,o.__spreadArrays([void 0],e.split("."))))}catch(t){throw new C(w.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(t)._internalPath}catch(r){var n=To(r);throw new C(w.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. "+n)}}function To(e){return e instanceof Error?e.message:e.toString()}var So="firestore.googleapis.com",Io=!0,ko=!0,Ao=!1,No=Dn.COLLECTION_DISABLED,Do=function(){function e(e){if(void 0===e.host){if(void 0!==e.ssl)throw new C(w.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=So,this.ssl=Io}else M("settings","non-empty string","host",e.host),this.host=e.host,L("settings","boolean","ssl",e.ssl),this.ssl=S(e.ssl,Io);if(W("settings",e,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),L("settings","object","credentials",e.credentials),this.credentials=e.credentials,L("settings","boolean","timestampsInSnapshots",e.timestampsInSnapshots),!0===e.timestampsInSnapshots?g("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===e.timestampsInSnapshots&&g("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=S(e.timestampsInSnapshots,ko),L("settings","number","cacheSizeBytes",e.cacheSizeBytes),void 0===e.cacheSizeBytes)this.cacheSizeBytes=Dn.DEFAULT_CACHE_SIZE_BYTES;else{if(e.cacheSizeBytes!==No&&e.cacheSizeBytes<Dn.MINIMUM_CACHE_SIZE_BYTES)throw new C(w.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+Dn.MINIMUM_CACHE_SIZE_BYTES);this.cacheSizeBytes=e.cacheSizeBytes}L("settings","boolean","experimentalForceLongPolling",e.experimentalForceLongPolling),this.forceLongPolling=void 0===e.experimentalForceLongPolling?Ao:e.experimentalForceLongPolling}return e.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.timestampsInSnapshots===e.timestampsInSnapshots&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.forceLongPolling===e.forceLongPolling},e}(),Ro=function(){function e(t){var n=this;if(this._firebaseApp=null,this._queue=new fe,this.INTERNAL={delete:function(){return o.__awaiter(n,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return this.ensureClientConfigured(),[4,this._firestoreClient.terminate()];case 1:return e.sent(),[2]}}))}))}},"object"==typeof t.options){var r=t;this._firebaseApp=r,this._databaseId=e.databaseIdFromApp(r),this._persistenceKey=r.name,this._credentials=new Zi(r)}else{var i=t;if(!i.projectId)throw new C(w.INVALID_ARGUMENT,"Must provide projectId");this._databaseId=new ie(i.projectId,i.database),this._persistenceKey="[DEFAULT]",this._credentials=new Ji}this._settings=new Do({}),this._dataConverter=this.createDataConverter(this._databaseId)}return e.prototype.settings=function(e){if(D("Firestore.settings",arguments,1),P("Firestore.settings","object",1,e),T(e,"persistence"))throw new C(w.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var t=new Do(e);if(this._firestoreClient&&!this._settings.isEqual(t))throw new C(w.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this._settings=t,void 0!==t.credentials&&(this._credentials=no(t.credentials))},e.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},e.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},e.prototype.enablePersistence=function(e){if(this._firestoreClient)throw new C(w.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var t=!1;return e&&(void 0!==e.experimentalTabSynchronization&&g("The 'experimentalTabSynchronization' setting has been renamed to 'synchronizeTabs'. In a future release, the setting will be removed and it is recommended that you update your firestore.enablePersistence() call to use 'synchronizeTabs'."),t=S(void 0!==e.synchronizeTabs?e.synchronizeTabs:e.experimentalTabSynchronization,!1)),this.configureClient(new Ki(this._settings.cacheSizeBytes,t))},e.prototype.clearPersistence=function(){var e=this,t=Un.buildStoragePrefix(this.makeDatabaseInfo()),n=new he;return this._queue.enqueueAndForgetEvenAfterShutdown((function(){return o.__awaiter(e,void 0,void 0,(function(){var e;return o.__generator(this,(function(r){switch(r.label){case 0:if(r.trys.push([0,2,,3]),void 0!==this._firestoreClient&&!this._firestoreClient.clientTerminated)throw new C(w.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return[4,Un.clearPersistence(t)];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise},e.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(e.prototype,"_isTerminated",{get:function(){return this.ensureClientConfigured(),this._firestoreClient.clientTerminated},enumerable:!0,configurable:!0}),e.prototype.waitForPendingWrites=function(){return this.ensureClientConfigured(),this._firestoreClient.waitForPendingWrites()},e.prototype.onSnapshotsInSync=function(e){return this.ensureClientConfigured(),ro(e)?this.onSnapshotsInSyncInternal(e):(P("Firestore.onSnapshotsInSync","function",1,e),this.onSnapshotsInSyncInternal({next:e}))},e.prototype.onSnapshotsInSyncInternal=function(e){var t=this,n=new Qi({next:function(){e.next&&e.next()},error:function(e){throw y("Uncaught Error in onSnapshotsInSync")}});return this._firestoreClient.addSnapshotsInSyncListener(n),function(){n.mute(),t._firestoreClient.removeSnapshotsInSyncListener(n)}},e.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new zi),this._firestoreClient},e.prototype.makeDatabaseInfo=function(){return new ne(this._databaseId,this._persistenceKey,this._settings.host,this._settings.ssl,this._settings.forceLongPolling)},e.prototype.configureClient=function(e){v(!!this._settings.host,"FirestoreSettings.host is not set"),v(!this._firestoreClient,"configureClient() called multiple times");var t=this.makeDatabaseInfo();return this._firestoreClient=new Gi(_.getPlatform(),t,this._credentials,this._queue),this._firestoreClient.start(e)},e.prototype.createDataConverter=function(e){return new _o((function(t){if(t instanceof xo){var n=e,r=t.firestore._databaseId;if(!r.isEqual(n))throw new C(w.INVALID_ARGUMENT,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new vo(e,t._key)}return t}))},e.databaseIdFromApp=function(e){var t=e.options;if(!T(t,"projectId"))throw new C(w.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=t.projectId;if(!n||"string"!=typeof n)throw new C(w.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new ie(n)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this._firebaseApp)throw new C(w.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._firebaseApp},enumerable:!0,configurable:!0}),e.prototype.collection=function(e){return D("Firestore.collection",arguments,1),P("Firestore.collection","non-empty string",1,e),this.ensureClientConfigured(),new jo(ae.fromString(e),this)},e.prototype.doc=function(e){return D("Firestore.doc",arguments,1),P("Firestore.doc","non-empty string",1,e),this.ensureClientConfigured(),xo.forPath(ae.fromString(e),this)},e.prototype.collectionGroup=function(e){if(D("Firestore.collectionGroup",arguments,1),P("Firestore.collectionGroup","non-empty string",1,e),e.indexOf("/")>=0)throw new C(w.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.ensureClientConfigured(),new Uo(new Kr(ae.EMPTY_PATH,e),this)},e.prototype.runTransaction=function(e){var t=this;return D("Firestore.runTransaction",arguments,1),P("Firestore.runTransaction","function",1,e),this.ensureClientConfigured().transaction((function(n){return e(new Oo(t,n))}))},e.prototype.batch=function(){return this.ensureClientConfigured(),new Po(this)},Object.defineProperty(e,"logLevel",{get:function(){switch(d()){case h.DEBUG:return"debug";case h.ERROR:return"error";case h.SILENT:return"silent";default:return y("Unknown log level: "+d())}},enumerable:!0,configurable:!0}),e.setLogLevel=function(e){switch(D("Firestore.setLogLevel",arguments,1),P("Firestore.setLogLevel","non-empty string",1,e),e){case"debug":p(h.DEBUG);break;case"error":p(h.ERROR);break;case"silent":p(h.SILENT);break;default:throw new C(w.INVALID_ARGUMENT,"Invalid log level: "+e)}},e.prototype._areTimestampsInSnapshotsEnabled=function(){return this._settings.timestampsInSnapshots},e}(),Oo=function(){function e(e,t){this._firestore=e,this._transaction=t}return e.prototype.get=function(e){var t=this;D("Transaction.get",arguments,1);var n=Ho("Transaction.get",e,this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return y("Mismatch in docs returned from document lookup.");var r=e[0];if(r instanceof Ht)return new Lo(t._firestore,n._key,null,!1,!1);if(r instanceof Wt)return new Lo(t._firestore,n._key,r,!1,!1);throw y("BatchGetDocumentsRequest returned unexpected document type: "+r.constructor.name)}))},e.prototype.set=function(e,t,n){O("Transaction.set",arguments,2,3);var r=Ho("Transaction.set",e,this._firestore),i=(n=qo("Transaction.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("Transaction.set",t,n.mergeFields):this._firestore._dataConverter.parseSetData("Transaction.set",t);return this._transaction.set(r._key,i),this},e.prototype.update=function(e,t,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return"string"==typeof t||t instanceof $i?(R("Transaction.update",arguments,3),r=Ho("Transaction.update",e,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",t,n,o)):(D("Transaction.update",arguments,2),r=Ho("Transaction.update",e,this._firestore),i=this._firestore._dataConverter.parseUpdateData("Transaction.update",t)),this._transaction.update(r._key,i),this},e.prototype.delete=function(e){D("Transaction.delete",arguments,1);var t=Ho("Transaction.delete",e,this._firestore);return this._transaction.delete(t._key),this},e}(),Po=function(){function e(e){this._firestore=e,this._mutations=[],this._committed=!1}return e.prototype.set=function(e,t,n){O("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=Ho("WriteBatch.set",e,this._firestore),i=(n=qo("WriteBatch.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("WriteBatch.set",t,n.mergeFields):this._firestore._dataConverter.parseSetData("WriteBatch.set",t);return this._mutations=this._mutations.concat(i.toMutations(r._key,vt.NONE)),this},e.prototype.update=function(e,t,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.verifyNotCommitted(),"string"==typeof t||t instanceof $i?(R("WriteBatch.update",arguments,3),r=Ho("WriteBatch.update",e,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",t,n,o)):(D("WriteBatch.update",arguments,2),r=Ho("WriteBatch.update",e,this._firestore),i=this._firestore._dataConverter.parseUpdateData("WriteBatch.update",t)),this._mutations=this._mutations.concat(i.toMutations(r._key,vt.exists(!0))),this},e.prototype.delete=function(e){D("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var t=Ho("WriteBatch.delete",e,this._firestore);return this._mutations=this._mutations.concat(new Et(t._key,vt.NONE)),this},e.prototype.commit=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){return this.verifyNotCommitted(),this._committed=!0,this._mutations.length>0?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]}))}))},e.prototype.verifyNotCommitted=function(){if(this._committed)throw new C(w.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}(),xo=function(){function e(e,t){this._key=e,this.firestore=t,this._firestoreClient=this.firestore.ensureClientConfigured()}return e.forPath=function(t,n){if(t.length%2!=0)throw new C(w.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(new ce(t),n)},Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new jo(this._key.path.popLast(),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),e.prototype.collection=function(e){if(D("DocumentReference.collection",arguments,1),P("DocumentReference.collection","non-empty string",1,e),!e)throw new C(w.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var t=ae.fromString(e);return new jo(this._key.path.child(t),this.firestore)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw H("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this._key.isEqual(t._key)},e.prototype.set=function(e,t){O("DocumentReference.set",arguments,1,2);var n=(t=qo("DocumentReference.set",t)).merge||t.mergeFields?this.firestore._dataConverter.parseMergeData("DocumentReference.set",e,t.mergeFields):this.firestore._dataConverter.parseSetData("DocumentReference.set",e);return this._firestoreClient.write(n.toMutations(this._key,vt.NONE))},e.prototype.update=function(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"==typeof e||e instanceof $i?(R("DocumentReference.update",arguments,2),n=this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",e,t,r)):(D("DocumentReference.update",arguments,1),n=this.firestore._dataConverter.parseUpdateData("DocumentReference.update",e)),this._firestoreClient.write(n.toMutations(this._key,vt.exists(!0)))},e.prototype.delete=function(){return D("DocumentReference.delete",arguments,0),this._firestoreClient.write([new Et(this._key,vt.NONE)])},e.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];O("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof e[i]||ro(e[i])||(W("DocumentReference.onSnapshot",r=e[i],["includeMetadataChanges"]),L("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return ro(e[i])?n=e[i]:(P("DocumentReference.onSnapshot","function",i,e[i]),x("DocumentReference.onSnapshot","function",i+1,e[i+1]),x("DocumentReference.onSnapshot","function",i+2,e[i+2]),n={next:e[i],error:e[i+1],complete:e[i+2]}),this.onSnapshotInternal(o,n)},e.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var i=new Qi({next:function(e){if(t.next){v(e.docs.size<=1,"Too many documents returned on a document query");var r=e.docs.get(n._key);t.next(new Lo(n.firestore,n._key,r,e.fromCache,e.hasPendingWrites))}},error:r}),o=this._firestoreClient.listen(Kr.atPath(this._key.path),i,e);return function(){i.mute(),n._firestoreClient.unlisten(o)}},e.prototype.get=function(e){var t=this;return O("DocumentReference.get",arguments,0,1),Wo("DocumentReference.get",e),new Promise((function(n,r){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentFromLocalCache(t._key).then((function(e){n(new Lo(t.firestore,t._key,e,!0,e instanceof Wt&&e.hasLocalMutations))}),r):t.getViaSnapshotListener(n,r,e)}))},e.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?t(new C(w.UNAVAILABLE,"Failed to get document because the client is offline.")):i.exists&&i.metadata.fromCache&&n&&"server"===n.source?t(new C(w.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):e(i)},error:t})},e}(),Mo=function(){function e(e,t){this.hasPendingWrites=e,this.fromCache=t}return e.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},e}(),Lo=function(){function e(e,t,n,r,i){this._firestore=e,this._key=t,this._document=n,this._fromCache=r,this._hasPendingWrites=i}return e.prototype.data=function(e){return O("DocumentSnapshot.data",arguments,0,1),e=Bo("DocumentSnapshot.data",e),this._document?this.convertObject(this._document.data(),It.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled())):void 0},e.prototype.get=function(e,t){if(O("DocumentSnapshot.get",arguments,1,2),t=Bo("DocumentSnapshot.get",t),this._document){var n=this._document.data().field(Co("DocumentSnapshot.get",e));if(null!==n)return this.convertValue(n,It.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new xo(this._key,this._firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return new Mo(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){if(!(t instanceof e))throw H("isEqual","DocumentSnapshot",1,t);return this._firestore===t._firestore&&this._fromCache===t._fromCache&&this._key.isEqual(t._key)&&(null===this._document?null===t._document:this._document.isEqual(t._document))},e.prototype.convertObject=function(e,t){var n=this,r={};return e.forEach((function(e,i){r[e]=n.convertValue(i,t)})),r},e.prototype.convertValue=function(e,t){if(e instanceof jt)return this.convertObject(e,t);if(e instanceof qt)return this.convertArray(e,t);if(e instanceof Ut){var n=e.value(t),r=this._firestore.ensureClientConfigured().databaseId();return e.databaseId.isEqual(r)||g("Document "+this._key.path+" contains a document reference within a different database ("+e.databaseId.projectId+"/"+e.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new xo(n,this._firestore)}return e.value(t)},e.prototype.convertArray=function(e,t){var n=this;return e.internalValue.map((function(e){return n.convertValue(e,t)}))},e}(),Fo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.data=function(t){var n=e.prototype.data.call(this,t);return v("object"==typeof n,"Document in a QueryDocumentSnapshot should exist"),n},t}(Lo),Uo=function(){function e(e,t){this._query=e,this.firestore=t}return e.prototype.where=function(t,n,r){D("Query.where",arguments,3),B("Query.where",3,r);var i,o=["<","<=","==",">=",">","array-contains","in","array-contains-any"];U("Query.where",o,2,n);var s=Co("Query.where",t),a=Gr.fromString(n);if(s.isKeyField()){if(a===Gr.ARRAY_CONTAINS||a===Gr.ARRAY_CONTAINS_ANY)throw new C(w.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+a.toString()+"' queries on FieldPath.documentId().");if(a===Gr.IN){this.validateDisjunctiveFilterElements(r,a);for(var l=[],u=0,c=r;u<c.length;u++){var h=c[u];l.push(this.parseDocumentIdValue(h))}i=new qt(l)}else i=this.parseDocumentIdValue(r)}else a!==Gr.IN&&a!==Gr.ARRAY_CONTAINS_ANY||this.validateDisjunctiveFilterElements(r,a),i=this.firestore._dataConverter.parseQueryValue("Query.where",r,a===Gr.IN);var d=Qr.create(s,a,i);return this.validateNewFilter(d),new e(this._query.addFilter(d),this.firestore)},e.prototype.orderBy=function(t,n){var r;if(O("Query.orderBy",arguments,1,2),x("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r=ei.ASCENDING;else{if("desc"!==n)throw new C(w.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r=ei.DESCENDING}if(null!==this._query.startAt)throw new C(w.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new C(w.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var i=Co("Query.orderBy",t),o=new ni(i,r);return this.validateNewOrderBy(o),new e(this._query.addOrderBy(o),this.firestore)},e.prototype.limit=function(t){return D("Query.limit",arguments,1),P("Query.limit","number",1,t),K("Query.limit",1,t),new e(this._query.withLimitToFirst(t),this.firestore)},e.prototype.limitToLast=function(t){return D("Query.limitToLast",arguments,1),P("Query.limitToLast","number",1,t),K("Query.limitToLast",1,t),new e(this._query.withLimitToLast(t),this.firestore)},e.prototype.startAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];R("Query.startAt",arguments,1);var i=this.boundFromDocOrFields("Query.startAt",t,n,!0);return new e(this._query.withStartAt(i),this.firestore)},e.prototype.startAfter=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];R("Query.startAfter",arguments,1);var i=this.boundFromDocOrFields("Query.startAfter",t,n,!1);return new e(this._query.withStartAt(i),this.firestore)},e.prototype.endBefore=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];R("Query.endBefore",arguments,1);var i=this.boundFromDocOrFields("Query.endBefore",t,n,!0);return new e(this._query.withEndAt(i),this.firestore)},e.prototype.endAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];R("Query.endAt",arguments,1);var i=this.boundFromDocOrFields("Query.endAt",t,n,!1);return new e(this._query.withEndAt(i),this.firestore)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw H("isEqual","Query",1,t);return this.firestore===t.firestore&&this._query.isEqual(t._query)},e.prototype.boundFromDocOrFields=function(e,t,n,r){if(B(e,1,t),t instanceof Lo){if(n.length>0)throw new C(w.INVALID_ARGUMENT,"Too many arguments provided to "+e+"().");var i=t;if(!i.exists)throw new C(w.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+e+"().");return this.boundFromDocument(e,i._document,r)}var o=[t].concat(n);return this.boundFromFields(e,o,r)},e.prototype.boundFromDocument=function(e,t,n){for(var r=[],i=0,o=this._query.orderBy;i<o.length;i++){var s=o[i];if(s.field.isKeyField())r.push(new Ut(this.firestore._databaseId,t.key));else{var a=t.field(s.field);if(a instanceof Lt)throw new C(w.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===a){var l=s.field.canonicalString();throw new C(w.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}r.push(a)}}return new ti(r,n)},e.prototype.boundFromFields=function(e,t,n){var r=this._query.explicitOrderBy;if(t.length>r.length)throw new C(w.INVALID_ARGUMENT,"Too many arguments provided to "+e+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<t.length;o++){var s=t[o];if(r[o].field.isKeyField()){if("string"!=typeof s)throw new C(w.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+e+"(), but got a "+typeof s);if(!this._query.isCollectionGroupQuery()&&-1!==s.indexOf("/"))throw new C(w.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+e+"() must be a plain document ID, but '"+s+"' contains a slash.");var a=this._query.path.child(ae.fromString(s));if(!ce.isDocumentKey(a))throw new C(w.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+e+"() must result in a valid document path, but '"+a+"' is not because it contains an odd number of segments.");var l=new ce(a);i.push(new Ut(this.firestore._databaseId,l))}else{var u=this.firestore._dataConverter.parseQueryValue(e,s);i.push(u)}}return new ti(i,n)},e.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];O("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof e[i]||ro(e[i])||(W("Query.onSnapshot",r=e[i],["includeMetadataChanges"]),L("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),ro(e[i])?n=e[i]:(P("Query.onSnapshot","function",i,e[i]),x("Query.onSnapshot","function",i+1,e[i+1]),x("Query.onSnapshot","function",i+2,e[i+2]),n={next:e[i],error:e[i+1],complete:e[i+2]}),this.validateHasExplicitOrderByForLimitToLast(this._query),this.onSnapshotInternal(r,n)},e.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var i=new Qi({next:function(e){t.next&&t.next(new Vo(n.firestore,n._query,e))},error:r}),o=this.firestore.ensureClientConfigured(),s=o.listen(this._query,i,e);return function(){i.mute(),o.unlisten(s)}},e.prototype.validateHasExplicitOrderByForLimitToLast=function(e){if(e.hasLimitToLast()&&0===e.explicitOrderBy.length)throw new C(w.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")},e.prototype.get=function(e){var t=this;return O("Query.get",arguments,0,1),Wo("Query.get",e),this.validateHasExplicitOrderByForLimitToLast(this._query),new Promise((function(n,r){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentsFromLocalCache(t._query).then((function(e){n(new Vo(t.firestore,t._query,e))}),r):t.getViaSnapshotListener(n,r,e)}))},e.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),i.metadata.fromCache&&n&&"server"===n.source?t(new C(w.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):e(i)},error:t})},e.prototype.parseDocumentIdValue=function(e){if("string"==typeof e){if(""===e)throw new C(w.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this._query.isCollectionGroupQuery()&&-1!==e.indexOf("/"))throw new C(w.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+e+"' contains a '/' character.");var t=this._query.path.child(ae.fromString(e));if(!ce.isDocumentKey(t))throw new C(w.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+t+"' is not because it has an odd number of segments ("+t.length+").");return new Ut(this.firestore._databaseId,new ce(t))}if(e instanceof xo)return new Ut(this.firestore._databaseId,e._key);throw new C(w.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+q(e)+".")},e.prototype.validateDisjunctiveFilterElements=function(e,t){if(!Array.isArray(e)||0===e.length)throw new C(w.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(e.length>10)throw new C(w.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.");if(e.indexOf(null)>=0)throw new C(w.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'null' in the value array.");if(e.filter((function(e){return Number.isNaN(e)})).length>0)throw new C(w.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'NaN' in the value array.")},e.prototype.validateNewFilter=function(e){if(e instanceof Qr){var t=[Gr.ARRAY_CONTAINS,Gr.ARRAY_CONTAINS_ANY],n=[Gr.IN,Gr.ARRAY_CONTAINS_ANY],r=t.indexOf(e.op)>=0,i=n.indexOf(e.op)>=0;if(e.isInequality()){var o=this._query.getInequalityFilterField();if(null!==o&&!o.isEqual(e.field))throw new C(w.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+e.field.toString()+"'");var s=this._query.getFirstOrderByField();null!==s&&this.validateOrderByAndInequalityMatch(e.field,s)}else if(i||r){var a=null;if(i&&(a=this._query.findFilterOperator(n)),null===a&&r&&(a=this._query.findFilterOperator(t)),null!=a)throw new C(w.INVALID_ARGUMENT,a===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+a.toString()+"' filters.")}}},e.prototype.validateNewOrderBy=function(e){if(null===this._query.getFirstOrderByField()){var t=this._query.getInequalityFilterField();null!==t&&this.validateOrderByAndInequalityMatch(t,e.field)}},e.prototype.validateOrderByAndInequalityMatch=function(e,t){if(!t.isEqual(e))throw new C(w.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+t.toString()+"' instead.")},e}(),Vo=function(){function e(e,t,n){this._firestore=e,this._originalQuery=t,this._snapshot=n,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new Mo(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(e.prototype,"docs",{get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),e.prototype.forEach=function(e,t){var n=this;O("QuerySnapshot.forEach",arguments,1,2),P("QuerySnapshot.forEach","function",1,e),this._snapshot.docs.forEach((function(r){e.call(t,n.convertToDocumentImpl(r))}))},Object.defineProperty(e.prototype,"query",{get:function(){return new Uo(this._originalQuery,this._firestore)},enumerable:!0,configurable:!0}),e.prototype.docChanges=function(e){e&&(W("QuerySnapshot.docChanges",e,["includeMetadataChanges"]),L("QuerySnapshot.docChanges","boolean","includeMetadataChanges",e.includeMetadataChanges));var t=!(!e||!e.includeMetadataChanges);if(t&&this._snapshot.excludesMetadataChanges)throw new C(w.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t,n){if(n.oldDocs.isEmpty()){var r,i=0;return n.docChanges.map((function(t){var o=new Fo(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key));return v(t.type===Ir.Added,"Invalid event type for first snapshot"),v(!r||n.query.docComparator(r,t.doc)<0,"Got added events in wrong order"),r=t.doc,{type:"added",doc:o,oldIndex:-1,newIndex:i++}}))}var o=n.oldDocs;return n.docChanges.filter((function(e){return t||e.type!==Ir.Metadata})).map((function(t){var r=new Fo(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key)),i=-1,s=-1;return t.type!==Ir.Added&&(v((i=o.indexOf(t.doc.key))>=0,"Index for document not found"),o=o.delete(t.doc.key)),t.type!==Ir.Removed&&(s=(o=o.add(t.doc)).indexOf(t.doc.key)),{type:Ko(t.type),doc:r,oldIndex:i,newIndex:s}}))}(this._firestore,t,this._snapshot),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},e.prototype.isEqual=function(t){if(!(t instanceof e))throw H("isEqual","QuerySnapshot",1,t);return this._firestore===t._firestore&&this._originalQuery.isEqual(t._originalQuery)&&this._snapshot.isEqual(t._snapshot)},e.prototype.convertToDocumentImpl=function(e){return new Fo(this._firestore,e.key,e,this.metadata.fromCache,this._snapshot.mutatedKeys.has(e.key))},e}();o.__spreadArrays(["length","forEach","map"],"undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach((function(e){try{Object.defineProperty(Vo.prototype.docChanges,e,{get:function(){return function(){throw new C(w.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(t){}}));var jo=function(e){function t(t,n){var r=e.call(this,Kr.atPath(t),n)||this;if(t.length%2!=1)throw new C(w.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t.canonicalString()+" has "+t.length);return r}return o.__extends(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._query.path.popLast();return e.isEmpty()?null:new xo(new ce(e),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),t.prototype.doc=function(e){if(O("CollectionReference.doc",arguments,0,1),0===arguments.length&&(e=Q.newId()),P("CollectionReference.doc","non-empty string",1,e),""===e)throw new C(w.INVALID_ARGUMENT,"Document path must be a non-empty string");var t=ae.fromString(e);return xo.forPath(this._query.path.child(t),this.firestore)},t.prototype.add=function(e){D("CollectionReference.add",arguments,1),P("CollectionReference.add","object",1,e);var t=this.doc();return t.set(e).then((function(){return t}))},t}(Uo);function qo(e,t){if(void 0===t)return{merge:!1};if(W(e,t,["merge","mergeFields"]),L(e,"boolean","merge",t.merge),"mergeFields","a string or a FieldPath",void 0!==(n=t.mergeFields)&&function(e,t,n,r,i){if(!(r instanceof Array))throw new C(w.INVALID_ARGUMENT,"Function "+e+"() requires its mergeFields option to be an array, but it was: "+q(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new C(w.INVALID_ARGUMENT,"Function "+e+"() requires all mergeFields elements to be a string or a FieldPath, but the value at index "+o+" was: "+q(r[o]))}(e,0,0,n,(function(e){return"string"==typeof e||e instanceof $i})),void 0!==t.mergeFields&&void 0!==t.merge)throw new C(w.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');var n;return t}function Bo(e,t){return void 0===t?{}:(W(e,t,["serverTimestamps"]),F(e,0,"serverTimestamps",t.serverTimestamps,["estimate","previous","none"]),t)}function Wo(e,t){x(e,"object",1,t),t&&(W(e,t,["source"]),F(e,0,"source",t.source,["default","server","cache"]))}function Ho(e,t,n){if(t instanceof xo){if(t.firestore!==n)throw new C(w.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}throw H(e,"DocumentReference",1,t)}function Ko(e){switch(e){case Ir.Added:return"added";case Ir.Modified:case Ir.Metadata:return"modified";case Ir.Removed:return"removed";default:return y("Unknown change type: "+e)}}var zo=E(Ro,"Use firebase.firestore() instead."),Go=E(Oo,"Use firebase.firestore().runTransaction() instead."),Qo=E(Po,"Use firebase.firestore().batch() instead."),$o=E(xo,"Use firebase.firestore().doc() instead."),Yo=E(Lo),Xo=E(Fo),Jo=E(Uo),Zo=E(Vo),es=E(jo,"Use firebase.firestore().collection() instead."),ts={Firestore:zo,GeoPoint:Br,Timestamp:Ee,Blob:te,Transaction:Go,WriteBatch:Qo,DocumentReference:$o,DocumentSnapshot:Yo,Query:Jo,QueryDocumentSnapshot:Xo,QuerySnapshot:Zo,CollectionReference:es,FieldPath:$i,FieldValue:co,setLogLevel:Ro.setLogLevel,CACHE_SIZE_UNLIMITED:No},ns=function(){function e(){}return e.prototype.addCallback=function(e){},e.prototype.shutdown=function(){},e}(),rs=function(){function e(){var e=this;this.networkAvailableListener=function(){return e.onNetworkAvailable()},this.networkUnavailableListener=function(){return e.onNetworkUnavailable()},this.callbacks=[],this.configureNetworkMonitoring()}return e.prototype.addCallback=function(e){this.callbacks.push(e)},e.prototype.shutdown=function(){window.removeEventListener("online",this.networkAvailableListener),window.removeEventListener("offline",this.networkUnavailableListener)},e.prototype.configureNetworkMonitoring=function(){window.addEventListener("online",this.networkAvailableListener),window.addEventListener("offline",this.networkUnavailableListener)},e.prototype.onNetworkAvailable=function(){f("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var e=0,t=this.callbacks;e<t.length;e++)(0,t[e])(0)},e.prototype.onNetworkUnavailable=function(){f("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var e=0,t=this.callbacks;e<t.length;e++)(0,t[e])(1)},e.isAvailable=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},e}(),is=function(){function e(e){this.sendFn=e.sendFn,this.closeFn=e.closeFn}return e.prototype.onOpen=function(e){v(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=e},e.prototype.onClose=function(e){v(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=e},e.prototype.onMessage=function(e){v(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=e},e.prototype.close=function(){this.closeFn()},e.prototype.send=function(e){this.sendFn(e)},e.prototype.callOnOpen=function(){v(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},e.prototype.callOnClose=function(e){v(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(e)},e.prototype.callOnMessage=function(e){v(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(e)},e}(),os="Connection",ss={BatchGetDocuments:"batchGet",Commit:"commit"},as="gl-js/ fire/"+u,ls=function(){function e(e){this.databaseId=e.databaseId,this.baseUrl=(e.ssl?"https":"http")+"://"+e.host,this.forceLongPolling=e.forceLongPolling}return e.prototype.modifyHeadersForRequest=function(e,t){if(t)for(var n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n]);e["X-Goog-Api-Client"]=as},e.prototype.invokeRPC=function(e,t,n){var r=this,i=this.makeUrl(e);return new Promise((function(s,a){var u=new l.XhrIo;u.listenOnce(l.EventType.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case l.ErrorCode.NO_ERROR:var t=u.getResponseJson();f(os,"XHR received:",JSON.stringify(t)),s(t);break;case l.ErrorCode.TIMEOUT:f(os,'RPC "'+e+'" timed out'),a(new C(w.DEADLINE_EXCEEDED,"Request time out"));break;case l.ErrorCode.HTTP_ERROR:var n=u.getStatus();if(f(os,'RPC "'+e+'" failed with status:',n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson().error;if(r&&r.status&&r.message){var i=(o=r.status.toLowerCase().replace("_","-"),Object.values(w).indexOf(o)>=0?o:w.UNKNOWN);a(new C(i,r.message))}else a(new C(w.UNKNOWN,"Server responded with status "+u.getStatus()))}else f(os,'RPC "'+e+'" failed'),a(new C(w.UNAVAILABLE,"Connection failed."));break;default:y('RPC "'+e+'" failed with unanticipated webchannel error '+u.getLastErrorCode()+": "+u.getLastError()+", giving up.")}}finally{f(os,'RPC "'+e+'" completed.')}var o}));var c=o.__assign({},t);delete c.database;var h=JSON.stringify(c);f(os,"XHR sending: ",i+" "+h);var d={"Content-Type":"text/plain"};r.modifyHeadersForRequest(d,n),u.send(i,"POST",h,d,15)}))},e.prototype.invokeStreamingRPC=function(e,t,n){return this.invokeRPC(e,t,n)},e.prototype.openStream=function(e,t){var n=[this.baseUrl,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=l.createWebChannelTransport(),i={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.modifyHeadersForRequest(i.initMessageHeaders,t),a.isReactNative()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");f(os,"Creating WebChannel: "+o+" "+i);var s=r.createWebChannel(o,i),u=!1,c=!1,h=new is({sendFn:function(e){c?f(os,"Not sending because WebChannel is closed:",e):(u||(f(os,"Opening WebChannel transport."),s.open(),u=!0),f(os,"WebChannel sending:",e),s.send(e))},closeFn:function(){return s.close()}}),d=function(e,t){s.listen(e,(function(e){try{t(e)}catch(n){setTimeout((function(){throw n}),0)}}))};return d(l.WebChannel.EventType.OPEN,(function(){c||f(os,"WebChannel transport opened.")})),d(l.WebChannel.EventType.CLOSE,(function(){c||(c=!0,f(os,"WebChannel transport closed"),h.callOnClose())})),d(l.WebChannel.EventType.ERROR,(function(e){c||(c=!0,f(os,"WebChannel transport errored:",e),h.callOnClose(new C(w.UNAVAILABLE,"The operation could not be completed")))})),d(l.WebChannel.EventType.MESSAGE,(function(e){if(!c){var t=e.data[0];v(!!t,"Got a webchannel message without data.");var n=t.error||t[0]&&t[0].error;if(n){f(os,"WebChannel received error:",n);var r=n.status,i=function(e){var t=wr[e];if(void 0!==t)return Er(t)}(r),o=n.message;void 0===i&&(i=w.INTERNAL,o="Unknown error status: "+r+" with message "+n.message),c=!0,h.callOnClose(new C(i,o)),s.close()}else f(os,"WebChannel received:",t),h.callOnMessage(t)}})),setTimeout((function(){h.callOnOpen()}),0),h},e.prototype.makeUrl=function(e){var t=ss[e];return v(void 0!==t,"Unknown REST mapping for: "+e),this.baseUrl+"/v1/projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents:"+t},e}();function us(e){!function(e){e.INTERNAL.registerService("firestore",(function(e){return new Ro(e)}),function(e){v(e&&"object"==typeof e,"shallowCopy() expects object parameter.");var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}(ts))}(e)}_.setPlatform(new(function(){function e(){this.emptyByteString="",this.base64Available="undefined"!=typeof atob}return Object.defineProperty(e.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),e.prototype.loadConnection=function(e){return Promise.resolve(new ls(e))},e.prototype.newConnectivityMonitor=function(){return rs.isAvailable()?new rs:new ns},e.prototype.newSerializer=function(e){return new vi(e,{useProto3Json:!0})},e.prototype.formatJSON=function(e){return JSON.stringify(e)},e.prototype.atob=function(e){return atob(e)},e.prototype.btoa=function(e){return btoa(e)},e}())),us(i),t.registerFirestore=us},ABqa:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r,o=n("mrSG"),s={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},a=function(e){function t(n,r,i){var o=e.call(this,r)||this;return Object.setPrototypeOf(o,t.prototype),o.code=n,o.details=i,o}return o.__extends(t,e),t}(Error),l=function(){function e(e){this.app=e}return e.prototype.getAuthToken=function(){return o.__awaiter(this,void 0,void 0,(function(){var e;return o.__generator(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.app.INTERNAL.getToken()];case 1:return(e=t.sent())?[2,e.accessToken]:[2,void 0];case 2:return t.sent(),[2,void 0];case 3:return[2]}}))}))},e.prototype.getInstanceIdToken=function(){return o.__awaiter(this,void 0,void 0,(function(){var e;return o.__generator(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),this.app.messaging?[4,this.app.messaging().getToken()]:[2,void 0];case 1:return(e=t.sent())?[2,e]:[2,void 0];case 2:return t.sent(),[2,void 0];case 3:return[2]}}))}))},e.prototype.getContext=function(){return o.__awaiter(this,void 0,void 0,(function(){var e,t;return o.__generator(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return e=n.sent(),[4,this.getInstanceIdToken()];case 2:return t=n.sent(),[2,{authToken:e,instanceIdToken:t}]}}))}))},e}();function u(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}var c=function(){function e(){}return e.prototype.encode=function(e){var t=this;if(null==e)return null;if(e instanceof Number&&(e=e.valueOf()),"number"==typeof e&&isFinite(e))return e;if(!0===e||!1===e)return e;if("[object String]"===Object.prototype.toString.call(e))return e;if(Array.isArray(e))return e.map((function(e){return t.encode(e)}));if("function"==typeof e||"object"==typeof e)return u(e,(function(e){return t.encode(e)}));throw new Error("Data cannot be encoded in JSON: "+e)},e.prototype.decode=function(e){var t=this;if(null==e)return e;if(e["@type"])switch(e["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(e.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+e);return n;default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map((function(e){return t.decode(e)})):"function"==typeof e||"object"==typeof e?u(e,(function(e){return t.decode(e)})):e},e}(),h=function(){function e(e,t){var n=this;void 0===t&&(t="us-central1"),this.app_=e,this.region_=t,this.serializer=new c,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return n.deleteService()}},this.contextProvider=new l(e),this.cancelAllRequests=new Promise((function(e){n.deleteService=function(){return e()}}))}return Object.defineProperty(e.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),e.prototype._url=function(e){var t=this.app_.options.projectId,n=this.region_;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+t+"/"+n+"/"+e:"https://"+n+"-"+t+".cloudfunctions.net/"+e},e.prototype.useFunctionsEmulator=function(e){this.emulatorOrigin=e},e.prototype.httpsCallable=function(e,t){var n=this;return function(r){return n.call(e,r,t||{})}},e.prototype.postJSON=function(e,t,n){return o.__awaiter(this,void 0,void 0,(function(){var r,i;return o.__generator(this,(function(o){switch(o.label){case 0:n.append("Content-Type","application/json"),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch(e,{method:"POST",body:JSON.stringify(t),headers:n})];case 2:return r=o.sent(),[3,4];case 3:return o.sent(),[2,{status:0,json:null}];case 4:i=null,o.label=5;case 5:return o.trys.push([5,7,,8]),[4,r.json()];case 6:return i=o.sent(),[3,8];case 7:return o.sent(),[3,8];case 8:return[2,{status:r.status,json:i}]}}))}))},e.prototype.call=function(e,t,n){return o.__awaiter(this,void 0,void 0,(function(){var r,i,l,u,c,h,d,p;return o.__generator(this,(function(o){switch(o.label){case 0:return r=this._url(e),t=this.serializer.encode(t),i={data:t},l=new Headers,[4,this.contextProvider.getContext()];case 1:return(u=o.sent()).authToken&&l.append("Authorization","Bearer "+u.authToken),u.instanceIdToken&&l.append("Firebase-Instance-ID-Token",u.instanceIdToken),c=n.timeout||7e4,[4,Promise.race([this.postJSON(r,i,l),(f=c,new Promise((function(e,t){setTimeout((function(){t(new a("deadline-exceeded","deadline-exceeded"))}),f)}))),this.cancelAllRequests])];case 2:if(!(h=o.sent()))throw new a("cancelled","Firebase Functions instance was deleted.");if(d=function(e,t,n){var r=function(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}}(e),i=r,o=void 0;try{var l=t&&t.error;if(l){var u=l.status;if("string"==typeof u){if(!s[u])return new a("internal","internal");r=s[u],i=u}var c=l.message;"string"==typeof c&&(i=c),void 0!==(o=l.details)&&(o=n.decode(o))}}catch(h){}return"ok"===r?null:new a(r,i,o)}(h.status,h.json,this.serializer))throw d;if(!h.json)throw new a("internal","Response is not valid JSON object.");if(void 0===(p=h.json.data)&&(p=h.json.result),void 0===p)throw new a("internal","Response is missing data field.");return[2,{data:this.serializer.decode(p)}]}var f}))}))},e}(),d="functions";function p(e,t,n){return new h(e,n)}function f(e){e.INTERNAL.registerService(d,p,{Functions:h},void 0,!0)}f(i),t.registerFunctions=f},LmZi:function(e,t,n){"use strict";n.r(t),n.d(t,"registerStorage",(function(){return Ye}));var r=n("wj3C"),i=n.n(r),o=n("mrSG"),s="firebasestorage.googleapis.com",a="storageBucket",l=12e4,u=6e5,c=-9007199254740991,h=function(){function e(e,t){this.code_=p(e),this.message_="Firebase Storage: "+t,this.serverResponse_=null,this.name_="FirebaseError"}return e.prototype.codeProp=function(){return this.code},e.prototype.codeEquals=function(e){return p(e)===this.codeProp()},e.prototype.serverResponseProp=function(){return this.serverResponse_},e.prototype.setServerResponseProp=function(e){this.serverResponse_=e},Object.defineProperty(e.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"code",{get:function(){return this.code_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"message",{get:function(){return this.message_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!0,configurable:!0}),e}(),d={UNKNOWN:"unknown",OBJECT_NOT_FOUND:"object-not-found",BUCKET_NOT_FOUND:"bucket-not-found",PROJECT_NOT_FOUND:"project-not-found",QUOTA_EXCEEDED:"quota-exceeded",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",RETRY_LIMIT_EXCEEDED:"retry-limit-exceeded",INVALID_CHECKSUM:"invalid-checksum",CANCELED:"canceled",INVALID_EVENT_NAME:"invalid-event-name",INVALID_URL:"invalid-url",INVALID_DEFAULT_BUCKET:"invalid-default-bucket",NO_DEFAULT_BUCKET:"no-default-bucket",CANNOT_SLICE_BLOB:"cannot-slice-blob",SERVER_FILE_WRONG_SIZE:"server-file-wrong-size",NO_DOWNLOAD_URL:"no-download-url",INVALID_ARGUMENT:"invalid-argument",INVALID_ARGUMENT_COUNT:"invalid-argument-count",APP_DELETED:"app-deleted",INVALID_ROOT_OPERATION:"invalid-root-operation",INVALID_FORMAT:"invalid-format",INTERNAL_ERROR:"internal-error"};function p(e){return"storage/"+e}function f(){return new h(d.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function g(){return new h(d.CANCELED,"User canceled the upload/download.")}function m(){return new h(d.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function y(){return new h(d.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function v(e,t,n){return new h(d.INVALID_ARGUMENT,"Invalid argument in `"+t+"` at index "+e+": "+n)}function _(){return new h(d.APP_DELETED,"The Firebase app was deleted.")}function b(e,t){return new h(d.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function w(e){throw new h(d.INTERNAL_ERROR,"Internal error: "+e)}var C={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function E(e){switch(e){case C.RAW:case C.BASE64:case C.BASE64URL:case C.DATA_URL:return;default:throw"Expected one of the event types: ["+C.RAW+", "+C.BASE64+", "+C.BASE64URL+", "+C.DATA_URL+"]."}}var T=function(){return function(e,t){this.data=e,this.contentType=t||null}}();function S(e,t){switch(e){case C.RAW:return new T(I(t));case C.BASE64:case C.BASE64URL:return new T(k(e,t));case C.DATA_URL:return new T((n=new A(t)).base64?k(C.BASE64,n.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw b(C.DATA_URL,"Malformed data URL.")}return I(t)}(n.rest),new A(t).contentType)}var n;throw f()}function I(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<e.length-1&&56320==(64512&e.charCodeAt(n+1))){var i=r,o=e.charCodeAt(++n);t.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189);else 56320==(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function k(e,t){switch(e){case C.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw b(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case C.BASE64URL:var i=-1!==t.indexOf("+"),o=-1!==t.indexOf("/");if(i||o)throw b(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(t)}catch(u){throw b(e,"Invalid character found")}for(var a=new Uint8Array(s.length),l=0;l<s.length;l++)a[l]=s.charCodeAt(l);return a}var A=function(){return function(e){this.base64=!1,this.contentType=null;var t=e.match(/^data:([^,]+)?,/);if(null===t)throw b(C.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r=t[1]||null;null!=r&&(this.base64=(n=r).length>=";base64".length&&";base64"===n.substring(n.length-";base64".length),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=e.substring(e.indexOf(",")+1)}}(),N={STATE_CHANGED:"state_changed"},D={RUNNING:"running",PAUSING:"pausing",PAUSED:"paused",SUCCESS:"success",CANCELING:"canceling",CANCELED:"canceled",ERROR:"error"},R={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function O(e){switch(e){case D.RUNNING:case D.PAUSING:case D.CANCELING:return R.RUNNING;case D.PAUSED:return R.PAUSED;case D.SUCCESS:return R.SUCCESS;case D.CANCELED:return R.CANCELED;case D.ERROR:default:return R.ERROR}}function P(e){return null!=e}function x(e){return void 0!==e}function M(e){return"function"==typeof e}function L(e){return"object"==typeof e}function F(e){return L(e)&&null!==e}function U(e){return"string"==typeof e||e instanceof String}function V(e){return j(e)&&Number.isInteger(e)}function j(e){return"number"==typeof e||e instanceof Number}function q(e){return B()&&e instanceof Blob}function B(){return"undefined"!=typeof Blob}var W=function(e){return e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT",e}({}),H=function(){function e(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=W.NO_ERROR,this.sendPromise_=new Promise((function(t){e.xhr_.addEventListener("abort",(function(){e.errorCode_=W.ABORT,t(e)})),e.xhr_.addEventListener("error",(function(){e.errorCode_=W.NETWORK_ERROR,t(e)})),e.xhr_.addEventListener("load",(function(){t(e)}))}))}return e.prototype.send=function(e,t,n,r){if(this.sent_)throw w("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),P(r))for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return P(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},e.prototype.getErrorCode=function(){if(!this.sent_)throw w("cannot .getErrorCode() before sending");return this.errorCode_},e.prototype.getStatus=function(){if(!this.sent_)throw w("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}},e.prototype.getResponseText=function(){if(!this.sent_)throw w("cannot .getResponseText() before sending");return this.xhr_.responseText},e.prototype.abort=function(){this.xhr_.abort()},e.prototype.getResponseHeader=function(e){return this.xhr_.getResponseHeader(e)},e.prototype.addUploadProgressListener=function(e){P(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",e)},e.prototype.removeUploadProgressListener=function(e){P(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",e)},e}(),K=function(){function e(){}return e.prototype.createXhrIo=function(){return new H},e}();function z(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function G(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=z();if(void 0!==n){for(var r=new n,i=0;i<e.length;i++)r.append(e[i]);return r.getBlob()}if(B())return new Blob(e);throw Error("This browser doesn't seem to support creating Blobs")}var Q=function(){function e(e,t){var n=0,r="";q(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}return e.prototype.size=function(){return this.size_},e.prototype.type=function(){return this.type_},e.prototype.slice=function(t,n){if(q(this.data_)){var r=(o=t,s=n,(i=this.data_).webkitSlice?i.webkitSlice(o,s):i.mozSlice?i.mozSlice(o,s):i.slice?i.slice(o,s):null);return null===r?null:new e(r)}var i,o,s;return new e(new Uint8Array(this.data_.buffer,t,n-t),!0)},e.getBlob=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(B()){var r=t.map((function(t){return t instanceof e?t.data_:t}));return new e(G.apply(null,r))}var i=t.map((function(e){return U(e)?S(C.RAW,e).data:e.data_})),o=0;i.forEach((function(e){o+=e.byteLength}));var s=new Uint8Array(o),a=0;return i.forEach((function(e){for(var t=0;t<e.length;t++)s[a++]=e[t]})),new e(s,!0)},e.prototype.uploadData=function(){return this.data_},e}(),$=function(){function e(e,t){this.bucket=e,this.path_=t}return Object.defineProperty(e.prototype,"path",{get:function(){return this.path_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!0,configurable:!0}),e.prototype.fullServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)},e.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},e.makeFromBucketSpec=function(t){var n;try{n=e.makeFromUrl(t)}catch(r){return new e(t,"")}if(""===n.path)return n;throw new h(d.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")},e.makeFromUrl=function(t){for(var n=null,r=new RegExp("^gs://([A-Za-z0-9.\\-_]+)(/(.*))?$","i"),i=s.replace(/[.]/g,"\\."),o=[{regex:r,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+i+"/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\-_]+)/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:function(e){e.path_=decodeURIComponent(e.path)}}],a=0;a<o.length;a++){var l=o[a],u=l.regex.exec(t);if(u){var c=u[l.indices.path];c||(c=""),n=new e(u[l.indices.bucket],c),l.postModify(n);break}}if(null==n)throw function(e){return new h(d.INVALID_URL,"Invalid URL '"+e+"'.")}(t);return n},e}();function Y(e){var t,n;try{t=JSON.parse(e)}catch(r){return null}return L(n=t)&&!Array.isArray(n)?t:null}function X(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}function J(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function Z(e){return"https://"+s+"/v0"+e}function ee(e){var t=encodeURIComponent,n="?";for(var r in e)e.hasOwnProperty(r)&&(n=n+(t(r)+"=")+t(e[r])+"&");return n.slice(0,-1)}function te(e,t){return t}var ne=function(){return function(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||te}}(),re=null;function ie(e,t,n){var r=Y(t);return null===r?null:function(e,t,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,t[s.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=new $(e.bucket,e.fullPath);return t.makeStorageReference(n)}})}(r,e),r}(e,r,n)}function oe(e,t){for(var n={},r=t.length,i=0;i<r;i++){var o=t[i];o.writable&&(n[o.server]=e[o.local])}return JSON.stringify(n)}function se(e){if(!L(e)||!e)throw"Expected Metadata object.";for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];if("customMetadata"===t){if(!L(n))throw"Expected object for 'customMetadata' mapping."}else if(F(n))throw"Mapping for '"+t+"' cannot be an object."}}var ae="maxResults",le=1e3,ue="pageToken",ce="prefixes",he="items";function de(e){if(!L(e)||!e)throw"Expected ListOptions object.";for(var t in e)if(t===ae){if(!V(e[ae])||e[ae]<=0)throw"Expected maxResults to be a positive number.";if(e[ae]>1e3)throw"Expected maxResults to be less than or equal to "+le+"."}else{if(t!==ue)throw"Unknown option: "+t;if(e[ue]&&!U(e[ue]))throw"Expected pageToken to be string."}}var pe=function(){return function(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function fe(e){if(!e)throw f()}function ge(e,t){return function(n,r){var i=ie(e,r,t);return fe(null!==i),i}}function me(e){return function(t,n){var r;return(r=401===t.getStatus()?new h(d.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?new h(d.QUOTA_EXCEEDED,"Quota for bucket '"+e.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===t.getStatus()?new h(d.UNAUTHORIZED,"User does not have permission to access '"+e.path+"'."):n).setServerResponseProp(n.serverResponseProp()),r}}function ye(e){var t=me(e);return function(n,r){var i=t(n,r);return 404===n.getStatus()&&(i=new h(d.OBJECT_NOT_FOUND,"Object '"+e.path+"' does not exist.")),i.setServerResponseProp(r.serverResponseProp()),i}}function ve(e,t,n){var r=Z(t.fullServerUrl()),i=e.maxOperationRetryTime(),o=new pe(r,"GET",ge(e,n),i);return o.errorHandler=ye(t),o}function _e(e,t,n,r,i){var o={};o.prefix=t.isRoot?"":t.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=Z(t.bucketOnlyServerUrl()),l=e.maxOperationRetryTime(),u=new pe(s,"GET",function(e){return function(t,n){var r=function(e,t){var n=Y(t);return null===n?null:function(e,t){var n={prefixes:[],items:[],nextPageToken:t.nextPageToken},r=e.bucket();if(null===r)throw new h(d.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+a+"' property when initializing the app?");if(t[ce])for(var i=0,o=t[ce];i<o.length;i++){var s=o[i].replace(/\/$/,""),l=e.makeStorageReference(new $(r,s));n.prefixes.push(l)}if(t[he])for(var u=0,c=t[he];u<c.length;u++)l=e.makeStorageReference(new $(r,c[u].name)),n.items.push(l);return n}(e,n)}(e,n);return fe(null!==r),r}}(e),l);return u.urlParams=o,u.errorHandler=me(t),u}function be(e,t,n){var r=Z(t.fullServerUrl()),i=e.maxOperationRetryTime(),o=new pe(r,"GET",function(e,t){return function(n,r){var i=ie(e,r,t);return fe(null!==i),function(e,t){var n=Y(t);if(null===n)return null;if(!U(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent;return r.split(",").map((function(t){var n=e.fullPath;return Z("/b/"+i(e.bucket)+"/o/"+i(n))+ee({alt:"media",token:t})}))[0]}(i,r)}}(e,n),i);return o.errorHandler=ye(t),o}function we(e,t,n,r){var i=Z(t.fullServerUrl()),o=oe(n,r),s=e.maxOperationRetryTime(),a=new pe(i,"PATCH",ge(e,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=ye(t),a}function Ce(e,t){var n=Z(t.fullServerUrl()),r=e.maxOperationRetryTime(),i=new pe(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=ye(t),i}function Ee(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return t&&t.type()||"application/octet-stream"}(0,t)),r}var Te=function(){return function(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null}}();function Se(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){fe(!1)}return fe(!!n&&-1!==(t||["active"]).indexOf(n)),n}var Ie=function(){return function(e,t,n){if(M(e)||P(t)||P(n))this.next=e,this.error=t||null,this.complete=n||null;else{var r=e;this.next=r.next||null,this.error=r.error||null,this.complete=r.complete||null}}}(),ke=function(){return function(e,t,n,r,i,o){this.bytesTransferred=e,this.totalBytes=t,this.state=n,this.metadata=r,this.task=i,this.ref=o}}();function Ae(e,t,n){for(var r=t.length,i=t.length,o=0;o<t.length;o++)if(t[o].optional){r=o;break}var s,a,l,u;if(!(r<=n.length&&n.length<=i))throw(s=r)===(a=i)?(l=s,u=1===s?"argument":"arguments"):(l="between "+s+" and "+a,u="arguments"),new h(d.INVALID_ARGUMENT_COUNT,"Invalid argument count in `"+e+"`: Expected "+l+" "+u+", received "+n.length+".");for(o=0;o<n.length;o++)try{t[o].validator(n[o])}catch(c){throw c instanceof Error?v(o,e,c.message):v(o,e,c)}}var Ne=function(){return function(e,t){var n=this;this.validator=function(t){n.optional&&!x(t)||e(t)},this.optional=!!t}}();function De(e,t){function n(e){if(!U(e))throw"Expected string."}var r,i,o;return e?(i=n,o=e,r=function(e){i(e),o(e)}):r=n,new Ne(r,t)}function Re(){return new Ne((function(e){if(!(e instanceof Uint8Array||e instanceof ArrayBuffer||B()&&e instanceof Blob))throw"Expected Blob or File."}))}function Oe(e){return new Ne(se,e)}function Pe(e){return new Ne(de,e)}function xe(){return new Ne((function(e){if(!(j(e)&&e>=0))throw"Expected a number 0 or greater."}))}function Me(e,t){return new Ne((function(t){if(!(null===t||P(t)&&t instanceof Object))throw"Expected an Object.";null!=e&&e(t)}),t)}function Le(e){return new Ne((function(e){if(null!==e&&!M(e))throw"Expected a Function."}),e)}function Fe(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];Promise.resolve().then((function(){return e.apply(void 0,t)}))}}var Ue=function(){function e(e,t,n,r,i,o){var s=this;void 0===o&&(o=null),this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=e,this.authWrapper_=t,this.location_=n,this.blob_=i,this.metadata_=o,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=D.RUNNING,this.errorHandler_=function(e){s.request_=null,s.chunkMultiplier_=1,e.codeEquals(d.CANCELED)?(s.needToFetchStatus_=!0,s.completeTransitions_()):(s.error_=e,s.transition_(D.ERROR))},this.metadataErrorHandler_=function(e){s.request_=null,e.codeEquals(d.CANCELED)?s.completeTransitions_():(s.error_=e,s.transition_(D.ERROR))},this.promise_=new Promise((function(e,t){s.resolve_=e,s.reject_=t,s.start_()})),this.promise_.then(null,(function(){}))}return e.prototype.makeProgressCallback_=function(){var e=this,t=this.transferred_;return function(n){return e.updateProgress_(t+n)}},e.prototype.shouldDoResumable_=function(e){return e.size()>262144},e.prototype.start_=function(){this.state_===D.RUNNING&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},e.prototype.resolveToken_=function(e){var t=this;this.authWrapper_.getAuthToken().then((function(n){switch(t.state_){case D.RUNNING:e(n);break;case D.CANCELING:t.transition_(D.CANCELED);break;case D.PAUSING:t.transition_(D.PAUSED)}}))},e.prototype.createResumable_=function(){var e=this;this.resolveToken_((function(t){var n=function(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),s=Ee(t,r,i),a={name:s.fullPath},l=Z(o),u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},c=oe(s,n),h=e.maxUploadRetryTime(),d=new pe(l,"POST",(function(e){var t;Se(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){fe(!1)}return fe(U(t)),t}),h);return d.urlParams=a,d.headers=u,d.body=c,d.errorHandler=me(t),d}(e.authWrapper_,e.location_,e.mappings_,e.blob_,e.metadata_),r=e.authWrapper_.makeRequest(n,t);e.request_=r,r.getPromise().then((function(t){e.request_=null,e.uploadUrl_=t,e.needToFetchStatus_=!1,e.completeTransitions_()}),e.errorHandler_)}))},e.prototype.fetchStatus_=function(){var e=this,t=this.uploadUrl_;this.resolveToken_((function(n){var r=function(e,t,n,r){var i=e.maxUploadRetryTime(),o=new pe(n,"POST",(function(e){var t=Se(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(o){fe(!1)}n||fe(!1);var i=Number(n);return fe(!isNaN(i)),new Te(i,r.size(),"final"===t)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=me(t),o}(e.authWrapper_,e.location_,t,e.blob_),i=e.authWrapper_.makeRequest(r,n);e.request_=i,i.getPromise().then((function(t){t=t,e.request_=null,e.updateProgress_(t.current),e.needToFetchStatus_=!1,t.finalized&&(e.needToFetchMetadata_=!0),e.completeTransitions_()}),e.errorHandler_)}))},e.prototype.continueUpload_=function(){var e=this,t=262144*this.chunkMultiplier_,n=new Te(this.transferred_,this.blob_.size()),r=this.uploadUrl_;this.resolveToken_((function(i){var o;try{o=function(e,t,n,r,i,o,s,a){var l=new Te(0,0);if(s?(l.current=s.current,l.total=s.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw new h(d.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var u=l.total-l.current,c=u;i>0&&(c=Math.min(c,i));var p=l.current,f={"X-Goog-Upload-Command":c===u?"upload, finalize":"upload","X-Goog-Upload-Offset":l.current},g=r.slice(p,p+c);if(null===g)throw m();var y=t.maxUploadRetryTime(),v=new pe(n,"POST",(function(e,n){var i,s=Se(e,["active","final"]),a=l.current+c,u=r.size();return i="final"===s?ge(t,o)(e,n):null,new Te(a,u,"final"===s,i)}),y);return v.headers=f,v.body=g.uploadData(),v.progressCallback=a||null,v.errorHandler=me(e),v}(e.location_,e.authWrapper_,r,e.blob_,t,e.mappings_,n,e.makeProgressCallback_())}catch(a){return e.error_=a,void e.transition_(D.ERROR)}var s=e.authWrapper_.makeRequest(o,i);e.request_=s,s.getPromise().then((function(t){e.increaseMultiplier_(),e.request_=null,e.updateProgress_(t.current),t.finalized?(e.metadata_=t.metadata,e.transition_(D.SUCCESS)):e.completeTransitions_()}),e.errorHandler_)}))},e.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},e.prototype.fetchMetadata_=function(){var e=this;this.resolveToken_((function(t){var n=ve(e.authWrapper_,e.location_,e.mappings_),r=e.authWrapper_.makeRequest(n,t);e.request_=r,r.getPromise().then((function(t){e.request_=null,e.metadata_=t,e.transition_(D.SUCCESS)}),e.metadataErrorHandler_)}))},e.prototype.oneShotUpload_=function(){var e=this;this.resolveToken_((function(t){var n=function(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();s["Content-Type"]="multipart/related; boundary="+a;var l=Ee(t,r,i),u=oe(l,n),c=Q.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+u+"\r\n--"+a+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",r,"\r\n--"+a+"--");if(null===c)throw m();var h={name:l.fullPath},d=Z(o),p=e.maxUploadRetryTime(),f=new pe(d,"POST",ge(e,n),p);return f.urlParams=h,f.headers=s,f.body=c.uploadData(),f.errorHandler=me(t),f}(e.authWrapper_,e.location_,e.mappings_,e.blob_,e.metadata_),r=e.authWrapper_.makeRequest(n,t);e.request_=r,r.getPromise().then((function(t){e.request_=null,e.metadata_=t,e.updateProgress_(e.blob_.size()),e.transition_(D.SUCCESS)}),e.errorHandler_)}))},e.prototype.updateProgress_=function(e){var t=this.transferred_;this.transferred_=e,this.transferred_!==t&&this.notifyObservers_()},e.prototype.transition_=function(e){if(this.state_!==e)switch(e){case D.CANCELING:case D.PAUSING:this.state_=e,null!==this.request_&&this.request_.cancel();break;case D.RUNNING:var t=this.state_===D.PAUSED;this.state_=e,t&&(this.notifyObservers_(),this.start_());break;case D.PAUSED:this.state_=e,this.notifyObservers_();break;case D.CANCELED:this.error_=g(),this.state_=e,this.notifyObservers_();break;case D.ERROR:case D.SUCCESS:this.state_=e,this.notifyObservers_()}},e.prototype.completeTransitions_=function(){switch(this.state_){case D.PAUSING:this.transition_(D.PAUSED);break;case D.CANCELING:this.transition_(D.CANCELED);break;case D.RUNNING:this.start_()}},Object.defineProperty(e.prototype,"snapshot",{get:function(){var e=O(this.state_);return new ke(this.transferred_,this.blob_.size(),e,this.metadata_,this,this.ref_)},enumerable:!0,configurable:!0}),e.prototype.on=function(e,t,n,r){function i(){if(e!==N.STATE_CHANGED)throw"Expected one of the event types: ["+N.STATE_CHANGED+"]."}var o="Expected a function or an Object with one of `next`, `error`, `complete` properties.",s=Le(!0).validator,a=Me(null,!0).validator;function l(e){try{return void s(e)}catch(t){}try{if(a(e),!(x(e.next)||x(e.error)||x(e.complete)))throw"";return}catch(t){throw o}}var u=[De(i),Me(l,!0),Le(!0),Le(!0)];Ae("on",u,arguments);var c=this;function h(e){return function(t,n,i){null!==e&&Ae("on",e,arguments);var o=new Ie(t,n,r);return c.addObserver_(o),function(){c.removeObserver_(o)}}}function d(e){if(null===e)throw o;l(e)}var p=[Me(d),Le(!0),Le(!0)],f=!(x(t)||x(n)||x(r));return f?h(p):h(null)(t,n,r)},e.prototype.then=function(e,t){return this.promise_.then(e,t)},e.prototype.catch=function(e){return this.then(null,e)},e.prototype.addObserver_=function(e){this.observers_.push(e),this.notifyObserver_(e)},e.prototype.removeObserver_=function(e){var t=this.observers_.indexOf(e);-1!==t&&this.observers_.splice(t,1)},e.prototype.notifyObservers_=function(){var e=this;this.finishPromise_(),this.observers_.slice().forEach((function(t){e.notifyObserver_(t)}))},e.prototype.finishPromise_=function(){if(null!==this.resolve_){var e=!0;switch(O(this.state_)){case R.SUCCESS:Fe(this.resolve_.bind(null,this.snapshot))();break;case R.CANCELED:case R.ERROR:Fe(this.reject_.bind(null,this.error_))();break;default:e=!1}e&&(this.resolve_=null,this.reject_=null)}},e.prototype.notifyObserver_=function(e){switch(O(this.state_)){case R.RUNNING:case R.PAUSED:e.next&&Fe(e.next.bind(e,this.snapshot))();break;case R.SUCCESS:e.complete&&Fe(e.complete.bind(e))();break;case R.CANCELED:case R.ERROR:e.error&&Fe(e.error.bind(e,this.error_))();break;default:e.error&&Fe(e.error.bind(e,this.error_))()}},e.prototype.resume=function(){Ae("resume",[],arguments);var e=this.state_===D.PAUSED||this.state_===D.PAUSING;return e&&this.transition_(D.RUNNING),e},e.prototype.pause=function(){Ae("pause",[],arguments);var e=this.state_===D.RUNNING;return e&&this.transition_(D.PAUSING),e},e.prototype.cancel=function(){Ae("cancel",[],arguments);var e=this.state_===D.RUNNING||this.state_===D.PAUSING;return e&&this.transition_(D.CANCELING),e},e}(),Ve=function(){function e(e,t){this.authWrapper=e,this.location=t instanceof $?t:$.makeFromUrl(t)}return e.prototype.toString=function(){return Ae("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},e.prototype.newRef=function(t,n){return new e(t,n)},e.prototype.mappings=function(){return function(){if(re)return re;var e=[];e.push(new ne("bucket")),e.push(new ne("generation")),e.push(new ne("metageneration")),e.push(new ne("name","fullPath",!0));var t=new ne("name");t.xform=function(e,t){return function(e){return!U(e)||e.length<2?e:J(e)}(t)},e.push(t);var n=new ne("size");return n.xform=function(e,t){return P(t)?Number(t):t},e.push(n),e.push(new ne("timeCreated")),e.push(new ne("updated")),e.push(new ne("md5Hash",null,!0)),e.push(new ne("cacheControl",null,!0)),e.push(new ne("contentDisposition",null,!0)),e.push(new ne("contentEncoding",null,!0)),e.push(new ne("contentLanguage",null,!0)),e.push(new ne("contentType",null,!0)),e.push(new ne("metadata","customMetadata",!0)),re=e}()},e.prototype.child=function(e){Ae("child",[De()],arguments);var t=X(this.location.path,e),n=new $(this.location.bucket,t);return this.newRef(this.authWrapper,n)},Object.defineProperty(e.prototype,"parent",{get:function(){var e=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this.location.path);if(null===e)return null;var t=new $(this.location.bucket,e);return this.newRef(this.authWrapper,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){var e=new $(this.location.bucket,"");return this.newRef(this.authWrapper,e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return J(this.location.path)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"storage",{get:function(){return this.authWrapper.service()},enumerable:!0,configurable:!0}),e.prototype.put=function(e,t){return void 0===t&&(t=null),Ae("put",[Re(),Oe(!0)],arguments),this.throwIfRoot_("put"),new Ue(this,this.authWrapper,this.location,this.mappings(),new Q(e),t)},e.prototype.putString=function(e,t,n){void 0===t&&(t=C.RAW),Ae("putString",[De(),De(E,!0),Oe(!0)],arguments),this.throwIfRoot_("putString");var r=S(t,e),i=Object.assign({},n);return!P(i.contentType)&&P(r.contentType)&&(i.contentType=r.contentType),new Ue(this,this.authWrapper,this.location,this.mappings(),new Q(r.data,!0),i)},e.prototype.delete=function(){var e=this;return Ae("delete",[],arguments),this.throwIfRoot_("delete"),this.authWrapper.getAuthToken().then((function(t){var n=Ce(e.authWrapper,e.location);return e.authWrapper.makeRequest(n,t).getPromise()}))},e.prototype.listAll=function(){Ae("listAll",[],arguments);var e={prefixes:[],items:[]};return this.listAllHelper(e).then((function(){return e}))},e.prototype.listAllHelper=function(e,t){return Object(o.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return Object(o.__generator)(this,(function(o){switch(o.label){case 0:return[4,this.list({pageToken:t})];case 1:return n=o.sent(),(r=e.prefixes).push.apply(r,n.prefixes),(i=e.items).push.apply(i,n.items),null==n.nextPageToken?[3,3]:[4,this.listAllHelper(e,n.nextPageToken)];case 2:o.sent(),o.label=3;case 3:return[2]}}))}))},e.prototype.list=function(e){Ae("list",[Pe(!0)],arguments);var t=this;return this.authWrapper.getAuthToken().then((function(n){var r=e||{},i=_e(t.authWrapper,t.location,"/",r.pageToken,r.maxResults);return t.authWrapper.makeRequest(i,n).getPromise()}))},e.prototype.getMetadata=function(){var e=this;return Ae("getMetadata",[],arguments),this.throwIfRoot_("getMetadata"),this.authWrapper.getAuthToken().then((function(t){var n=ve(e.authWrapper,e.location,e.mappings());return e.authWrapper.makeRequest(n,t).getPromise()}))},e.prototype.updateMetadata=function(e){var t=this;return Ae("updateMetadata",[Oe()],arguments),this.throwIfRoot_("updateMetadata"),this.authWrapper.getAuthToken().then((function(n){var r=we(t.authWrapper,t.location,e,t.mappings());return t.authWrapper.makeRequest(r,n).getPromise()}))},e.prototype.getDownloadURL=function(){var e=this;return Ae("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL"),this.authWrapper.getAuthToken().then((function(t){var n=be(e.authWrapper,e.location,e.mappings());return e.authWrapper.makeRequest(n,t).getPromise().then((function(e){if(null===e)throw y();return e}))}))},e.prototype.throwIfRoot_=function(e){if(""===this.location.path)throw function(e){return new h(d.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)},e}(),je=function(){function e(e){this.promise_=Promise.reject(e)}return e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){},e}(),qe=function(){function e(){this.map=new Map,this.id=c}return e.prototype.addRequest=function(e){var t=this,n=this.id;this.id++,this.map.set(n,e),e.getPromise().then((function(){return t.map.delete(n)}),(function(){return t.map.delete(n)}))},e.prototype.clear=function(){this.map.forEach((function(e){e&&e.cancel(!0)})),this.map.clear()},e}(),Be=function(){function e(t,n,r,i,o){if(this.bucket_=null,this.deleted_=!1,this.app_=t,null!==this.app_){var s=this.app_.options;P(s)&&(this.bucket_=e.extractBucket_(s))}this.storageRefMaker_=n,this.requestMaker_=r,this.pool_=o,this.service_=i,this.maxOperationRetryTime_=l,this.maxUploadRetryTime_=u,this.requestMap_=new qe}return e.extractBucket_=function(e){var t=e[a]||null;return null==t?null:$.makeFromBucketSpec(t).bucket},e.prototype.getAuthToken=function(){return null!==this.app_&&P(this.app_.INTERNAL)&&P(this.app_.INTERNAL.getToken)?this.app_.INTERNAL.getToken().then((function(e){return null!==e?e.accessToken:null}),(function(){return null})):Promise.resolve(null)},e.prototype.bucket=function(){if(this.deleted_)throw _();return this.bucket_},e.prototype.service=function(){return this.service_},e.prototype.makeStorageReference=function(e){return this.storageRefMaker_(this,e)},e.prototype.makeRequest=function(e,t){if(this.deleted_)return new je(_());var n=this.requestMaker_(e,t,this.pool_);return this.requestMap_.addRequest(n),n},e.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requestMap_.clear()},e.prototype.maxUploadRetryTime=function(){return this.maxUploadRetryTime_},e.prototype.setMaxUploadRetryTime=function(e){this.maxUploadRetryTime_=e},e.prototype.maxOperationRetryTime=function(){return this.maxOperationRetryTime_},e.prototype.setMaxOperationRetryTime=function(e){this.maxOperationRetryTime_=e},e}(),We=function(){function e(e,t,n,r,i,o,s,a,l,u,c){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=u,this.timeout_=l,this.pool_=c,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return e.prototype.start_=function(){var e=this;function t(t,n){var r,i=e.resolve_,o=e.reject_,s=n.xhr;if(n.wasSuccessCode)try{var a=e.callback_(s,s.getResponseText());x(a)?i(a):i()}catch(l){o(l)}else null!==s?((r=f()).setServerResponseProp(s.getResponseText()),o(e.errorCallback_?e.errorCallback_(s,r):r)):o(r=n.canceled?e.appDelete_?_():g():new h(d.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again."))}this.canceled_?t(0,new He(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,s=!1,a=0;function l(){return 2===a}var u=!1;function c(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];u||(u=!0,t.apply(null,e))}function h(t){i=setTimeout((function(){i=null,e(d,l())}),t)}function d(e){for(var t,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];u||(e?c.call.apply(c,Object(o.__spreadArrays)([null,e],n)):l()||s?c.call.apply(c,Object(o.__spreadArrays)([null,e],n)):(r<64&&(r*=2),1===a?(a=2,t=0):t=1e3*(r+Math.random()),h(t)))}var p=!1;function f(e){p||(p=!0,u||(null!==i?(e||(a=2),clearTimeout(i),h(0)):e||(a=1)))}return h(0),setTimeout((function(){s=!0,f(!0)}),n),f}((function(t,n){if(n)t(!1,new He(!1,null,!0));else{var r=e.pool_.createXhrIo();e.pendingXhr_=r,null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(n){null!==e.progressCallback_&&n.removeUploadProgressListener(i),e.pendingXhr_=null;var r=(n=n).getErrorCode()===W.NO_ERROR,o=n.getStatus();if(r&&!e.isRetryStatusCode_(o)){var s=-1!==e.successCodes_.indexOf(o);t(!0,new He(s,n))}else{var a=n.getErrorCode()===W.ABORT;t(!1,new He(!1,null,a))}}))}function i(t){null!==e.progressCallback_&&e.progressCallback_(t.loaded,t.lengthComputable?t.total:-1)}}),t,this.timeout_)},e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},e.prototype.isRetryStatusCode_=function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r},e}(),He=function(){return function(e,t,n){this.wasSuccessCode=e,this.xhr=t,this.canceled=!!n}}();function Ke(e,t,n){var r=ee(e.urlParams),o=e.url+r,s=Object.assign({},e.headers);return function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(s,t),function(e){e["X-Firebase-Storage-Version"]="webjs/"+(void 0!==i.a?i.a.SDK_VERSION:"AppManager")}(s),new We(o,e.method,s,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,n)}var ze=function(){function e(e,t,n){if(this.bucket_=null,this.authWrapper_=new Be(e,(function(e,t){return new Ve(e,t)}),Ke,this,t),this.app_=e,null!=n)this.bucket_=$.makeFromBucketSpec(n);else{var r=this.authWrapper_.bucket();null!=r&&(this.bucket_=new $(r,""))}this.internals_=new Ge(this)}return e.prototype.ref=function(e){function t(e){if("string"!=typeof e)throw"Path is not a string.";if(/^[A-Za-z]+:\/\//.test(e))throw"Expected child path but got a URL, use refFromURL instead."}if(Ae("ref",[De(t,!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var n=new Ve(this.authWrapper_,this.bucket_);return null!=e?n.child(e):n},e.prototype.refFromURL=function(e){function t(e){if("string"!=typeof e)throw"Path is not a string.";if(!/^[A-Za-z]+:\/\//.test(e))throw"Expected full URL but got a child path, use ref instead.";try{$.makeFromUrl(e)}catch(t){throw"Expected valid full URL but got an invalid one."}}return Ae("refFromURL",[De(t,!1)],arguments),new Ve(this.authWrapper_,e)},Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this.authWrapper_.maxUploadRetryTime()},enumerable:!0,configurable:!0}),e.prototype.setMaxUploadRetryTime=function(e){Ae("setMaxUploadRetryTime",[xe()],arguments),this.authWrapper_.setMaxUploadRetryTime(e)},e.prototype.setMaxOperationRetryTime=function(e){Ae("setMaxOperationRetryTime",[xe()],arguments),this.authWrapper_.setMaxOperationRetryTime(e)},Object.defineProperty(e.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!0,configurable:!0}),e}(),Ge=function(){function e(e){this.service_=e}return e.prototype.delete=function(){return this.service_.authWrapper_.deleteApp(),Promise.resolve()},e}(),Qe="storage";function $e(e,t,n){return new ze(e,new K,n)}function Ye(e){e.INTERNAL.registerService(Qe,$e,{TaskState:R,TaskEvent:N,StringFormat:C,Storage:ze,Reference:Ve},void 0,!0)}Ye(i.a)},NSPt:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i,o=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r,s=n("mrSG"),a=n("zVF4"),l=n("q/0M"),u=function(){function e(e){this.domStorage_=e,this.prefix_="firebase:"}return e.prototype.set=function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),a.stringify(t))},e.prototype.get=function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:a.jsonEval(t)},e.prototype.remove=function(e){this.domStorage_.removeItem(this.prefixedName_(e))},e.prototype.prefixedName_=function(e){return this.prefix_+e},e.prototype.toString=function(){return this.domStorage_.toString()},e}(),c=function(){function e(){this.cache_={},this.isInMemoryStorage=!0}return e.prototype.set=function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t},e.prototype.get=function(e){return a.contains(this.cache_,e)?this.cache_[e]:null},e.prototype.remove=function(e){delete this.cache_[e]},e}(),h=function(e){try{if("undefined"!=typeof window&&void 0!==window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new u(t)}}catch(n){}return new c},d=h("localStorage"),p=h("sessionStorage"),f=new l.Logger("@firebase/database"),g=(i=1,function(){return i++}),m=function(e){var t=a.stringToByteArray(e),n=new a.Sha1;n.update(t);var r=n.digest();return a.base64.encodeByteArray(r)},y=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n="",r=0;r<e.length;r++)Array.isArray(e[r])||e[r]&&"object"==typeof e[r]&&"number"==typeof e[r].length?n+=y.apply(null,e[r]):n+="object"==typeof e[r]?a.stringify(e[r]):e[r],n+=" ";return n},v=null,_=!0,b=function(e,t){a.assert(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(f.logLevel=l.LogLevel.VERBOSE,v=f.log.bind(f),t&&p.set("logging_enabled",!0)):"function"==typeof e?v=e:(v=null,p.remove("logging_enabled"))},w=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!0===_&&(_=!1,null===v&&!0===p.get("logging_enabled")&&b(!0)),v){var n=y.apply(null,e);v(n)}},C=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];w.apply(void 0,s.__spread([e],t))}},E=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE INTERNAL ERROR: "+y.apply(void 0,s.__spread(e));f.error(n)},T=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE FATAL ERROR: "+y.apply(void 0,s.__spread(e));throw f.error(n),new Error(n)},S=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE WARNING: "+y.apply(void 0,s.__spread(e));f.warn(n)},I=function(e){return"number"==typeof e&&(e!=e||e==Number.POSITIVE_INFINITY||e==Number.NEGATIVE_INFINITY)},k="[MIN_NAME]",A="[MAX_NAME]",N=function(e,t){if(e===t)return 0;if(e===k||t===A)return-1;if(t===k||e===A)return 1;var n=G(e),r=G(t);return null!==n?null!==r?n-r==0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},D=function(e,t){return e===t?0:e<t?-1:1},R=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+a.stringify(t))},O=function(e){if("object"!=typeof e||null===e)return a.stringify(e);var t=[];for(var n in e)t.push(n);t.sort();for(var r="{",i=0;i<t.length;i++)0!==i&&(r+=","),r+=a.stringify(t[i]),r+=":",r+=O(e[t[i]]);return r+"}"},P=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)r.push(e.substring(i,i+t>n?n:i+t));return r};function x(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var M,L,F,U,V,j,q,B,W,H,K=function(e){var t,n,r,i,o,s,l;for(a.assert(!I(e),"Invalid JSON number"),0===e?(n=0,r=0,t=1/e==-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),1023))+1023,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074)))),s=[],o=52;o;o-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(t?1:0),s.reverse(),l=s.join("");var u="";for(o=0;o<64;o+=8){var c=parseInt(l.substr(o,8),2).toString(16);1===c.length&&(c="0"+c),u+=c}return u.toLowerCase()},z=new RegExp("^-?(0*)\\d{1,10}$"),G=function(e){if(z.test(e)){var t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},Q=function(e){try{e()}catch(t){setTimeout((function(){throw S("Exception was thrown by user callback.",t.stack||""),t}),Math.floor(0))}},$=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Y=function(e,t){var n=setTimeout(e,t);return"object"==typeof n&&n.unref&&n.unref(),n},X=function(){function e(e,t){if(void 0===t){this.pieces_=e.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}return Object.defineProperty(e,"Empty",{get:function(){return new e("")},enumerable:!0,configurable:!0}),e.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},e.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},e.prototype.popFront=function(){var t=this.pieceNum_;return t<this.pieces_.length&&t++,new e(this.pieces_,t)},e.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},e.prototype.toString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"},e.prototype.toUrlEncodedString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+encodeURIComponent(String(this.pieces_[t])));return e||"/"},e.prototype.slice=function(e){return void 0===e&&(e=0),this.pieces_.slice(this.pieceNum_+e)},e.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var t=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)t.push(this.pieces_[n]);return new e(t,0)},e.prototype.child=function(t){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(t instanceof e)for(r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{var i=t.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new e(n,0)},e.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},e.relativePath=function(t,n){var r=t.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return e.relativePath(t.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+t+")")},e.comparePaths=function(e,t){for(var n=e.slice(),r=t.slice(),i=0;i<n.length&&i<r.length;i++){var o=N(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},e.prototype.equals=function(e){if(this.getLength()!==e.getLength())return!1;for(var t=this.pieceNum_,n=e.pieceNum_;t<=this.pieces_.length;t++,n++)if(this.pieces_[t]!==e.pieces_[n])return!1;return!0},e.prototype.contains=function(e){var t=this.pieceNum_,n=e.pieceNum_;if(this.getLength()>e.getLength())return!1;for(;t<this.pieces_.length;){if(this.pieces_[t]!==e.pieces_[n])return!1;++t,++n}return!0},e}(),J=function(){function e(e,t){this.errorPrefix_=t,this.parts_=e.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=a.stringLength(this.parts_[n]);this.checkValid_()}return Object.defineProperty(e,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!0,configurable:!0}),Object.defineProperty(e,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!0,configurable:!0}),e.prototype.push=function(e){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(e),this.byteLength_+=a.stringLength(e),this.checkValid_()},e.prototype.pop=function(){var e=this.parts_.pop();this.byteLength_-=a.stringLength(e),this.parts_.length>0&&(this.byteLength_-=1)},e.prototype.checkValid_=function(){if(this.byteLength_>e.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+e.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>e.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+e.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},e.prototype.toErrorString=function(){return 0==this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},e}(),Z="long_polling",ee=function(){function e(e,t,n,r,i,o){void 0===i&&(i=""),void 0===o&&(o=!1),this.secure=t,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.includeNamespaceInQueryParams=o,this.host=e.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=d.get("host:"+e)||this.host}return e.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},e.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},e.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},e.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},e.prototype.updateHost=function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&d.set("host:"+this.host,this.internalHost))},e.prototype.connectionURL=function(e,t){var n;if(a.assert("string"==typeof e,"typeof type must == string"),a.assert("object"==typeof t,"typeof params must == object"),"websocket"===e)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(e!==Z)throw new Error("Unknown connection type: "+e);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(t.ns=this.namespace);var r=[];return x(t,(function(e,t){r.push(e+"="+t)})),n+r.join("&")},e.prototype.toString=function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e},e.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},e}(),te=function(e){var t=ne(e),n=t.namespace;return"firebase"===t.domain&&T(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!=n||"localhost"===t.domain||T("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&S("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new ee(t.host,t.secure,n,"ws"===t.scheme||"wss"===t.scheme,"",n!=t.subdomain),path:new X(t.pathString)}},ne=function(e){var t="",n="",r="",i="",o="",a=!0,l="https",u=443;if("string"==typeof e){var c=e.indexOf("//");c>=0&&(l=e.substring(0,c-1),e=e.substring(c+2));var h=e.indexOf("/");-1===h&&(h=e.length);var d=e.indexOf("?");-1===d&&(d=e.length),t=e.substring(0,Math.min(h,d)),h<d&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}t+="/"+i}return t}(e.substring(h,d)));var p=function(e){var t,n,r={};"?"===e.charAt(0)&&(e=e.substring(1));try{for(var i=s.__values(e.split("&")),o=i.next();!o.done;o=i.next()){var a=o.value;if(0!==a.length){var l=a.split("=");2===l.length?r[decodeURIComponent(l[0])]=decodeURIComponent(l[1]):S("Invalid query segment '"+a+"' in query '"+e+"'")}}}catch(u){t={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}(e.substring(Math.min(e.length,d)));(c=t.indexOf(":"))>=0?(a="https"===l||"wss"===l,u=parseInt(t.substring(c+1),10)):c=e.length;var f=t.split(".");3===f.length?(n=f[1],o=r=f[0].toLowerCase()):2===f.length?n=f[0]:"localhost"===f[0].slice(0,c).toLowerCase()&&(n="localhost"),"ns"in p&&(o=p.ns)}return{host:t,port:u,domain:n,subdomain:r,secure:a,scheme:l,pathString:i,namespace:o}},re=/[\[\].#$\/\u0000-\u001F\u007F]/,ie=/[\[\].#$\u0000-\u001F\u007F]/,oe=function(e){return"string"==typeof e&&0!==e.length&&!re.test(e)},se=function(e){return"string"==typeof e&&0!==e.length&&!ie.test(e)},ae=function(e){return null===e||"string"==typeof e||"number"==typeof e&&!I(e)||e&&"object"==typeof e&&a.contains(e,".sv")},le=function(e,t,n,r,i){i&&void 0===n||ue(a.errorPrefix(e,t,i),n,r)},ue=function(e,t,n){var r=n instanceof X?new J(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+r.toErrorString());if("function"==typeof t)throw new Error(e+"contains a function "+r.toErrorString()+" with contents = "+t.toString());if(I(t))throw new Error(e+"contains "+t.toString()+" "+r.toErrorString());if("string"==typeof t&&t.length>10485760/3&&a.stringLength(t)>10485760)throw new Error(e+"contains a string greater than 10485760 utf8 bytes "+r.toErrorString()+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){var i=!1,o=!1;if(x(t,(function(t,n){if(".value"===t)i=!0;else if(".priority"!==t&&".sv"!==t&&(o=!0,!oe(t)))throw new Error(e+" contains an invalid key ("+t+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(t),ue(e,n,r),r.pop()})),i&&o)throw new Error(e+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},ce=function(e,t,n,r,i){if(!i||void 0!==n){var o=a.errorPrefix(e,t,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var s=[];x(n,(function(e,t){var n=new X(e);if(ue(o,t,r.child(n)),".priority"===n.getBack()&&!ae(t))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(n)})),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=(r=t[n]).slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!oe(i[o]))throw new Error(e+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(X.comparePaths);var s=null;for(n=0;n<t.length;n++){if(r=t[n],null!==s&&s.contains(r))throw new Error(e+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(o,s)}},he=function(e,t,n,r){if(!r||void 0!==n){if(I(n))throw new Error(a.errorPrefix(e,t,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ae(n))throw new Error(a.errorPrefix(e,t,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},de=function(e,t,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(a.errorPrefix(e,t,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},pe=function(e,t,n,r){if(!(r&&void 0===n||oe(n)))throw new Error(a.errorPrefix(e,t,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},fe=function(e,t,n,r){if(!(r&&void 0===n||se(n)))throw new Error(a.errorPrefix(e,t,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ge=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),fe(e,t,n,r)},me=function(e,t){if(".info"===t.getFront())throw new Error(e+" failed = Can't modify data under /.info/")},ye=function(e,t,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!oe(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),se(e)}(r))throw new Error(a.errorPrefix(e,t,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},ve=function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(a.errorPrefix(e,t,r)+"must be a boolean.")},_e=function(){function e(e,t){this.repo_=e,this.path_=t}return e.prototype.cancel=function(e){a.validateArgCount("OnDisconnect.cancel",0,1,arguments.length),a.validateCallback("OnDisconnect.cancel",1,e,!0);var t=new a.Deferred;return this.repo_.onDisconnectCancel(this.path_,t.wrapCallback(e)),t.promise},e.prototype.remove=function(e){a.validateArgCount("OnDisconnect.remove",0,1,arguments.length),me("OnDisconnect.remove",this.path_),a.validateCallback("OnDisconnect.remove",1,e,!0);var t=new a.Deferred;return this.repo_.onDisconnectSet(this.path_,null,t.wrapCallback(e)),t.promise},e.prototype.set=function(e,t){a.validateArgCount("OnDisconnect.set",1,2,arguments.length),me("OnDisconnect.set",this.path_),le("OnDisconnect.set",1,e,this.path_,!1),a.validateCallback("OnDisconnect.set",2,t,!0);var n=new a.Deferred;return this.repo_.onDisconnectSet(this.path_,e,n.wrapCallback(t)),n.promise},e.prototype.setWithPriority=function(e,t,n){a.validateArgCount("OnDisconnect.setWithPriority",2,3,arguments.length),me("OnDisconnect.setWithPriority",this.path_),le("OnDisconnect.setWithPriority",1,e,this.path_,!1),he("OnDisconnect.setWithPriority",2,t,!1),a.validateCallback("OnDisconnect.setWithPriority",3,n,!0);var r=new a.Deferred;return this.repo_.onDisconnectSetWithPriority(this.path_,e,t,r.wrapCallback(n)),r.promise},e.prototype.update=function(e,t){if(a.validateArgCount("OnDisconnect.update",1,2,arguments.length),me("OnDisconnect.update",this.path_),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,S("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ce("OnDisconnect.update",1,e,this.path_,!1),a.validateCallback("OnDisconnect.update",2,t,!0);var i=new a.Deferred;return this.repo_.onDisconnectUpdate(this.path_,e,i.wrapCallback(t)),i.promise},e}(),be=function(){function e(e,t){this.committed=e,this.snapshot=t}return e.prototype.toJSON=function(){return a.validateArgCount("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}(),we=(M="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",L=0,F=[],function(e){var t,n=e===L;L=e;var r=new Array(8);for(t=7;t>=0;t--)r[t]=M.charAt(e%64),e=Math.floor(e/64);a.assert(0===e,"Cannot push at time == 0");var i=r.join("");if(n){for(t=11;t>=0&&63===F[t];t--)F[t]=0;F[t]++}else for(t=0;t<12;t++)F[t]=Math.floor(64*Math.random());for(t=0;t<12;t++)i+=M.charAt(F[t]);return a.assert(20===i.length,"nextPushId: Length should be 20."),i}),Ce=function(){function e(e,t){this.name=e,this.node=t}return e.Wrap=function(t,n){return new e(t,n)},e}(),Ee=function(){function e(){}return e.prototype.getCompare=function(){return this.compare.bind(this)},e.prototype.indexedValueChanged=function(e,t){var n=new Ce(k,e),r=new Ce(k,t);return 0!==this.compare(n,r)},e.prototype.minPost=function(){return Ce.MIN},e}(),Te=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(t,e),Object.defineProperty(t,"__EMPTY_NODE",{get:function(){return U},set:function(e){U=e},enumerable:!0,configurable:!0}),t.prototype.compare=function(e,t){return N(e.name,t.name)},t.prototype.isDefinedOn=function(e){throw a.assertionError("KeyIndex.isDefinedOn not expected to be called.")},t.prototype.indexedValueChanged=function(e,t){return!1},t.prototype.minPost=function(){return Ce.MIN},t.prototype.maxPost=function(){return new Ce(A,U)},t.prototype.makePost=function(e,t){return a.assert("string"==typeof e,"KeyIndex indexValue must always be a string."),new Ce(e,U)},t.prototype.toString=function(){return".key"},t}(Ee),Se=new Te,Ie=function(e){return"number"==typeof e?"number:"+K(e):"string:"+e},ke=function(e){if(e.isLeafNode()){var t=e.val();a.assert("string"==typeof t||"number"==typeof t||"object"==typeof t&&a.contains(t,".sv"),"Priority must be a string or number.")}else a.assert(e===V||e.isEmpty(),"priority of unexpected type.");a.assert(e===V||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Ae=function(){function e(t,n){void 0===n&&(n=e.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,a.assert(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),ke(this.priorityNode_)}return Object.defineProperty(e,"__childrenNodeConstructor",{get:function(){return j},set:function(e){j=e},enumerable:!0,configurable:!0}),e.prototype.isLeafNode=function(){return!0},e.prototype.getPriority=function(){return this.priorityNode_},e.prototype.updatePriority=function(t){return new e(this.value_,t)},e.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.getChild=function(t){return t.isEmpty()?this:".priority"===t.getFront()?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.hasChild=function(){return!1},e.prototype.getPredecessorChildName=function(e,t){return null},e.prototype.updateImmediateChild=function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)},e.prototype.updateChild=function(t,n){var r=t.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:(a.assert(".priority"!==r||1===t.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(t.popFront(),n)))},e.prototype.isEmpty=function(){return!1},e.prototype.numChildren=function(){return 0},e.prototype.forEachChild=function(e,t){return!1},e.prototype.val=function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+Ie(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?K(this.value_):this.value_,this.lazyHash_=m(e)}return this.lazyHash_},e.prototype.getValue=function(){return this.value_},e.prototype.compareTo=function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(a.assert(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},e.prototype.compareToLeafNode_=function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),o=e.VALUE_TYPE_ORDER.indexOf(r);return a.assert(i>=0,"Unknown leaf type: "+n),a.assert(o>=0,"Unknown leaf type: "+r),i===o?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-i},e.prototype.withIndex=function(){return this},e.prototype.isIndexed=function(){return!0},e.prototype.equals=function(e){return e===this||!!e.isLeafNode()&&this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)},e.VALUE_TYPE_ORDER=["object","boolean","number","string"],e}(),Ne=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(t,e),t.prototype.compare=function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?N(e.name,t.name):i},t.prototype.isDefinedOn=function(e){return!e.getPriority().isEmpty()},t.prototype.indexedValueChanged=function(e,t){return!e.getPriority().equals(t.getPriority())},t.prototype.minPost=function(){return Ce.MIN},t.prototype.maxPost=function(){return new Ce(A,new Ae("[PRIORITY-POST]",B))},t.prototype.makePost=function(e,t){var n=q(e);return new Ce(t,new Ae("[PRIORITY-POST]",n))},t.prototype.toString=function(){return".priority"},t}(Ee)),De=function(){function e(e,t,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!e.isEmpty();)if(e=e,o=t?n(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}return e.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},e.prototype.hasNext=function(){return this.nodeStack_.length>0},e.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}},e}(),Re=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:Pe.EMPTY_NODE,this.right=null!=o?o:Pe.EMPTY_NODE}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.count=function(){return this.left.count()+1+this.right.count()},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},e.prototype.minKey=function(){return this.min_().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r,i;return(i=(r=n(e,(i=this).key))<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===r?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n))).fixUp_()},e.prototype.removeMin_=function(){if(this.left.isEmpty())return Pe.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()},e.prototype.remove=function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Pe.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()},e.prototype.isRed_=function(){return this.color},e.prototype.fixUp_=function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e},e.prototype.moveRedLeft_=function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e},e.prototype.moveRedRight_=function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e},e.prototype.rotateLeft_=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight_=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip_=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth_=function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1},e.prototype.check_=function(){var e;if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");if((e=this.left.check_())!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)},e.RED=!0,e.BLACK=!1,e}(),Oe=function(){function e(){}return e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new Re(e,t,null)},e.prototype.remove=function(e,t){return this},e.prototype.count=function(){return 0},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.check_=function(){return 0},e.prototype.isRed_=function(){return!1},e}(),Pe=function(){function e(t,n){void 0===n&&(n=e.EMPTY_NODE),this.comparator_=t,this.root_=n}return e.prototype.insert=function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Re.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Re.BLACK,null,null))},e.prototype.get=function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null},e.prototype.getPredecessorKey=function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},e.prototype.isEmpty=function(){return this.root_.isEmpty()},e.prototype.count=function(){return this.root_.count()},e.prototype.minKey=function(){return this.root_.minKey()},e.prototype.maxKey=function(){return this.root_.maxKey()},e.prototype.inorderTraversal=function(e){return this.root_.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.root_.reverseTraversal(e)},e.prototype.getIterator=function(e){return new De(this.root_,null,this.comparator_,!1,e)},e.prototype.getIteratorFrom=function(e,t){return new De(this.root_,e,this.comparator_,!1,t)},e.prototype.getReverseIteratorFrom=function(e,t){return new De(this.root_,e,this.comparator_,!0,t)},e.prototype.getReverseIterator=function(e){return new De(this.root_,null,this.comparator_,!0,e)},e.EMPTY_NODE=new Oe,e}(),xe=Math.log(2),Me=function(){function e(e){this.count=parseInt(Math.log(e+1)/xe,10),this.current_=this.count-1;var t=parseInt(Array(this.count+1).join("1"),2);this.bits_=e+1&t}return e.prototype.nextBitIsOne=function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e},e}(),Le=function(e,t,n,r){e.sort(t);var i=function(t,r){var o,s,a=r-t;if(0==a)return null;if(1==a)return o=e[t],s=n?n(o):o,new Re(s,o.node,Re.BLACK,null,null);var l=parseInt(a/2,10)+t,u=i(t,l),c=i(l+1,r);return o=e[l],s=n?n(o):o,new Re(s,o.node,Re.BLACK,u,c)},o=function(t){for(var r=null,o=null,s=e.length,a=function(t,r){var o=s-t,a=s;s-=t;var u=i(o+1,a),c=e[o],h=n?n(c):c;l(new Re(h,c.node,r,null,u))},l=function(e){r?(r.left=e,r=e):(o=e,r=e)},u=0;u<t.count;++u){var c=t.nextBitIsOne(),h=Math.pow(2,t.count-(u+1));c?a(h,Re.BLACK):(a(h,Re.BLACK),a(h,Re.RED))}return o}(new Me(e.length));return new Pe(r||t,o)},Fe={},Ue=function(){function e(e,t){this.indexes_=e,this.indexSet_=t}return Object.defineProperty(e,"Default",{get:function(){return a.assert(Fe&&Ne,"ChildrenNode.ts has not been loaded"),W=W||new e({".priority":Fe},{".priority":Ne})},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var t=a.safeGet(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Pe?t:null},e.prototype.hasIndex=function(e){return a.contains(this.indexSet_,e.toString())},e.prototype.addIndex=function(t,n){a.assert(t!==Se,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],o=!1,l=n.getIterator(Ce.Wrap),u=l.getNext();u;)o=o||t.isDefinedOn(u.node),i.push(u),u=l.getNext();r=o?Le(i,t.getCompare()):Fe;var c=t.toString(),h=s.__assign({},this.indexSet_);h[c]=t;var d=s.__assign({},this.indexes_);return d[c]=r,new e(d,h)},e.prototype.addToIndexes=function(t,n){var r=this;return new e(a.map(this.indexes_,(function(e,i){var o=a.safeGet(r.indexSet_,i);if(a.assert(o,"Missing index implementation for "+i),e===Fe){if(o.isDefinedOn(t.node)){for(var s=[],l=n.getIterator(Ce.Wrap),u=l.getNext();u;)u.name!=t.name&&s.push(u),u=l.getNext();return s.push(t),Le(s,o.getCompare())}return Fe}var c=n.get(t.name),h=e;return c&&(h=h.remove(new Ce(t.name,c))),h.insert(t,t.node)})),this.indexSet_)},e.prototype.removeFromIndexes=function(t,n){return new e(a.map(this.indexes_,(function(e){if(e===Fe)return e;var r=n.get(t.name);return r?e.remove(new Ce(t.name,r)):e})),this.indexSet_)},e}();function Ve(e,t){return N(e.name,t.name)}function je(e,t){return N(e,t)}var qe=function(){function e(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&ke(this.priorityNode_),this.children_.isEmpty()&&a.assert(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(e,"EMPTY_NODE",{get:function(){return H||(H=new e(new Pe(je),null,Ue.Default))},enumerable:!0,configurable:!0}),e.prototype.isLeafNode=function(){return!1},e.prototype.getPriority=function(){return this.priorityNode_||H},e.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)},e.prototype.getImmediateChild=function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?H:t},e.prototype.getChild=function(e){var t=e.getFront();return null===t?this:this.getImmediateChild(t).getChild(e.popFront())},e.prototype.hasChild=function(e){return null!==this.children_.get(e)},e.prototype.updateImmediateChild=function(t,n){if(a.assert(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i=new Ce(t,n),o=void 0,s=void 0;return n.isEmpty()?(o=this.children_.remove(t),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(t,n),s=this.indexMap_.addToIndexes(i,this.children_)),r=o.isEmpty()?H:this.priorityNode_,new e(o,r,s)},e.prototype.updateChild=function(e,t){var n=e.getFront();if(null===n)return t;a.assert(".priority"!==e.getFront()||1===e.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(e.popFront(),t);return this.updateImmediateChild(n,r)},e.prototype.isEmpty=function(){return this.children_.isEmpty()},e.prototype.numChildren=function(){return this.children_.count()},e.prototype.val=function(t){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Ne,(function(s,a){n[s]=a.val(t),r++,o&&e.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1})),!t&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+Ie(this.getPriority().val())+":"),this.forEachChild(Ne,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":m(e)}return this.lazyHash_},e.prototype.getPredecessorChildName=function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Ce(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)},e.prototype.getFirstChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()},e.prototype.getFirstChild=function(e){var t=this.getFirstChildName(e);return t?new Ce(t,this.children_.get(t)):null},e.prototype.getLastChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()},e.prototype.getLastChild=function(e){var t=this.getLastChildName(e);return t?new Ce(t,this.children_.get(t)):null},e.prototype.forEachChild=function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)},e.prototype.getIterator=function(e){return this.getIteratorFrom(e.minPost(),e)},e.prototype.getIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,Ce.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r},e.prototype.getReverseIterator=function(e){return this.getReverseIteratorFrom(e.maxPost(),e)},e.prototype.getReverseIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,Ce.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r},e.prototype.compareTo=function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Be?-1:0},e.prototype.withIndex=function(t){if(t===Se||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)},e.prototype.isIndexed=function(e){return e===Se||this.indexMap_.hasIndex(e)},e.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(Ne),r=t.getIterator(Ne),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},e.prototype.resolveIndex_=function(e){return e===Se?null:this.indexMap_.get(e.toString())},e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e}(),Be=new(function(e){function t(){return e.call(this,new Pe(je),qe.EMPTY_NODE,Ue.Default)||this}return s.__extends(t,e),t.prototype.compareTo=function(e){return e===this?0:1},t.prototype.equals=function(e){return e===this},t.prototype.getPriority=function(){return this},t.prototype.getImmediateChild=function(e){return qe.EMPTY_NODE},t.prototype.isEmpty=function(){return!1},t}(qe));Object.defineProperties(Ce,{MIN:{value:new Ce(k,qe.EMPTY_NODE)},MAX:{value:new Ce(A,Be)}}),Te.__EMPTY_NODE=qe.EMPTY_NODE,Ae.__childrenNodeConstructor=qe,V=Be,B=Be;var We=!0;function He(e,t){if(void 0===t&&(t=null),null===e)return qe.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),a.assert(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e)return new Ae(e,He(t));if(e instanceof Array||!We){var n=qe.EMPTY_NODE;return x(e,(function(t,r){if(a.contains(e,t)&&"."!==t.substring(0,1)){var i=He(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(t,i))}})),n.updatePriority(He(t))}var r=[],i=!1;if(x(e,(function(e,t){if("."!==e.substring(0,1)){var n=He(t);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Ce(e,n)))}})),0==r.length)return qe.EMPTY_NODE;var o=Le(r,Ve,(function(e){return e.name}),je);if(i){var s=Le(r,Ne.getCompare());return new qe(o,He(t),new Ue({".priority":s},{".priority":Ne}))}return new qe(o,He(t),Ue.Default)}q=He;var Ke,ze,Ge,Qe=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(t,e),t.prototype.compare=function(e,t){var n=e.node.compareTo(t.node);return 0===n?N(e.name,t.name):n},t.prototype.isDefinedOn=function(e){return!0},t.prototype.indexedValueChanged=function(e,t){return!e.equals(t)},t.prototype.minPost=function(){return Ce.MIN},t.prototype.maxPost=function(){return Ce.MAX},t.prototype.makePost=function(e,t){var n=He(e);return new Ce(t,n)},t.prototype.toString=function(){return".value"},t}(Ee)),$e=function(e){function t(t){var n=e.call(this)||this;return n.indexPath_=t,a.assert(!t.isEmpty()&&".priority"!==t.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return s.__extends(t,e),t.prototype.extractChild=function(e){return e.getChild(this.indexPath_)},t.prototype.isDefinedOn=function(e){return!e.getChild(this.indexPath_).isEmpty()},t.prototype.compare=function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?N(e.name,t.name):i},t.prototype.makePost=function(e,t){var n=He(e),r=qe.EMPTY_NODE.updateChild(this.indexPath_,n);return new Ce(t,r)},t.prototype.maxPost=function(){var e=qe.EMPTY_NODE.updateChild(this.indexPath_,Be);return new Ce(A,e)},t.prototype.toString=function(){return this.indexPath_.slice().join("/")},t}(Ee),Ye=function(){function e(e,t,n){this.node_=e,this.ref_=t,this.index_=n}return e.prototype.val=function(){return a.validateArgCount("DataSnapshot.val",0,0,arguments.length),this.node_.val()},e.prototype.exportVal=function(){return a.validateArgCount("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},e.prototype.toJSON=function(){return a.validateArgCount("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},e.prototype.exists=function(){return a.validateArgCount("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},e.prototype.child=function(t){a.validateArgCount("DataSnapshot.child",0,1,arguments.length),t=String(t),fe("DataSnapshot.child",1,t,!1);var n=new X(t),r=this.ref_.child(n);return new e(this.node_.getChild(n),r,Ne)},e.prototype.hasChild=function(e){a.validateArgCount("DataSnapshot.hasChild",1,1,arguments.length),fe("DataSnapshot.hasChild",1,e,!1);var t=new X(e);return!this.node_.getChild(t).isEmpty()},e.prototype.getPriority=function(){return a.validateArgCount("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},e.prototype.forEach=function(t){var n=this;if(a.validateArgCount("DataSnapshot.forEach",1,1,arguments.length),a.validateCallback("DataSnapshot.forEach",1,t,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,(function(r,i){return t(new e(i,n.ref_.child(r),Ne))}))},e.prototype.hasChildren=function(){return a.validateArgCount("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(e.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!0,configurable:!0}),e.prototype.numChildren=function(){return a.validateArgCount("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},e.prototype.getRef=function(){return a.validateArgCount("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),e}(),Xe=function(){function e(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}return e.prototype.getPath=function(){var e=this.snapshot.getRef();return"value"===this.eventType?e.path:e.getParent().path},e.prototype.getEventType=function(){return this.eventType},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+a.stringify(this.snapshot.exportVal())},e}(),Je=function(){function e(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}return e.prototype.getPath=function(){return this.path},e.prototype.getEventType=function(){return"cancel"},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.path.toString()+":cancel"},e}(),Ze=function(){function e(e,t,n){this.callback_=e,this.cancelCallback_=t,this.context_=n}return e.prototype.respondsTo=function(e){return"value"===e},e.prototype.createEvent=function(e,t){var n=t.getQueryParams().getIndex();return new Xe("value",this,new Ye(e.snapshotNode,t.getRef(),n))},e.prototype.getEventRunner=function(e){var t=this.context_;if("cancel"===e.getEventType()){a.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(t,e.error)}}var r=this.callback_;return function(){r.call(t,e.snapshot)}},e.prototype.createCancelEvent=function(e,t){return this.cancelCallback_?new Je(this,e,t):null},e.prototype.matches=function(t){return t instanceof e&&(!t.callback_||!this.callback_||t.callback_===this.callback_&&t.context_===this.context_)},e.prototype.hasAnyCallback=function(){return null!==this.callback_},e}(),et=function(){function e(e,t,n){this.callbacks_=e,this.cancelCallback_=t,this.context_=n}return e.prototype.respondsTo=function(e){var t="children_added"===e?"child_added":e;return a.contains(this.callbacks_,t="children_removed"===t?"child_removed":t)},e.prototype.createCancelEvent=function(e,t){return this.cancelCallback_?new Je(this,e,t):null},e.prototype.createEvent=function(e,t){a.assert(null!=e.childName,"Child events should have a childName.");var n=t.getRef().child(e.childName),r=t.getQueryParams().getIndex();return new Xe(e.type,this,new Ye(e.snapshotNode,n,r),e.prevName)},e.prototype.getEventRunner=function(e){var t=this.context_;if("cancel"===e.getEventType()){a.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(t,e.error)}}var r=this.callbacks_[e.eventType];return function(){r.call(t,e.snapshot,e.prevName)}},e.prototype.matches=function(t){var n=this;if(t instanceof e){if(!this.callbacks_||!t.callbacks_)return!0;if(this.context_===t.context_){var r=Object.keys(t.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var s=r[0],a=i[0];return!(a!==s||t.callbacks_[s]&&this.callbacks_[a]&&t.callbacks_[s]!==this.callbacks_[a])}return i.every((function(e){return t.callbacks_[e]===n.callbacks_[e]}))}}}return!1},e.prototype.hasAnyCallback=function(){return null!==this.callbacks_},e}(),tt=function(){function e(e,t,n,r){this.repo=e,this.path=t,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(e,"__referenceConstructor",{get:function(){return a.assert(Ke,"Reference.ts has not been loaded"),Ke},set:function(e){Ke=e},enumerable:!0,configurable:!0}),e.validateQueryEndpoints_=function(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===Se){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!=k)throw new Error(r);if("string"!=typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!=A)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(e.getIndex()===Ne){if(null!=t&&!ae(t)||null!=n&&!ae(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(a.assert(e.getIndex()instanceof $e||e.getIndex()===Qe,"unknown index type."),null!=t&&"object"==typeof t||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},e.validateLimit_=function(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},e.prototype.validateNoPreviousOrderByCall_=function(e){if(!0===this.orderByCalled_)throw new Error(e+": You can't combine multiple orderBy calls.")},e.prototype.getQueryParams=function(){return this.queryParams_},e.prototype.getRef=function(){return a.validateArgCount("Query.ref",0,0,arguments.length),new e.__referenceConstructor(this.repo,this.path)},e.prototype.on=function(t,n,r,i){a.validateArgCount("Query.on",2,4,arguments.length),de("Query.on",1,t,!1),a.validateCallback("Query.on",2,n,!1);var o=e.getCancelAndContextArgs_("Query.on",r,i);if("value"===t)this.onValueEvent(n,o.cancel,o.context);else{var s={};s[t]=n,this.onChildEvent(s,o.cancel,o.context)}return n},e.prototype.onValueEvent=function(e,t,n){var r=new Ze(e,t||null,n||null);this.repo.addEventCallbackForQuery(this,r)},e.prototype.onChildEvent=function(e,t,n){var r=new et(e,t,n);this.repo.addEventCallbackForQuery(this,r)},e.prototype.off=function(e,t,n){a.validateArgCount("Query.off",0,3,arguments.length),de("Query.off",1,e,!0),a.validateCallback("Query.off",2,t,!0),a.validateContextObject("Query.off",3,n,!0);var r=null,i=null;if("value"===e){var o=t||null;r=new Ze(o,null,n||null)}else e&&(t&&((i={})[e]=t),r=new et(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},e.prototype.once=function(t,n,r,i){var o=this;a.validateArgCount("Query.once",1,4,arguments.length),de("Query.once",1,t,!1),a.validateCallback("Query.once",2,n,!0);var s=e.getCancelAndContextArgs_("Query.once",r,i),l=!0,u=new a.Deferred;u.promise.catch((function(){}));var c=function(e){l&&(l=!1,o.off(t,c),n&&n.bind(s.context)(e),u.resolve(e))};return this.on(t,c,(function(e){o.off(t,c),s.cancel&&s.cancel.bind(s.context)(e),u.reject(e)})),u.promise},e.prototype.limitToFirst=function(t){if(a.validateArgCount("Query.limitToFirst",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new e(this.repo,this.path,this.queryParams_.limitToFirst(t),this.orderByCalled_)},e.prototype.limitToLast=function(t){if(a.validateArgCount("Query.limitToLast",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new e(this.repo,this.path,this.queryParams_.limitToLast(t),this.orderByCalled_)},e.prototype.orderByChild=function(t){if(a.validateArgCount("Query.orderByChild",1,1,arguments.length),"$key"===t)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===t)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===t)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');fe("Query.orderByChild",1,t,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new X(t);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new $e(n),i=this.queryParams_.orderBy(r);return e.validateQueryEndpoints_(i),new e(this.repo,this.path,i,!0)},e.prototype.orderByKey=function(){a.validateArgCount("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var t=this.queryParams_.orderBy(Se);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.orderByPriority=function(){a.validateArgCount("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var t=this.queryParams_.orderBy(Ne);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.orderByValue=function(){a.validateArgCount("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var t=this.queryParams_.orderBy(Qe);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.startAt=function(t,n){void 0===t&&(t=null),a.validateArgCount("Query.startAt",0,2,arguments.length),le("Query.startAt",1,t,this.path,!0),pe("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(t,n);if(e.validateLimit_(r),e.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===t&&(t=null,n=null),new e(this.repo,this.path,r,this.orderByCalled_)},e.prototype.endAt=function(t,n){void 0===t&&(t=null),a.validateArgCount("Query.endAt",0,2,arguments.length),le("Query.endAt",1,t,this.path,!0),pe("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(t,n);if(e.validateLimit_(r),e.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new e(this.repo,this.path,r,this.orderByCalled_)},e.prototype.equalTo=function(e,t){if(a.validateArgCount("Query.equalTo",1,2,arguments.length),le("Query.equalTo",1,e,this.path,!1),pe("Query.equalTo",2,t,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(e,t).endAt(e,t)},e.prototype.toString=function(){return a.validateArgCount("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},e.prototype.toJSON=function(){return a.validateArgCount("Query.toJSON",0,1,arguments.length),this.toString()},e.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},e.prototype.queryIdentifier=function(){var e=this.queryObject(),t=O(e);return"{}"===t?"default":t},e.prototype.isEqual=function(t){if(a.validateArgCount("Query.isEqual",1,1,arguments.length),!(t instanceof e)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===t.repo,i=this.path.equals(t.path),o=this.queryIdentifier()===t.queryIdentifier();return r&&i&&o},e.getCancelAndContextArgs_=function(e,t,n){var r={cancel:null,context:null};if(t&&n)r.cancel=t,a.validateCallback(e,3,r.cancel,!0),r.context=n,a.validateContextObject(e,4,r.context,!0);else if(t)if("object"==typeof t&&null!==t)r.context=t;else{if("function"!=typeof t)throw new Error(a.errorPrefix(e,3,!0)+" must either be a cancel callback or a context object.");r.cancel=t}return r},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),e}(),nt=function(){function e(){this.value=null,this.children=new Map}return e.prototype.find=function(e){if(null!=this.value)return this.value.getChild(e);if(!e.isEmpty()&&this.children.size>0){var t=e.getFront();return e=e.popFront(),this.children.has(t)?this.children.get(t).find(e):null}return null},e.prototype.remember=function(t,n){if(t.isEmpty())this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(t,n);else{var r=t.getFront();this.children.has(r)||this.children.set(r,new e);var i=this.children.get(r);t=t.popFront(),i.remember(t,n)}},e.prototype.forget=function(e){if(e.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var t=this.value;this.value=null;var n=this;return t.forEachChild(Ne,(function(e,t){n.remember(new X(e),t)})),this.forget(e)}if(this.children.size>0){var r=e.getFront();return e=e.popFront(),this.children.has(r)&&this.children.get(r).forget(e)&&this.children.delete(r),0===this.children.size}return!0},e.prototype.forEachTree=function(e,t){null!==this.value?t(e,this.value):this.forEachChild((function(n,r){var i=new X(e.toString()+"/"+n);r.forEachTree(i,t)}))},e.prototype.forEachChild=function(e){this.children.forEach((function(t,n){e(n,t)}))},e}(),rt=function(e,t){return e&&"object"==typeof e?(a.assert(".sv"in e,"Unexpected leaf node or priority contents"),t[e[".sv"]]):e},it=function(e,t){var n,r=e.getPriority().val(),i=rt(r,t);if(e.isLeafNode()){var o=e,s=rt(o.getValue(),t);return s!==o.getValue()||i!==o.getPriority().val()?new Ae(s,He(i)):e}var a=e;return n=a,i!==a.getPriority().val()&&(n=n.updatePriority(new Ae(i))),a.forEachChild(Ne,(function(e,r){var i=it(r,t);i!==r&&(n=n.updateImmediateChild(e,i))})),n},ot=function(e){return e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",e}({}),st=function(){function e(e,t,n,r){this.fromUser=e,this.fromServer=t,this.queryId=n,this.tagged=r,a.assert(!r||t,"Tagged queries must be from server.")}return e.User=new e(!0,!1,null,!1),e.Server=new e(!1,!0,null,!1),e.forServerTaggedQuery=function(t){return new e(!1,!0,t,!0)},e}(),at=function(){function e(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=ot.ACK_USER_WRITE,this.source=st.User}return e.prototype.operationForChild=function(t){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return a.assert(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new X(t));return new e(X.Empty,n,this.revert)}return a.assert(this.path.getFront()===t,"operationForChild called for unrelated child."),new e(this.path.popFront(),this.affectedTree,this.revert)},e}(),lt=function(){return ze||(ze=new Pe(D)),ze},ut=function(){function e(e,t){void 0===t&&(t=lt()),this.value=e,this.children=t}return e.fromObject=function(t){var n=e.Empty;return x(t,(function(e,t){n=n.set(new X(e),t)})),n},e.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},e.prototype.findRootMostMatchingPathAndValue=function(e,t){if(null!=this.value&&t(this.value))return{path:X.Empty,value:this.value};if(e.isEmpty())return null;var n=e.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(e.popFront(),t);return null!=i?{path:new X(n).child(i.path),value:i.value}:null}return null},e.prototype.findRootMostValueAndPath=function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))},e.prototype.subtree=function(t){if(t.isEmpty())return this;var n=t.getFront(),r=this.children.get(n);return null!==r?r.subtree(t.popFront()):e.Empty},e.prototype.set=function(t,n){if(t.isEmpty())return new e(n,this.children);var r=t.getFront(),i=(this.children.get(r)||e.Empty).set(t.popFront(),n),o=this.children.insert(r,i);return new e(this.value,o)},e.prototype.remove=function(t){if(t.isEmpty())return this.children.isEmpty()?e.Empty:new e(null,this.children);var n=t.getFront(),r=this.children.get(n);if(r){var i=r.remove(t.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?e.Empty:new e(this.value,o)}return this},e.prototype.get=function(e){if(e.isEmpty())return this.value;var t=e.getFront(),n=this.children.get(t);return n?n.get(e.popFront()):null},e.prototype.setTree=function(t,n){if(t.isEmpty())return n;var r,i=t.getFront(),o=(this.children.get(i)||e.Empty).setTree(t.popFront(),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new e(this.value,r)},e.prototype.fold=function(e){return this.fold_(X.Empty,e)},e.prototype.fold_=function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(e.child(r),t)})),t(e,this.value,n)},e.prototype.findOnPath=function(e,t){return this.findOnPath_(e,X.Empty,t)},e.prototype.findOnPath_=function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(e.isEmpty())return null;var i=e.getFront(),o=this.children.get(i);return o?o.findOnPath_(e.popFront(),t.child(i),n):null},e.prototype.foreachOnPath=function(e,t){return this.foreachOnPath_(e,X.Empty,t)},e.prototype.foreachOnPath_=function(t,n,r){if(t.isEmpty())return this;this.value&&r(n,this.value);var i=t.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(t.popFront(),n.child(i),r):e.Empty},e.prototype.foreach=function(e){this.foreach_(X.Empty,e)},e.prototype.foreach_=function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(e.child(n),t)})),this.value&&t(e,this.value)},e.prototype.foreachChild=function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))},e.Empty=new e(null),e}(),ct=function(){function e(e,t){this.source=e,this.path=t,this.type=ot.LISTEN_COMPLETE}return e.prototype.operationForChild=function(t){return this.path.isEmpty()?new e(this.source,X.Empty):new e(this.source,this.path.popFront())},e}(),ht=function(){function e(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=ot.OVERWRITE}return e.prototype.operationForChild=function(t){return this.path.isEmpty()?new e(this.source,X.Empty,this.snap.getImmediateChild(t)):new e(this.source,this.path.popFront(),this.snap)},e}(),dt=function(){function e(e,t,n){this.source=e,this.path=t,this.children=n,this.type=ot.MERGE}return e.prototype.operationForChild=function(t){if(this.path.isEmpty()){var n=this.children.subtree(new X(t));return n.isEmpty()?null:n.value?new ht(this.source,X.Empty,n.value):new e(this.source,X.Empty,n)}return a.assert(this.path.getFront()===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,this.path.popFront(),this.children)},e.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},e}(),pt=function(){function e(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}return e.prototype.isFullyInitialized=function(){return this.fullyInitialized_},e.prototype.isFiltered=function(){return this.filtered_},e.prototype.isCompleteForPath=function(e){if(e.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var t=e.getFront();return this.isCompleteForChild(t)},e.prototype.isCompleteForChild=function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)},e.prototype.getNode=function(){return this.node_},e}(),ft=function(){function e(e,t){this.eventCache_=e,this.serverCache_=t}return e.prototype.updateEventSnap=function(t,n,r){return new e(new pt(t,n,r),this.serverCache_)},e.prototype.updateServerSnap=function(t,n,r){return new e(this.eventCache_,new pt(t,n,r))},e.prototype.getEventCache=function(){return this.eventCache_},e.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},e.prototype.getServerCache=function(){return this.serverCache_},e.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},e.Empty=new e(new pt(qe.EMPTY_NODE,!1,!1),new pt(qe.EMPTY_NODE,!1,!1)),e}(),gt=function(){function e(e,t,n,r,i){this.type=e,this.snapshotNode=t,this.childName=n,this.oldSnap=r,this.prevName=i}return e.valueChange=function(t){return new e(e.VALUE,t)},e.childAddedChange=function(t,n){return new e(e.CHILD_ADDED,n,t)},e.childRemovedChange=function(t,n){return new e(e.CHILD_REMOVED,n,t)},e.childChangedChange=function(t,n,r){return new e(e.CHILD_CHANGED,n,t,r)},e.childMovedChange=function(t,n){return new e(e.CHILD_MOVED,n,t)},e.CHILD_ADDED="child_added",e.CHILD_REMOVED="child_removed",e.CHILD_CHANGED="child_changed",e.CHILD_MOVED="child_moved",e.VALUE="value",e}(),mt=function(){function e(e){this.index_=e}return e.prototype.updateChild=function(e,t,n,r,i,o){a.assert(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=e.getImmediateChild(t);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()==n.isEmpty()?e:(null!=o&&(n.isEmpty()?e.hasChild(t)?o.trackChildChange(gt.childRemovedChange(t,s)):a.assert(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(gt.childAddedChange(t,n)):o.trackChildChange(gt.childChangedChange(t,n,s))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))},e.prototype.updateFullNode=function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(Ne,(function(e,r){t.hasChild(e)||n.trackChildChange(gt.childRemovedChange(e,r))})),t.isLeafNode()||t.forEachChild(Ne,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(gt.childChangedChange(t,r,i))}else n.trackChildChange(gt.childAddedChange(t,r))}))),t.withIndex(this.index_)},e.prototype.updatePriority=function(e,t){return e.isEmpty()?qe.EMPTY_NODE:e.updatePriority(t)},e.prototype.filtersNodes=function(){return!1},e.prototype.getIndexedFilter=function(){return this},e.prototype.getIndex=function(){return this.index_},e}(),yt=function(){function e(){this.changeMap=new Map}return e.prototype.trackChildChange=function(e){var t=e.type,n=e.childName;a.assert(t==gt.CHILD_ADDED||t==gt.CHILD_CHANGED||t==gt.CHILD_REMOVED,"Only child changes supported for tracking"),a.assert(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(t==gt.CHILD_ADDED&&i==gt.CHILD_REMOVED)this.changeMap.set(n,gt.childChangedChange(n,e.snapshotNode,r.snapshotNode));else if(t==gt.CHILD_REMOVED&&i==gt.CHILD_ADDED)this.changeMap.delete(n);else if(t==gt.CHILD_REMOVED&&i==gt.CHILD_CHANGED)this.changeMap.set(n,gt.childRemovedChange(n,r.oldSnap));else if(t==gt.CHILD_CHANGED&&i==gt.CHILD_ADDED)this.changeMap.set(n,gt.childAddedChange(n,e.snapshotNode));else{if(t!=gt.CHILD_CHANGED||i!=gt.CHILD_CHANGED)throw a.assertionError("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,gt.childChangedChange(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)},e.prototype.getChanges=function(){return Array.from(this.changeMap.values())},e}(),vt=new(function(){function e(){}return e.prototype.getCompleteChild=function(e){return null},e.prototype.getChildAfterChild=function(e,t,n){return null},e}()),_t=function(){function e(e,t,n){void 0===n&&(n=null),this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}return e.prototype.getCompleteChild=function(e){var t=this.viewCache_.getEventCache();if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new pt(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(e,n)},e.prototype.getChildAfterChild=function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,t,1,n,e);return 0===i.length?null:i[0]},e}(),bt=function(){return function(e,t){this.viewCache=e,this.changes=t}}(),wt=function(){function e(e){this.filter_=e}return e.prototype.assertIndexed=function(e){a.assert(e.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),a.assert(e.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},e.prototype.applyOperation=function(t,n,r,i){var o,s,l=new yt;if(n.type===ot.OVERWRITE){var u=n;u.source.fromUser?o=this.applyUserOverwrite_(t,u.path,u.snap,r,i,l):(a.assert(u.source.fromServer,"Unknown source."),s=u.source.tagged||t.getServerCache().isFiltered()&&!u.path.isEmpty(),o=this.applyServerOverwrite_(t,u.path,u.snap,r,i,s,l))}else if(n.type===ot.MERGE){var c=n;c.source.fromUser?o=this.applyUserMerge_(t,c.path,c.children,r,i,l):(a.assert(c.source.fromServer,"Unknown source."),s=c.source.tagged||t.getServerCache().isFiltered(),o=this.applyServerMerge_(t,c.path,c.children,r,i,s,l))}else if(n.type===ot.ACK_USER_WRITE){var h=n;o=h.revert?this.revertUserWrite_(t,h.path,r,i,l):this.ackUserWrite_(t,h.path,h.affectedTree,r,i,l)}else{if(n.type!==ot.LISTEN_COMPLETE)throw a.assertionError("Unknown operation type: "+n.type);o=this.listenComplete_(t,n.path,r,l)}var d=l.getChanges();return e.maybeAddValueEvent_(t,o,d),new bt(o,d)},e.maybeAddValueEvent_=function(e,t,n){var r=t.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=e.getCompleteEventSnap();(n.length>0||!e.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(gt.valueChange(t.getCompleteEventSnap()))}},e.prototype.generateEventCacheAfterServerEvent_=function(e,t,n,r,i){var o=e.getEventCache();if(null!=n.shadowingWrite(t))return e;var s=void 0,l=void 0;if(t.isEmpty())if(a.assert(e.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),e.getServerCache().isFiltered()){var u=e.getCompleteServerSnap(),c=n.calcCompleteEventChildren(u instanceof qe?u:qe.EMPTY_NODE);s=this.filter_.updateFullNode(e.getEventCache().getNode(),c,i)}else{var h=n.calcCompleteEventCache(e.getCompleteServerSnap());s=this.filter_.updateFullNode(e.getEventCache().getNode(),h,i)}else{var d=t.getFront();if(".priority"==d){a.assert(1==t.getLength(),"Can't have a priority with additional path components");var p=o.getNode();l=e.getServerCache().getNode();var f=n.calcEventCacheAfterServerOverwrite(t,p,l);s=null!=f?this.filter_.updatePriority(p,f):o.getNode()}else{var g=t.popFront(),m=void 0;if(o.isCompleteForChild(d)){l=e.getServerCache().getNode();var y=n.calcEventCacheAfterServerOverwrite(t,o.getNode(),l);m=null!=y?o.getNode().getImmediateChild(d).updateChild(g,y):o.getNode().getImmediateChild(d)}else m=n.calcCompleteChild(d,e.getServerCache());s=null!=m?this.filter_.updateChild(o.getNode(),d,m,g,r,i):o.getNode()}}return e.updateEventSnap(s,o.isFullyInitialized()||t.isEmpty(),this.filter_.filtersNodes())},e.prototype.applyServerOverwrite_=function(e,t,n,r,i,o,s){var a,l=e.getServerCache(),u=o?this.filter_:this.filter_.getIndexedFilter();if(t.isEmpty())a=u.updateFullNode(l.getNode(),n,null);else if(u.filtersNodes()&&!l.isFiltered()){var c=l.getNode().updateChild(t,n);a=u.updateFullNode(l.getNode(),c,null)}else{var h=t.getFront();if(!l.isCompleteForPath(t)&&t.getLength()>1)return e;var d=t.popFront(),p=l.getNode().getImmediateChild(h).updateChild(d,n);a=".priority"==h?u.updatePriority(l.getNode(),p):u.updateChild(l.getNode(),h,p,d,vt,null)}var f=e.updateServerSnap(a,l.isFullyInitialized()||t.isEmpty(),u.filtersNodes()),g=new _t(r,f,i);return this.generateEventCacheAfterServerEvent_(f,t,r,g,s)},e.prototype.applyUserOverwrite_=function(e,t,n,r,i,o){var s,a,l=e.getEventCache(),u=new _t(r,e,i);if(t.isEmpty())a=this.filter_.updateFullNode(e.getEventCache().getNode(),n,o),s=e.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var c=t.getFront();if(".priority"===c)a=this.filter_.updatePriority(e.getEventCache().getNode(),n),s=e.updateEventSnap(a,l.isFullyInitialized(),l.isFiltered());else{var h=t.popFront(),d=l.getNode().getImmediateChild(c),p=void 0;if(h.isEmpty())p=n;else{var f=u.getCompleteChild(c);p=null!=f?".priority"===h.getBack()&&f.getChild(h.parent()).isEmpty()?f:f.updateChild(h,n):qe.EMPTY_NODE}if(d.equals(p))s=e;else{var g=this.filter_.updateChild(l.getNode(),c,p,h,u,o);s=e.updateEventSnap(g,l.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},e.cacheHasChild_=function(e,t){return e.getEventCache().isCompleteForChild(t)},e.prototype.applyUserMerge_=function(t,n,r,i,o,s){var a=this,l=t;return r.foreach((function(r,u){var c=n.child(r);e.cacheHasChild_(t,c.getFront())&&(l=a.applyUserOverwrite_(l,c,u,i,o,s))})),r.foreach((function(r,u){var c=n.child(r);e.cacheHasChild_(t,c.getFront())||(l=a.applyUserOverwrite_(l,c,u,i,o,s))})),l},e.prototype.applyMerge_=function(e,t){return t.foreach((function(t,n){e=e.updateChild(t,n)})),e},e.prototype.applyServerMerge_=function(e,t,n,r,i,o,s){var a=this;if(e.getServerCache().getNode().isEmpty()&&!e.getServerCache().isFullyInitialized())return e;var l,u=e;l=t.isEmpty()?n:ut.Empty.setTree(t,n);var c=e.getServerCache().getNode();return l.children.inorderTraversal((function(t,n){if(c.hasChild(t)){var l=e.getServerCache().getNode().getImmediateChild(t),h=a.applyMerge_(l,n);u=a.applyServerOverwrite_(u,new X(t),h,r,i,o,s)}})),l.children.inorderTraversal((function(t,n){var l=!e.getServerCache().isCompleteForChild(t)&&null==n.value;if(!c.hasChild(t)&&!l){var h=e.getServerCache().getNode().getImmediateChild(t),d=a.applyMerge_(h,n);u=a.applyServerOverwrite_(u,new X(t),d,r,i,o,s)}})),u},e.prototype.ackUserWrite_=function(e,t,n,r,i,o){if(null!=r.shadowingWrite(t))return e;var s=e.getServerCache().isFiltered(),a=e.getServerCache();if(null!=n.value){if(t.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(t))return this.applyServerOverwrite_(e,t,a.getNode().getChild(t),r,i,s,o);if(t.isEmpty()){var l=ut.Empty;return a.getNode().forEachChild(Se,(function(e,t){l=l.set(new X(e),t)})),this.applyServerMerge_(e,t,l,r,i,s,o)}return e}var u=ut.Empty;return n.foreach((function(e,n){var r=t.child(e);a.isCompleteForPath(r)&&(u=u.set(e,a.getNode().getChild(r)))})),this.applyServerMerge_(e,t,u,r,i,s,o)},e.prototype.listenComplete_=function(e,t,n,r){var i=e.getServerCache(),o=e.updateServerSnap(i.getNode(),i.isFullyInitialized()||t.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,t,n,vt,r)},e.prototype.revertUserWrite_=function(e,t,n,r,i){var o;if(null!=n.shadowingWrite(t))return e;var s=new _t(n,e,r),l=e.getEventCache().getNode(),u=void 0;if(t.isEmpty()||".priority"===t.getFront()){var c=void 0;if(e.getServerCache().isFullyInitialized())c=n.calcCompleteEventCache(e.getCompleteServerSnap());else{var h=e.getServerCache().getNode();a.assert(h instanceof qe,"serverChildren would be complete if leaf node"),c=n.calcCompleteEventChildren(h)}u=this.filter_.updateFullNode(l,c=c,i)}else{var d=t.getFront(),p=n.calcCompleteChild(d,e.getServerCache());null==p&&e.getServerCache().isCompleteForChild(d)&&(p=l.getImmediateChild(d)),(u=null!=p?this.filter_.updateChild(l,d,p,t.popFront(),s,i):e.getEventCache().getNode().hasChild(d)?this.filter_.updateChild(l,d,qe.EMPTY_NODE,t.popFront(),s,i):l).isEmpty()&&e.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(e.getCompleteServerSnap())).isLeafNode()&&(u=this.filter_.updateFullNode(u,o,i))}return o=e.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(X.Empty),e.updateEventSnap(u,o,this.filter_.filtersNodes())},e}(),Ct=function(){function e(e){this.query_=e,this.index_=this.query_.getQueryParams().getIndex()}return e.prototype.generateEventsForChanges=function(e,t,n){var r=this,i=[],o=[];return e.forEach((function(e){e.type===gt.CHILD_CHANGED&&r.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push(gt.childMovedChange(e.childName,e.snapshotNode))})),this.generateEventsForType_(i,gt.CHILD_REMOVED,e,n,t),this.generateEventsForType_(i,gt.CHILD_ADDED,e,n,t),this.generateEventsForType_(i,gt.CHILD_MOVED,o,n,t),this.generateEventsForType_(i,gt.CHILD_CHANGED,e,n,t),this.generateEventsForType_(i,gt.VALUE,e,n,t),i},e.prototype.generateEventsForType_=function(e,t,n,r,i){var o=this,s=n.filter((function(e){return e.type===t}));s.sort(this.compareChanges_.bind(this)),s.forEach((function(t){var n=o.materializeSingleChange_(t,i);r.forEach((function(r){r.respondsTo(t.type)&&e.push(r.createEvent(n,o.query_))}))}))},e.prototype.materializeSingleChange_=function(e,t){return"value"===e.type||"child_removed"===e.type?e:(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,this.index_),e)},e.prototype.compareChanges_=function(e,t){if(null==e.childName||null==t.childName)throw a.assertionError("Should only compare child_ events.");var n=new Ce(e.childName,e.snapshotNode),r=new Ce(t.childName,t.snapshotNode);return this.index_.compare(n,r)},e}(),Et=function(){function e(e,t){this.query_=e,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new mt(n.getIndex()),i=n.getNodeFilter();this.processor_=new wt(i);var o=t.getServerCache(),s=t.getEventCache(),a=r.updateFullNode(qe.EMPTY_NODE,o.getNode(),null),l=i.updateFullNode(qe.EMPTY_NODE,s.getNode(),null),u=new pt(a,o.isFullyInitialized(),r.filtersNodes()),c=new pt(l,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=new ft(c,u),this.eventGenerator_=new Ct(this.query_)}return e.prototype.getQuery=function(){return this.query_},e.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},e.prototype.getCompleteServerCache=function(e){var t=this.viewCache_.getCompleteServerSnap();return t&&(this.query_.getQueryParams().loadsAllData()||!e.isEmpty()&&!t.getImmediateChild(e.getFront()).isEmpty())?t.getChild(e):null},e.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},e.prototype.addEventRegistration=function(e){this.eventRegistrations_.push(e)},e.prototype.removeEventRegistration=function(e,t){var n=[];if(t){a.assert(null==e,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach((function(e){var i=e.createCancelEvent(t=t,r);i&&n.push(i)}))}if(e){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var s=this.eventRegistrations_[o];if(s.matches(e)){if(e.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1));break}}else i.push(s)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},e.prototype.applyOperation=function(e,t,n){e.type===ot.MERGE&&null!==e.source.queryId&&(a.assert(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),a.assert(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,e,t,n);return this.processor_.assertIndexed(i.viewCache),a.assert(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},e.prototype.getInitialEvents=function(e){var t=this.viewCache_.getEventCache(),n=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Ne,(function(e,t){n.push(gt.childAddedChange(e,t))})),t.isFullyInitialized()&&n.push(gt.valueChange(t.getNode())),this.generateEventsForChanges_(n,t.getNode(),e)},e.prototype.generateEventsForChanges_=function(e,t,n){return this.eventGenerator_.generateEventsForChanges(e,t,n?[n]:this.eventRegistrations_)},e}(),Tt=function(){function e(){this.views=new Map}return Object.defineProperty(e,"__referenceConstructor",{get:function(){return a.assert(Ge,"Reference.ts has not been loaded"),Ge},set:function(e){a.assert(!Ge,"__referenceConstructor has already been defined"),Ge=e},enumerable:!0,configurable:!0}),e.prototype.isEmpty=function(){return 0===this.views.size},e.prototype.applyOperation=function(e,t,n){var r,i,o=e.source.queryId;if(null!==o){var l=this.views.get(o);return a.assert(null!=l,"SyncTree gave us an op for an invalid query."),l.applyOperation(e,t,n)}var u=[];try{for(var c=s.__values(this.views.values()),h=c.next();!h.done;h=c.next())u=u.concat((l=h.value).applyOperation(e,t,n))}catch(d){r={error:d}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}return u},e.prototype.addEventRegistration=function(e,t,n,r,i){var o=e.queryIdentifier(),s=this.views.get(o);if(!s){var a=n.calcCompleteEventCache(i?r:null),l=!1;a?l=!0:r instanceof qe?(a=n.calcCompleteEventChildren(r),l=!1):(a=qe.EMPTY_NODE,l=!1);var u=new ft(new pt(a,l,!1),new pt(r,i,!1));s=new Et(e,u),this.views.set(o,s)}return s.addEventRegistration(t),s.getInitialEvents(t)},e.prototype.removeEventRegistration=function(t,n,r){var i,o,a=t.queryIdentifier(),l=[],u=[],c=this.hasCompleteView();if("default"===a)try{for(var h=s.__values(this.views.entries()),d=h.next();!d.done;d=h.next()){var p,f=s.__read(d.value,2),g=f[0];u=u.concat((p=f[1]).removeEventRegistration(n,r)),p.isEmpty()&&(this.views.delete(g),p.getQuery().getQueryParams().loadsAllData()||l.push(p.getQuery()))}}catch(m){i={error:m}}finally{try{d&&!d.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}else(p=this.views.get(a))&&(u=u.concat(p.removeEventRegistration(n,r)),p.isEmpty()&&(this.views.delete(a),p.getQuery().getQueryParams().loadsAllData()||l.push(p.getQuery())));return c&&!this.hasCompleteView()&&l.push(new e.__referenceConstructor(t.repo,t.path)),{removed:l,events:u}},e.prototype.getQueryViews=function(){var e,t,n=[];try{for(var r=s.__values(this.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;o.getQuery().getQueryParams().loadsAllData()||n.push(o)}}catch(a){e={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},e.prototype.getCompleteServerCache=function(e){var t,n,r=null;try{for(var i=s.__values(this.views.values()),o=i.next();!o.done;o=i.next())r=r||o.value.getCompleteServerCache(e)}catch(a){t={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r},e.prototype.viewForQuery=function(e){if(e.getQueryParams().loadsAllData())return this.getCompleteView();var t=e.queryIdentifier();return this.views.get(t)},e.prototype.viewExistsForQuery=function(e){return null!=this.viewForQuery(e)},e.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},e.prototype.getCompleteView=function(){var e,t;try{for(var n=s.__values(this.views.values()),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.getQuery().getQueryParams().loadsAllData())return i}}catch(o){e={error:o}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return null},e}(),St=function(){function e(e){this.writeTree_=e}return e.prototype.addWrite=function(t,n){if(t.isEmpty())return new e(new ut(n));var r=this.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,o=r.value,s=X.relativePath(i,t);return o=o.updateChild(s,n),new e(this.writeTree_.set(i,o))}var a=new ut(n);return new e(this.writeTree_.setTree(t,a))},e.prototype.addWrites=function(e,t){var n=this;return x(t,(function(t,r){n=n.addWrite(e.child(t),r)})),n},e.prototype.removeWrite=function(t){return t.isEmpty()?e.Empty:new e(this.writeTree_.setTree(t,ut.Empty))},e.prototype.hasCompleteWrite=function(e){return null!=this.getCompleteNode(e)},e.prototype.getCompleteNode=function(e){var t=this.writeTree_.findRootMostValueAndPath(e);return null!=t?this.writeTree_.get(t.path).getChild(X.relativePath(t.path,e)):null},e.prototype.getCompleteChildren=function(){var e=[],t=this.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Ne,(function(t,n){e.push(new Ce(t,n))})):this.writeTree_.children.inorderTraversal((function(t,n){null!=n.value&&e.push(new Ce(t,n.value))})),e},e.prototype.childCompoundWrite=function(t){if(t.isEmpty())return this;var n=this.getCompleteNode(t);return new e(null!=n?new ut(n):this.writeTree_.subtree(t))},e.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},e.prototype.apply=function(e){return function e(t,n,r){if(null!=n.value)return r.updateChild(t,n.value);var i=null;return n.children.inorderTraversal((function(n,o){".priority"===n?(a.assert(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):r=e(t.child(n),o,r)})),r.getChild(t).isEmpty()||null===i||(r=r.updateChild(t.child(".priority"),i)),r}(X.Empty,this.writeTree_,e)},e.Empty=new e(new ut(null)),e}(),It=function(){function e(){this.visibleWrites_=St.Empty,this.allWrites_=[],this.lastWriteId_=-1}return e.prototype.childWrites=function(e){return new kt(e,this)},e.prototype.addOverwrite=function(e,t,n,r){a.assert(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:e,snap:t,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(e,t)),this.lastWriteId_=n},e.prototype.addMerge=function(e,t,n){a.assert(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:e,children:t,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(e,t),this.lastWriteId_=n},e.prototype.getWrite=function(e){for(var t=0;t<this.allWrites_.length;t++){var n=this.allWrites_[t];if(n.writeId===e)return n}return null},e.prototype.removeWrite=function(e){var t=this,n=this.allWrites_.findIndex((function(t){return t.writeId===e}));a.assert(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,o=!1,s=this.allWrites_.length-1;i&&s>=0;){var l=this.allWrites_[s];l.visible&&(s>=n&&this.recordContainsPath_(l,r.path)?i=!1:r.path.contains(l.path)&&(o=!0)),s--}return!!i&&(o?(this.resetTree_(),!0):(r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):x(r.children,(function(e){t.visibleWrites_=t.visibleWrites_.removeWrite(r.path.child(e))})),!0))},e.prototype.getCompleteWriteData=function(e){return this.visibleWrites_.getCompleteNode(e)},e.prototype.calcCompleteEventCache=function(t,n,r,i){if(r||i){var o=this.visibleWrites_.childCompoundWrite(t);return!i&&o.isEmpty()?n:i||null!=n||o.hasCompleteWrite(X.Empty)?e.layerTree_(this.allWrites_,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(e.path.contains(t)||t.contains(e.path))}),t).apply(n||qe.EMPTY_NODE):null}var s=this.visibleWrites_.getCompleteNode(t);if(null!=s)return s;var a=this.visibleWrites_.childCompoundWrite(t);return a.isEmpty()?n:null!=n||a.hasCompleteWrite(X.Empty)?a.apply(n||qe.EMPTY_NODE):null},e.prototype.calcCompleteEventChildren=function(e,t){var n=qe.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(e);if(r)return r.isLeafNode()||r.forEachChild(Ne,(function(e,t){n=n.updateImmediateChild(e,t)})),n;if(t){var i=this.visibleWrites_.childCompoundWrite(e);return t.forEachChild(Ne,(function(e,t){var r=i.childCompoundWrite(new X(e)).apply(t);n=n.updateImmediateChild(e,r)})),i.getCompleteChildren().forEach((function(e){n=n.updateImmediateChild(e.name,e.node)})),n}return this.visibleWrites_.childCompoundWrite(e).getCompleteChildren().forEach((function(e){n=n.updateImmediateChild(e.name,e.node)})),n},e.prototype.calcEventCacheAfterServerOverwrite=function(e,t,n,r){a.assert(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=e.child(t);if(this.visibleWrites_.hasCompleteWrite(i))return null;var o=this.visibleWrites_.childCompoundWrite(i);return o.isEmpty()?r.getChild(t):o.apply(r.getChild(t))},e.prototype.calcCompleteChild=function(e,t,n){var r=e.child(t),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(t)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(t)):null},e.prototype.shadowingWrite=function(e){return this.visibleWrites_.getCompleteNode(e)},e.prototype.calcIndexedSlice=function(e,t,n,r,i,o){var s,a=this.visibleWrites_.childCompoundWrite(e),l=a.getCompleteNode(X.Empty);if(null!=l)s=l;else{if(null==t)return[];s=a.apply(t)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var u=[],c=o.getCompare(),h=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),d=h.getNext();d&&u.length<r;)0!==c(d,n)&&u.push(d),d=h.getNext();return u},e.prototype.recordContainsPath_=function(e,t){if(e.snap)return e.path.contains(t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&e.path.child(n).contains(t))return!0;return!1},e.prototype.resetTree_=function(){this.visibleWrites_=e.layerTree_(this.allWrites_,e.DefaultFilter_,X.Empty),this.lastWriteId_=this.allWrites_.length>0?this.allWrites_[this.allWrites_.length-1].writeId:-1},e.DefaultFilter_=function(e){return e.visible},e.layerTree_=function(e,t,n){for(var r=St.Empty,i=0;i<e.length;++i){var o=e[i];if(t(o)){var s=o.path,l=void 0;if(o.snap)n.contains(s)?(l=X.relativePath(n,s),r=r.addWrite(l,o.snap)):s.contains(n)&&(l=X.relativePath(s,n),r=r.addWrite(X.Empty,o.snap.getChild(l)));else{if(!o.children)throw a.assertionError("WriteRecord should have .snap or .children");if(n.contains(s))l=X.relativePath(n,s),r=r.addWrites(l,o.children);else if(s.contains(n))if((l=X.relativePath(s,n)).isEmpty())r=r.addWrites(X.Empty,o.children);else{var u=a.safeGet(o.children,l.getFront());if(u){var c=u.getChild(l.popFront());r=r.addWrite(X.Empty,c)}}}}}return r},e}(),kt=function(){function e(e,t){this.treePath_=e,this.writeTree_=t}return e.prototype.calcCompleteEventCache=function(e,t,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,e,t,n)},e.prototype.calcCompleteEventChildren=function(e){return this.writeTree_.calcCompleteEventChildren(this.treePath_,e)},e.prototype.calcEventCacheAfterServerOverwrite=function(e,t,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,e,t,n)},e.prototype.shadowingWrite=function(e){return this.writeTree_.shadowingWrite(this.treePath_.child(e))},e.prototype.calcIndexedSlice=function(e,t,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,e,t,n,r,i)},e.prototype.calcCompleteChild=function(e,t){return this.writeTree_.calcCompleteChild(this.treePath_,e,t)},e.prototype.child=function(t){return new e(this.treePath_.child(t),this.writeTree_)},e}(),At=function(){function e(e){this.listenProvider_=e,this.syncPointTree_=ut.Empty,this.pendingWriteTree_=new It,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return e.prototype.applyUserOverwrite=function(e,t,n,r){return this.pendingWriteTree_.addOverwrite(e,t,n,r),r?this.applyOperationToSyncPoints_(new ht(st.User,e,t)):[]},e.prototype.applyUserMerge=function(e,t,n){this.pendingWriteTree_.addMerge(e,t,n);var r=ut.fromObject(t);return this.applyOperationToSyncPoints_(new dt(st.User,e,r))},e.prototype.ackUserWrite=function(e,t){void 0===t&&(t=!1);var n=this.pendingWriteTree_.getWrite(e);if(this.pendingWriteTree_.removeWrite(e)){var r=ut.Empty;return null!=n.snap?r=r.set(X.Empty,!0):x(n.children,(function(e,t){r=r.set(new X(e),t)})),this.applyOperationToSyncPoints_(new at(n.path,r,t))}return[]},e.prototype.applyServerOverwrite=function(e,t){return this.applyOperationToSyncPoints_(new ht(st.Server,e,t))},e.prototype.applyServerMerge=function(e,t){var n=ut.fromObject(t);return this.applyOperationToSyncPoints_(new dt(st.Server,e,n))},e.prototype.applyListenComplete=function(e){return this.applyOperationToSyncPoints_(new ct(st.Server,e))},e.prototype.applyTaggedQueryOverwrite=function(t,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=e.parseQueryKey_(i),s=o.path,a=o.queryId,l=X.relativePath(s,t),u=new ht(st.forServerTaggedQuery(a),l,n);return this.applyTaggedOperation_(s,u)}return[]},e.prototype.applyTaggedQueryMerge=function(t,n,r){var i=this.queryKeyForTag_(r);if(i){var o=e.parseQueryKey_(i),s=o.path,a=o.queryId,l=X.relativePath(s,t),u=ut.fromObject(n),c=new dt(st.forServerTaggedQuery(a),l,u);return this.applyTaggedOperation_(s,c)}return[]},e.prototype.applyTaggedListenComplete=function(t,n){var r=this.queryKeyForTag_(n);if(r){var i=e.parseQueryKey_(r),o=i.path,s=i.queryId,a=X.relativePath(o,t),l=new ct(st.forServerTaggedQuery(s),a);return this.applyTaggedOperation_(o,l)}return[]},e.prototype.addEventRegistration=function(t,n){var r=t.path,i=null,o=!1;this.syncPointTree_.foreachOnPath(r,(function(e,t){var n=X.relativePath(e,r);i=i||t.getCompleteServerCache(n),o=o||t.hasCompleteView()}));var s,l=this.syncPointTree_.get(r);l?(o=o||l.hasCompleteView(),i=i||l.getCompleteServerCache(X.Empty)):(l=new Tt,this.syncPointTree_=this.syncPointTree_.set(r,l)),null!=i?s=!0:(s=!1,i=qe.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild((function(e,t){var n=t.getCompleteServerCache(X.Empty);n&&(i=i.updateImmediateChild(e,n))})));var u=l.viewExistsForQuery(t);if(!u&&!t.getQueryParams().loadsAllData()){var c=e.makeQueryKey_(t);a.assert(!this.queryToTagMap.has(c),"View does not exist, but we have a tag");var h=e.getNextQueryTag_();this.queryToTagMap.set(c,h),this.tagToQueryMap.set(h,c)}var d=this.pendingWriteTree_.childWrites(r),p=l.addEventRegistration(t,n,d,i,s);if(!u&&!o){var f=l.viewForQuery(t);p=p.concat(this.setupListener_(t,f))}return p},e.prototype.removeEventRegistration=function(t,n,r){var i=this,o=t.path,s=this.syncPointTree_.get(o),a=[];if(s&&("default"===t.queryIdentifier()||s.viewExistsForQuery(t))){var l=s.removeEventRegistration(t,n,r);s.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var u=l.removed;a=l.events;var c=-1!==u.findIndex((function(e){return e.getQueryParams().loadsAllData()})),h=this.syncPointTree_.findOnPath(o,(function(e,t){return t.hasCompleteView()}));if(c&&!h){var d=this.syncPointTree_.subtree(o);if(!d.isEmpty())for(var p=this.collectDistinctViewsForSubTree_(d),f=0;f<p.length;++f){var g=p[f],m=g.getQuery(),y=this.createListenerForView_(g);this.listenProvider_.startListening(e.queryForListening_(m),this.tagForQuery_(m),y.hashFn,y.onComplete)}}!h&&u.length>0&&!r&&(c?this.listenProvider_.stopListening(e.queryForListening_(t),null):u.forEach((function(t){var n=i.queryToTagMap.get(e.makeQueryKey_(t));i.listenProvider_.stopListening(e.queryForListening_(t),n)}))),this.removeTags_(u)}return a},e.prototype.calcCompleteEventCache=function(e,t){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(e,(function(t,n){var r=X.relativePath(t,e),i=n.getCompleteServerCache(r);if(i)return i}));return n.calcCompleteEventCache(e,r,t,!0)},e.prototype.collectDistinctViewsForSubTree_=function(e){return e.fold((function(e,t,n){if(t&&t.hasCompleteView())return[t.getCompleteView()];var r=[];return t&&(r=t.getQueryViews()),x(n,(function(e,t){r=r.concat(t)})),r}))},e.prototype.removeTags_=function(t){for(var n=0;n<t.length;++n){var r=t[n];if(!r.getQueryParams().loadsAllData()){var i=e.makeQueryKey_(r),o=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(o)}}},e.queryForListening_=function(e){return e.getQueryParams().loadsAllData()&&!e.getQueryParams().isDefault()?e.getRef():e},e.prototype.setupListener_=function(t,n){var r=t.path,i=this.tagForQuery_(t),o=this.createListenerForView_(n),s=this.listenProvider_.startListening(e.queryForListening_(t),i,o.hashFn,o.onComplete),l=this.syncPointTree_.subtree(r);if(i)a.assert(!l.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var u=l.fold((function(e,t,n){if(!e.isEmpty()&&t&&t.hasCompleteView())return[t.getCompleteView().getQuery()];var r=[];return t&&(r=r.concat(t.getQueryViews().map((function(e){return e.getQuery()})))),x(n,(function(e,t){r=r.concat(t)})),r})),c=0;c<u.length;++c){var h=u[c];this.listenProvider_.stopListening(e.queryForListening_(h),this.tagForQuery_(h))}return s},e.prototype.createListenerForView_=function(e){var t=this,n=e.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(e.getServerCache()||qe.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?t.applyTaggedListenComplete(n.path,r):t.applyListenComplete(n.path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"==e?n="Client doesn't have permission to access the desired data.":"unavailable"==e&&(n="The service is unavailable");var r=new Error(e+" at "+t.path.toString()+": "+n);return r.code=e.toUpperCase(),r}(e,n);return t.removeEventRegistration(n,null,i)}}},e.makeQueryKey_=function(e){return e.path.toString()+"$"+e.queryIdentifier()},e.parseQueryKey_=function(e){var t=e.indexOf("$");return a.assert(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new X(e.substr(0,t))}},e.prototype.queryKeyForTag_=function(e){return this.tagToQueryMap.get(e)},e.prototype.tagForQuery_=function(t){var n=e.makeQueryKey_(t);return this.queryToTagMap.get(n)},e.getNextQueryTag_=function(){return e.nextQueryTag_++},e.prototype.applyTaggedOperation_=function(e,t){var n=this.syncPointTree_.get(e);a.assert(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(e);return n.applyOperation(t,r,null)},e.prototype.applyOperationToSyncPoints_=function(e){return this.applyOperationHelper_(e,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(X.Empty))},e.prototype.applyOperationHelper_=function(e,t,n,r){if(e.path.isEmpty())return this.applyOperationDescendantsHelper_(e,t,n,r);var i=t.get(X.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(X.Empty));var o=[],s=e.path.getFront(),a=e.operationForChild(s),l=t.children.get(s);if(l&&a){var u=n?n.getImmediateChild(s):null,c=r.child(s);o=o.concat(this.applyOperationHelper_(a,l,u,c))}return i&&(o=o.concat(i.applyOperation(e,r,n))),o},e.prototype.applyOperationDescendantsHelper_=function(e,t,n,r){var i=this,o=t.get(X.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(X.Empty));var s=[];return t.children.inorderTraversal((function(t,o){var a=n?n.getImmediateChild(t):null,l=r.child(t),u=e.operationForChild(t);u&&(s=s.concat(i.applyOperationDescendantsHelper_(u,o,a,l)))})),o&&(s=s.concat(o.applyOperation(e,r,n))),s},e.nextQueryTag_=1,e}(),Nt=function(){function e(){this.rootNode_=qe.EMPTY_NODE}return e.prototype.getNode=function(e){return this.rootNode_.getChild(e)},e.prototype.updateSnapshot=function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)},e}(),Dt=function(){function e(e){this.app_=e}return e.prototype.getToken=function(e){return this.app_.INTERNAL.getToken(e).then(null,(function(e){return e&&"auth/token-not-initialized"===e.code?(w("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)}))},e.prototype.addTokenChangeListener=function(e){this.app_.INTERNAL.addAuthTokenListener(e)},e.prototype.removeTokenChangeListener=function(e){this.app_.INTERNAL.removeAuthTokenListener(e)},e.prototype.notifyForInvalidToken=function(){var e='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';S(e+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},e}(),Rt=function(){function e(){this.counters_={}}return e.prototype.incrementCounter=function(e,t){void 0===t&&(t=1),a.contains(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t},e.prototype.get=function(){return a.deepCopy(this.counters_)},e}(),Ot=function(){function e(){}return e.getCollection=function(e){var t=e.toString();return this.collections_[t]||(this.collections_[t]=new Rt),this.collections_[t]},e.getOrCreateReporter=function(e,t){var n=e.toString();return this.reporters_[n]||(this.reporters_[n]=t()),this.reporters_[n]},e.collections_={},e.reporters_={},e}(),Pt=function(){function e(e){this.collection_=e,this.last_=null}return e.prototype.get=function(){var e=this.collection_.get(),t=s.__assign({},e);return this.last_&&x(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t},e}(),xt=1e4,Mt=3e4,Lt=function(){function e(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Pt(e);var n=xt+(Mt-xt)*Math.random();Y(this.reportStats_.bind(this),Math.floor(n))}return e.prototype.includeStat=function(e){this.statsToReport_[e]=!0},e.prototype.reportStats_=function(){var e=this,t=this.statsListener_.get(),n={},r=!1;x(t,(function(t,i){i>0&&a.contains(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),Y(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},e}(),Ft=function(){function e(){this.eventLists_=[],this.recursionDepth_=0}return e.prototype.queueEvents=function(e){for(var t=null,n=0;n<e.length;n++){var r=e[n],i=r.getPath();null===t||i.equals(t.getPath())||(this.eventLists_.push(t),t=null),null===t&&(t=new Ut(i)),t.add(r)}t&&this.eventLists_.push(t)},e.prototype.raiseEventsAtPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_((function(t){return t.equals(e)}))},e.prototype.raiseEventsForChangedPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_((function(t){return t.contains(e)||e.contains(t)}))},e.prototype.raiseQueuedEventsMatchingPredicate_=function(e){this.recursionDepth_++;for(var t=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(e(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):t=!1)}t&&(this.eventLists_=[]),this.recursionDepth_--},e}(),Ut=function(){function e(e){this.path_=e,this.events_=[]}return e.prototype.add=function(e){this.events_.push(e)},e.prototype.raise=function(){for(var e=0;e<this.events_.length;e++){var t=this.events_[e];if(null!==t){this.events_[e]=null;var n=t.getEventRunner();v&&w("event: "+t.toString()),Q(n)}}},e.prototype.getPath=function(){return this.path_},e}(),Vt=function(){function e(e){this.allowedEvents_=e,this.listeners_={},a.assert(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}return e.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Array.isArray(this.listeners_[e]))for(var r=s.__spread(this.listeners_[e]),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)},e.prototype.on=function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)},e.prototype.off=function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)},e.prototype.validateEventType_=function(e){a.assert(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)},e}(),jt=function(e){function t(){var t,n,r=e.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",t="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",t="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var e=!document[t];e!==r.visible_&&(r.visible_=e,r.trigger("visible",e))}),!1),r}return s.__extends(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return a.assert("visible"===e,"Unknown event type: "+e),[this.visible_]},t}(Vt),qt=function(e){function t(){var t=e.call(this,["online"])||this;return t.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||a.isMobileCordova()||(window.addEventListener("online",(function(){t.online_||(t.online_=!0,t.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){t.online_&&(t.online_=!1,t.trigger("online",!1))}),!1)),t}return s.__extends(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return a.assert("online"===e,"Unknown event type: "+e),[this.online_]},t.prototype.currentlyOnline=function(){return this.online_},t}(Vt),Bt=function(){function e(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return e.prototype.closeAfter=function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},e.prototype.handleResponse=function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var t=function(t){e[t]&&Q((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},e}(),Wt="pLPCommand",Ht="pRTLPCB",Kt=function(){function e(e,t,n,r){this.connId=e,this.repoInfo=t,this.transportSessionId=n,this.lastSessionId=r,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=C(e),this.stats_=Ot.getCollection(t),this.urlFn=function(e){return t.connectionURL(Z,e)}}return e.prototype.open=function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Bt(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(a.isNodeSdk()||"complete"===document.readyState)e();else{var t=!1,n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new zt((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=s.__read(e,5),i=r[0],o=r[1],a=r[2];if(n.incrementIncomingBytes_(e),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"==i)n.id=o,n.password=a;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=s.__read(e,2),i=r[0],o=r[1];n.incrementIncomingBytes_(e),n.myPacketOrderer.handleResponse(i,o)}),(function(){n.onClosed_()}),n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v="5",n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))},e.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},e.forceAllow=function(){e.forceAllow_=!0},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){return!(a.isNodeSdk()||!e.forceAllow_&&(e.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},e.prototype.markConnectionHealthy=function(){},e.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},e.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},e.prototype.send=function(e){var t=a.stringify(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=a.base64Encode(t),r=P(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},e.prototype.addDisconnectPingFrame=function(e,t){if(!a.isNodeSdk()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},e.prototype.incrementIncomingBytes_=function(e){var t=a.stringify(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},e}(),zt=function(){function e(t,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,a.isNodeSdk())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=g(),window[Wt+this.uniqueCallbackIdentifier]=t,window[Ht+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(o='<script>document.domain="'+document.domain+'";<\/script>');var s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(l){w("frame writing exception"),l.stack&&w(l.stack),w(l)}}}return e.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||w("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},e.prototype.close=function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())},e.prototype.startLongPoll=function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););},e.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(t+=n,this.currentSerial),!0}return!1},e.prototype.enqueueSegment=function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()},e.prototype.addLongPollTag_=function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))},e.prototype.addTag=function(e,t){var n=this;a.isNodeSdk()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){w("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))},e}(),Gt="",Qt=null;"undefined"!=typeof MozWebSocket?Qt=MozWebSocket:"undefined"!=typeof WebSocket&&(Qt=WebSocket);var $t=function(){function e(t,n,r,i){this.connId=t,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=C(this.connId),this.stats_=Ot.getCollection(n),this.connURL=e.connectionURL_(n,r,i)}return e.connectionURL_=function(e,t,n){var r={v:"5"};return!a.isNodeSdk()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(r.r="f"),t&&(r.s=t),n&&(r.ls=n),e.connectionURL("websocket",r)},e.prototype.open=function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,d.set("previous_websocket_failure",!0);try{if(a.isNodeSdk()){var r={headers:{"User-Agent":"Firebase/5/"+Gt+"/"+process.platform+"/"+(a.CONSTANTS.NODE_ADMIN?"AdminNode":"Node")}},i=process.env,o=0==this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;o&&(r.proxy={origin:o}),this.mySock=new Qt(this.connURL,[],r)}else this.mySock=new Qt(this.connURL)}catch(l){this.log_("Error instantiating WebSocket.");var s=l.message||l.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}},e.prototype.start=function(){},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){var t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==Qt&&!e.forceDisallow_},e.previouslyFailed=function(){return d.isInMemoryStorage||!0===d.get("previous_websocket_failure")},e.prototype.markConnectionHealthy=function(){d.remove("previous_websocket_failure")},e.prototype.appendFrame_=function(e){if(this.frames.push(e),this.frames.length==this.totalFrames){var t=this.frames.join("");this.frames=null;var n=a.jsonEval(t);this.onMessage(n)}},e.prototype.handleNewFrameCount_=function(e){this.totalFrames=e,this.frames=[]},e.prototype.extractFrameCount_=function(e){if(a.assert(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e},e.prototype.handleIncomingFrame=function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}},e.prototype.send=function(e){this.resetKeepAlive();var t=a.stringify(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=P(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},e.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},e.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},e.prototype.resetKeepAlive=function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))},e.prototype.sendString_=function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4,e}(),Yt=function(){function e(e){this.initTransports_(e)}return Object.defineProperty(e,"ALL_TRANSPORTS",{get:function(){return[Kt,$t]},enumerable:!0,configurable:!0}),e.prototype.initTransports_=function(t){var n,r,i=$t&&$t.isAvailable(),o=i&&!$t.previouslyFailed();if(t.webSocketOnly&&(i||S("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[$t];else{var a=this.transports_=[];try{for(var l=s.__values(e.ALL_TRANSPORTS),u=l.next();!u.done;u=l.next()){var c=u.value;c&&c.isAvailable()&&a.push(c)}}catch(h){n={error:h}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}}},e.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},e.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},e}(),Xt=function(){function e(e,t,n,r,i,o,s){this.id=e,this.repoInfo_=t,this.onMessage_=n,this.onReady_=r,this.onDisconnect_=i,this.onKill_=o,this.lastSessionId=s,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=C("c:"+this.id+":"),this.transportManager_=new Yt(t),this.log_("Connection created"),this.start_()}return e.prototype.start_=function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,void 0,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=Y((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))},e.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},e.prototype.disconnReceiver_=function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}},e.prototype.connReceiver_=function(e){var t=this;return function(n){2!=t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}},e.prototype.sendRequest=function(e){this.sendData_({t:"d",d:e})},e.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},e.prototype.onSecondaryControl_=function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},e.prototype.onSecondaryMessageReceived_=function(e){var t=R("t",e),n=R("d",e);if("c"==t)this.onSecondaryControl_(n);else{if("d"!=t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}},e.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},e.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},e.prototype.onPrimaryMessageReceived_=function(e){var t=R("t",e),n=R("d",e);"c"==t?this.onControl_(n):"d"==t&&this.onDataMessage_(n)},e.prototype.onDataMessage_=function(e){this.onPrimaryResponse_(),this.onMessage_(e)},e.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},e.prototype.onControl_=function(e){var t=R("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?E("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):E("Unknown control packet command: "+t)}},e.prototype.onHandshake_=function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.updateHost(r),0==this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==n&&S("Protocol version mismatch detected"),this.tryStartUpgrade_())},e.prototype.tryStartUpgrade_=function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)},e.prototype.startUpgrade_=function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Y((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))},e.prototype.onReset_=function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.updateHost(e),1===this.state_?this.close():(this.closeConnections_(),this.start_())},e.prototype.onConnectionEstablished_=function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Y((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},e.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},e.prototype.onSecondaryConnectionLost_=function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()},e.prototype.onConnectionLost_=function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(d.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},e.prototype.onConnectionShutdown_=function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()},e.prototype.sendData_=function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)},e.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},e.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},e}(),Jt=function(){function e(){}return e.prototype.put=function(e,t,n,r){},e.prototype.merge=function(e,t,n,r){},e.prototype.refreshAuthToken=function(e){},e.prototype.onDisconnectPut=function(e,t,n){},e.prototype.onDisconnectMerge=function(e,t,n){},e.prototype.onDisconnectCancel=function(e,t){},e.prototype.reportStats=function(e){},e}(),Zt=1e3,en=3e5,tn=function(e){function t(n,r,i,o,s,l){var u=e.call(this)||this;if(u.repoInfo_=n,u.onDataUpdate_=r,u.onConnectStatus_=i,u.onServerInfoUpdate_=o,u.authTokenProvider_=s,u.authOverride_=l,u.id=t.nextPersistentConnectionId_++,u.log_=C("p:"+u.id+":"),u.interruptReasons_={},u.listens=new Map,u.outstandingPuts_=[],u.outstandingPutCount_=0,u.onDisconnectRequestQueue_=[],u.connected_=!1,u.reconnectDelay_=Zt,u.maxReconnectDelay_=en,u.securityDebugCallback_=null,u.lastSessionId=null,u.establishConnectionTimer_=null,u.visible_=!1,u.requestCBHash_={},u.requestNumber_=0,u.realtime_=null,u.authToken_=null,u.forceTokenRefresh_=!1,u.invalidAuthTokenCount_=0,u.firstConnection_=!0,u.lastConnectionAttemptTime_=null,u.lastConnectionEstablishedTime_=null,l&&!a.isNodeSdk())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return u.scheduleConnect_(0),jt.getInstance().on("visible",u.onVisible_,u),-1===n.host.indexOf("fblocal")&&qt.getInstance().on("online",u.onOnline_,u),u}return s.__extends(t,e),t.prototype.sendRequest=function(e,t,n){var r=++this.requestNumber_,i={r,a:e,b:t};this.log_(a.stringify(i)),a.assert(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},t.prototype.listen=function(e,t,n,r){var i=e.queryIdentifier(),o=e.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),a.assert(e.getQueryParams().isDefault()||!e.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),a.assert(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(o).set(i,s),this.connected_&&this.sendListen_(s)},t.prototype.sendListen_=function(e){var n=this,r=e.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var s={p:i};e.tag&&(s.q=r.queryObject(),s.t=e.tag),s.h=e.hashFn(),this.sendRequest("q",s,(function(s){var a=s.d,l=s.s;t.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===e&&(n.log_("listen response",s),"ok"!==l&&n.removeListen_(i,o),e.onComplete&&e.onComplete(l,a))}))},t.warnOnListenWarnings_=function(e,t){if(e&&"object"==typeof e&&a.contains(e,"w")){var n=a.safeGet(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t.getQueryParams().getIndex().toString()+'"',i=t.path.toString();S("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},t.prototype.refreshAuthToken=function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)},t.prototype.reduceReconnectDelayIfAdminCredential_=function(e){(e&&40===e.length||a.isAdmin(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},t.prototype.tryAuth=function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=a.isValidFormat(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}},t.prototype.unlisten=function(e,t){var n=e.path.toString(),r=e.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),a.assert(e.getQueryParams().isDefault()||!e.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e.queryObject(),t)},t.prototype.sendUnlisten_=function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},t.prototype.onDisconnectPut=function(e,t,n){this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})},t.prototype.onDisconnectMerge=function(e,t,n){this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})},t.prototype.onDisconnectCancel=function(e,t){this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})},t.prototype.sendOnDisconnect_=function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))},t.prototype.put=function(e,t,n,r){this.putInternal("p",e,t,n,r)},t.prototype.merge=function(e,t,n,r){this.putInternal("m",e,t,n,r)},t.prototype.putInternal=function(e,t,n,r,i){var o={p:t,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+t)},t.prototype.sendPut_=function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))},t.prototype.reportStats=function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){"ok"!==e.s&&t.log_("reportStats","Error sending stats: "+e.d)}))}},t.prototype.onDataMessage_=function(e){if("r"in e){this.log_("from server: "+a.stringify(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}},t.prototype.onDataPush_=function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):E("Unrecognized action received from server: "+a.stringify(e)+"\nAre you using the latest client?")},t.prototype.onReady_=function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},t.prototype.scheduleConnect_=function(e){var t=this;a.assert(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))},t.prototype.onVisible_=function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Zt,this.realtime_||this.scheduleConnect_(0)),this.visible_=e},t.prototype.onOnline_=function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Zt,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},t.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Zt),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},t.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+t.nextConnectionId_++,o=this,s=this.lastSessionId,l=!1,u=null,c=function(){u?u.close():(l=!0,r())};this.realtime_={close:c,sendRequest:function(e){a.assert(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(e)}};var h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(h).then((function(t){l?w("getToken() completed but was canceled"):(w("getToken() completed. Creating connection."),o.authToken_=t&&t.accessToken,u=new Xt(i,o.repoInfo_,e,n,r,(function(e){S(e+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")}),s))})).then(null,(function(e){o.log_("Failed to get token: "+e),l||(a.CONSTANTS.NODE_ADMIN&&S(e),c())}))}},t.prototype.interrupt=function(e){w("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},t.prototype.resume=function(e){w("Resuming connection for reason: "+e),delete this.interruptReasons_[e],a.isEmpty(this.interruptReasons_)&&(this.reconnectDelay_=Zt,this.realtime_||this.scheduleConnect_(0))},t.prototype.handleTimestamp_=function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})},t.prototype.cancelSentTransactions_=function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},t.prototype.onListenRevoked_=function(e,t){var n;n=t?t.map((function(e){return O(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")},t.prototype.removeListen_=function(e,t){var n,r=new X(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n},t.prototype.onAuthRevoked_=function(e,t){w("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},t.prototype.onSecurityDebugPacket_=function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))},t.prototype.restoreState_=function(){var e,t,n,r;this.tryAuth();try{for(var i=s.__values(this.listens.values()),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var l=(n=void 0,s.__values(a.values())),u=l.next();!u.done;u=l.next())this.sendListen_(u.value)}catch(d){n={error:d}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}}}catch(p){e={error:p}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}for(var c=0;c<this.outstandingPuts_.length;c++)this.outstandingPuts_[c]&&this.sendPut_(c);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}},t.prototype.sendConnectStats_=function(){var e={},t="js";a.CONSTANTS.NODE_ADMIN?t="admin_node":a.CONSTANTS.NODE_CLIENT&&(t="node"),e["sdk."+t+"."+Gt.replace(/\./g,"-")]=1,a.isMobileCordova()?e["framework.cordova"]=1:a.isReactNative()&&(e["framework.reactnative"]=1),this.reportStats(e)},t.prototype.shouldReconnect_=function(){var e=qt.getInstance().currentlyOnline();return a.isEmpty(this.interruptReasons_)&&e},t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t}(Jt),nn=function(e){function t(t,n,r){var i=e.call(this)||this;return i.repoInfo_=t,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=C("p:rest:"),i.listens_={},i}return s.__extends(t,e),t.prototype.reportStats=function(e){throw new Error("Method not implemented.")},t.getListenId_=function(e,t){return void 0!==t?"tag$"+t:(a.assert(e.getQueryParams().isDefault(),"should have a tag if it's not a default query."),e.path.toString())},t.prototype.listen=function(e,n,r,i){var o=this,s=e.path.toString();this.log_("Listen called for "+s+" "+e.queryIdentifier());var l=t.getListenId_(e,r),u={};this.listens_[l]=u;var c=e.getQueryParams().toRestQueryStringParameters();this.restRequest_(s+".json",c,(function(e,t){var n=t;404===e&&(n=null,e=null),null===e&&o.onDataUpdate_(s,n,!1,r),a.safeGet(o.listens_,l)===u&&i(e?401==e?"permission_denied":"rest_error:"+e:"ok",null)}))},t.prototype.unlisten=function(e,n){var r=t.getListenId_(e,n);delete this.listens_[r]},t.prototype.refreshAuthToken=function(e){},t.prototype.restRequest_=function(e,t,n){var r=this;void 0===t&&(t={}),t.format="export",this.authTokenProvider_.getToken(!1).then((function(i){var o=i&&i.accessToken;o&&(t.auth=o);var s=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+e+"?ns="+r.repoInfo_.namespace+a.querystring(t);r.log_("Sending REST request for "+s);var l=new XMLHttpRequest;l.onreadystatechange=function(){if(n&&4===l.readyState){r.log_("REST Response for "+s+" received. status:",l.status,"response:",l.responseText);var e=null;if(l.status>=200&&l.status<300){try{e=a.jsonEval(l.responseText)}catch(t){S("Failed to parse JSON response for "+s+": "+l.responseText)}n(null,e)}else 401!==l.status&&404!==l.status&&S("Got unsuccessful REST response for "+s+" Status: "+l.status),n(l.status);n=null}},l.open("GET",s,!0),l.send()}))},t}(Jt),rn=function(){function e(e,t,n){var r=this;this.repoInfo_=e,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ft,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new nt,this.persistentConnection_=null;var i=new Dt(n);if(this.stats_=Ot.getCollection(e),t||$())this.server_=new nn(this.repoInfo_,this.onDataUpdate_.bind(this),i),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var o=n.options.databaseAuthVariableOverride;if(null!=o){if("object"!=typeof o)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{a.stringify(o)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}this.persistentConnection_=new tn(this.repoInfo_,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),i,o),this.server_=this.persistentConnection_}i.addTokenChangeListener((function(e){r.server_.refreshAuthToken(e)})),this.statsReporter_=Ot.getOrCreateReporter(e,(function(){return new Lt(r.stats_,r.server_)})),this.transactions_init_(),this.infoData_=new Nt,this.infoSyncTree_=new At({startListening:function(e,t,n,i){var o=[],s=r.infoData_.getNode(e.path);return s.isEmpty()||(o=r.infoSyncTree_.applyServerOverwrite(e.path,s),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new At({startListening:function(e,t,n,i){return r.server_.listen(e,n,t,(function(t,n){var o=i(t,n);r.eventQueue_.raiseEventsForChangedPath(e.path,o)})),[]},stopListening:function(e,t){r.server_.unlisten(e,t)}})}return e.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},e.prototype.name=function(){return this.repoInfo_.namespace},e.prototype.serverTime=function(){var e=this.infoData_.getNode(new X(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e},e.prototype.generateServerValues=function(){return(e=(e={timestamp:this.serverTime()})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e},e.prototype.onDataUpdate_=function(e,t,n,r){this.dataUpdateCount++;var i=new X(e);t=this.interceptServerDataCallback_?this.interceptServerDataCallback_(e,t):t;var o=[];if(r)if(n){var s=a.map(t,(function(e){return He(e)}));o=this.serverSyncTree_.applyTaggedQueryMerge(i,s,r)}else{var l=He(t);o=this.serverSyncTree_.applyTaggedQueryOverwrite(i,l,r)}else if(n){var u=a.map(t,(function(e){return He(e)}));o=this.serverSyncTree_.applyServerMerge(i,u)}else{var c=He(t);o=this.serverSyncTree_.applyServerOverwrite(i,c)}var h=i;o.length>0&&(h=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(h,o)},e.prototype.interceptServerData_=function(e){this.interceptServerDataCallback_=e},e.prototype.onConnectStatus_=function(e){this.updateInfo_("connected",e),!1===e&&this.runOnDisconnectEvents_()},e.prototype.onServerInfoUpdate_=function(e){var t=this;x(e,(function(e,n){t.updateInfo_(e,n)}))},e.prototype.updateInfo_=function(e,t){var n=new X("/.info/"+e),r=He(t);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},e.prototype.getNextWriteId_=function(){return this.nextWriteId_++},e.prototype.setWithPriority=function(e,t,n,r){var i=this;this.log_("set",{path:e.toString(),value:t,priority:n});var o=this.generateServerValues(),s=He(t,n),a=it(s,o),l=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserOverwrite(e,a,l,!0);this.eventQueue_.queueEvents(u),this.server_.put(e.toString(),s.val(!0),(function(t,n){var o="ok"===t;o||S("set at "+e+" failed: "+t);var s=i.serverSyncTree_.ackUserWrite(l,!o);i.eventQueue_.raiseEventsForChangedPath(e,s),i.callOnCompleteCallback(r,t,n)}));var c=this.abortTransactions_(e);this.rerunTransactions_(c),this.eventQueue_.raiseEventsForChangedPath(c,[])},e.prototype.update=function(e,t,n){var r=this;this.log_("update",{path:e.toString(),value:t});var i=!0,o=this.generateServerValues(),s={};if(x(t,(function(e,t){i=!1;var n=He(t);s[e]=it(n,o)})),i)w("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var a=this.getNextWriteId_(),l=this.serverSyncTree_.applyUserMerge(e,s,a);this.eventQueue_.queueEvents(l),this.server_.merge(e.toString(),t,(function(t,i){var o="ok"===t;o||S("update at "+e+" failed: "+t);var s=r.serverSyncTree_.ackUserWrite(a,!o),l=s.length>0?r.rerunTransactions_(e):e;r.eventQueue_.raiseEventsForChangedPath(l,s),r.callOnCompleteCallback(n,t,i)})),x(t,(function(t){var n=r.abortTransactions_(e.child(t));r.rerunTransactions_(n)})),this.eventQueue_.raiseEventsForChangedPath(e,[])}},e.prototype.runOnDisconnectEvents_=function(){var e=this;this.log_("onDisconnectEvents");var t=this.generateServerValues(),n=function(e,t){var n=new nt;return e.forEachTree(new X(""),(function(e,r){n.remember(e,it(r,t))})),n}(this.onDisconnect_,t),r=[];n.forEachTree(X.Empty,(function(t,n){r=r.concat(e.serverSyncTree_.applyServerOverwrite(t,n));var i=e.abortTransactions_(t);e.rerunTransactions_(i)})),this.onDisconnect_=new nt,this.eventQueue_.raiseEventsForChangedPath(X.Empty,r)},e.prototype.onDisconnectCancel=function(e,t){var n=this;this.server_.onDisconnectCancel(e.toString(),(function(r,i){"ok"===r&&n.onDisconnect_.forget(e),n.callOnCompleteCallback(t,r,i)}))},e.prototype.onDisconnectSet=function(e,t,n){var r=this,i=He(t);this.server_.onDisconnectPut(e.toString(),i.val(!0),(function(t,o){"ok"===t&&r.onDisconnect_.remember(e,i),r.callOnCompleteCallback(n,t,o)}))},e.prototype.onDisconnectSetWithPriority=function(e,t,n,r){var i=this,o=He(t,n);this.server_.onDisconnectPut(e.toString(),o.val(!0),(function(t,n){"ok"===t&&i.onDisconnect_.remember(e,o),i.callOnCompleteCallback(r,t,n)}))},e.prototype.onDisconnectUpdate=function(e,t,n){var r=this;if(a.isEmpty(t))return w("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(e.toString(),t,(function(i,o){"ok"===i&&x(t,(function(t,n){var i=He(n);r.onDisconnect_.remember(e.child(t),i)})),r.callOnCompleteCallback(n,i,o)}))},e.prototype.addEventCallbackForQuery=function(e,t){var n;n=".info"===e.path.getFront()?this.infoSyncTree_.addEventRegistration(e,t):this.serverSyncTree_.addEventRegistration(e,t),this.eventQueue_.raiseEventsAtPath(e.path,n)},e.prototype.removeEventCallbackForQuery=function(e,t){var n;n=".info"===e.path.getFront()?this.infoSyncTree_.removeEventRegistration(e,t):this.serverSyncTree_.removeEventRegistration(e,t),this.eventQueue_.raiseEventsAtPath(e.path,n)},e.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt("repo_interrupt")},e.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume("repo_interrupt")},e.prototype.stats=function(e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var t;e?(this.statsListener_||(this.statsListener_=new Pt(this.stats_)),t=this.statsListener_.get()):t=this.stats_.get();var n=Object.keys(t).reduce((function(e,t){return Math.max(t.length,e)}),0);x(t,(function(e,t){for(var r=e,i=e.length;i<n+2;i++)r+=" ";console.log(r+t)}))}},e.prototype.statsIncrementCounter=function(e){this.stats_.incrementCounter(e),this.statsReporter_.includeStat(e)},e.prototype.log_=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),w.apply(void 0,s.__spread([n],e))},e.prototype.callOnCompleteCallback=function(e,t,n){e&&Q((function(){if("ok"==t)e(null);else{var r=(t||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,e(o)}}))},Object.defineProperty(e.prototype,"database",{get:function(){return this.__database||(this.__database=new fn(this))},enumerable:!0,configurable:!0}),e}(),on=function(){function e(t){this.indexedFilter_=new mt(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return e.prototype.getStartPost=function(){return this.startPost_},e.prototype.getEndPost=function(){return this.endPost_},e.prototype.matches=function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0},e.prototype.updateChild=function(e,t,n,r,i,o){return this.matches(new Ce(t,n))||(n=qe.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,o)},e.prototype.updateFullNode=function(e,t,n){t.isLeafNode()&&(t=qe.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(qe.EMPTY_NODE);var i=this;return t.forEachChild(Ne,(function(e,t){i.matches(new Ce(e,t))||(r=r.updateImmediateChild(e,qe.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.indexedFilter_},e.prototype.getIndex=function(){return this.index_},e.getStartPost_=function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()},e.getEndPost_=function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()},e}(),sn=function(){function e(e){this.rangedFilter_=new on(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}return e.prototype.updateChild=function(e,t,n,r,i,o){return this.rangedFilter_.matches(new Ce(t,n))||(n=qe.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,o):this.fullLimitUpdateChild_(e,t,n,i,o)},e.prototype.updateFullNode=function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=qe.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){r=qe.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=t.withIndex(this.index_)).updatePriority(qe.EMPTY_NODE);var a=void 0,l=void 0,u=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost();var c=this.index_.getCompare();u=function(e,t){return c(t,e)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),u=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&u(a,s)<=0&&(h=!0),h&&o<this.limit_&&u(s,l)<=0?o++:r=r.updateImmediateChild(s.name,qe.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},e.prototype.getIndex=function(){return this.index_},e.prototype.fullLimitUpdateChild_=function(e,t,n,r,i){var o;if(this.reverse_){var s=this.index_.getCompare();o=function(e,t){return s(t,e)}}else o=this.index_.getCompare();var l=e;a.assert(l.numChildren()==this.limit_,"");var u=new Ce(t,n),c=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),h=this.rangedFilter_.matches(u);if(l.hasChild(t)){for(var d=l.getImmediateChild(t),p=r.getChildAfterChild(this.index_,c,this.reverse_);null!=p&&(p.name==t||l.hasChild(p.name));)p=r.getChildAfterChild(this.index_,p,this.reverse_);var f=null==p?1:o(p,u);if(h&&!n.isEmpty()&&f>=0)return null!=i&&i.trackChildChange(gt.childChangedChange(t,n,d)),l.updateImmediateChild(t,n);null!=i&&i.trackChildChange(gt.childRemovedChange(t,d));var g=l.updateImmediateChild(t,qe.EMPTY_NODE);return null!=p&&this.rangedFilter_.matches(p)?(null!=i&&i.trackChildChange(gt.childAddedChange(p.name,p.node)),g.updateImmediateChild(p.name,p.node)):g}return n.isEmpty()?e:h&&o(c,u)>=0?(null!=i&&(i.trackChildChange(gt.childRemovedChange(c.name,c.node)),i.trackChildChange(gt.childAddedChange(t,n))),l.updateImmediateChild(t,n).updateImmediateChild(c.name,qe.EMPTY_NODE)):e},e}(),an=function(){function e(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ne}return e.prototype.hasStart=function(){return this.startSet_},e.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===e.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},e.prototype.getIndexStartValue=function(){return a.assert(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},e.prototype.getIndexStartName=function(){return a.assert(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:k},e.prototype.hasEnd=function(){return this.endSet_},e.prototype.getIndexEndValue=function(){return a.assert(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},e.prototype.getIndexEndName=function(){return a.assert(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:A},e.prototype.hasLimit=function(){return this.limitSet_},e.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},e.prototype.getLimit=function(){return a.assert(this.limitSet_,"Only valid if limit has been set"),this.limit_},e.prototype.getIndex=function(){return this.index_},e.prototype.copy_=function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},e.prototype.limit=function(e){var t=this.copy_();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="",t},e.prototype.limitToFirst=function(t){var n=this.copy_();return n.limitSet_=!0,n.limit_=t,n.viewFrom_=e.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},e.prototype.limitToLast=function(t){var n=this.copy_();return n.limitSet_=!0,n.limit_=t,n.viewFrom_=e.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},e.prototype.startAt=function(e,t){var n=this.copy_();return n.startSet_=!0,void 0===e&&(e=null),n.indexStartValue_=e,null!=t?(n.startNameSet_=!0,n.indexStartName_=t):(n.startNameSet_=!1,n.indexStartName_=""),n},e.prototype.endAt=function(e,t){var n=this.copy_();return n.endSet_=!0,void 0===e&&(e=null),n.indexEndValue_=e,void 0!==t?(n.endNameSet_=!0,n.indexEndName_=t):(n.endNameSet_=!1,n.indexEndName_=""),n},e.prototype.orderBy=function(e){var t=this.copy_();return t.index_=e,t},e.prototype.getQueryObject=function(){var t=e.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[t.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[t.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[t.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[t.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[t.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?t.VIEW_FROM_LEFT:t.VIEW_FROM_RIGHT),n[t.VIEW_FROM]=r}return this.index_!==Ne&&(n[t.INDEX]=this.index_.toString()),n},e.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},e.prototype.isDefault=function(){return this.loadsAllData()&&this.index_==Ne},e.prototype.getNodeFilter=function(){return this.loadsAllData()?new mt(this.getIndex()):this.hasLimit()?new sn(this):new on(this)},e.prototype.toRestQueryStringParameters=function(){var t,n=e.REST_QUERY_CONSTANTS_,r={};return this.isDefault()?r:(this.index_===Ne?t=n.PRIORITY_INDEX:this.index_===Qe?t=n.VALUE_INDEX:this.index_===Se?t=n.KEY_INDEX:(a.assert(this.index_ instanceof $e,"Unrecognized index type!"),t=this.index_.toString()),r[n.ORDER_BY]=a.stringify(t),this.startSet_&&(r[n.START_AT]=a.stringify(this.indexStartValue_),this.startNameSet_&&(r[n.START_AT]+=","+a.stringify(this.indexStartName_))),this.endSet_&&(r[n.END_AT]=a.stringify(this.indexEndValue_),this.endNameSet_&&(r[n.END_AT]+=","+a.stringify(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?r[n.LIMIT_TO_FIRST]=this.limit_:r[n.LIMIT_TO_LAST]=this.limit_),r)},e.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},e.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},e.DEFAULT=new e,e}(),ln=function(e){function t(t,n){if(!(t instanceof rn))throw new Error("new Reference() no longer supported - use app.database().");return e.call(this,t,n,an.DEFAULT,!1)||this}return s.__extends(t,e),t.prototype.getKey=function(){return a.validateArgCount("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},t.prototype.child=function(e){return a.validateArgCount("Reference.child",1,1,arguments.length),"number"==typeof e?e=String(e):e instanceof X||(null===this.path.getFront()?ge("Reference.child",1,e,!1):fe("Reference.child",1,e,!1)),new t(this.repo,this.path.child(e))},t.prototype.getParent=function(){a.validateArgCount("Reference.parent",0,0,arguments.length);var e=this.path.parent();return null===e?null:new t(this.repo,e)},t.prototype.getRoot=function(){a.validateArgCount("Reference.root",0,0,arguments.length);for(var e=this;null!==e.getParent();)e=e.getParent();return e},t.prototype.databaseProp=function(){return this.repo.database},t.prototype.set=function(e,t){a.validateArgCount("Reference.set",1,2,arguments.length),me("Reference.set",this.path),le("Reference.set",1,e,this.path,!1),a.validateCallback("Reference.set",2,t,!0);var n=new a.Deferred;return this.repo.setWithPriority(this.path,e,null,n.wrapCallback(t)),n.promise},t.prototype.update=function(e,t){if(a.validateArgCount("Reference.update",1,2,arguments.length),me("Reference.update",this.path),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,S("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ce("Reference.update",1,e,this.path,!1),a.validateCallback("Reference.update",2,t,!0);var i=new a.Deferred;return this.repo.update(this.path,e,i.wrapCallback(t)),i.promise},t.prototype.setWithPriority=function(e,t,n){if(a.validateArgCount("Reference.setWithPriority",2,3,arguments.length),me("Reference.setWithPriority",this.path),le("Reference.setWithPriority",1,e,this.path,!1),he("Reference.setWithPriority",2,t,!1),a.validateCallback("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new a.Deferred;return this.repo.setWithPriority(this.path,e,t,r.wrapCallback(n)),r.promise},t.prototype.remove=function(e){return a.validateArgCount("Reference.remove",0,1,arguments.length),me("Reference.remove",this.path),a.validateCallback("Reference.remove",1,e,!0),this.set(null,e)},t.prototype.transaction=function(e,t,n){if(a.validateArgCount("Reference.transaction",1,3,arguments.length),me("Reference.transaction",this.path),a.validateCallback("Reference.transaction",1,e,!1),a.validateCallback("Reference.transaction",2,t,!0),ve("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new a.Deferred;"function"==typeof t&&r.promise.catch((function(){}));var i=function(e,n,i){e?r.reject(e):r.resolve(new be(n,i)),"function"==typeof t&&t(e,n,i)};return this.repo.startTransaction(this.path,e,i,n),r.promise},t.prototype.setPriority=function(e,t){a.validateArgCount("Reference.setPriority",1,2,arguments.length),me("Reference.setPriority",this.path),he("Reference.setPriority",1,e,!1),a.validateCallback("Reference.setPriority",2,t,!0);var n=new a.Deferred;return this.repo.setWithPriority(this.path.child(".priority"),e,null,n.wrapCallback(t)),n.promise},t.prototype.push=function(e,t){a.validateArgCount("Reference.push",0,2,arguments.length),me("Reference.push",this.path),le("Reference.push",1,e,this.path,!0),a.validateCallback("Reference.push",2,t,!0);var n,r=this.repo.serverTime(),i=we(r),o=this.child(i),s=this.child(i);return n=null!=e?o.set(e,t).then((function(){return s})):Promise.resolve(s),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof t&&n.catch((function(){})),o},t.prototype.onDisconnect=function(){return me("Reference.onDisconnect",this.path),new _e(this.repo,this.path)},Object.defineProperty(t.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),t}(tt);tt.__referenceConstructor=ln,Tt.__referenceConstructor=ln;var un=function(){return function(){this.children={},this.childCount=0,this.value=null}}(),cn=function(){function e(e,t,n){void 0===e&&(e=""),void 0===t&&(t=null),void 0===n&&(n=new un),this.name_=e,this.parent_=t,this.node_=n}return e.prototype.subTree=function(t){for(var n,r=t instanceof X?t:new X(t),i=this;null!==(n=r.getFront());)i=new e(n,i,a.safeGet(i.node_.children,n)||new un),r=r.popFront();return i},e.prototype.getValue=function(){return this.node_.value},e.prototype.setValue=function(e){a.assert(void 0!==e,"Cannot set value to undefined"),this.node_.value=e,this.updateParents_()},e.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},e.prototype.hasChildren=function(){return this.node_.childCount>0},e.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},e.prototype.forEachChild=function(t){var n=this;x(this.node_.children,(function(r,i){t(new e(r,n,i))}))},e.prototype.forEachDescendant=function(e,t,n){t&&!n&&e(this),this.forEachChild((function(t){t.forEachDescendant(e,!0,n)})),t&&n&&e(this)},e.prototype.forEachAncestor=function(e,t){for(var n=t?this:this.parent();null!==n;){if(e(n))return!0;n=n.parent()}return!1},e.prototype.forEachImmediateDescendantWithValue=function(e){this.forEachChild((function(t){null!==t.getValue()?e(t):t.forEachImmediateDescendantWithValue(e)}))},e.prototype.path=function(){return new X(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},e.prototype.name=function(){return this.name_},e.prototype.parent=function(){return this.parent_},e.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},e.prototype.updateChild_=function(e,t){var n=t.isEmpty(),r=a.contains(this.node_.children,e);n&&r?(delete this.node_.children[e],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[e]=t.node_,this.node_.childCount++,this.updateParents_())},e}(),hn=function(e){return e[e.RUN=0]="RUN",e[e.SENT=1]="SENT",e[e.COMPLETED=2]="COMPLETED",e[e.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",e[e.NEEDS_ABORT=4]="NEEDS_ABORT",e}({});rn.MAX_TRANSACTION_RETRIES_=25,rn.prototype.transactions_init_=function(){this.transactionQueueTree_=new cn},rn.prototype.startTransaction=function(e,t,n,r){this.log_("transaction on "+e);var i=function(){},o=new ln(this,e);o.on("value",i);var s={path:e,update:t,onComplete:n,status:null,order:g(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},l=this.getLatestState_(e);s.currentInputSnapshot=l;var u=s.update(l.val());if(void 0===u){if(s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete){var c=new Ye(s.currentInputSnapshot,new ln(this,s.path),Ne);s.onComplete(null,!1,c)}}else{ue("transaction failed: Data returned ",u,s.path),s.status=hn.RUN;var h=this.transactionQueueTree_.subTree(e),d=h.getValue()||[];d.push(s),h.setValue(d);var p=void 0;"object"==typeof u&&null!==u&&a.contains(u,".priority")?(p=a.safeGet(u,".priority"),a.assert(ae(p),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):p=(this.serverSyncTree_.calcCompleteEventCache(e)||qe.EMPTY_NODE).getPriority().val(),p=p;var f=this.generateServerValues(),m=He(u,p),y=it(m,f);s.currentOutputSnapshotRaw=m,s.currentOutputSnapshotResolved=y,s.currentWriteId=this.getNextWriteId_();var v=this.serverSyncTree_.applyUserOverwrite(e,y,s.currentWriteId,s.applyLocally);this.eventQueue_.raiseEventsForChangedPath(e,v),this.sendReadyTransactions_()}},rn.prototype.getLatestState_=function(e,t){return this.serverSyncTree_.calcCompleteEventCache(e,t)||qe.EMPTY_NODE},rn.prototype.sendReadyTransactions_=function(e){var t=this;if(void 0===e&&(e=this.transactionQueueTree_),e||this.pruneCompletedTransactionsBelowNode_(e),null!==e.getValue()){var n=this.buildTransactionQueue_(e);a.assert(n.length>0,"Sending zero length transaction queue"),n.every((function(e){return e.status===hn.RUN}))&&this.sendTransactionQueue_(e.path(),n)}else e.hasChildren()&&e.forEachChild((function(e){t.sendReadyTransactions_(e)}))},rn.prototype.sendTransactionQueue_=function(e,t){for(var n=this,r=t.map((function(e){return e.currentWriteId})),i=this.getLatestState_(e,r),o=i,s=i.hash(),l=0;l<t.length;l++){var u=t[l];a.assert(u.status===hn.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=hn.SENT,u.retryCount++;var c=X.relativePath(e,u.path);o=o.updateChild(c,u.currentOutputSnapshotRaw)}var h=o.val(!0),d=e;this.server_.put(d.toString(),h,(function(r){n.log_("transaction put response",{path:d.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=0;s<t.length;s++){if(t[s].status=hn.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(t[s].currentWriteId)),t[s].onComplete){var a=t[s].currentOutputSnapshotResolved,l=new ln(n,t[s].path),u=new Ye(a,l,Ne);o.push(t[s].onComplete.bind(null,null,!0,u))}t[s].unwatcher()}for(n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(e)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(e,i),s=0;s<o.length;s++)Q(o[s])}else{if("datastale"===r)for(s=0;s<t.length;s++)t[s].status=t[s].status===hn.SENT_NEEDS_ABORT?hn.NEEDS_ABORT:hn.RUN;else for(S("transaction at "+d.toString()+" failed: "+r),s=0;s<t.length;s++)t[s].status=hn.NEEDS_ABORT,t[s].abortReason=r;n.rerunTransactions_(e)}}),s)},rn.prototype.rerunTransactions_=function(e){var t=this.getAncestorTransactionNode_(e),n=t.path(),r=this.buildTransactionQueue_(t);return this.rerunTransactionQueue_(r,n),n},rn.prototype.rerunTransactionQueue_=function(e,t){if(0!==e.length){for(var n=[],r=[],i=e.filter((function(e){return e.status===hn.RUN})).map((function(e){return e.currentWriteId})),o=0;o<e.length;o++){var s=e[o],l=X.relativePath(t,s.path),u=!1,c=void 0;if(a.assert(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),s.status===hn.NEEDS_ABORT)u=!0,c=s.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else if(s.status===hn.RUN)if(s.retryCount>=rn.MAX_TRANSACTION_RETRIES_)u=!0,c="maxretry",r=r.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else{var h=this.getLatestState_(s.path,i);s.currentInputSnapshot=h;var d=e[o].update(h.val());if(void 0!==d){ue("transaction failed: Data returned ",d,s.path);var p=He(d);"object"==typeof d&&null!=d&&a.contains(d,".priority")||(p=p.updatePriority(h.getPriority()));var f=s.currentWriteId,g=this.generateServerValues(),m=it(p,g);s.currentOutputSnapshotRaw=p,s.currentOutputSnapshotResolved=m,s.currentWriteId=this.getNextWriteId_(),i.splice(i.indexOf(f),1),r=(r=r.concat(this.serverSyncTree_.applyUserOverwrite(s.path,m,s.currentWriteId,s.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(f,!0))}else u=!0,c="nodata",r=r.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(t,r),r=[],u&&(e[o].status=hn.COMPLETED,setTimeout(e[o].unwatcher,Math.floor(0)),e[o].onComplete))if("nodata"===c){var y=new ln(this,e[o].path),v=new Ye(e[o].currentInputSnapshot,y,Ne);n.push(e[o].onComplete.bind(null,null,!1,v))}else n.push(e[o].onComplete.bind(null,new Error(c),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),o=0;o<n.length;o++)Q(n[o]);this.sendReadyTransactions_()}},rn.prototype.getAncestorTransactionNode_=function(e){for(var t,n=this.transactionQueueTree_;null!==(t=e.getFront())&&null===n.getValue();)n=n.subTree(t),e=e.popFront();return n},rn.prototype.buildTransactionQueue_=function(e){var t=[];return this.aggregateTransactionQueuesForNode_(e,t),t.sort((function(e,t){return e.order-t.order})),t},rn.prototype.aggregateTransactionQueuesForNode_=function(e,t){var n=this,r=e.getValue();if(null!==r)for(var i=0;i<r.length;i++)t.push(r[i]);e.forEachChild((function(e){n.aggregateTransactionQueuesForNode_(e,t)}))},rn.prototype.pruneCompletedTransactionsBelowNode_=function(e){var t=this,n=e.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==hn.COMPLETED&&(n[r]=n[i],r++);n.length=r,e.setValue(n.length>0?n:null)}e.forEachChild((function(e){t.pruneCompletedTransactionsBelowNode_(e)}))},rn.prototype.abortTransactions_=function(e){var t=this,n=this.getAncestorTransactionNode_(e).path(),r=this.transactionQueueTree_.subTree(e);return r.forEachAncestor((function(e){t.abortTransactionsOnNode_(e)})),this.abortTransactionsOnNode_(r),r.forEachDescendant((function(e){t.abortTransactionsOnNode_(e)})),n},rn.prototype.abortTransactionsOnNode_=function(e){var t=e.getValue();if(null!==t){for(var n=[],r=[],i=-1,o=0;o<t.length;o++)t[o].status===hn.SENT_NEEDS_ABORT||(t[o].status===hn.SENT?(a.assert(i===o-1,"All SENT items should be at beginning of queue."),i=o,t[o].status=hn.SENT_NEEDS_ABORT,t[o].abortReason="set"):(a.assert(t[o].status===hn.RUN,"Unexpected transaction status in abort"),t[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(t[o].currentWriteId,!0)),t[o].onComplete&&n.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));for(-1===i?e.setValue(null):t.length=i+1,this.eventQueue_.raiseEventsForChangedPath(e.path(),r),o=0;o<n.length;o++)Q(n[o])}};var dn,pn=function(){function e(){this.repos_={},this.useRestClient_=!1}return e.getInstance=function(){return dn||(dn=new e),dn},e.prototype.interrupt=function(){for(var e in this.repos_)for(var t in this.repos_[e])this.repos_[e][t].interrupt()},e.prototype.resume=function(){for(var e in this.repos_)for(var t in this.repos_[e])this.repos_[e][t].resume()},e.prototype.databaseFromApp=function(e,t){var n=t||e.options.databaseURL;void 0===n&&T("Can't determine Firebase Database URL.  Be sure to include databaseURL option when calling firebase.initializeApp().");var r=te(n),i=r.repoInfo,o=void 0;return"undefined"!=typeof process&&(o=process.env.FIREBASE_DATABASE_EMULATOR_HOST),o&&(i=(r=te(n="http://"+o+"?ns="+i.namespace)).repoInfo),ye("Invalid Firebase Database URL",1,r),r.path.isEmpty()||T("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(i,e).database},e.prototype.deleteRepo=function(e){var t=a.safeGet(this.repos_,e.app.name);t&&a.safeGet(t,e.repoInfo_.toURLString())===e||T("Database "+e.app.name+"("+e.repoInfo_+") has already been deleted."),e.interrupt(),delete t[e.repoInfo_.toURLString()]},e.prototype.createRepo=function(e,t){var n=a.safeGet(this.repos_,t.name);n||(this.repos_[t.name]=n={});var r=a.safeGet(n,e.toURLString());return r&&T("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new rn(e,this.useRestClient_,t),n[e.toURLString()]=r,r},e.prototype.forceRestClient=function(e){this.useRestClient_=e},e}(),fn=function(){function e(e){this.repo_=e,e instanceof rn||T("Don't call new Database() directly - please use firebase.database()."),this.root_=new ln(e,X.Empty),this.INTERNAL=new gn(this)}return Object.defineProperty(e.prototype,"app",{get:function(){return this.repo_.app},enumerable:!0,configurable:!0}),e.prototype.ref=function(e){return this.checkDeleted_("ref"),a.validateArgCount("database.ref",0,1,arguments.length),e instanceof ln?this.refFromURL(e.toString()):void 0!==e?this.root_.child(e):this.root_},e.prototype.refFromURL=function(e){var t="database.refFromURL";this.checkDeleted_(t),a.validateArgCount(t,1,1,arguments.length);var n=te(e);ye(t,1,n);var r=n.repoInfo;return r.host!==this.repo_.repoInfo_.host&&T(t+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},e.prototype.checkDeleted_=function(e){null===this.repo_&&T("Cannot call "+e+" on a deleted database.")},e.prototype.goOffline=function(){a.validateArgCount("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},e.prototype.goOnline=function(){a.validateArgCount("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},e.ServerValue={TIMESTAMP:{".sv":"timestamp"}},e}(),gn=function(){function e(e){this.database=e}return e.prototype.delete=function(){return s.__awaiter(this,void 0,void 0,(function(){return s.__generator(this,(function(e){return this.database.checkDeleted_("delete"),pn.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]}))}))},e}(),mn=Object.freeze({__proto__:null,forceLongPolling:function(){$t.forceDisallow(),Kt.forceAllow()},forceWebSockets:function(){Kt.forceDisallow()},isWebSocketsAvailable:function(){return $t.isAvailable()},setSecurityDebugCallback:function(e,t){e.repo.persistentConnection_.securityDebugCallback_=t},stats:function(e,t){e.repo.stats(t)},statsIncrementCounter:function(e,t){e.repo.statsIncrementCounter(t)},dataUpdateCount:function(e){return e.repo.dataUpdateCount},interceptServerData:function(e,t){return e.repo.interceptServerData_(t)}}),yn=tn;tn.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},tn.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};var vn=Object.freeze({__proto__:null,DataConnection:yn,RealTimeConnection:Xt,hijackHash:function(e){var t=tn.prototype.put;return tn.prototype.put=function(n,r,i,o){void 0!==o&&(o=e()),t.call(this,n,r,i,o)},function(){tn.prototype.put=t}},ConnectionTarget:ee,queryIdentifier:function(e){return e.queryIdentifier()},forceRestClient:function(e){pn.getInstance().forceRestClient(e)}}),_n=fn.ServerValue;function bn(t){Gt=t.SDK_VERSION;var n=t.INTERNAL.registerService("database",(function(e,t,n){return pn.getInstance().databaseFromApp(e,n)}),{Reference:ln,Query:tt,Database:fn,DataSnapshot:Ye,enableLogging:b,INTERNAL:mn,ServerValue:_n,TEST_ACCESS:vn},null,!0);a.isNodeSdk()&&(e.exports=n)}bn(o),t.DataSnapshot=Ye,t.Database=fn,t.OnDisconnect=_e,t.Query=tt,t.Reference=ln,t.ServerValue=_n,t.enableLogging=b,t.registerDatabase=bn},O1kn:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r;n("fSjL");var o,s=n("mrSG"),a=n("zVF4"),l=n("q/0M"),u=function(){function e(e,t,n,r){this.client=e,this.storage=t,this.storageCache=n,this.logger=r}return e.prototype.isCachedDataFresh=function(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-t,r=n<=e;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+e+". Is cache hit: "+r+"."),r},e.prototype.fetch=function(e){return s.__awaiter(this,void 0,void 0,(function(){var t,n,r,i,o;return s.__generator(this,(function(s){switch(s.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return t=s.sent(),n=t[0],(r=t[1])&&this.isCachedDataFresh(e.cacheMaxAgeMillis,n)?[2,r]:(e.eTag=r&&r.eTag,[4,this.client.fetch(e)]);case 2:return i=s.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return s.sent(),[2,i]}}))}))},e}(),c=((o={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",o["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",o["registration-api-key"]="Undefined API key. Check Firebase app initialization.",o["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",o["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",o["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",o["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",o["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",o["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",o["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',o["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',o["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",o["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",o),h=new a.ErrorFactory("remoteconfig","Remote Config",c),d=function(){function e(e,t,n,r,i,o){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return e.prototype.fetch=function(e){return s.__awaiter(this,void 0,void 0,(function(){var t,n,r,i,o,a,l,u,c,d,p,f,g,m,y,v;return s.__generator(this,(function(s){switch(s.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:t=s.sent(),n=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",r=n+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,i={sdk_version:this.sdkVersion,app_instance_id:t[0],app_instance_id_token:t[1],app_id:this.appId,language_code:(void 0===_&&(_=navigator),_.languages&&_.languages[0]||_.language)},o={method:"POST",headers:{"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},body:JSON.stringify(i)},a=fetch(r,o),l=new Promise((function(t,n){e.signal.addEventListener((function(){var e=new Error("The operation was aborted.");e.name="AbortError",n(e)}))})),s.label=2;case 2:return s.trys.push([2,5,,6]),[4,Promise.race([a,l])];case 3:return s.sent(),[4,a];case 4:return u=s.sent(),[3,6];case 5:throw c=s.sent(),d="fetch-client-network","AbortError"===c.name&&(d="fetch-timeout"),h.create(d,{originalErrorMessage:c.message});case 6:if(p=u.status,f=u.headers.get("ETag")||void 0,200!==u.status)return[3,11];y=void 0,s.label=7;case 7:return s.trys.push([7,9,,10]),[4,u.json()];case 8:return y=s.sent(),[3,10];case 9:throw v=s.sent(),h.create("fetch-client-parse",{originalErrorMessage:v.message});case 10:g=y.entries,m=y.state,s.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===m?p=500:"NO_CHANGE"===m?p=304:"NO_TEMPLATE"!==m&&"EMPTY_CONFIG"!==m||(g={}),304!==p&&200!==p)throw h.create("fetch-status",{httpStatus:p});return[2,{status:p,eTag:f,config:g}]}var _}))}))},e}(),p=function(){function e(){this.listeners=[]}return e.prototype.addEventListener=function(e){this.listeners.push(e)},e.prototype.abort=function(){this.listeners.forEach((function(e){return e()}))},e}(),f="",g=["1","true","t","yes","y","on"],m=function(){function e(e,t){void 0===t&&(t=f),this._source=e,this._value=t}return e.prototype.asString=function(){return this._value},e.prototype.asBoolean=function(){return"static"!==this._source&&g.indexOf(this._value.toLowerCase())>=0},e.prototype.asNumber=function(){if("static"===this._source)return 0;var e=Number(this._value);return isNaN(e)&&(e=0),e},e.prototype.getSource=function(){return this._source},e}(),y=6e4,v=432e5,_=function(){function e(e,t,n,r,i){this.app=e,this._client=t,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:y,minimumFetchIntervalMillis:v},this.defaultConfig={}}return e.prototype.setLogLevel=function(e){switch(e){case"debug":this._logger.logLevel=l.LogLevel.DEBUG;break;case"silent":this._logger.logLevel=l.LogLevel.SILENT;break;default:this._logger.logLevel=l.LogLevel.ERROR}},Object.defineProperty(e.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!0,configurable:!0}),e.prototype.activate=function(){return s.__awaiter(this,void 0,void 0,(function(){var e,t,n;return s.__generator(this,(function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return e=r.sent(),n=e[1],(t=e[0])&&t.config&&t.eTag&&t.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(t.config),this._storage.setActiveConfigEtag(t.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}}))}))},e.prototype.ensureInitialized=function(){var e=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then((function(){e._isInitializationComplete=!0}))),this._initializePromise},e.prototype.fetch=function(){return s.__awaiter(this,void 0,void 0,(function(){var e=this;return s.__generator(this,(function(t){return[2,new Promise((function(t,n){return s.__awaiter(e,void 0,void 0,(function(){var e,r,i,o=this;return s.__generator(this,(function(l){switch(l.label){case 0:e=new p,setTimeout((function(){return s.__awaiter(o,void 0,void 0,(function(){return s.__generator(this,(function(t){return e.abort(),[2]}))}))}),this.settings.fetchTimeoutMillis),l.label=1;case 1:return l.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:e})];case 2:return l.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return l.sent(),t(),[3,6];case 4:return r=l.sent(),i=(u=r)instanceof a.FirebaseError&&-1!==u.code.indexOf("fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(i)];case 5:return l.sent(),n(r),[3,6];case 6:return[2]}var u}))}))}))]}))}))},e.prototype.fetchAndActivate=function(){return s.__awaiter(this,void 0,void 0,(function(){return s.__generator(this,(function(e){switch(e.label){case 0:return[4,this.fetch()];case 1:return e.sent(),[2,this.activate()]}}))}))},e.prototype.getAll=function(){var e,t,n=this;return(e=this._storageCache.getActiveConfig(),t=this.defaultConfig,void 0===e&&(e={}),void 0===t&&(t={}),Object.keys(s.__assign(s.__assign({},e),t))).reduce((function(e,t){return e[t]=n.getValue(t),e}),{})},e.prototype.getBoolean=function(e){return this.getValue(e).asBoolean()},e.prototype.getNumber=function(e){return this.getValue(e).asNumber()},e.prototype.getString=function(e){return this.getValue(e).asString()},e.prototype.getValue=function(e){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+e+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var t=this._storageCache.getActiveConfig();return t&&void 0!==t[e]?new m("remote",t[e]):this.defaultConfig&&void 0!==this.defaultConfig[e]?new m("default",String(this.defaultConfig[e])):(this._logger.debug('Returning static value for key "'+e+'". Define a default or remote value if this is unintentional.'),new m("static"))},e}();function b(e,t){var n=e.target.error||void 0;return h.create(t,{originalErrorMessage:n&&n.message})}var w="app_namespace_store",C="firebase_remote_config",E=1,T=function(){function e(e,t,n,r){void 0===r&&(r=new Promise((function(e,t){var n=indexedDB.open(C,E);n.onerror=function(e){t(b(e,"storage-open"))},n.onsuccess=function(t){e(t.target.result)},n.onupgradeneeded=function(e){var t=e.target.result;switch(e.oldVersion){case 0:t.createObjectStore(w,{keyPath:"compositeKey"})}}}))),this.appId=e,this.appName=t,this.namespace=n,this.openDbPromise=r}return e.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},e.prototype.setLastFetchStatus=function(e){return this.set("last_fetch_status",e)},e.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},e.prototype.setLastSuccessfulFetchTimestampMillis=function(e){return this.set("last_successful_fetch_timestamp_millis",e)},e.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},e.prototype.setLastSuccessfulFetchResponse=function(e){return this.set("last_successful_fetch_response",e)},e.prototype.getActiveConfig=function(){return this.get("active_config")},e.prototype.setActiveConfig=function(e){return this.set("active_config",e)},e.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},e.prototype.setActiveConfigEtag=function(e){return this.set("active_config_etag",e)},e.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},e.prototype.setThrottleMetadata=function(e){return this.set("throttle_metadata",e)},e.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},e.prototype.get=function(e){return s.__awaiter(this,void 0,void 0,(function(){var t,n=this;return s.__generator(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return t=r.sent(),[2,new Promise((function(r,i){var o=t.transaction([w],"readonly").objectStore(w),s=n.createCompositeKey(e);try{var a=o.get(s);a.onerror=function(e){i(b(e,"storage-get"))},a.onsuccess=function(e){var t=e.target.result;r(t?t.value:void 0)}}catch(l){i(h.create("storage-get",{originalErrorMessage:l&&l.message}))}}))]}}))}))},e.prototype.set=function(e,t){return s.__awaiter(this,void 0,void 0,(function(){var n,r=this;return s.__generator(this,(function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise((function(i,o){var s=n.transaction([w],"readwrite").objectStore(w),a=r.createCompositeKey(e);try{var l=s.put({compositeKey:a,value:t});l.onerror=function(e){o(b(e,"storage-set"))},l.onsuccess=function(){i()}}catch(u){o(h.create("storage-set",{originalErrorMessage:u&&u.message}))}}))]}}))}))},e.prototype.delete=function(e){return s.__awaiter(this,void 0,void 0,(function(){var t,n=this;return s.__generator(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return t=r.sent(),[2,new Promise((function(r,i){var o=t.transaction([w],"readwrite").objectStore(w),s=n.createCompositeKey(e);try{var a=o.delete(s);a.onerror=function(e){i(b(e,"storage-delete"))},a.onsuccess=function(){r()}}catch(l){i(h.create("storage-delete",{originalErrorMessage:l&&l.message}))}}))]}}))}))},e.prototype.createCompositeKey=function(e){return[this.appId,this.appName,this.namespace,e].join()},e}(),S=function(){function e(e){this.storage=e}return e.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},e.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},e.prototype.getActiveConfig=function(){return this.activeConfig},e.prototype.loadFromStorage=function(){return s.__awaiter(this,void 0,void 0,(function(){var e,t,n,r,i,o;return s.__generator(this,(function(s){switch(s.label){case 0:return e=this.storage.getLastFetchStatus(),t=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,e];case 1:return(r=s.sent())&&(this.lastFetchStatus=r),[4,t];case 2:return(i=s.sent())&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return(o=s.sent())&&(this.activeConfig=o),[2]}}))}))},e.prototype.setLastFetchStatus=function(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)},e.prototype.setLastSuccessfulFetchTimestampMillis=function(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)},e.prototype.setActiveConfig=function(e){return this.activeConfig=e,this.storage.setActiveConfig(e)},e}(),I=1e3,k=2,A=144e5,N=.5;function D(e){var t=I*Math.pow(k,e),n=Math.round(N*t*(Math.random()-.5)*2);return Math.min(A,t+n)}function R(e,t){return new Promise((function(n,r){var i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener((function(){clearTimeout(o),r(h.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}var O=function(){function e(e,t){this.client=e,this.storage=t}return e.prototype.fetch=function(e){return s.__awaiter(this,void 0,void 0,(function(){var t;return s.__generator(this,(function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return t=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(e,t)]}}))}))},e.prototype.attemptFetch=function(e,t){var n=t.throttleEndTimeMillis,r=t.backoffCount;return s.__awaiter(this,void 0,void 0,(function(){var t,i,o;return s.__generator(this,(function(s){switch(s.label){case 0:return[4,R(e.signal,n)];case 1:s.sent(),s.label=2;case 2:return s.trys.push([2,5,,7]),[4,this.client.fetch(e)];case 3:return t=s.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return s.sent(),[2,t];case 5:if(!function(e){if(!(e instanceof a.FirebaseError))return!1;var t=Number(e.httpStatus);return 429===t||500===t||503===t||504===t}(i=s.sent()))throw i;return o={throttleEndTimeMillis:Date.now()+D(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(o)];case 6:return s.sent(),[2,this.attemptFetch(e,o)];case 7:return[2]}}))}))},e}(),P="@firebase/remote-config";function x(e){e.INTERNAL.registerService("remoteConfig",(function(t,n,r){if("undefined"==typeof window)throw h.create("registration-window");var i=t.options,o=i.projectId,s=i.apiKey,a=i.appId;if(!o)throw h.create("registration-project-id");if(!s)throw h.create("registration-api-key");if(!a)throw h.create("registration-app-id");var c=new T(a,t.name,r=r||"firebase"),p=new S(c),f=new l.Logger(P);f.logLevel=l.LogLevel.ERROR;var g=new d(t.installations(),e.SDK_VERSION,r,o,s,a),m=new O(g,c),y=new u(m,c,p,f),v=new _(t,y,p,c,f);return v.ensureInitialized(),v}),void 0,void 0,!0)}x(i),t.registerRemoteConfig=x},Wcq6:function(e,t,n){"use strict";var r,i=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r;e.exports=i},bQlE:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r,o=n("mrSG"),s=n("zVF4");n("fSjL");var a,l,u,c,h,d=n("q/0M"),p="0.2.25",f="FB-PERF-TRACE-START",g="FB-PERF-TRACE-STOP",m="FB-PERF-TRACE-MEASURE",y="@firebase/performance/config",v="@firebase/performance/configexpire",_=((a={})["trace started"]="Trace {$traceName} was started before.",a["trace stopped"]="Trace {$traceName} is not running.",a["no window"]="Window is not available.",a["no app id"]="App id is not available.",a["no project id"]="Project id is not available.",a["no api key"]="Api key is not available.",a["invalid cc log"]="Attempted to queue invalid cc event",a["FB not default"]="Performance can only start when Firebase app instance is the default one.",a["RC response not ok"]="RC response is not ok",a["invalid attribute name"]="Attribute name {$attributeName} is invalid.",a["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",a["invalide custom metric name"]="Custom metric name {$customMetricName} is invalid",a),b=new s.ErrorFactory("performance","Performance",_),w=function(){function e(e){if(!e)throw b.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}return e.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},e.prototype.mark=function(e){this.performance&&this.performance.mark&&this.performance.mark(e)},e.prototype.measure=function(e,t,n){this.performance&&this.performance.measure&&this.performance.measure(e,t,n)},e.prototype.getEntriesByType=function(e){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(e):[]},e.prototype.getEntriesByName=function(e){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(e):[]},e.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},e.prototype.requiredApisAvailable=function(){return!!(fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled)},e.prototype.setupObserver=function(e,t){this.PerformanceObserver&&new this.PerformanceObserver((function(e){for(var n=0,r=e.getEntries();n<r.length;n++)t(r[n])})).observe({entryTypes:[e]})},e.getInstance=function(){return void 0===l&&(l=new e(u)),l},e}(),C=function(){function e(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return e.prototype.getAppId=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!e)throw b.create("no app id");return e},e.prototype.getProjectId=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!e)throw b.create("no project id");return e},e.prototype.getApiKey=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!e)throw b.create("no api key");return e},e.getInstance=function(){return void 0===c&&(c=new e),c},e}();function E(){return h}var T=function(e){return e[e.UNKNOWN=0]="UNKNOWN",e[e.VISIBLE=1]="VISIBLE",e[e.HIDDEN=2]="HIDDEN",e[e.PRERENDER=3]="PRERENDER",e[e.UNLOADED=4]="UNLOADED",e}({}),S=["firebase_","google_","ga_"],I=new RegExp("^[a-zA-Z]\\w*$");function k(){var e=w.getInstance().navigator;return"serviceWorker"in e?e.serviceWorker.controller?2:3:1}function A(){switch(w.getInstance().document.visibilityState){case"visible":return T.VISIBLE;case"hidden":return T.HIDDEN;case"prerender":return T.PRERENDER;default:return T.UNKNOWN}}function N(){var e=w.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}var D=new d.Logger("Performance");D.logLevel=d.LogLevel.INFO;var R="0.0.1",O={loggingEnabled:!0},P="FIREBASE_INSTALLATIONS_AUTH",x="Could not fetch config, will use default configs";function M(e){if(!e)return e;var t=C.getInstance(),n=e.entries||{};return t.loggingEnabled=void 0!==n.fpr_enabled?"true"===String(n.fpr_enabled):O.loggingEnabled,n.fpr_log_source&&(t.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(t.logEndPointUrl=n.fpr_log_endpoint_url),void 0!==n.fpr_vc_network_request_sampling_rate&&(t.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(t.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),t.logTraceAfterSampling=L(t.tracesSamplingRate),t.logNetworkAfterSampling=L(t.networkRequestsSamplingRate),e}function L(e){return Math.random()<=e}var F,U=1;function V(){return U=2,F=F||function(){var e=w.getInstance().document;return new Promise((function(t){if(e&&"complete"!==e.readyState){var n=function(){"complete"===e.readyState&&(e.removeEventListener("readystatechange",n),t())};e.addEventListener("readystatechange",n)}else t()}))}().then((function(){return(e=C.getInstance().firebaseAppInstance.installations().getId()).then((function(e){h=e})),e;var e})).then((function(e){return function(e){var t=function(){var e=w.getInstance().localStorage,t=e.getItem(v);if(t&&Number(t)>Date.now()){var n=e.getItem(y);if(n)try{return JSON.parse(n)}catch(a){return}}}();return t?(M(t),Promise.resolve()):function(e){return(t=C.getInstance().firebaseAppInstance.installations().getToken(),t.then((function(e){})),t).then((function(t){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+C.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+C.getInstance().getApiKey(),r=new Request(n,{method:"POST",headers:{Authorization:P+" "+t},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:C.getInstance().getAppId(),app_version:p,sdk_version:R})});return fetch(r).then((function(e){if(e.ok)return e.json();throw b.create("RC response not ok")}))})).catch((function(){D.info(x)}));var t}(e).then((function(e){return M(e)})).then((function(e){return function(e){if(e){var t=w.getInstance().localStorage;t.setItem(y,JSON.stringify(e)),t.setItem(v,String(Date.now()+60*C.getInstance().configTimeToLive*60*1e3))}}(e)}),(function(){}))}(e)})).then((function(){return j()}),(function(){return j()}))}function j(){U=3}var q,B=3,W=[];function H(e){if(!e.eventTime||!e.message)throw b.create("invalid cc log");W=o.__spreadArrays(W,[e])}function K(){if(q)return q;var e=function(e){return function(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var o=e.apply(void 0,r);H({message:o,eventTime:Date.now()})}}(Q);return(q=new d.Logger("@firebase/performance/cc")).logHandler=e,q}function z(e){var t=C.getInstance();!t.instrumentationEnabled&&e.isAuto||(t.dataCollectionEnabled||e.isAuto)&&w.getInstance().requiredApisAvailable()&&(e.isAuto&&A()!==T.VISIBLE||t.loggingEnabled&&t.logTraceAfterSampling&&(3===U?G(e):V().then((function(){return G(e)}),(function(){return G(e)}))))}function G(e){E()&&setTimeout((function(){return K().log(e,1)}),0)}function Q(e,t){return 0===t?(r={url:(n=e).url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},i={application_info:$(),network_request_metric:r},JSON.stringify(i)):function(e){var t={name:e.name,is_auto:e.isAuto,client_start_time_us:e.startTimeUs,duration_us:e.durationUs};0!==Object.keys(e.counters).length&&(t.counters=Y(e.counters));var n=e.getAttributes();0!==Object.keys(n).length&&(t.custom_attributes=Y(n));var r={application_info:$(),trace_metric:t};return JSON.stringify(r)}(e);var n,r,i}function $(){return{google_app_id:C.getInstance().getAppId(),app_instance_id:E(),web_app_info:{sdk_version:p,page_url:w.getInstance().getUrl(),service_worker_status:k(),visibility_state:A(),effective_connection_type:N()},application_process_state:0}}function Y(e){return Object.keys(e).map((function(t){return{key:t,value:e[t]}}))}!function e(t){setTimeout((function(){if(0!==B){if(!W.length)return e(1e4);var t=o.__spreadArrays(W);W=[];var n=t.map((function(e){return{source_extension_json:e.message,event_time_ms:String(e.eventTime)}})),r={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:C.getInstance().logSource,log_event:n};fetch(C.getInstance().logEndPointUrl,{method:"POST",body:JSON.stringify(r)}).then((function(e){return e.ok||D.info("Call to Firebase backend failed."),e.json()})).then((function(t){var n=Number(t.next_request_wait_millis),r=isNaN(n)?1e4:Math.max(1e4,n);B=3,e(r)})).catch((function(){W=o.__spreadArrays(t,W),D.info("Tries left: "+--B+"."),e(1e4)}))}}),t)}(5500);var X=["_fp","_fcp","_fid"],J=function(){function e(e,t,n){void 0===t&&(t=!1),this.name=e,this.isAuto=t,this.state=1,this.customAttributes={},this.counters={},this.api=w.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark=f+"-"+this.randomId+"-"+this.name,this.traceStopMark=g+"-"+this.randomId+"-"+this.name,this.traceMeasure=n||m+"-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return e.prototype.start=function(){if(1!==this.state)throw b.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},e.prototype.stop=function(){if(2!==this.state)throw b.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),z(this)},e.prototype.record=function(e,t,n){if(this.durationUs=Math.floor(1e3*t),this.startTimeUs=Math.floor(1e3*e),n&&n.attributes&&(this.customAttributes=o.__assign({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var s=i[r];isNaN(Number(n.metrics[s]))||(this.counters[s]=Number(Math.floor(n.metrics[s])))}z(this)},e.prototype.incrementMetric=function(e,t){void 0===t&&(t=1),void 0===this.counters[e]&&this.putMetric(e,0),this.counters[e]+=t},e.prototype.putMetric=function(e,t){if(r=this.name,0===(n=e).length||n.length>100||!(r&&r.startsWith("_wt_")&&X.indexOf(n)>-1)&&n.startsWith("_"))throw b.create("invalide custom metric name",{customMetricName:e});var n,r;this.counters[e]=t},e.prototype.getMetric=function(e){return this.counters[e]||0},e.prototype.putAttribute=function(e,t){var n,r=!(0===(n=e).length||n.length>40||S.some((function(e){return n.startsWith(e)}))||!n.match(I)),i=function(e){return 0!==e.length&&e.length<=100}(t);if(r&&i)this.customAttributes[e]=t;else{if(!r)throw b.create("invalid attribute name",{attributeName:e});if(!i)throw b.create("invalid attribute value",{attributeValue:t})}},e.prototype.getAttribute=function(e){return this.customAttributes[e]},e.prototype.removeAttribute=function(e){void 0!==this.customAttributes[e]&&delete this.customAttributes[e]},e.prototype.getAttributes=function(){return o.__assign({},this.customAttributes)},e.prototype.setStartTime=function(e){this.startTimeUs=e},e.prototype.setDuration=function(e){this.durationUs=e},e.prototype.calculateTraceMetrics=function(){var e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))},e.createOobTrace=function(t,n,r){var i=w.getInstance().getUrl();if(i){var o=new e("_wt_"+i,!0),s=Math.floor(1e3*w.getInstance().getTimeOrigin());if(o.setStartTime(s),t&&t[0]&&(o.setDuration(Math.floor(1e3*t[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),n){var a=n.find((function(e){return"first-paint"===e.name}));a&&a.startTime&&o.putMetric("_fp",Math.floor(1e3*a.startTime));var l=n.find((function(e){return"first-contentful-paint"===e.name}));l&&l.startTime&&o.putMetric("_fcp",Math.floor(1e3*l.startTime)),r&&o.putMetric("_fid",Math.floor(1e3*r))}z(o)}},e.createUserTimingTrace=function(t){z(new e(t,!1,t))},e}();function Z(e){var t,n,r=e;if(r&&void 0!==r.responseStart){var i=w.getInstance().getTimeOrigin(),o=Math.floor(1e3*(r.startTime+i)),s=r.responseStart?Math.floor(1e3*(r.responseStart-r.startTime)):void 0,a=Math.floor(1e3*(r.responseEnd-r.startTime));t={url:r.name&&r.name.split("?")[0],responsePayloadBytes:r.transferSize,startTimeUs:o,timeToResponseInitiatedUs:s,timeToResponseCompletedUs:a},(n=C.getInstance()).instrumentationEnabled&&t.url!==n.logEndPointUrl.split("?")[0]&&n.loggingEnabled&&n.logNetworkAfterSampling&&setTimeout((function(){return K().log(t,0)}),0)}}var ee=5e3;function te(){E()&&(setTimeout((function(){return function(){var e=w.getInstance(),t=e.getEntriesByType("navigation"),n=e.getEntriesByType("paint");if(e.onFirstInputDelay){var r=setTimeout((function(){J.createOobTrace(t,n),r=void 0}),ee);e.onFirstInputDelay((function(e){r&&(clearTimeout(r),J.createOobTrace(t,n,e))}))}else J.createOobTrace(t,n)}()}),0),setTimeout((function(){return function(){for(var e=w.getInstance(),t=0,n=e.getEntriesByType("resource");t<n.length;t++)Z(n[t]);e.setupObserver("resource",Z)}()}),0),setTimeout((function(){return function(){for(var e=w.getInstance(),t=0,n=e.getEntriesByType("measure");t<n.length;t++)ne(n[t]);e.setupObserver("measure",ne)}()}),0))}function ne(e){var t=e.name;t.substring(0,m.length)!==m&&J.createUserTimingTrace(t)}var re=function(){function e(e){this.app=e,w.getInstance().requiredApisAvailable()?V().then(te,te):D.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled.")}return e.prototype.trace=function(e){return new J(e)},Object.defineProperty(e.prototype,"instrumentationEnabled",{get:function(){return C.getInstance().instrumentationEnabled},set:function(e){C.getInstance().instrumentationEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataCollectionEnabled",{get:function(){return C.getInstance().dataCollectionEnabled},set:function(e){C.getInstance().dataCollectionEnabled=e},enumerable:!0,configurable:!0}),e}(),ie="[DEFAULT]";function oe(e){e.INTERNAL.registerService("performance",(function(e){if(e.name!==ie)throw b.create("FB not default");if("undefined"==typeof window)throw b.create("no window");return function(e){u=e}(window),C.getInstance().firebaseAppInstance=e,new re(e)}),{})}oe(i),t.registerPerformance=oe},fSjL:function(e,t,n){"use strict";n.r(t),n.d(t,"registerInstallations",(function(){return $}));var r,i=n("wj3C"),o=n.n(i),s=n("mrSG"),a=n("zVF4"),l=n("nbvr"),u=1e4,c="w:0.3.5",h="FIS_v2",d="https://firebaseinstallations.googleapis.com/v1",p=36e5,f=((r={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',r["not-registered"]="Firebase Installation is not registered.",r["installation-not-found"]="Firebase Installation not found.",r["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',r["app-offline"]="Could not process request. Application offline.",r["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",r),g=new a.ErrorFactory("installations","Installations",f);function m(e){return e instanceof a.FirebaseError&&e.code.includes("request-failed")}function y(e){var t,n;if(!e||!e.options)throw v("App Configuration");if(!e.name)throw v("App Name");try{for(var r=Object(s.__values)(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!e.options[o])throw v(o)}}catch(a){t={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function v(e){return g.create("missing-app-config-values",{valueName:e})}function _(e){return d+"/projects/"+e.projectId+"/installations"}function b(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}function w(e,t){return Object(s.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(s.__generator)(this,(function(i){switch(i.label){case 0:return[4,t.json()];case 1:return n=i.sent(),[2,g.create("request-failed",{requestName:e,serverCode:(r=n.error).code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function C(e){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey})}function E(e,t){var n=t.refreshToken,r=C(e);return r.append("Authorization",function(e){return h+" "+e}(n)),r}function T(e){return Object(s.__awaiter)(this,void 0,void 0,(function(){var t;return Object(s.__generator)(this,(function(n){switch(n.label){case 0:return[4,e()];case 1:return(t=n.sent()).status>=500&&t.status<600?[2,e()]:[2,t]}}))}))}function S(e,t){var n=t.fid;return Object(s.__awaiter)(this,void 0,void 0,(function(){var t,r,i,o,a;return Object(s.__generator)(this,(function(s){switch(s.label){case 0:return t=_(e),r=C(e),i={method:"POST",headers:r,body:JSON.stringify({fid:n,authVersion:h,appId:e.appId,sdkVersion:c})},[4,T((function(){return fetch(t,i)}))];case 1:return(o=s.sent()).ok?[4,o.json()]:[3,3];case 2:return[2,{fid:(a=s.sent()).fid||n,registrationStatus:2,refreshToken:a.refreshToken,authToken:b(a.authToken)}];case 3:return[4,w("Create Installation",o)];case 4:throw s.sent()}}))}))}function I(e){return new Promise((function(t){setTimeout(t,e)}))}var k=/^[cdef][\w-]{21}$/,A="";function N(){try{var e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;var t=function(e){return(t=e,btoa(String.fromCharCode.apply(String,Object(s.__spread)(t))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var t}(e);return k.test(t)?t:A}catch(r){return A}}var D="firebase-installations-database",R=1,O="firebase-installations-store",P=null;function x(){return P||(P=Object(l.openDb)(D,R,(function(e){switch(e.oldVersion){case 0:e.createObjectStore(O)}}))),P}function M(e,t){return Object(s.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return Object(s.__generator)(this,(function(o){switch(o.label){case 0:return n=U(e),[4,x()];case 1:return r=o.sent(),[4,(i=r.transaction(O,"readwrite")).objectStore(O).put(t,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,t]}}))}))}function L(e){return Object(s.__awaiter)(this,void 0,void 0,(function(){var t,n,r;return Object(s.__generator)(this,(function(i){switch(i.label){case 0:return t=U(e),[4,x()];case 1:return n=i.sent(),[4,(r=n.transaction(O,"readwrite")).objectStore(O).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function F(e,t){return Object(s.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,a,l;return Object(s.__generator)(this,(function(s){switch(s.label){case 0:return n=U(e),[4,x()];case 1:return r=s.sent(),i=r.transaction(O,"readwrite"),[4,(o=i.objectStore(O)).get(n)];case 2:return a=s.sent(),void 0!==(l=t(a))?[3,4]:[4,o.delete(n)];case 3:return s.sent(),[3,6];case 4:return[4,o.put(l,n)];case 5:s.sent(),s.label=6;case 6:return[4,i.complete];case 7:return s.sent(),[2,l]}}))}))}function U(e){return e.appName+"!"+e.appId}function V(e){return Object(s.__awaiter)(this,void 0,void 0,(function(){var t,n,r;return Object(s.__generator)(this,(function(i){switch(i.label){case 0:return[4,F(e,(function(n){var r=function(e){return B(e||{fid:N(),registrationStatus:0})}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(g.create("app-offline"))};var n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(e,t){return Object(s.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(s.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,S(e,t)];case 1:return n=i.sent(),[2,M(e,n)];case 2:return m(r=i.sent())&&409===r.serverCode?[4,L(e)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,M(e,{fid:t.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}(e,n)}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:j(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry}))];case 1:return(n=i.sent()).fid!==A?[3,3]:(r={},[4,t]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:t}]}}))}))}function j(e){return Object(s.__awaiter)(this,void 0,void 0,(function(){var t,n,r,i;return Object(s.__generator)(this,(function(o){switch(o.label){case 0:return[4,q(e)];case 1:t=o.sent(),o.label=2;case 2:return 1!==t.registrationStatus?[3,5]:[4,I(100)];case 3:return o.sent(),[4,q(e)];case 4:return t=o.sent(),[3,2];case 5:return 0!==t.registrationStatus?[3,7]:[4,V(e)];case 6:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,t]}}))}))}function q(e){return F(e,(function(e){if(!e)throw g.create("installation-not-found");return B(e)}))}function B(e){return 1===(t=e).registrationStatus&&t.registrationTime+u<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}function W(e,t){return Object(s.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o;return Object(s.__generator)(this,(function(s){switch(s.label){case 0:return n=function(e,t){var n=t.fid;return _(e)+"/"+n+"/authTokens:generate"}(e,t),r=E(e,t),i={method:"POST",headers:r,body:JSON.stringify({installation:{sdkVersion:c}})},[4,T((function(){return fetch(n,i)}))];case 1:return(o=s.sent()).ok?[4,o.json()]:[3,3];case 2:return[2,b(s.sent())];case 3:return[4,w("Generate Auth Token",o)];case 4:throw s.sent()}}))}))}function H(e,t){return void 0===t&&(t=!1),Object(s.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return Object(s.__generator)(this,(function(o){switch(o.label){case 0:return[4,F(e,(function(r){if(!z(r))throw g.create("not-registered");var i,o=r.authToken;if(!t&&2===(i=o).requestStatus&&!function(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+p}(i))return r;if(1===o.requestStatus)return n=function(e,t){return Object(s.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(s.__generator)(this,(function(i){switch(i.label){case 0:return[4,K(e)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,I(100)];case 3:return i.sent(),[4,K(e)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,H(e,t)]:[2,r]}}))}))}(e,t),r;if(!navigator.onLine)throw g.create("app-offline");var a=function(e){var t={requestStatus:1,requestTime:Date.now()};return Object(s.__assign)(Object(s.__assign)({},e),{authToken:t})}(r);return n=function(e,t){return Object(s.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return Object(s.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,W(e,t)];case 1:return n=o.sent(),i=Object(s.__assign)(Object(s.__assign)({},t),{authToken:n}),[4,M(e,i)];case 2:return o.sent(),[2,n];case 3:return!m(r=o.sent())||401!==r.serverCode&&404!==r.serverCode?[3,5]:[4,L(e)];case 4:return o.sent(),[3,7];case 5:return i=Object(s.__assign)(Object(s.__assign)({},t),{authToken:{requestStatus:0}}),[4,M(e,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}}))}))}(e,a),a}))];case 1:return r=o.sent(),n?[4,n]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}}))}))}function K(e){return F(e,(function(e){if(!z(e))throw g.create("not-registered");var t;return 1===(t=e.authToken).requestStatus&&t.requestTime+u<Date.now()?Object(s.__assign)(Object(s.__assign)({},e),{authToken:{requestStatus:0}}):e}))}function z(e){return void 0!==e&&2===e.registrationStatus}function G(e){return Object(s.__awaiter)(this,void 0,void 0,(function(){var t;return Object(s.__generator)(this,(function(n){switch(n.label){case 0:return[4,V(e)];case 1:return(t=n.sent().registrationPromise)?[4,t]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}function Q(e,t){return Object(s.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o;return Object(s.__generator)(this,(function(s){switch(s.label){case 0:return n=function(e,t){var n=t.fid;return _(e)+"/"+n}(e,t),r=E(e,t),i={method:"DELETE",headers:r},[4,T((function(){return fetch(n,i)}))];case 1:return(o=s.sent()).ok?[3,3]:[4,w("Delete Installation",o)];case 2:throw s.sent();case 3:return[2]}}))}))}function $(e){e.INTERNAL.registerService("installations",(function(e){return y(e),{app:e,getId:function(){return function(e){return Object(s.__awaiter)(this,void 0,void 0,(function(){var t,n,r,i;return Object(s.__generator)(this,(function(o){switch(o.label){case 0:return[4,V(t=y(e))];case 1:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?i.catch(console.error):H(t).catch(console.error),[2,r.fid]}}))}))}(e)},getToken:function(t){return function(e,t){return void 0===t&&(t=!1),Object(s.__awaiter)(this,void 0,void 0,(function(){var n;return Object(s.__generator)(this,(function(r){switch(r.label){case 0:return[4,G(n=y(e))];case 1:return r.sent(),[4,H(n,t)];case 2:return[2,r.sent().token]}}))}))}(e,t)},delete:function(){return function(e){return Object(s.__awaiter)(this,void 0,void 0,(function(){var t,n;return Object(s.__generator)(this,(function(r){switch(r.label){case 0:return[4,F(t=y(e),(function(e){if(!e||0!==e.registrationStatus)return e}))];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw g.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw g.create("app-offline");case 3:return[4,Q(t,n)];case 4:return r.sent(),[4,L(t)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}(e)}}}))}$(o.a)},gHGA:function(e,t,n){"use strict";n.r(t),n.d(t,"isSupported",(function(){return R})),n.d(t,"registerMessaging",(function(){return D}));var r,i=n("wj3C"),o=n.n(i),s=n("mrSG"),a=n("zVF4"),l=(n("fSjL"),(r={})["only-available-in-window"]="This method is available in a Window context.",r["only-available-in-sw"]="This method is available in a service worker context.",r["should-be-overriden"]="This method should be overriden by extended classes.",r["bad-sender-id"]="Please ensure that 'messagingSenderId' is set correctly in the options passed into firebase.initializeApp().",r["permission-default"]="The required permissions were not granted and dismissed instead.",r["permission-blocked"]="The required permissions were not granted and blocked instead.",r["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",r["notifications-blocked"]="Notifications have been blocked.",r["failed-serviceworker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",r["sw-registration-expected"]="A service worker registration was the expected input.",r["get-subscription-failed"]="There was an error when trying to get any existing Push Subscriptions.",r["invalid-saved-token"]="Unable to access details of the saved token.",r["sw-reg-redundant"]="The service worker being used for push was made redundant.",r["token-subscribe-failed"]="A problem occured while subscribing the user to FCM: {$errorInfo}",r["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",r["token-unsubscribe-failed"]="A problem occured while unsubscribing the user from FCM: {$errorInfo}",r["token-update-failed"]="A problem occured while updating the user from FCM: {$errorInfo}",r["token-update-no-token"]="FCM returned no token when updating the user to push.",r["use-sw-before-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",r["invalid-delete-token"]="You must pass a valid token into deleteToken(), i.e. the token from getToken().",r["delete-token-not-found"]="The deletion attempt for token could not be performed as the token was not found.",r["delete-scope-not-found"]="The deletion attempt for service worker scope could not be performed as the scope was not found.",r["bg-handler-function-expected"]="The input to setBackgroundMessageHandler() must be a function.",r["no-window-client-to-msg"]="An attempt was made to message a non-existant window client.",r["unable-to-resubscribe"]="There was an error while re-subscribing the FCM token for push messaging. Will have to resubscribe the user on next visit. {$errorInfo}",r["no-fcm-token-for-resubscribe"]="Could not find an FCM token and as a result, unable to resubscribe. Will have to resubscribe the user on next visit.",r["failed-to-delete-token"]="Unable to delete the currently saved token.",r["no-sw-in-reg"]="Even though the service worker registration was successful, there was a problem accessing the service worker itself.",r["bad-scope"]="The service worker scope must be a string with at least one character.",r["bad-vapid-key"]="The public VAPID key is not a Uint8Array with 65 bytes.",r["bad-subscription"]="The subscription must be a valid PushSubscription.",r["bad-token"]="The FCM Token used for storage / lookup was not a valid token string.",r["failed-delete-vapid-key"]="The VAPID key could not be deleted.",r["invalid-public-vapid-key"]="The public VAPID key must be a string.",r["use-public-key-before-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",r["public-vapid-key-decryption-failed"]="The public VAPID key did not equal 65 bytes when decrypted.",r),u=new a.ErrorFactory("messaging","Messaging",l),c=new Uint8Array([4,51,148,247,223,161,235,177,220,3,162,94,21,113,219,72,211,46,237,237,178,52,219,183,71,58,12,143,196,204,225,111,60,140,132,223,171,182,102,62,242,12,212,139,254,227,249,118,47,20,28,99,8,106,111,45,177,26,149,176,206,55,192,156,110]),h="https://fcmregistrations.googleapis.com/v1",d=function(e){return e.PUSH_MSG_RECEIVED="push-msg-received",e.NOTIFICATION_CLICKED="notification-clicked",e}({});function p(e,t){if(null==e||null==t)return!1;if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var n=new DataView(e),r=new DataView(t),i=0;i<e.byteLength;i++)if(n.getUint8(i)!==r.getUint8(i))return!1;return!0}function f(e){return function(e){var t=new Uint8Array(e);return btoa(String.fromCharCode.apply(String,Object(s.__spread)(t)))}(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}var g=function(){function e(){}return e.prototype.getToken=function(e,t,n){return Object(s.__awaiter)(this,void 0,void 0,(function(){var r,i,o,a,l;return Object(s.__generator)(this,(function(s){switch(s.label){case 0:return[4,y(e)];case 1:r=s.sent(),i=v(t,n),o={method:"POST",headers:r,body:JSON.stringify(i)},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(m(e),o)];case 3:return[4,s.sent().json()];case 4:return a=s.sent(),[3,6];case 5:throw l=s.sent(),u.create("token-subscribe-failed",{errorInfo:l});case 6:if(a.error)throw u.create("token-subscribe-failed",{errorInfo:a.error.message});if(!a.token)throw u.create("token-subscribe-no-token");return[2,a.token]}}))}))},e.prototype.updateToken=function(e,t,n,r){return Object(s.__awaiter)(this,void 0,void 0,(function(){var i,o,a,l,c;return Object(s.__generator)(this,(function(s){switch(s.label){case 0:return[4,y(t)];case 1:i=s.sent(),o=v(n,r),a={method:"PATCH",headers:i,body:JSON.stringify(o)},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(m(t)+"/"+e.fcmToken,a)];case 3:return[4,s.sent().json()];case 4:return l=s.sent(),[3,6];case 5:throw c=s.sent(),u.create("token-update-failed",{errorInfo:c});case 6:if(l.error)throw u.create("token-update-failed",{errorInfo:l.error.message});if(!l.token)throw u.create("token-update-no-token");return[2,l.token]}}))}))},e.prototype.deleteToken=function(e,t){return Object(s.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o;return Object(s.__generator)(this,(function(s){switch(s.label){case 0:return[4,y(e)];case 1:n=s.sent(),r={method:"DELETE",headers:n},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(m(e)+"/"+t.fcmToken,r)];case 3:return[4,s.sent().json()];case 4:if((i=s.sent()).error)throw u.create("token-unsubscribe-failed",{errorInfo:i.error.message});return[3,6];case 5:throw o=s.sent(),u.create("token-unsubscribe-failed",{errorInfo:o});case 6:return[2]}}))}))},e}();function m(e){return h+"/projects/"+e.options.projectId+"/registrations"}function y(e){return Object(s.__awaiter)(this,void 0,void 0,(function(){var t;return Object(s.__generator)(this,(function(n){switch(n.label){case 0:return[4,e.installations().getToken()];case 1:return t=n.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.options.apiKey,"x-goog-firebase-installations-auth":"FIS "+t})]}}))}))}function v(e,t){var n=f(e.getKey("p256dh")),r=f(e.getKey("auth")),i={web:{endpoint:e.endpoint,p256dh:n,auth:r}};return p(t.buffer,c.buffer)||(i.web.applicationPubKey=f(t)),i}function _(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}var b=function(){function e(){this.dbPromise=null}return e.prototype.get=function(e){return this.createTransaction((function(t){return t.get(e)}))},e.prototype.getIndex=function(e,t){return this.createTransaction((function(n){return n.index(e).get(t)}))},e.prototype.put=function(e){return this.createTransaction((function(t){return t.put(e)}),"readwrite")},e.prototype.delete=function(e){return this.createTransaction((function(t){return t.delete(e)}),"readwrite")},e.prototype.closeDatabase=function(){return Object(s.__awaiter)(this,void 0,void 0,(function(){return Object(s.__generator)(this,(function(e){switch(e.label){case 0:return this.dbPromise?[4,this.dbPromise]:[3,2];case 1:e.sent().close(),this.dbPromise=null,e.label=2;case 2:return[2]}}))}))},e.prototype.createTransaction=function(e,t){return void 0===t&&(t="readonly"),Object(s.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o;return Object(s.__generator)(this,(function(s){switch(s.label){case 0:return[4,this.getDb()];case 1:return n=s.sent(),r=n.transaction(this.objectStoreName,t),i=r.objectStore(this.objectStoreName),[4,w(e(i))];case 2:return o=s.sent(),[2,new Promise((function(e,t){r.oncomplete=function(){e(o)},r.onerror=function(){t(r.error)}}))]}}))}))},e.prototype.getDb=function(){var e=this;return this.dbPromise||(this.dbPromise=new Promise((function(t,n){var r=indexedDB.open(e.dbName,e.dbVersion);r.onsuccess=function(){t(r.result)},r.onerror=function(){e.dbPromise=null,n(r.error)},r.onupgradeneeded=function(t){return e.onDbUpgrade(r,t)}}))),this.dbPromise},e}();function w(e){return new Promise((function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}var C=function(e){function t(t){var n=e.call(this)||this;return n.app=t,n.dbName="fcm_token_details_db",n.dbVersion=4,n.objectStoreName="fcm_token_object_Store",n}return Object(s.__extends)(t,e),t.prototype.onDbUpgrade=function(e,t){var n=e.result;switch(t.oldVersion){case 0:(i=n.createObjectStore(this.objectStoreName,{keyPath:"swScope"})).createIndex("fcmSenderId","fcmSenderId",{unique:!1}),i.createIndex("fcmToken","fcmToken",{unique:!0});case 1:!function(e){var t=indexedDB.open("undefined");t.onerror=function(e){},t.onsuccess=function(n){!function(e,t){if(e.objectStoreNames.contains("fcm_token_object_Store")){var n=e.transaction("fcm_token_object_Store").objectStore("fcm_token_object_Store"),r=new g,i=n.openCursor();i.onerror=function(e){console.warn("Unable to cleanup old IDB.",e)},i.onsuccess=function(){var n=i.result;n?(r.deleteToken(t,n.value),n.continue()):(e.close(),indexedDB.deleteDatabase("undefined"))}}}(t.result,e)}}(this.app);case 2:var r=(i=e.transaction.objectStore(this.objectStoreName)).openCursor();r.onsuccess=function(){var e=r.result;if(e){var t=e.value,n=Object(s.__assign)({},t);t.createTime||(n.createTime=Date.now()),"string"==typeof t.vapidKey&&(n.vapidKey=_(t.vapidKey)),"string"==typeof t.auth&&(n.auth=_(t.auth).buffer),"string"==typeof t.auth&&(n.p256dh=_(t.p256dh).buffer),"string"==typeof t.fcmPushSet&&delete n.fcmPushSet,e.update(n),e.continue()}};break;case 3:var i,o=(i=e.transaction.objectStore(this.objectStoreName)).openCursor();o.onsuccess=function(){var e=o.result;if(e){var t=e.value,n=Object(s.__assign)({},t);"string"==typeof t.fcmPushSet&&delete n.fcmPushSet,e.update(n),e.continue()}}}},t.prototype.getTokenDetailsFromToken=function(e){return Object(s.__awaiter)(this,void 0,void 0,(function(){return Object(s.__generator)(this,(function(t){if(!e)throw u.create("bad-token");return E({fcmToken:e}),[2,this.getIndex("fcmToken",e)]}))}))},t.prototype.getTokenDetailsFromSWScope=function(e){return Object(s.__awaiter)(this,void 0,void 0,(function(){return Object(s.__generator)(this,(function(t){if(!e)throw u.create("bad-scope");return E({swScope:e}),[2,this.get(e)]}))}))},t.prototype.saveTokenDetails=function(e){return Object(s.__awaiter)(this,void 0,void 0,(function(){return Object(s.__generator)(this,(function(t){if(!e.swScope)throw u.create("bad-scope");if(!e.vapidKey)throw u.create("bad-vapid-key");if(!e.endpoint||!e.auth||!e.p256dh)throw u.create("bad-subscription");if(!e.fcmSenderId)throw u.create("bad-sender-id");if(!e.fcmToken)throw u.create("bad-token");return E(e),[2,this.put(e)]}))}))},t.prototype.deleteToken=function(e){return Object(s.__awaiter)(this,void 0,void 0,(function(){var t;return Object(s.__generator)(this,(function(n){switch(n.label){case 0:return"string"!=typeof e||0===e.length?[2,Promise.reject(u.create("invalid-delete-token"))]:[4,this.getTokenDetailsFromToken(e)];case 1:if(!(t=n.sent()))throw u.create("delete-token-not-found");return[4,this.delete(t.swScope)];case 2:return n.sent(),[2,t]}}))}))},t}(b);function E(e){if(e.fcmToken&&("string"!=typeof e.fcmToken||0===e.fcmToken.length))throw u.create("bad-token");if(e.swScope&&("string"!=typeof e.swScope||0===e.swScope.length))throw u.create("bad-scope");if(e.vapidKey&&(!(e.vapidKey instanceof Uint8Array)||65!==e.vapidKey.length))throw u.create("bad-vapid-key");if(e.endpoint&&("string"!=typeof e.endpoint||0===e.endpoint.length))throw u.create("bad-subscription");if(e.auth&&!(e.auth instanceof ArrayBuffer))throw u.create("bad-subscription");if(e.p256dh&&!(e.p256dh instanceof ArrayBuffer))throw u.create("bad-subscription");if(e.fcmSenderId&&("string"!=typeof e.fcmSenderId||0===e.fcmSenderId.length))throw u.create("bad-sender-id")}var T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dbName="fcm_vapid_details_db",t.dbVersion=1,t.objectStoreName="fcm_vapid_object_Store",t}return Object(s.__extends)(t,e),t.prototype.onDbUpgrade=function(e){e.result.createObjectStore(this.objectStoreName,{keyPath:"swScope"})},t.prototype.getVapidFromSWScope=function(e){return Object(s.__awaiter)(this,void 0,void 0,(function(){var t;return Object(s.__generator)(this,(function(n){switch(n.label){case 0:if("string"!=typeof e||0===e.length)throw u.create("bad-scope");return[4,this.get(e)];case 1:return[2,(t=n.sent())?t.vapidKey:void 0]}}))}))},t.prototype.saveVapidDetails=function(e,t){return Object(s.__awaiter)(this,void 0,void 0,(function(){return Object(s.__generator)(this,(function(n){if("string"!=typeof e||0===e.length)throw u.create("bad-scope");if(null===t||65!==t.length)throw u.create("bad-vapid-key");return[2,this.put({swScope:e,vapidKey:t})]}))}))},t.prototype.deleteVapidDetails=function(e){return Object(s.__awaiter)(this,void 0,void 0,(function(){var t;return Object(s.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.getVapidFromSWScope(e)];case 1:if(!(t=n.sent()))throw u.create("delete-scope-not-found");return[4,this.delete(e)];case 2:return n.sent(),[2,t]}}))}))},t}(b),S=function(){function e(e){var t=this;if(this.app=e,this.vapidDetailsModel=new T,this.subscriptionManager=new g,!e.options.messagingSenderId||"string"!=typeof e.options.messagingSenderId)throw u.create("bad-sender-id");this.INTERNAL={delete:function(){return t.delete()}},this.tokenDetailsModel=new C(e)}return e.prototype.getToken=function(){return Object(s.__awaiter)(this,void 0,void 0,(function(){var e,t,n,r,i;return Object(s.__generator)(this,(function(o){switch(o.label){case 0:if("denied"===(e=this.getNotificationPermission_()))throw u.create("notifications-blocked");return"granted"!==e?[2,null]:[4,this.getSWRegistration_()];case 1:return t=o.sent(),[4,this.getPublicVapidKey_()];case 2:return n=o.sent(),[4,this.getPushSubscription(t,n)];case 3:return r=o.sent(),[4,this.tokenDetailsModel.getTokenDetailsFromSWScope(t.scope)];case 4:return(i=o.sent())?[2,this.manageExistingToken(t,r,n,i)]:[2,this.getNewToken(t,r,n)]}}))}))},e.prototype.manageExistingToken=function(e,t,n,r){return Object(s.__awaiter)(this,void 0,void 0,(function(){return Object(s.__generator)(this,(function(i){switch(i.label){case 0:return function(e,t,n){if(!n.vapidKey||!p(t.buffer,n.vapidKey.buffer))return!1;var r=e.endpoint===n.endpoint,i=p(e.getKey("auth"),n.auth),o=p(e.getKey("p256dh"),n.p256dh);return r&&i&&o}(t,n,r)?Date.now()<r.createTime+6048e5?[2,r.fcmToken]:[2,this.updateToken(e,t,n,r)]:[3,1];case 1:return[4,this.deleteTokenFromDB(r.fcmToken)];case 2:return i.sent(),[2,this.getNewToken(e,t,n)];case 3:return[2]}}))}))},e.prototype.updateToken=function(e,t,n,r){return Object(s.__awaiter)(this,void 0,void 0,(function(){var i,o,a;return Object(s.__generator)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,4,,6]),[4,this.subscriptionManager.updateToken(r,this.app,t,n)];case 1:return i=s.sent(),o={swScope:e.scope,vapidKey:n,fcmSenderId:this.app.options.messagingSenderId,fcmToken:i,createTime:Date.now(),endpoint:t.endpoint,auth:t.getKey("auth"),p256dh:t.getKey("p256dh")},[4,this.tokenDetailsModel.saveTokenDetails(o)];case 2:return s.sent(),[4,this.vapidDetailsModel.saveVapidDetails(e.scope,n)];case 3:return s.sent(),[2,i];case 4:return a=s.sent(),[4,this.deleteToken(r.fcmToken)];case 5:throw s.sent(),a;case 6:return[2]}}))}))},e.prototype.getNewToken=function(e,t,n){return Object(s.__awaiter)(this,void 0,void 0,(function(){var r,i;return Object(s.__generator)(this,(function(o){switch(o.label){case 0:return[4,this.subscriptionManager.getToken(this.app,t,n)];case 1:return r=o.sent(),i={swScope:e.scope,vapidKey:n,fcmSenderId:this.app.options.messagingSenderId,fcmToken:r,createTime:Date.now(),endpoint:t.endpoint,auth:t.getKey("auth"),p256dh:t.getKey("p256dh")},[4,this.tokenDetailsModel.saveTokenDetails(i)];case 2:return o.sent(),[4,this.vapidDetailsModel.saveVapidDetails(e.scope,n)];case 3:return o.sent(),[2,r]}}))}))},e.prototype.deleteToken=function(e){return Object(s.__awaiter)(this,void 0,void 0,(function(){var t,n;return Object(s.__generator)(this,(function(r){switch(r.label){case 0:return[4,this.deleteTokenFromDB(e)];case 1:return r.sent(),[4,this.getSWRegistration_()];case 2:return(t=r.sent())?[4,t.pushManager.getSubscription()]:[3,4];case 3:if(n=r.sent())return[2,n.unsubscribe()];r.label=4;case 4:return[2,!0]}}))}))},e.prototype.deleteTokenFromDB=function(e){return Object(s.__awaiter)(this,void 0,void 0,(function(){var t;return Object(s.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.tokenDetailsModel.deleteToken(e)];case 1:return t=n.sent(),[4,this.subscriptionManager.deleteToken(this.app,t)];case 2:return n.sent(),[2]}}))}))},e.prototype.getPushSubscription=function(e,t){return Object(s.__awaiter)(this,void 0,void 0,(function(){var n;return Object(s.__generator)(this,(function(r){switch(r.label){case 0:return[4,e.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:t})]}}))}))},e.prototype.requestPermission=function(){throw u.create("only-available-in-window")},e.prototype.useServiceWorker=function(e){throw u.create("only-available-in-window")},e.prototype.usePublicVapidKey=function(e){throw u.create("only-available-in-window")},e.prototype.onMessage=function(e,t,n){throw u.create("only-available-in-window")},e.prototype.onTokenRefresh=function(e,t,n){throw u.create("only-available-in-window")},e.prototype.setBackgroundMessageHandler=function(e){throw u.create("only-available-in-sw")},e.prototype.delete=function(){return Object(s.__awaiter)(this,void 0,void 0,(function(){return Object(s.__generator)(this,(function(e){switch(e.label){case 0:return[4,Promise.all([this.tokenDetailsModel.closeDatabase(),this.vapidDetailsModel.closeDatabase()])];case 1:return e.sent(),[2]}}))}))},e.prototype.getNotificationPermission_=function(){return Notification.permission},e.prototype.getTokenDetailsModel=function(){return this.tokenDetailsModel},e.prototype.getVapidDetailsModel=function(){return this.vapidDetailsModel},e.prototype.getSubscriptionManager=function(){return this.subscriptionManager},e}(),I=function(e){function t(t){var n=e.call(this,t)||this;return n.bgMessageHandler=null,self.addEventListener("push",(function(e){n.onPush(e)})),self.addEventListener("pushsubscriptionchange",(function(e){n.onSubChange(e)})),self.addEventListener("notificationclick",(function(e){n.onNotificationClick(e)})),n}return Object(s.__extends)(t,e),t.prototype.onPush=function(e){e.waitUntil(this.onPush_(e))},t.prototype.onSubChange=function(e){e.waitUntil(this.onSubChange_(e))},t.prototype.onNotificationClick=function(e){e.waitUntil(this.onNotificationClick_(e))},t.prototype.onPush_=function(e){return Object(s.__awaiter)(this,void 0,void 0,(function(){var t,n,r,i,o,a;return Object(s.__generator)(this,(function(s){switch(s.label){case 0:if(!e.data)return[2];try{t=e.data.json()}catch(l){return[2]}return[4,this.hasVisibleClients_()];case 1:return s.sent()?[2,this.sendMessageToWindowClients_(t)]:(n=this.getNotificationData_(t))?(r=n.title||"",[4,this.getSWRegistration_()]):[3,3];case 2:return i=s.sent(),o=n.actions,a=Notification.maxActions,o&&a&&o.length>a&&console.warn("This browser only supports "+a+" actions.The remaining actions will not be displayed."),[2,i.showNotification(r,n)];case 3:return this.bgMessageHandler?[4,this.bgMessageHandler(t)]:[3,5];case 4:return s.sent(),[2];case 5:return[2]}}))}))},t.prototype.onSubChange_=function(e){return Object(s.__awaiter)(this,void 0,void 0,(function(){var e,t,n,r;return Object(s.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.getSWRegistration_()];case 1:return e=i.sent(),[3,3];case 2:throw t=i.sent(),u.create("unable-to-resubscribe",{errorInfo:t});case 3:return i.trys.push([3,5,,8]),[4,e.pushManager.getSubscription()];case 4:return i.sent(),[3,8];case 5:return n=i.sent(),[4,this.getTokenDetailsModel().getTokenDetailsFromSWScope(e.scope)];case 6:if(!(r=i.sent()))throw n;return[4,this.deleteToken(r.fcmToken)];case 7:throw i.sent(),n;case 8:return[2]}}))}))},t.prototype.onNotificationClick_=function(e){return Object(s.__awaiter)(this,void 0,void 0,(function(){var t,n,r,i;return Object(s.__generator)(this,(function(o){switch(o.label){case 0:if(!(e.notification&&e.notification.data&&e.notification.data.FCM_MSG))return[2];if(e.action)return[2];if(e.stopImmediatePropagation(),e.notification.close(),!(t=e.notification.data.FCM_MSG).notification)return[2];if(!(n=t.fcmOptions&&t.fcmOptions.link||t.notification.click_action)){if(!(t.data&&"google.c.a.c_id"in t.data))return[2];n=self.location.origin}return[4,this.getWindowClient_(n)];case 1:return(r=o.sent())?[3,4]:[4,self.clients.openWindow(n)];case 2:return r=o.sent(),[4,new Promise((function(e){setTimeout(e,3e3)}))];case 3:return o.sent(),[3,6];case 4:return[4,r.focus()];case 5:r=o.sent(),o.label=6;case 6:return r?(delete t.notification,delete t.fcmOptions,i=A(d.NOTIFICATION_CLICKED,t),[2,this.attemptToMessageClient_(r,i)]):[2]}}))}))},t.prototype.getNotificationData_=function(e){var t;if(e&&"object"==typeof e.notification){var n=Object(s.__assign)({},e.notification);return n.data=Object(s.__assign)(Object(s.__assign)({},e.notification.data),((t={}).FCM_MSG=e,t)),n}},t.prototype.setBackgroundMessageHandler=function(e){if(!e||"function"!=typeof e)throw u.create("bg-handler-function-expected");this.bgMessageHandler=e},t.prototype.getWindowClient_=function(e){return Object(s.__awaiter)(this,void 0,void 0,(function(){var t,n,r,i;return Object(s.__generator)(this,(function(o){switch(o.label){case 0:return t=new URL(e,self.location.href).href,[4,k()];case 1:for(n=o.sent(),r=null,i=0;i<n.length;i++)if(new URL(n[i].url,self.location.href).href===t){r=n[i];break}return[2,r]}}))}))},t.prototype.attemptToMessageClient_=function(e,t){return Object(s.__awaiter)(this,void 0,void 0,(function(){return Object(s.__generator)(this,(function(n){if(!e)throw u.create("no-window-client-to-msg");return e.postMessage(t),[2]}))}))},t.prototype.hasVisibleClients_=function(){return Object(s.__awaiter)(this,void 0,void 0,(function(){return Object(s.__generator)(this,(function(e){switch(e.label){case 0:return[4,k()];case 1:return[2,e.sent().some((function(e){return"visible"===e.visibilityState&&!e.url.startsWith("chrome-extension://")}))]}}))}))},t.prototype.sendMessageToWindowClients_=function(e){return Object(s.__awaiter)(this,void 0,void 0,(function(){var t,n,r=this;return Object(s.__generator)(this,(function(i){switch(i.label){case 0:return[4,k()];case 1:return t=i.sent(),n=A(d.PUSH_MSG_RECEIVED,e),[4,Promise.all(t.map((function(e){return r.attemptToMessageClient_(e,n)})))];case 2:return i.sent(),[2]}}))}))},t.prototype.getSWRegistration_=function(){return Object(s.__awaiter)(this,void 0,void 0,(function(){return Object(s.__generator)(this,(function(e){return[2,self.registration]}))}))},t.prototype.getPublicVapidKey_=function(){return Object(s.__awaiter)(this,void 0,void 0,(function(){var e,t;return Object(s.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.getSWRegistration_()];case 1:if(!(e=n.sent()))throw u.create("sw-registration-expected");return[4,this.getVapidDetailsModel().getVapidFromSWScope(e.scope)];case 2:return null==(t=n.sent())?[2,c]:[2,t]}}))}))},t}(S);function k(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function A(e,t){return{firebaseMessagingType:e,firebaseMessagingData:t}}var N=function(e){function t(t){var n=e.call(this,t)||this;return n.registrationToUse=null,n.publicVapidKeyToUse=null,n.messageObserver=null,n.tokenRefreshObserver=null,n.onMessageInternal=Object(a.createSubscribe)((function(e){n.messageObserver=e})),n.onTokenRefreshInternal=Object(a.createSubscribe)((function(e){n.tokenRefreshObserver=e})),n.setupSWMessageListener_(),n}return Object(s.__extends)(t,e),t.prototype.requestPermission=function(){return Object(s.__awaiter)(this,void 0,void 0,(function(){var e;return Object(s.__generator)(this,(function(t){switch(t.label){case 0:return"granted"===this.getNotificationPermission_()?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(e=t.sent()))return[2];throw u.create("denied"===e?"permission-blocked":"permission-default")}}))}))},t.prototype.useServiceWorker=function(e){if(!(e instanceof ServiceWorkerRegistration))throw u.create("sw-registration-expected");if(null!=this.registrationToUse)throw u.create("use-sw-before-get-token");this.registrationToUse=e},t.prototype.usePublicVapidKey=function(e){if("string"!=typeof e)throw u.create("invalid-public-vapid-key");if(null!=this.publicVapidKeyToUse)throw u.create("use-public-key-before-get-token");var t=_(e);if(65!==t.length)throw u.create("public-vapid-key-decryption-failed");this.publicVapidKeyToUse=t},t.prototype.onMessage=function(e,t,n){return"function"==typeof e?this.onMessageInternal(e,t,n):this.onMessageInternal(e)},t.prototype.onTokenRefresh=function(e,t,n){return"function"==typeof e?this.onTokenRefreshInternal(e,t,n):this.onTokenRefreshInternal(e)},t.prototype.waitForRegistrationToActivate_=function(e){var t=e.installing||e.waiting||e.active;return new Promise((function(n,r){if(t)if("activated"!==t.state)if("redundant"!==t.state){var i=function(){if("activated"===t.state)n(e);else{if("redundant"!==t.state)return;r(u.create("sw-reg-redundant"))}t.removeEventListener("statechange",i)};t.addEventListener("statechange",i)}else r(u.create("sw-reg-redundant"));else n(e);else r(u.create("no-sw-in-reg"))}))},t.prototype.getSWRegistration_=function(){var e=this;return this.registrationToUse?this.waitForRegistrationToActivate_(this.registrationToUse):(this.registrationToUse=null,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}).catch((function(e){throw u.create("failed-serviceworker-registration",{browserErrorMessage:e.message})})).then((function(t){return e.waitForRegistrationToActivate_(t).then((function(){return e.registrationToUse=t,t.update(),t}))})))},t.prototype.getPublicVapidKey_=function(){return Object(s.__awaiter)(this,void 0,void 0,(function(){return Object(s.__generator)(this,(function(e){return this.publicVapidKeyToUse?[2,this.publicVapidKeyToUse]:[2,c]}))}))},t.prototype.setupSWMessageListener_=function(){var e=this;navigator.serviceWorker.addEventListener("message",(function(t){if(t.data&&t.data.firebaseMessagingType&&t.data.firebaseMessagingData){var n=t.data,r=n.firebaseMessagingType,i=n.firebaseMessagingData;e.messageObserver&&e.messageObserver.next(i);var o=i.data;if(o&&"google.c.a.c_id"in o&&"1"===o["google.c.a.e"]){var s=function(e){switch(e){case d.NOTIFICATION_CLICKED:return"notification_open";case d.PUSH_MSG_RECEIVED:return"notification_foreground";default:throw new Error}}(r);e.app.INTERNAL.analytics.logEvent(s,{message_name:o["google.c.a.c_l"],message_id:o["google.c.a.c_id"],message_time:o["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)})}}}),!1)},t}(S);function D(e){e.INTERNAL.registerService("messaging",(function(e){if(!R())throw u.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new I(e):new N(e)}),{isSupported:R})}function R(){return self&&"ServiceWorkerGlobalScope"in self?"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}D(o.a)},iqUP:function(e,t,n){"use strict";var r,i=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r;n("t6oF"),n("NSPt"),n("6Joi"),n("ABqa"),n("gHGA"),n("LmZi"),n("bQlE"),n("3Kre"),n("O1kn"),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport * as firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),e.exports=i},mrSG:function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return i})),n.d(t,"__assign",(function(){return o})),n.d(t,"__rest",(function(){return s})),n.d(t,"__decorate",(function(){return a})),n.d(t,"__param",(function(){return l})),n.d(t,"__metadata",(function(){return u})),n.d(t,"__awaiter",(function(){return c})),n.d(t,"__generator",(function(){return h})),n.d(t,"__exportStar",(function(){return d})),n.d(t,"__values",(function(){return p})),n.d(t,"__read",(function(){return f})),n.d(t,"__spread",(function(){return g})),n.d(t,"__spreadArrays",(function(){return m})),n.d(t,"__await",(function(){return y})),n.d(t,"__asyncGenerator",(function(){return v})),n.d(t,"__asyncDelegator",(function(){return _})),n.d(t,"__asyncValues",(function(){return b})),n.d(t,"__makeTemplateObject",(function(){return w})),n.d(t,"__importStar",(function(){return C})),n.d(t,"__importDefault",(function(){return E}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function s(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function a(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function l(e,t){return function(n,r){t(n,r,e)}}function u(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function c(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(t){o(t)}}function a(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(s,a)}l((r=r.apply(e,t||[])).next())}))}function h(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function d(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function p(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function f(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function g(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(f(arguments[t]));return e}function m(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function y(e){return this instanceof y?(this.v=e,this):new y(e)}function v(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||a(e,t)}))})}function a(e,t){try{(n=i[e](t)).value instanceof y?Promise.resolve(n.value.v).then(l,u):c(o[0][2],n)}catch(r){c(o[0][3],r)}var n}function l(e){a("next",e)}function u(e){a("throw",e)}function c(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function _(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:y(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function b(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=p(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,i,(t=e[n](t)).done,t.value)}))}}}function w(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function C(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function E(e){return e&&e.__esModule?e:{default:e}}},nbvr:function(e,t,n){!function(e){"use strict";function t(e){return Array.prototype.slice.call(e)}function n(e){return new Promise((function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function r(e,t,r){var i,o=new Promise((function(o,s){n(i=e[t].apply(e,r)).then(o,s)}));return o.request=i,o}function i(e,t,n){var i=r(e,t,n);return i.then((function(e){if(e)return new c(e,i.request)}))}function o(e,t,n){n.forEach((function(n){Object.defineProperty(e.prototype,n,{get:function(){return this[t][n]},set:function(e){this[t][n]=e}})}))}function s(e,t,n,i){i.forEach((function(i){i in n.prototype&&(e.prototype[i]=function(){return r(this[t],i,arguments)})}))}function a(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return this[t][r].apply(this[t],arguments)})}))}function l(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return i(this[t],r,arguments)})}))}function u(e){this._index=e}function c(e,t){this._cursor=e,this._request=t}function h(e){this._store=e}function d(e){this._tx=e,this.complete=new Promise((function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}}))}function p(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new d(n)}function f(e){this._db=e}o(u,"_index",["name","keyPath","multiEntry","unique"]),s(u,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),l(u,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(c,"_cursor",["direction","key","primaryKey","value"]),s(c,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(e){e in IDBCursor.prototype&&(c.prototype[e]=function(){var t=this,r=arguments;return Promise.resolve().then((function(){return t._cursor[e].apply(t._cursor,r),n(t._request).then((function(e){if(e)return new c(e,t._request)}))}))})})),h.prototype.createIndex=function(){return new u(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new u(this._store.index.apply(this._store,arguments))},o(h,"_store",["name","keyPath","indexNames","autoIncrement"]),s(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),l(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),a(h,"_store",IDBObjectStore,["deleteIndex"]),d.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},o(d,"_tx",["objectStoreNames","mode"]),a(d,"_tx",IDBTransaction,["abort"]),p.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),a(p,"_db",IDBDatabase,["deleteObjectStore","close"]),f.prototype.transaction=function(){return new d(this._db.transaction.apply(this._db,arguments))},o(f,"_db",["name","version","objectStoreNames"]),a(f,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(e){[h,u].forEach((function(n){e in n.prototype&&(n.prototype[e.replace("open","iterate")]=function(){var n=t(arguments),r=n[n.length-1],i=this._store||this._index,o=i[e].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})}))})),[u,h].forEach((function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var n=this,r=[];return new Promise((function(i){n.iterateCursor(e,(function(e){e?(r.push(e.value),void 0===t||r.length!=t?e.continue():i(r)):i(r)}))}))})})),e.openDb=function(e,t,n){var i=r(indexedDB,"open",[e,t]),o=i.request;return o&&(o.onupgradeneeded=function(e){n&&n(new p(o.result,e.oldVersion,o.transaction))}),i.then((function(e){return new f(e)}))},e.deleteDb=function(e){return r(indexedDB,"deleteDatabase",[e])},Object.defineProperty(e,"__esModule",{value:!0})}(t)},"q/0M":function(e,t,n){"use strict";function r(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}n.r(t),n.d(t,"LogLevel",(function(){return o})),n.d(t,"Logger",(function(){return l})),n.d(t,"setLogLevel",(function(){return u}));var i=[],o=function(e){return e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT",e}({}),s=o.INFO,a=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(t<e.logLevel)){var s=(new Date).toISOString();switch(t){case o.DEBUG:case o.VERBOSE:console.log.apply(console,r(["["+s+"]  "+e.name+":"],n));break;case o.INFO:console.info.apply(console,r(["["+s+"]  "+e.name+":"],n));break;case o.WARN:console.warn.apply(console,r(["["+s+"]  "+e.name+":"],n));break;case o.ERROR:console.error.apply(console,r(["["+s+"]  "+e.name+":"],n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+t+")")}}},l=function(){function e(e){this.name=e,this._logLevel=s,this._logHandler=a,i.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in o))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!0,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,o.DEBUG],e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,o.VERBOSE],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,o.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,o.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,o.ERROR],e))},e}();function u(e){i.forEach((function(t){t.logLevel=e}))}},t6oF:function(e,t,n){"use strict";n.r(t);var r=n("wj3C"),i=n.n(r);(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},n="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function r(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}function o(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:r(e)}}!function(e,r){if(r){var i=n;e=e.split(".");for(var o=0;o<e.length-1;o++){var s=e[o];s in i||(i[s]={}),i=i[s]}(r=r(o=i[e=e[e.length-1]]))!=o&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Promise",(function(e){function t(e){this.b=0,this.c=void 0,this.a=[];var t=this.f();try{e(t.resolve,t.reject)}catch(n){t.reject(n)}}function r(){this.a=null}function i(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;r.prototype.b=function(e){if(null==this.a){this.a=[];var t=this;this.c((function(){t.g()}))}this.a.push(e)};var s=n.setTimeout;r.prototype.c=function(e){s(e,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(r){this.f(r)}}}this.a=null},r.prototype.f=function(e){this.c((function(){throw e}))},t.prototype.f=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.m),reject:e(this.g)}},t.prototype.m=function(e){if(e===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.o(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.u(e):this.h(e)}},t.prototype.u=function(e){var t=void 0;try{t=e.then}catch(n){return void this.g(n)}"function"==typeof t?this.v(t,e):this.h(e)},t.prototype.g=function(e){this.i(2,e)},t.prototype.h=function(e){this.i(1,e)},t.prototype.i=function(e,t){if(0!=this.b)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.b);this.b=e,this.c=t,this.l()},t.prototype.l=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)a.b(this.a[e]);this.a=null}};var a=new r;return t.prototype.o=function(e){var t=this.f();e.La(t.resolve,t.reject)},t.prototype.v=function(e,t){var n=this.f();try{e.call(t,n.resolve,n.reject)}catch(r){n.reject(r)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(n){o(n)}}:t}var i,o,s=new t((function(e,t){i=e,o=t}));return this.La(r(e,i),r(n,o)),s},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.La=function(e,t){function n(){switch(r.b){case 1:e(r.c);break;case 2:t(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},t.resolve=i,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var r=o(e),s=r.next();!s.done;s=r.next())i(s.value).La(t,n)}))},t.all=function(e){var n=o(e),r=n.next();return r.done?i([]):new t((function(e,t){function o(t){return function(n){s[t]=n,0==--a&&e(s)}}var s=[],a=0;do{s.push(void 0),a++,i(r.value).La(o(s.length-1),t),r=n.next()}while(!r.done)}))},t}));var s=s||{},a=this||self;function l(e){return"string"==typeof e}function u(e){return"boolean"==typeof e}var c=/^[\w+/_-]+[=]{0,2}$/,h=null;function d(){}function p(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t}function f(e){return null===e}function g(e){return"array"==p(e)}function m(e){var t=p(e);return"array"==t||"object"==t&&"number"==typeof e.length}function y(e){return"function"==p(e)}function v(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var _="closure_uid_"+(1e9*Math.random()>>>0),b=0;function w(e,t,n){return e.call.apply(e.bind,arguments)}function C(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function E(e,t,n){return(E=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?w:C).apply(null,arguments)}function T(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var S=Date.now||function(){return+new Date};function I(e,t){function n(){}n.prototype=t.prototype,e.qb=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.gd=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function k(e){if(!e)return!1;try{return!!e.$goog_Thenable}catch(t){return!1}}function A(e){if(Error.captureStackTrace)Error.captureStackTrace(this,A);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))}function N(e,t){for(var n="",r=(e=e.split("%s")).length-1,i=0;i<r;i++)n+=e[i]+(i<t.length?t[i]:"%s");A.call(this,n+e[r])}function D(e,t){throw new N("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}function R(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function O(e,t){e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}function P(){this.b=this.a=null}I(A,Error),A.prototype.name="CustomError",I(N,A),N.prototype.name="AssertionError",R.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var x=new R((function(){return new L}),(function(e){e.reset()}));function M(){var e=Be,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function L(){this.next=this.b=this.a=null}function F(e,t){e:{try{var n=e&&e.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||a).Element&&r.Location){var i=r;break e}}catch(s){}i=null}if(i&&void 0!==i[t]&&(!e||!(e instanceof i[t])&&(e instanceof i.Location||e instanceof i.Element))){if(v(e))try{var o=e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e)}catch(s){o="<object could not be stringified>"}else o=void 0===e?"undefined":null===e?"null":typeof e;D("Argument is not a %s (or a non-Element, non-Location mock); got: %s",t,o)}}P.prototype.add=function(e,t){var n=x.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},L.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},L.prototype.reset=function(){this.next=this.b=this.a=null};var U=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(l(e))return l(t)&&1==t.length?e.indexOf(t,0):-1;for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},V=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=l(e)?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)},j=Array.prototype.map?function(e,t){return Array.prototype.map.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=Array(n),i=l(e)?e.split(""):e,o=0;o<n;o++)o in i&&(r[o]=t.call(void 0,i[o],o,e));return r},q=Array.prototype.some?function(e,t){return Array.prototype.some.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=l(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e))return!0;return!1};function B(e,t){return 0<=U(e,t)}function W(e,t){var n;return(n=0<=(t=U(e,t)))&&Array.prototype.splice.call(e,t,1),n}function H(e,t){!function(e,t){for(var n=l(e)?e.split(""):e,r=e.length-1;0<=r;--r)r in n&&t.call(void 0,n[r],r,e)}(e,(function(n,r){t.call(void 0,n,r,e)&&Array.prototype.splice.call(e,r,1)}))}function K(e){return Array.prototype.concat.apply([],arguments)}function z(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function G(e,t){for(var n in e)t.call(void 0,e[n],n,e)}function Q(e){for(var t in e)return!1;return!0}function $(e){var t,n={};for(t in e)n[t]=e[t];return n}var Y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function X(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<Y.length;o++)n=Y[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function J(e,t){this.a=e===te&&t||"",this.b=ee}function Z(e){return e instanceof J&&e.constructor===J&&e.b===ee?e.a:(D("expected object of type Const, got '"+e+"'"),"type_error:Const")}J.prototype.qa=!0,J.prototype.pa=function(){return this.a},J.prototype.toString=function(){return"Const{"+this.a+"}"};var ee={},te={},ne=new J(te,"");function re(){this.a="",this.b=le}function ie(e){return e instanceof re&&e.constructor===re&&e.b===le?e.a:(D("expected object of type TrustedResourceUrl, got '"+e+"' of type "+p(e)),"type_error:TrustedResourceUrl")}function oe(e,t){var n=Z(e);if(!ae.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return ue(e=n.replace(se,(function(e,r){if(!Object.prototype.hasOwnProperty.call(t,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(t));return(e=t[r])instanceof J?Z(e):encodeURIComponent(String(e))})))}re.prototype.qa=!0,re.prototype.pa=function(){return this.a.toString()},re.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var se=/%{(\w+)}/g,ae=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,le={};function ue(e){var t=new re;return t.a=e,t}var ce=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},he=/&/g,de=/</g,pe=/>/g,fe=/"/g,ge=/'/g,me=/\x00/g,ye=/[\x00&<>"']/;function ve(e,t){return-1!=e.indexOf(t)}function _e(e,t){return e<t?-1:e>t?1:0}function be(){this.a="",this.b=Se}function we(e){return e instanceof be&&e.constructor===be&&e.b===Se?e.a:(D("expected object of type SafeUrl, got '"+e+"' of type "+p(e)),"type_error:SafeUrl")}be.prototype.qa=!0,be.prototype.pa=function(){return this.a.toString()},be.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Ce=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Ee(e){return e instanceof be?e:(e="object"==typeof e&&e.qa?e.pa():String(e),Ce.test(e)||(e="about:invalid#zClosurez"),Ie(e))}var Te,Se={};function Ie(e){var t=new be;return t.a=e,t}Ie("about:blank");e:{var ke=a.navigator;if(ke){var Ae=ke.userAgent;if(Ae){Te=Ae;break e}}Te=""}function Ne(e){return ve(Te,e)}function De(){this.a="",this.b=Oe}function Re(e){return e instanceof De&&e.constructor===De&&e.b===Oe?e.a:(D("expected object of type SafeHtml, got '"+e+"' of type "+p(e)),"type_error:SafeHtml")}De.prototype.qa=!0,De.prototype.pa=function(){return this.a.toString()},De.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Oe={};function Pe(e){var t=new De;return t.a=e,t}Pe("<!DOCTYPE html>");var xe,Me,Le=Pe("");function Fe(e,t){for(var n=e.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Ue(e){return ye.test(e)&&(-1!=e.indexOf("&")&&(e=e.replace(he,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(de,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(pe,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(fe,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(ge,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(me,"&#0;"))),e}function Ve(e){a.setTimeout((function(){throw e}),0)}function je(e,t){Me||function(){if(a.Promise&&a.Promise.resolve){var e=a.Promise.resolve(void 0);Me=function(){e.then(We)}}else Me=function(){var e=We;!y(a.setImmediate)||a.Window&&a.Window.prototype&&!Ne("Edge")&&a.Window.prototype.setImmediate==a.setImmediate?(xe||(xe=function(){var e=a.MessageChannel;if(void 0===e&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!Ne("Presto")&&(e=function(){var e=document.createElement("IFRAME");e.style.display="none",function(e){var t=ue(Z(ne));F(e,"HTMLIFrameElement"),e.src=ie(t).toString()}(e),document.documentElement.appendChild(e);var t=e.contentWindow;(e=t.document).open(),e.write(Re(Le)),e.close();var n="callImmediate"+Math.random(),r="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host;e=E((function(e){"*"!=r&&e.origin!=r||e.data!=n||this.port1.onmessage()}),this),t.addEventListener("message",e,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(n,r)}}}),void 0!==e&&!Ne("Trident")&&!Ne("MSIE")){var t=new e,n={},r=n;return t.port1.onmessage=function(){if(void 0!==n.next){var e=(n=n.next).yb;n.yb=null,e()}},function(e){r.next={yb:e},r=r.next,t.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(e){var t=document.createElement("SCRIPT");t.onreadystatechange=function(){t.onreadystatechange=null,t.parentNode.removeChild(t),t=null,e(),e=null},document.documentElement.appendChild(t)}:function(e){a.setTimeout(e,0)}}()),xe(e)):a.setImmediate(e)}}(),qe||(Me(),qe=!0),Be.add(e,t)}Pe("<br>");var qe=!1,Be=new P;function We(){for(var e;e=M();){try{e.a.call(e.b)}catch(t){Ve(t)}O(x,e)}qe=!1}function He(e,t){if(this.a=Ke,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,e!=d)try{var n=this;e.call(t,(function(e){rt(n,ze,e)}),(function(e){if(!(e instanceof ct))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(t){}rt(n,Ge,e)}))}catch(r){rt(this,Ge,r)}}var Ke=0,ze=2,Ge=3;function Qe(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Qe.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var $e=new R((function(){return new Qe}),(function(e){e.reset()}));function Ye(e,t,n){var r=$e.get();return r.g=e,r.b=t,r.f=n,r}function Xe(e){if(e instanceof He)return e;var t=new He(d);return rt(t,ze,e),t}function Je(e){return new He((function(t,n){n(e)}))}function Ze(e,t,n){it(e,t,n,null)||je(T(t,e))}function et(e){return new He((function(t){var n=e.length,r=[];if(n)for(var i=function(e,i,o){n--,r[e]=i?{Gb:!0,value:o}:{Gb:!1,reason:o},0==n&&t(r)},o=0;o<e.length;o++)Ze(e[o],T(i,o,!0),T(i,o,!1));else t(r)}))}function tt(e,t){e.b||e.a!=ze&&e.a!=Ge||ot(e),e.f?e.f.next=t:e.b=t,e.f=t}function nt(e,t,n,r){var i=Ye(null,null,null);return i.a=new He((function(e,o){i.g=t?function(n){try{var i=t.call(r,n);e(i)}catch(s){o(s)}}:e,i.b=n?function(t){try{var i=n.call(r,t);void 0===i&&t instanceof ct?o(t):e(i)}catch(s){o(s)}}:o})),i.a.c=e,tt(e,i),i.a}function rt(e,t,n){e.a==Ke&&(e===n&&(t=Ge,n=new TypeError("Promise cannot resolve to itself")),e.a=1,it(n,e.Oc,e.Pc,e)||(e.i=n,e.a=t,e.c=null,ot(e),t!=Ge||n instanceof ct||function(e,t){e.g=!0,je((function(){e.g&&ut.call(null,t)}))}(e,n)))}function it(e,t,n,r){if(e instanceof He)return tt(e,Ye(t||d,n||null,r)),!0;if(k(e))return e.then(t,n,r),!0;if(v(e))try{var i=e.then;if(y(i))return function(e,t,n,r,i){function o(e){s||(s=!0,r.call(i,e))}var s=!1;try{t.call(e,(function(e){s||(s=!0,n.call(i,e))}),o)}catch(a){o(a)}}(e,i,t,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function ot(e){e.h||(e.h=!0,je(e.Zb,e))}function st(e){var t=null;return e.b&&(e.b=(t=e.b).next,t.next=null),e.b||(e.f=null),t}function at(e,t,n,r){if(n==Ge&&t.b&&!t.c)for(;e&&e.g;e=e.c)e.g=!1;if(t.a)t.a.c=null,lt(t,n,r);else try{t.c?t.g.call(t.f):lt(t,n,r)}catch(i){ut.call(null,i)}O($e,t)}function lt(e,t,n){t==ze?e.g.call(e.f,n):e.b&&e.b.call(e.f,n)}He.prototype.then=function(e,t,n){return nt(this,y(e)?e:null,y(t)?t:null,n)},He.prototype.$goog_Thenable=!0,(e=He.prototype).ka=function(e,t){return(e=Ye(e,e,t)).c=!0,tt(this,e),this},e.s=function(e,t){return nt(this,null,e,t)},e.cancel=function(e){this.a==Ke&&je((function(){!function e(t,n){if(t.a==Ke)if(t.c){var r=t.c;if(r.b){for(var i=0,o=null,s=null,a=r.b;a&&(a.c||(i++,a.a==t&&(o=a),!(o&&1<i)));a=a.next)o||(s=a);o&&(r.a==Ke&&1==i?e(r,n):(s?((i=s).next==r.f&&(r.f=i),i.next=i.next.next):st(r),at(r,o,Ge,n)))}t.c=null}else rt(t,Ge,n)}(this,new ct(e))}),this)},e.Oc=function(e){this.a=Ke,rt(this,ze,e)},e.Pc=function(e){this.a=Ke,rt(this,Ge,e)},e.Zb=function(){for(var e;e=st(this);)at(this,e,this.a,this.i);this.h=!1};var ut=Ve;function ct(e){A.call(this,e)}function ht(){0!=dt&&(pt[this[_]||(this[_]=++b)]=this),this.va=this.va,this.la=this.la}I(ct,A),ct.prototype.name="cancel";var dt=0,pt={};function ft(e){if(!e.va&&(e.va=!0,e.za(),0!=dt)){var t=e[_]||(e[_]=++b);if(0!=dt&&e.la&&0<e.la.length)throw Error(e+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete pt[t]}}function gt(e){return gt[" "](e),e}ht.prototype.va=!1,ht.prototype.za=function(){if(this.la)for(;this.la.length;)this.la.shift()()},gt[" "]=d;var mt,yt,vt=Ne("Opera"),_t=Ne("Trident")||Ne("MSIE"),bt=Ne("Edge"),wt=bt||_t,Ct=Ne("Gecko")&&!(ve(Te.toLowerCase(),"webkit")&&!Ne("Edge"))&&!(Ne("Trident")||Ne("MSIE"))&&!Ne("Edge"),Et=ve(Te.toLowerCase(),"webkit")&&!Ne("Edge");function Tt(){var e=a.document;return e?e.documentMode:void 0}e:{var St="",It=(yt=Te,Ct?/rv:([^\);]+)(\)|;)/.exec(yt):bt?/Edge\/([\d\.]+)/.exec(yt):_t?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(yt):Et?/WebKit\/(\S+)/.exec(yt):vt?/(?:Version)[ \/]?(\S+)/.exec(yt):void 0);if(It&&(St=It?It[1]:""),_t){var kt=Tt();if(null!=kt&&kt>parseFloat(St)){mt=String(kt);break e}}mt=St}var At,Nt={};function Dt(e){return function(e,t){var n=Nt;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t()}(e,(function(){for(var t=0,n=ce(String(mt)).split("."),r=ce(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;t=_e(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||_e(0==s[2].length,0==a[2].length)||_e(s[2],a[2]),s=s[3],a=a[3]}while(0==t)}return 0<=t}))}At=a.document&&_t?Tt():void 0;var Rt=Object.freeze||function(e){return e},Ot=!_t||9<=Number(At),Pt=_t&&!Dt("9"),xt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{a.addEventListener("test",d,t),a.removeEventListener("test",d,t)}catch(n){}return e}();function Mt(e,t){this.type=e,this.b=this.target=t,this.Mb=!0}function Lt(e,t){if(Mt.call(this,e?e.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.b=t,t=e.relatedTarget){if(Ct){e:{try{gt(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=l(e.pointerType)?e.pointerType:Ft[e.pointerType]||"",this.a=e,e.defaultPrevented&&this.preventDefault()}}Mt.prototype.preventDefault=function(){this.Mb=!1},I(Lt,Mt);var Ft=Rt({2:"touch",3:"pen",4:"mouse"});Lt.prototype.preventDefault=function(){Lt.qb.preventDefault.call(this);var e=this.a;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,Pt)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(t){}},Lt.prototype.f=function(){return this.a};var Ut="closure_listenable_"+(1e6*Math.random()|0),Vt=0;function jt(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.Pa=i,this.key=++Vt,this.ta=this.Ka=!1}function qt(e){e.ta=!0,e.listener=null,e.proxy=null,e.src=null,e.Pa=null}function Bt(e){this.src=e,this.a={},this.b=0}function Wt(e,t){var n=t.type;n in e.a&&W(e.a[n],t)&&(qt(t),0==e.a[n].length&&(delete e.a[n],e.b--))}function Ht(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.ta&&o.listener==t&&o.capture==!!n&&o.Pa==r)return i}return-1}Bt.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var s=Ht(e,t,r,i);return-1<s?(t=e[s],n||(t.Ka=!1)):((t=new jt(t,this.src,o,!!r,i)).Ka=n,e.push(t)),t};var Kt="closure_lm_"+(1e6*Math.random()|0),zt={};function Gt(e,t,n,r,i){if(r&&r.once)$t(e,t,n,r,i);else if(g(t))for(var o=0;o<t.length;o++)Gt(e,t[o],n,r,i);else n=on(n),e&&e[Ut]?an(e,t,n,v(r)?!!r.capture:!!r,i):Qt(e,t,n,!1,r,i)}function Qt(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var s=v(i)?!!i.capture:!!i,a=nn(e);if(a||(e[Kt]=a=new Bt(e)),!(n=a.add(t,n,r,s,o)).proxy)if(r=function(){var e=tn,t=Ot?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)xt||(i=s),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Jt(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}}function $t(e,t,n,r,i){if(g(t))for(var o=0;o<t.length;o++)$t(e,t[o],n,r,i);else n=on(n),e&&e[Ut]?ln(e,t,n,v(r)?!!r.capture:!!r,i):Qt(e,t,n,!0,r,i)}function Yt(e,t,n,r,i){if(g(t))for(var o=0;o<t.length;o++)Yt(e,t[o],n,r,i);else r=v(r)?!!r.capture:!!r,n=on(n),e&&e[Ut]?(e=e.u,(t=String(t).toString())in e.a&&-1<(n=Ht(o=e.a[t],n,r,i))&&(qt(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.a[t],e.b--))):e&&(e=nn(e))&&(t=e.a[t.toString()],e=-1,t&&(e=Ht(t,n,r,i)),(n=-1<e?t[e]:null)&&Xt(n))}function Xt(e){if("number"!=typeof e&&e&&!e.ta){var t=e.src;if(t&&t[Ut])Wt(t.u,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Jt(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=nn(t))?(Wt(n,e),0==n.b&&(n.src=null,t[Kt]=null)):qt(e)}}}function Jt(e){return e in zt?zt[e]:zt[e]="on"+e}function Zt(e,t,n,r){var i=!0;if((e=nn(e))&&(t=e.a[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var o=t[e];o&&o.capture==n&&!o.ta&&(o=en(o,r),i=i&&!1!==o)}return i}function en(e,t){var n=e.listener,r=e.Pa||e.src;return e.Ka&&Xt(e),n.call(r,t)}function tn(e,t){if(e.ta)return!0;if(!Ot){if(!t)e:{t=["window","event"];for(var n=a,r=0;r<t.length;r++)if(null==(n=n[t[r]])){t=null;break e}t=n}if(t=new Lt(r=t,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){e:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break e}catch(s){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=t.b;i;i=i.parentNode)r.push(i);for(e=e.type,i=r.length-1;0<=i;i--){t.b=r[i];var o=Zt(r[i],e,!0,t);n=n&&o}for(i=0;i<r.length;i++)t.b=r[i],o=Zt(r[i],e,!1,t),n=n&&o}return n}return en(e,new Lt(t,this))}function nn(e){return(e=e[Kt])instanceof Bt?e:null}var rn="__closure_events_fn_"+(1e9*Math.random()>>>0);function on(e){return y(e)?e:(e[rn]||(e[rn]=function(t){return e.handleEvent(t)}),e[rn])}function sn(){ht.call(this),this.u=new Bt(this),this.Sb=this,this.Xa=null}function an(e,t,n,r,i){e.u.add(String(t),n,!1,r,i)}function ln(e,t,n,r,i){e.u.add(String(t),n,!0,r,i)}function un(e,t,n,r){if(!(t=e.u.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var s=t[o];if(s&&!s.ta&&s.capture==n){var a=s.listener,l=s.Pa||s.src;s.Ka&&Wt(e.u,s),i=!1!==a.call(l,r)&&i}}return i&&0!=r.Mb}function cn(e,t,n){if(y(e))n&&(e=E(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=E(e.handleEvent,e)}return 2147483647<Number(t)?-1:a.setTimeout(e,t||0)}function hn(e){var t=null;return new He((function(n,r){-1==(t=cn((function(){n(void 0)}),e))&&r(Error("Failed to schedule timer."))})).s((function(e){throw a.clearTimeout(t),e}))}function dn(e){if(e.U&&"function"==typeof e.U)return e.U();if(l(e))return e.split("");if(m(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}function pn(e){if(e.X&&"function"==typeof e.X)return e.X();if(!e.U||"function"!=typeof e.U){if(m(e)||l(e)){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}function fn(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof fn)for(n=e.X(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function gn(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];mn(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)mn(i,r=e.a[t])||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function mn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}I(sn,ht),sn.prototype[Ut]=!0,sn.prototype.addEventListener=function(e,t,n,r){Gt(this,e,t,n,r)},sn.prototype.removeEventListener=function(e,t,n,r){Yt(this,e,t,n,r)},sn.prototype.dispatchEvent=function(e){var t,n=this.Xa;if(n)for(t=[];n;n=n.Xa)t.push(n);n=this.Sb;var r=e.type||e;if(l(e))e=new Mt(e,n);else if(e instanceof Mt)e.target=e.target||n;else{var i=e;X(e=new Mt(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var s=e.b=t[o];i=un(s,r,!0,e)&&i}if(i=un(s=e.b=n,r,!0,e)&&i,i=un(s,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=un(s=e.b=t[o],r,!1,e)&&i;return i},sn.prototype.za=function(){if(sn.qb.za.call(this),this.u){var e,t=this.u;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)qt(n[r]);delete t.a[e],t.b--}}this.Xa=null},(e=fn.prototype).U=function(){gn(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},e.X=function(){return gn(this),this.a.concat()},e.clear=function(){this.b={},this.c=this.a.length=0},e.get=function(e,t){return mn(this.b,e)?this.b[e]:t},e.set=function(e,t){mn(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},e.forEach=function(e,t){for(var n=this.X(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var yn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function vn(e,t){var n;this.b=this.i=this.f="",this.l=null,this.g=this.c="",this.h=!1,e instanceof vn?(this.h=void 0!==t?t:e.h,_n(this,e.f),this.i=e.i,this.b=e.b,bn(this,e.l),this.c=e.c,wn(this,jn(e.a)),this.g=e.g):e&&(n=String(e).match(yn))?(this.h=!!t,_n(this,n[1]||"",!0),this.i=In(n[2]||""),this.b=In(n[3]||"",!0),bn(this,n[4]),this.c=In(n[5]||"",!0),wn(this,n[6]||"",!0),this.g=In(n[7]||"")):(this.h=!!t,this.a=new xn(null,this.h))}function _n(e,t,n){e.f=n?In(t,!0):t,e.f&&(e.f=e.f.replace(/:$/,""))}function bn(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.l=t}else e.l=null}function wn(e,t,n){t instanceof xn?(e.a=t,function(e,t){t&&!e.f&&(Mn(e),e.c=null,e.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Fn(this,t),Vn(this,n,e))}),e)),e.f=t}(e.a,e.h)):(n||(t=kn(t,On)),e.a=new xn(t,e.h))}function Cn(e,t,n){e.a.set(t,n)}function En(e,t){return e.a.get(t)}function Tn(e){return e instanceof vn?new vn(e):new vn(e,void 0)}function Sn(e,t){var n=new vn(null,void 0);return _n(n,"https"),e&&(n.b=e),t&&(n.c=t),n}function In(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function kn(e,t,n){return l(e)?(e=encodeURI(e).replace(t,An),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function An(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}vn.prototype.toString=function(){var e=[],t=this.f;t&&e.push(kn(t,Nn,!0),":");var n=this.b;return(n||"file"==t)&&(e.push("//"),(t=this.i)&&e.push(kn(t,Nn,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.l)&&e.push(":",String(n))),(n=this.c)&&(this.b&&"/"!=n.charAt(0)&&e.push("/"),e.push(kn(n,"/"==n.charAt(0)?Rn:Dn,!0))),(n=this.a.toString())&&e.push("?",n),(n=this.g)&&e.push("#",kn(n,Pn)),e.join("")},vn.prototype.resolve=function(e){var t=new vn(this),n=!!e.f;n?_n(t,e.f):n=!!e.i,n?t.i=e.i:n=!!e.b,n?t.b=e.b:n=null!=e.l;var r=e.c;if(n)bn(t,e.l);else if(n=!!e.c){if("/"!=r.charAt(0))if(this.b&&!this.c)r="/"+r;else{var i=t.c.lastIndexOf("/");-1!=i&&(r=t.c.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ve(i,"./")||ve(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?t.c=r:n=""!==e.a.toString(),n?wn(t,jn(e.a)):n=!!e.g,n&&(t.g=e.g),t};var Nn=/[#\/\?@]/g,Dn=/[#\?:]/g,Rn=/[#\?]/g,On=/[#\?@]/g,Pn=/#/g;function xn(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function Mn(e){e.a||(e.a=new fn,e.b=0,e.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.c,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Ln(e){var t=pn(e);if(void 0===t)throw Error("Keys are undefined");var n=new xn(null,void 0);e=dn(e);for(var r=0;r<t.length;r++){var i=t[r],o=e[r];g(o)?Vn(n,i,o):n.add(i,o)}return n}function Fn(e,t){Mn(e),t=qn(e,t),mn(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,mn((e=e.a).b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&gn(e)))}function Un(e,t){return Mn(e),t=qn(e,t),mn(e.a.b,t)}function Vn(e,t,n){Fn(e,t),0<n.length&&(e.c=null,e.a.set(qn(e,t),z(n)),e.b+=n.length)}function jn(e){var t=new xn;return t.c=e.c,e.a&&(t.a=new fn(e.a),t.b=e.b),t}function qn(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}(e=xn.prototype).add=function(e,t){Mn(this),this.c=null,e=qn(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},e.clear=function(){this.a=this.c=null,this.b=0},e.forEach=function(e,t){Mn(this),this.a.forEach((function(n,r){V(n,(function(n){e.call(t,n,r,this)}),this)}),this)},e.X=function(){Mn(this);for(var e=this.a.U(),t=this.a.X(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},e.U=function(e){Mn(this);var t=[];if(l(e))Un(this,e)&&(t=K(t,this.a.get(qn(this,e))));else{e=this.a.U();for(var n=0;n<e.length;n++)t=K(t,e[n])}return t},e.set=function(e,t){return Mn(this),this.c=null,Un(this,e=qn(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},e.get=function(e,t){return e&&0<(e=this.U(e)).length?String(e[0]):t},e.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.X(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.U(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),e.push(s)}}return this.c=e.join("&")};var Bn=!_t||9<=Number(At);function Wn(e){var t=document;return l(e)?t.getElementById(e):e}function Hn(e,t){G(t,(function(t,n){t&&"object"==typeof t&&t.qa&&(t=t.pa()),"style"==n?e.style.cssText=t:"class"==n?e.className=t:"for"==n?e.htmlFor=t:Kn.hasOwnProperty(n)?e.setAttribute(Kn[n],t):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?e.setAttribute(n,t):e[n]=t}))}var Kn={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function zn(e){if(e&&"number"==typeof e.length){if(v(e))return"function"==typeof e.item||"string"==typeof e.item;if(y(e))return"function"==typeof e.item}return!1}function Gn(e){var t=[];return function e(t,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(g(n)){var i=n;n=i.length,r.push("[");for(var o="",s=0;s<n;s++)r.push(o),e(t,i[s],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&"function"!=typeof(s=n[i])&&(r.push(o),Xn(i,r),r.push(":"),e(t,s,r),o=",");return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":Xn(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new Qn,e,t),t.join("")}function Qn(){}var $n={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Yn=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Xn(e,t){t.push('"',e.replace(Yn,(function(e){var t=$n[e];return t||(t="\\u"+(65536|e.charCodeAt(0)).toString(16).substr(1),$n[e]=t),t})),'"')}function Jn(){var e=yr();return _t&&!!At&&11==At||/Edge\/\d+/.test(e)}function Zn(){return a.window&&a.window.location.href||self&&self.location&&self.location.href||""}function er(e,t){t=t||a.window;var n="about:blank";e&&(n=we(Ee(e)).toString()),t.location.href=n}function tr(e){return!!((e=(e||yr()).toLowerCase()).match(/android/)||e.match(/webos/)||e.match(/iphone|ipad|ipod/)||e.match(/blackberry/)||e.match(/windows phone/)||e.match(/iemobile/))}function nr(e){e=e||a.window;try{e.close()}catch(t){}}function rr(e,t,n){var r=Math.floor(1e9*Math.random()).toString();t=t||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-t)/2;for(s in t={width:t,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=yr().toLowerCase(),r&&(t.target=r,ve(n,"crios/")&&(t.target="_blank")),fr(yr())==dr&&(e=e||"http://localhost",t.scrollbars=!0),n=e||"",(e=t)||(e={}),r=window,t=n instanceof be?n:Ee(void 0!==n.href?n.href:String(n)),n=e.target||n.target,i=[],e)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+e[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(e[s]?1:0))}var s=i.join(",");if((Ne("iPhone")&&!Ne("iPod")&&!Ne("iPad")||Ne("iPad")||Ne("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(F(s=r.document.createElement("A"),"HTMLAnchorElement"),t instanceof be||t instanceof be||(t="object"==typeof t&&t.qa?t.pa():String(t),Ce.test(t)||(t="about:invalid#zClosurez"),t=Ie(t)),s.href=we(t),s.setAttribute("target",n),e.noreferrer&&s.setAttribute("rel","noreferrer"),(e=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(e),s={}):e.noreferrer?(s=r.open("",n,s),e=we(t).toString(),s&&(wt&&ve(e,";")&&(e="'"+e.replace(/'/g,"%27")+"'"),s.opener=null,e=Pe('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Ue(e)+'">'),s.document.write(Re(e)),s.document.close())):(s=r.open(we(t).toString(),n,s))&&e.noopener&&(s.opener=null),s)try{s.focus()}catch(a){}return s}var ir=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,or=/^[^@]+@[^@]+$/;function sr(){var e=null;return new He((function(t){"complete"==a.document.readyState?t():(e=function(){t()},$t(window,"load",e))})).s((function(t){throw Yt(window,"load",e),t}))}function ar(e){return e=e||yr(),!("file:"!==Cr()&&"ionic:"!==Cr()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function lr(){var e=a.window;try{return!(!e||e==e.top)}catch(t){return!1}}function ur(){return void 0!==a.WorkerGlobalScope&&"function"==typeof a.importScripts}function cr(){return i.a.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":i.a.INTERNAL.hasOwnProperty("node")?"Node":ur()?"Worker":"Browser"}function hr(){var e=cr();return"ReactNative"===e||"Node"===e}var dr="Firefox",pr="Chrome";function fr(e){var t=e.toLowerCase();return ve(t,"opera/")||ve(t,"opr/")||ve(t,"opios/")?"Opera":ve(t,"iemobile")?"IEMobile":ve(t,"msie")||ve(t,"trident/")?"IE":ve(t,"edge/")?"Edge":ve(t,"firefox/")?dr:ve(t,"silk/")?"Silk":ve(t,"blackberry")?"Blackberry":ve(t,"webos")?"Webos":!ve(t,"safari/")||ve(t,"chrome/")||ve(t,"crios/")||ve(t,"android")?!ve(t,"chrome/")&&!ve(t,"crios/")||ve(t,"edge/")?ve(t,"android")?"Android":(e=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==e.length?e[1]:"Other":pr:"Safari"}var gr={Wc:"FirebaseCore-web",Yc:"FirebaseUI-web"};function mr(e,t){t=t||[];var n,r=[],i={};for(n in gr)i[gr[n]]=!0;for(n=0;n<t.length;n++)void 0!==i[t[n]]&&(delete i[t[n]],r.push(t[n]));return r.sort(),(t=r).length||(t=["FirebaseCore-web"]),"Browser"===(r=cr())?r=fr(i=yr()):"Worker"===r&&(r=fr(i=yr())+"-"+r),r+"/JsCore/"+e+"/"+t.join(",")}function yr(){return a.navigator&&a.navigator.userAgent||""}function vr(e,t){e=e.split("."),t=t||a;for(var n=0;n<e.length&&"object"==typeof t&&null!=t;n++)t=t[e[n]];return n!=e.length&&(t=void 0),t}function _r(){try{var e=a.localStorage,t=kr();if(e)return e.setItem(t,"1"),e.removeItem(t),!Jn()||!!a.indexedDB}catch(n){return ur()&&!!a.indexedDB}return!1}function br(){return(wr()||"chrome-extension:"===Cr()||ar())&&!hr()&&_r()&&!ur()}function wr(){return"http:"===Cr()||"https:"===Cr()}function Cr(){return a.location&&a.location.protocol||null}function Er(e){return!tr(e=e||yr())&&fr(e)!=dr}function Tr(e){return void 0===e?null:Gn(e)}function Sr(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&null!=e[t]&&(n[t]=e[t]);return n}function Ir(e){if(null!==e)return JSON.parse(e)}function kr(e){return e||Math.floor(1e9*Math.random()).toString()}function Ar(e){return"Safari"!=fr(e=e||yr())&&!e.toLowerCase().match(/iphone|ipad|ipod/)}function Nr(){var e=a.___jsl;if(e&&e.H)for(var t in e.H)if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=e.H[t].L.concat(),e.CP)for(var n=0;n<e.CP.length;n++)e.CP[n]=null}function Dr(e,t){if(e>t)throw Error("Short delay should be less than long delay!");this.a=e,this.c=t,e=yr(),t=cr(),this.b=tr(e)||"ReactNative"===t}function Rr(){var e=a.document;return!e||void 0===e.visibilityState||"visible"==e.visibilityState}function Or(e){try{var t=new Date(parseInt(e,10));if(!isNaN(t.getTime())&&!/[^0-9]/.test(e))return t.toUTCString()}catch(n){}return null}function Pr(){return!(!vr("fireauth.oauthhelper",a)&&!vr("fireauth.iframe",a))}Dr.prototype.get=function(){var e=a.navigator;return!e||"boolean"!=typeof e.onLine||!wr()&&"chrome-extension:"!==Cr()&&void 0===e.connection||e.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var xr,Mr={};function Lr(e){Mr[e]||(Mr[e]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e))}try{var Fr={};Object.defineProperty(Fr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Fr,"abcd",{configurable:!0,enumerable:!0,value:2}),xr=2==Fr.abcd}catch(yt){xr=!1}function Ur(e,t,n){xr?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:n}):e[t]=n}function Vr(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&Ur(e,n,t[n])}function jr(e){var t={};return Vr(t,e),t}function qr(e){var t=e;if("object"==typeof e&&null!=e)for(var n in t="length"in e?[]:{},e)Ur(t,n,qr(e[n]));return t}function Br(e){var t={},n=e[Hr],r=e[Kr];if(!(e=e[zr])||e!=Wr&&!n)throw Error("Invalid provider user info!");t[Qr]=r||null,t[Gr]=n||null,Ur(this,Yr,e),Ur(this,$r,qr(t))}var Wr="EMAIL_SIGNIN",Hr="email",Kr="newEmail",zr="requestType",Gr="email",Qr="fromEmail",$r="data",Yr="operation";function Xr(e,t){this.code=Zr+e,this.message=t||ei[e]||""}function Jr(e){var t=e&&e.code;return t?new Xr(t.substring(Zr.length),e.message):null}I(Xr,Error),Xr.prototype.A=function(){return{code:this.code,message:this.message}},Xr.prototype.toJSON=function(){return this.A()};var Zr="auth/",ei={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."};function ti(e){var t=En(e=Tn(e),ni)||null,n=En(e,ri)||null,r=En(e,si)||null;if(r=r&&li[r]||null,!t||!n||!r)throw new Xr("argument-error",ni+", "+ri+"and "+si+" are required in a valid action code URL.");Vr(this,{apiKey:t,operation:r,code:n,continueUrl:En(e,ii)||null,languageCode:En(e,oi)||null,tenantId:En(e,ai)||null})}var ni="apiKey",ri="oobCode",ii="continueUrl",oi="languageCode",si="mode",ai="tenantId",li={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",signIn:Wr,verifyEmail:"VERIFY_EMAIL"};function ui(e){try{return new ti(e)}catch(t){return null}}function ci(e){var t=e[gi];if(void 0===t)throw new Xr("missing-continue-uri");if("string"!=typeof t||"string"==typeof t&&!t.length)throw new Xr("invalid-continue-uri");this.h=t,this.b=this.a=null,this.g=!1;var n=e[hi];if(n&&"object"==typeof n){t=n[vi];var r=n[mi];if(n=n[yi],"string"==typeof t&&t.length){if(this.a=t,void 0!==r&&"boolean"!=typeof r)throw new Xr("argument-error",mi+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new Xr("argument-error",yi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==t)throw new Xr("argument-error",vi+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new Xr("missing-android-pkg-name")}}else if(void 0!==n)throw new Xr("argument-error",hi+" property must be a non null object when specified.");if(this.f=null,(t=e[fi])&&"object"==typeof t){if("string"==typeof(t=t[_i])&&t.length)this.f=t;else if(void 0!==t)throw new Xr("argument-error",_i+" property must be a non empty string when specified.")}else if(void 0!==t)throw new Xr("argument-error",fi+" property must be a non null object when specified.");if(void 0!==(t=e[pi])&&"boolean"!=typeof t)throw new Xr("argument-error",pi+" property must be a boolean when specified.");if(this.c=!!t,void 0!==(e=e[di])&&("string"!=typeof e||"string"==typeof e&&!e.length))throw new Xr("argument-error",di+" property must be a non empty string when specified.");this.i=e||null}var hi="android",di="dynamicLinkDomain",pi="handleCodeInApp",fi="iOS",gi="url",mi="installApp",yi="minimumVersion",vi="packageName",_i="bundleId";function bi(e){var t={};for(var n in t.continueUrl=e.h,t.canHandleCodeInApp=e.c,(t.androidPackageName=e.a)&&(t.androidMinimumVersion=e.b,t.androidInstallApp=e.g),t.iOSBundleId=e.f,t.dynamicLinkDomain=e.i,t)null===t[n]&&delete t[n];return t}var wi=null,Ci=null;function Ei(e){this.f=e.sub,S(),this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.c=e.firebase&&e.firebase.tenant||null,this.b=!!e.is_anonymous||"anonymous"==this.a}function Ti(e){return(e=Si(e))&&e.sub&&e.iss&&e.aud&&e.exp?new Ei(e):null}function Si(e){if(!e)return null;if(3!=(e=e.split(".")).length)return null;for(var t=(4-(e=e[1]).length%4)%4,n=0;n<t;n++)e+=".";try{return JSON.parse(function(e){var t="";return function(e,t){function n(t){for(;r<e.length;){var n=e.charAt(r++),i=Ci[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}!function(){if(!wi){wi={},Ci={};for(var e=0;65>e;e++)wi[e]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e),Ci[wi[e]]=e,62<=e&&(Ci["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(e)]=e)}}();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;t(i<<2|o>>4),64!=s&&(t(o<<4&240|s>>2),64!=a&&t(s<<6&192|a))}}(e,(function(e){t+=String.fromCharCode(e)})),t}(e))}catch(r){}return null}Ei.prototype.R=function(){return this.c},Ei.prototype.g=function(){return this.b};var Ii,ki={bd:{cb:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://securetoken.googleapis.com/v1/token",id:"p"},dd:{cb:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://staging-securetoken.sandbox.googleapis.com/v1/token",id:"s"},ed:{cb:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",ib:"https://test-securetoken.sandbox.googleapis.com/v1/token",id:"t"}};function Ai(e){for(var t in ki)if(ki[t].id===e)return{firebaseEndpoint:(e=ki[t]).cb,secureTokenEndpoint:e.ib};return null}Ii=Ai("__EID__")?"__EID__":void 0;var Ni="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Di=["client_id","response_type","scope","redirect_uri","state"],Ri={Xc:{Ea:"locale",sa:700,ra:600,Fa:"facebook.com",Qa:Di},Zc:{Ea:null,sa:500,ra:750,Fa:"github.com",Qa:Di},$c:{Ea:"hl",sa:515,ra:680,Fa:"google.com",Qa:Di},fd:{Ea:"lang",sa:485,ra:705,Fa:"twitter.com",Qa:Ni},Vc:{Ea:"locale",sa:600,ra:600,Fa:"apple.com",Qa:[]}};function Oi(e){for(var t in Ri)if(Ri[t].Fa==e)return Ri[t];return null}function Pi(e){var t={};t["facebook.com"]=Ui,t["google.com"]=ji,t["github.com"]=Vi,t["twitter.com"]=qi;var n=e&&e[Mi];try{if(n)return t[n]?new t[n](e):new Fi(e);if(void 0!==e[xi])return new Li(e)}catch(r){}return null}var xi="idToken",Mi="providerId";function Li(e){var t=e[Mi];if(!t&&e[xi]){var n=Ti(e[xi]);n&&n.a&&(t=n.a)}if(!t)throw Error("Invalid additional user info!");"anonymous"!=t&&"custom"!=t||(t=null),n=!1,void 0!==e.isNewUser?n=!!e.isNewUser:"identitytoolkit#SignupNewUserResponse"===e.kind&&(n=!0),Ur(this,"providerId",t),Ur(this,"isNewUser",n)}function Fi(e){Li.call(this,e),Ur(this,"profile",qr((e=Ir(e.rawUserInfo||"{}"))||{}))}function Ui(e){if(Fi.call(this,e),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Vi(e){if(Fi.call(this,e),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Ur(this,"username",this.profile&&this.profile.login||null)}function ji(e){if(Fi.call(this,e),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function qi(e){if(Fi.call(this,e),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Ur(this,"username",e.screenName||null)}function Bi(e){var t=Tn(e),n=En(t,"link"),r=En(Tn(n),"link");return t=En(t,"deep_link_id"),En(Tn(t),"link")||t||r||n||e}function Wi(){}function Hi(e,t){return e.then((function(e){if(e[Ds]){var n=Ti(e[Ds]);if(!n||t!=n.f)throw new Xr("user-mismatch");return e}throw new Xr("user-mismatch")})).s((function(e){throw e&&e.code&&e.code==Zr+"user-not-found"?new Xr("user-mismatch"):e}))}function Ki(e,t){if(!t)throw new Xr("internal-error","failed to construct a credential");this.a=t,Ur(this,"providerId",e),Ur(this,"signInMethod",e)}function zi(e){return{pendingToken:e.a,requestUri:"http://localhost"}}function Gi(e){if(e&&e.providerId&&e.signInMethod&&0==e.providerId.indexOf("saml.")&&e.pendingToken)try{return new Ki(e.providerId,e.pendingToken)}catch(t){}return null}function Qi(e,t,n){if(this.a=null,t.idToken||t.accessToken)t.idToken&&Ur(this,"idToken",t.idToken),t.accessToken&&Ur(this,"accessToken",t.accessToken),t.nonce&&!t.pendingToken&&Ur(this,"nonce",t.nonce),t.pendingToken&&(this.a=t.pendingToken);else{if(!t.oauthToken||!t.oauthTokenSecret)throw new Xr("internal-error","failed to construct a credential");Ur(this,"accessToken",t.oauthToken),Ur(this,"secret",t.oauthTokenSecret)}Ur(this,"providerId",e),Ur(this,"signInMethod",n)}function $i(e){var t={};return e.idToken&&(t.id_token=e.idToken),e.accessToken&&(t.access_token=e.accessToken),e.secret&&(t.oauth_token_secret=e.secret),t.providerId=e.providerId,e.nonce&&!e.a&&(t.nonce=e.nonce),t={postBody:Ln(t).toString(),requestUri:"http://localhost"},e.a&&(delete t.postBody,t.pendingToken=e.a),t}function Yi(e){if(e&&e.providerId&&e.signInMethod){var t={idToken:e.oauthIdToken,accessToken:e.oauthTokenSecret?null:e.oauthAccessToken,oauthTokenSecret:e.oauthTokenSecret,oauthToken:e.oauthTokenSecret&&e.oauthAccessToken,nonce:e.nonce,pendingToken:e.pendingToken};try{return new Qi(e.providerId,t,e.signInMethod)}catch(n){}}return null}function Xi(e,t){this.Fc=t||[],Vr(this,{providerId:e,isOAuthProvider:!0}),this.zb={},this.eb=(Oi(e)||{}).Ea||null,this.bb=null}function Ji(e){if("string"!=typeof e||0!=e.indexOf("saml."))throw new Xr("argument-error",'SAML provider IDs must be prefixed with "saml."');Xi.call(this,e,[])}function Zi(e){Xi.call(this,e,Di),this.a=[]}function eo(){Zi.call(this,"facebook.com")}function to(e){if(!e)throw new Xr("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return v(e)&&(t=e.accessToken),(new eo).credential({accessToken:t})}function no(){Zi.call(this,"github.com")}function ro(e){if(!e)throw new Xr("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return v(e)&&(t=e.accessToken),(new no).credential({accessToken:t})}function io(){Zi.call(this,"google.com"),this.ya("profile")}function oo(e,t){var n=e;return v(e)&&(n=e.idToken,t=e.accessToken),(new io).credential({idToken:n,accessToken:t})}function so(){Xi.call(this,"twitter.com",Ni)}function ao(e,t){var n=e;if(v(n)||(n={oauthToken:e,oauthTokenSecret:t}),!n.oauthToken||!n.oauthTokenSecret)throw new Xr("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Qi("twitter.com",n,"twitter.com")}function lo(e,t,n){this.a=e,this.c=t,Ur(this,"providerId","password"),Ur(this,"signInMethod",n===co.EMAIL_LINK_SIGN_IN_METHOD?co.EMAIL_LINK_SIGN_IN_METHOD:co.EMAIL_PASSWORD_SIGN_IN_METHOD)}function uo(e){return e&&e.email&&e.password?new lo(e.email,e.password,e.signInMethod):null}function co(){Vr(this,{providerId:"password",isOAuthProvider:!1})}function ho(e,t){if(!(t=po(t)))throw new Xr("argument-error","Invalid email link!");return new lo(e,t.code,co.EMAIL_LINK_SIGN_IN_METHOD)}function po(e){return(e=ui(e=Bi(e)))&&e.operation===Wr?e:null}function fo(e){if(!(e.Va&&e.Ua||e.Ha&&e.ba))throw new Xr("internal-error");this.a=e,Ur(this,"providerId","phone"),Ur(this,"signInMethod","phone")}function go(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var t={};return V(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){e[n]&&(t[n]=e[n])})),new fo(t)}return null}function mo(e){return e.a.Ha&&e.a.ba?{temporaryProof:e.a.Ha,phoneNumber:e.a.ba}:{sessionInfo:e.a.Va,code:e.a.Ua}}function yo(e){try{this.a=e||i.a.auth()}catch(t){throw new Xr("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Vr(this,{providerId:"phone",isOAuthProvider:!1})}function vo(e,t){if(!e)throw new Xr("missing-verification-id");if(!t)throw new Xr("missing-verification-code");return new fo({Va:e,Ua:t})}function _o(e){if(e.temporaryProof&&e.phoneNumber)return new fo({Ha:e.temporaryProof,ba:e.phoneNumber});var t=e&&e.providerId;if(!t||"password"===t)return null;var n=e&&e.oauthAccessToken,r=e&&e.oauthTokenSecret,i=e&&e.nonce,o=e&&e.oauthIdToken,s=e&&e.pendingToken;try{switch(t){case"google.com":return oo(o,n);case"facebook.com":return to(n);case"github.com":return ro(n);case"twitter.com":return ao(n,r);default:return n||r||o||s?s?0==t.indexOf("saml.")?new Ki(t,s):new Qi(t,{pendingToken:s,idToken:e.oauthIdToken,accessToken:e.oauthAccessToken},t):new Zi(t).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(a){return null}}function bo(e){if(!e.isOAuthProvider)throw new Xr("invalid-oauth-provider")}function wo(e,t,n,r,i,o,s){if(this.c=e,this.b=t||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new Xr("invalid-auth-event");if(this.g&&this.a)throw new Xr("invalid-auth-event");if(this.g&&!this.f)throw new Xr("invalid-auth-event")}function Co(e){return(e=e||{}).type?new wo(e.type,e.eventId,e.urlResponse,e.sessionId,e.error&&Jr(e.error),e.postBody,e.tenantId):null}function Eo(){this.b=null,this.a=[]}I(Fi,Li),I(Ui,Fi),I(Vi,Fi),I(ji,Fi),I(qi,Fi),Ki.prototype.na=function(e){return Qs(e,zi(this))},Ki.prototype.b=function(e,t){var n=zi(this);return n.idToken=t,$s(e,n)},Ki.prototype.f=function(e,t){return Hi(Ys(e,zi(this)),t)},Ki.prototype.A=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},Qi.prototype.na=function(e){return Qs(e,$i(this))},Qi.prototype.b=function(e,t){var n=$i(this);return n.idToken=t,$s(e,n)},Qi.prototype.f=function(e,t){return Hi(Ys(e,$i(this)),t)},Qi.prototype.A=function(){var e={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(e.oauthIdToken=this.idToken),this.accessToken&&(e.oauthAccessToken=this.accessToken),this.secret&&(e.oauthTokenSecret=this.secret),this.nonce&&(e.nonce=this.nonce),this.a&&(e.pendingToken=this.a),e},Xi.prototype.Ga=function(e){return this.zb=$(e),this},I(Ji,Xi),I(Zi,Xi),Zi.prototype.ya=function(e){return B(this.a,e)||this.a.push(e),this},Zi.prototype.Hb=function(){return z(this.a)},Zi.prototype.credential=function(e,t){var n;if(!(n=v(e)?{idToken:e.idToken||null,accessToken:e.accessToken||null,nonce:e.rawNonce||null}:{idToken:e||null,accessToken:t||null}).idToken&&!n.accessToken)throw new Xr("argument-error","credential failed: must provide the ID token and/or the access token.");return new Qi(this.providerId,n,this.providerId)},I(eo,Zi),Ur(eo,"PROVIDER_ID","facebook.com"),Ur(eo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),I(no,Zi),Ur(no,"PROVIDER_ID","github.com"),Ur(no,"GITHUB_SIGN_IN_METHOD","github.com"),I(io,Zi),Ur(io,"PROVIDER_ID","google.com"),Ur(io,"GOOGLE_SIGN_IN_METHOD","google.com"),I(so,Xi),Ur(so,"PROVIDER_ID","twitter.com"),Ur(so,"TWITTER_SIGN_IN_METHOD","twitter.com"),lo.prototype.na=function(e){return this.signInMethod==co.EMAIL_LINK_SIGN_IN_METHOD?Sa(e,ia,{email:this.a,oobCode:this.c}):Sa(e,wa,{email:this.a,password:this.c})},lo.prototype.b=function(e,t){return this.signInMethod==co.EMAIL_LINK_SIGN_IN_METHOD?Sa(e,oa,{idToken:t,email:this.a,oobCode:this.c}):Sa(e,ga,{idToken:t,email:this.a,password:this.c})},lo.prototype.f=function(e,t){return Hi(this.na(e),t)},lo.prototype.A=function(){return{email:this.a,password:this.c,signInMethod:this.signInMethod}},Vr(co,{PROVIDER_ID:"password"}),Vr(co,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Vr(co,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),fo.prototype.na=function(e){return e.Wa(mo(this))},fo.prototype.b=function(e,t){var n=mo(this);return n.idToken=t,Sa(e,Ea,n)},fo.prototype.f=function(e,t){var n=mo(this);return n.operation="REAUTH",Hi(e=Sa(e,Ta,n),t)},fo.prototype.A=function(){var e={providerId:"phone"};return this.a.Va&&(e.verificationId=this.a.Va),this.a.Ua&&(e.verificationCode=this.a.Ua),this.a.Ha&&(e.temporaryProof=this.a.Ha),this.a.ba&&(e.phoneNumber=this.a.ba),e},yo.prototype.Wa=function(e,t){var n=this.a.b;return Xe(t.verify()).then((function(r){if(!l(r))throw new Xr("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(t.type){case"recaptcha":return function(e,t){return Sa(e,pa,t)}(n,{phoneNumber:e,recaptchaToken:r}).then((function(e){return"function"==typeof t.reset&&t.reset(),e}),(function(e){throw"function"==typeof t.reset&&t.reset(),e}));default:throw new Xr("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Vr(yo,{PROVIDER_ID:"phone"}),Vr(yo,{PHONE_SIGN_IN_METHOD:"phone"}),wo.prototype.getUid=function(){var e=[];return e.push(this.c),this.b&&e.push(this.b),this.f&&e.push(this.f),this.h&&e.push(this.h),e.join("-")},wo.prototype.R=function(){return this.h},wo.prototype.A=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.A()}};var To,So=null;function Io(e){var t="unauthorized-domain",n=void 0,r=Tn(e);e=r.b,"chrome-extension"==(r=r.f)?n=Fe("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):"http"==r||"https"==r?n=Fe("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):t="operation-not-supported-in-this-environment",Xr.call(this,t,n)}function ko(e,t,n){Xr.call(this,e,n),(e=t||{}).Ab&&Ur(this,"email",e.Ab),e.ba&&Ur(this,"phoneNumber",e.ba),e.credential&&Ur(this,"credential",e.credential),e.Qb&&Ur(this,"tenantId",e.Qb)}function Ao(e){if(e.code){var t=e.code||"";0==t.indexOf(Zr)&&(t=t.substring(Zr.length));var n={credential:_o(e),Qb:e.tenantId};if(e.email)n.Ab=e.email;else if(e.phoneNumber)n.ba=e.phoneNumber;else if(!n.credential)return new Xr(t,e.message||void 0);return new ko(t,n,e.message)}return null}function No(){}function Do(){}function Ro(e){if(!e.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<t.length;n++){var r=t[n];try{return new ActiveXObject(r),e.f=r}catch(i){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return e.f}function Oo(){}function Po(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=E(this.fc,this),this.a.onerror=E(this.Ib,this),this.a.onprogress=E(this.gc,this),this.a.ontimeout=E(this.kc,this)}function xo(e,t){e.readyState=t,e.onreadystatechange&&e.onreadystatechange()}function Mo(e,t,n){this.reset(e,t,n,void 0,void 0)}function Lo(e){this.f=e,this.b=this.c=this.a=null}function Fo(e,t){this.name=e,this.value=t}I(Io,Xr),I(ko,Xr),ko.prototype.A=function(){var e={code:this.code,message:this.message};this.email&&(e.email=this.email),this.phoneNumber&&(e.phoneNumber=this.phoneNumber),this.tenantId&&(e.tenantId=this.tenantId);var t=this.credential&&this.credential.A();return t&&X(e,t),e},ko.prototype.toJSON=function(){return this.A()},No.prototype.c=null,I(Do,No),Do.prototype.a=function(){var e=Ro(this);return e?new ActiveXObject(e):new XMLHttpRequest},Do.prototype.b=function(){var e={};return Ro(this)&&(e[0]=!0,e[1]=!0),e},To=new Do,I(Oo,No),Oo.prototype.a=function(){var e=new XMLHttpRequest;if("withCredentials"in e)return e;if("undefined"!=typeof XDomainRequest)return new Po;throw Error("Unsupported browser")},Oo.prototype.b=function(){return{}},(e=Po.prototype).open=function(e,t,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(e,t)},e.send=function(e){if(e){if("string"!=typeof e)throw Error("Only string data is supported");this.a.send(e)}else this.a.send()},e.abort=function(){this.a.abort()},e.setRequestHeader=function(){},e.getResponseHeader=function(e){return"content-type"==e.toLowerCase()?this.a.contentType:""},e.fc=function(){this.status=200,this.response=this.responseText=this.a.responseText,xo(this,4)},e.Ib=function(){this.status=500,this.response=this.responseText="",xo(this,4)},e.kc=function(){this.Ib()},e.gc=function(){this.status=200,xo(this,1)},e.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Mo.prototype.a=null,Mo.prototype.reset=function(e,t,n,r,i){r||S(),delete this.a},Fo.prototype.toString=function(){return this.name};var Uo=new Fo("SEVERE",1e3),Vo=new Fo("WARNING",900),jo=new Fo("CONFIG",700),qo=new Fo("FINE",500);Lo.prototype.log=function(e,t,n){if(e.value>=function e(t){return t.c?t.c:t.a?e(t.a):(D("Root logger has no level set."),null)}(this).value)for(y(t)&&(t=t()),e=new Mo(e,String(t),this.f),n&&(e.a=n),n=this;n;)n=n.a};var Bo={},Wo=null;function Ho(e){var t;if(Wo||(Wo=new Lo(""),Bo[""]=Wo,Wo.c=jo),!(t=Bo[e])){t=new Lo(e);var n=e.lastIndexOf("."),r=e.substr(n+1);(n=Ho(e.substr(0,n))).b||(n.b={}),n.b[r]=t,t.a=n,Bo[e]=t}return t}function Ko(e,t){e&&e.log(qo,t,void 0)}function zo(e){this.f=e}function Go(e){sn.call(this),this.o=e,this.readyState=Qo,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=Ho("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}I(zo,No),zo.prototype.a=function(){return new Go(this.f)},zo.prototype.b=function(e){return function(){return e}}({}),I(Go,sn);var Qo=0;function $o(e){e.c.read().then(e.ec.bind(e)).catch(e.Oa.bind(e))}function Yo(e,t){t&&e.f&&(e.status=e.f.status,e.statusText=e.f.statusText),e.readyState=4,e.f=null,e.c=null,e.l=null,Xo(e)}function Xo(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Jo(e){sn.call(this),this.headers=new fn,this.B=e||null,this.c=!1,this.w=this.a=null,this.h=this.O=this.l="",this.f=this.J=this.i=this.I=!1,this.g=0,this.o=null,this.m=Zo,this.v=this.P=!1}(e=Go.prototype).open=function(e,t){if(this.readyState!=Qo)throw this.abort(),Error("Error reopening a connection");this.m=e,this.g=t,this.readyState=1,Xo(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var t={headers:this.i,method:this.m,credentials:void 0,cache:void 0};e&&(t.body=e),this.o.fetch(new Request(this.g,t)).then(this.jc.bind(this),this.Oa.bind(this))},e.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,Yo(this,!1)),this.readyState=Qo},e.jc=function(e){this.a&&(this.f=e,this.b||(this.b=e.headers,this.readyState=2,Xo(this)),this.a&&(this.readyState=3,Xo(this),this.a&&("arraybuffer"===this.responseType?e.arrayBuffer().then(this.hc.bind(this),this.Oa.bind(this)):void 0!==a.ReadableStream&&"body"in e?(this.response=this.responseText="",this.c=e.body.getReader(),this.l=new TextDecoder,$o(this)):e.text().then(this.ic.bind(this),this.Oa.bind(this)))))},e.ec=function(e){if(this.a){var t=this.l.decode(e.value?e.value:new Uint8Array(0),{stream:!e.done});t&&(this.response=this.responseText+=t),e.done?Yo(this,!0):Xo(this),3==this.readyState&&$o(this)}},e.ic=function(e){this.a&&(this.response=this.responseText=e,Yo(this,!0))},e.hc=function(e){this.a&&(this.response=e,Yo(this,!0))},e.Oa=function(e){var t=this.h;t&&t.log(Vo,"Failed to fetch url "+this.g,e instanceof Error?e:Error(e)),this.a&&Yo(this,!0)},e.setRequestHeader=function(e,t){this.i.append(e,t)},e.getResponseHeader=function(e){return this.b?this.b.get(e.toLowerCase())||"":((e=this.h)&&e.log(Vo,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},e.getAllResponseHeaders=function(){if(!this.b){var e=this.h;return e&&e.log(Vo,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}e=[];for(var t=this.b.entries(),n=t.next();!n.done;)e.push((n=n.value)[0]+": "+n[1]),n=t.next();return e.join("\r\n")},I(Jo,sn);var Zo="";Jo.prototype.b=Ho("goog.net.XhrIo");var es=/^https?$/i,ts=["POST","PUT"];function ns(e){return"content-type"==e.toLowerCase()}function rs(e,t){e.c=!1,e.a&&(e.f=!0,e.a.abort(),e.f=!1),e.h=t,is(e),ss(e)}function is(e){e.I||(e.I=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function os(e){if(e.c&&void 0!==s)if(e.w[1]&&4==ls(e)&&2==us(e))Ko(e.b,cs(e,"Local request error detected and ignored"));else if(e.i&&4==ls(e))cn(e.Lb,0,e);else if(e.dispatchEvent("readystatechange"),4==ls(e)){Ko(e.b,cs(e,"Request complete")),e.c=!1;try{var t,n=us(e);e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.l).match(yn)[1]||null;if(!o&&a.self&&a.self.location){var l=a.self.location.protocol;o=l.substr(0,l.length-1)}i=!es.test(o?o.toLowerCase():"")}t=i}if(t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var u=2<ls(e)?e.a.statusText:""}catch(c){Ko(e.b,"Can not get status: "+c.message),u=""}e.h=u+" ["+us(e)+"]",is(e)}}finally{ss(e)}}}function ss(e,t){if(e.a){as(e);var n=e.a,r=e.w[0]?d:null;e.a=null,e.w=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){(e=e.b)&&e.log(Uo,"Problem encountered resetting onreadystatechange: "+i.message,void 0)}}}function as(e){e.a&&e.v&&(e.a.ontimeout=null),e.o&&(a.clearTimeout(e.o),e.o=null)}function ls(e){return e.a?e.a.readyState:0}function us(e){try{return 2<ls(e)?e.a.status:-1}catch(t){return-1}}function cs(e,t){return t+" ["+e.O+" "+e.l+" "+us(e)+"]"}function hs(e){var t=Cs;this.g=[],this.v=t,this.o=e||null,this.f=this.a=!1,this.c=void 0,this.u=this.w=this.i=!1,this.h=0,this.b=null,this.l=0}function ds(e,t,n){e.a=!0,e.c=n,e.f=!t,ms(e)}function ps(e){if(e.a){if(!e.u)throw new ys(e);e.u=!1}}function fs(e,t,n,r){e.g.push([t,n,r]),e.a&&ms(e)}function gs(e){return q(e.g,(function(e){return y(e[1])}))}function ms(e){if(e.h&&e.a&&gs(e)){var t=e.h,n=bs[t];n&&(a.clearTimeout(n.a),delete bs[t]),e.h=0}e.b&&(e.b.l--,delete e.b),t=e.c;for(var r=n=!1;e.g.length&&!e.i;){var i=e.g.shift(),o=i[0],s=i[1];if(i=i[2],o=e.f?s:o)try{var l=o.call(i||e.o,t);void 0!==l&&(e.f=e.f&&(l==t||l instanceof Error),e.c=t=l),(k(t)||"function"==typeof a.Promise&&t instanceof a.Promise)&&(r=!0,e.i=!0)}catch(u){t=u,e.f=!0,gs(e)||(n=!0)}}e.c=t,r&&(l=E(e.m,e,!0),r=E(e.m,e,!1),t instanceof hs?(fs(t,l,r),t.w=!0):t.then(l,r)),n&&(t=new _s(t),bs[t.a]=t,e.h=t.a)}function ys(){A.call(this)}function vs(){A.call(this)}function _s(e){this.a=a.setTimeout(E(this.c,this),0),this.b=e}(e=Jo.prototype).Ia=function(){void 0!==s&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",Ko(this.b,cs(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},e.abort=function(){this.a&&this.c&&(Ko(this.b,cs(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),ss(this))},e.za=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),ss(this,!0)),Jo.qb.za.call(this)},e.Lb=function(){this.va||(this.J||this.i||this.f?os(this):this.yc())},e.yc=function(){os(this)},e.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case Zo:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var e=this.b;return e&&e.log(Uo,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return Ko(this.b,"Can not get response: "+t.message),null}},hs.prototype.cancel=function(e){if(this.a)this.c instanceof hs&&this.c.cancel();else{if(this.b){var t=this.b;delete this.b,e?t.cancel(e):(t.l--,0>=t.l&&t.cancel())}this.v?this.v.call(this.o,this):this.u=!0,this.a||(e=new vs(this),ps(this),ds(this,!1,e))}},hs.prototype.m=function(e,t){this.i=!1,ds(this,e,t)},hs.prototype.then=function(e,t,n){var r,i,o=new He((function(e,t){r=e,i=t}));return fs(this,r,(function(e){e instanceof vs?o.cancel():i(e)})),o.then(e,t,n)},hs.prototype.$goog_Thenable=!0,I(ys,A),ys.prototype.message="Deferred has already fired",ys.prototype.name="AlreadyCalledError",I(vs,A),vs.prototype.message="Deferred was canceled",vs.prototype.name="CanceledError",_s.prototype.c=function(){throw delete bs[this.a],this.b};var bs={};function ws(e){var t={},n=t.document||document,r=ie(e).toString(),i=document.createElement("SCRIPT"),o={Nb:i,Ia:void 0},s=new hs(o),l=null,u=null!=t.timeout?t.timeout:5e3;return 0<u&&(l=window.setTimeout((function(){Es(i,!0);var e=new Is(Ss,"Timeout reached for loading script "+r);ps(s),ds(s,!1,e)}),u),o.Ia=l),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Es(i,t.hd||!1,l),ps(s),ds(s,!0,null))},i.onerror=function(){Es(i,!0,l);var e=new Is(Ts,"Error while loading script "+r);ps(s),ds(s,!1,e)},X(o=t.attributes||{},{type:"text/javascript",charset:"UTF-8"}),Hn(i,o),function(e,t){F(e,"HTMLScriptElement"),e.src=ie(t),null===h&&(h=(t=(t=a.document).querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&c.test(t)?t:""),(t=h)&&e.setAttribute("nonce",t)}(i,e),function(e){var t;return(t=(e||document).getElementsByTagName("HEAD"))&&0!=t.length?t[0]:e.documentElement}(n).appendChild(i),s}function Cs(){if(this&&this.Nb){var e=this.Nb;e&&"SCRIPT"==e.tagName&&Es(e,!0,this.Ia)}}function Es(e,t,n){null!=n&&a.clearTimeout(n),e.onload=d,e.onerror=d,e.onreadystatechange=d,t&&window.setTimeout((function(){e&&e.parentNode&&e.parentNode.removeChild(e)}),0)}var Ts=0,Ss=1;function Is(e,t){var n="Jsloader error (code #"+e+")";t&&(n+=": "+t),A.call(this,n),this.code=e}function ks(e){this.f=e}function As(e,t,n){if(this.c=e,this.l=(e=t||{}).secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.u=e.secureTokenTimeout||Rs,this.g=$(e.secureTokenHeaders||Os),this.h=e.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=e.firebaseTimeout||Ps,this.a=$(e.firebaseHeaders||xs),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==cr(),!(n=a.XMLHttpRequest||n&&i.a.INTERNAL.node&&i.a.INTERNAL.node.XMLHttpRequest)&&!ur())throw new Xr("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,this.f=ur()?new zo(self):hr()?new ks(n):new Oo,this.b=null}I(Is,A),I(ks,No),ks.prototype.a=function(){return new this.f},ks.prototype.b=function(){return{}};var Ns,Ds="idToken",Rs=new Dr(3e4,6e4),Os={"Content-Type":"application/x-www-form-urlencoded"},Ps=new Dr(3e4,6e4),xs={"Content-Type":"application/json"};function Ms(e,t){t?e.a["X-Firebase-Locale"]=t:delete e.a["X-Firebase-Locale"]}function Ls(e,t){t?(e.a["X-Client-Version"]=t,e.g["X-Client-Version"]=t):(delete e.a["X-Client-Version"],delete e.g["X-Client-Version"])}function Fs(e,t,n,r,i,o,s){(function(){var e=yr();return!((e=fr(e)!=pr?null:(e=e.match(/\sChrome\/(\d+)/i))&&2==e.length?parseInt(e[1],10):null)&&30>e||_t&&At&&!(9<At))})()||ur()?e=E(e.o,e):(Ns||(Ns=new He((function(e,t){!function(e,t){((window.gapi||{}).client||{}).request?e():(a[Vs]=function(){((window.gapi||{}).client||{}).request?e():t(Error("CORS_UNSUPPORTED"))},function(e,t){fs(e,null,t,void 0)}(ws(oe(Us,{onload:Vs})),(function(){t(Error("CORS_UNSUPPORTED"))})))}(e,t)}))),e=E(e.m,e)),e(t,n,r,i,o,s)}As.prototype.R=function(){return this.b},As.prototype.o=function(e,t,n,r,i,o){if(ur()&&(void 0===a.fetch||void 0===a.Headers||void 0===a.Request))throw new Xr("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new Jo(this.f);if(o){s.g=Math.max(0,o);var u=setTimeout((function(){s.dispatchEvent("timeout")}),o)}an(s,"complete",(function(){u&&clearTimeout(u);var e=null;try{e=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return Ko(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(n){e=null}t&&t(e)})),ln(s,"ready",(function(){u&&clearTimeout(u),ft(this)})),ln(s,"timeout",(function(){u&&clearTimeout(u),ft(this),t&&t(null)})),function(e,t,n,r,i){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET",e.l=t,e.h="",e.O=n,e.I=!1,e.c=!0,e.a=e.B?e.B.a():To.a(),e.w=function(e){return e.c||(e.c=e.b())}(e.B?e.B:To),e.a.onreadystatechange=E(e.Lb,e);try{Ko(e.b,cs(e,"Opening Xhr")),e.J=!0,e.a.open(n,String(t),!0),e.J=!1}catch(s){return Ko(e.b,cs(e,"Error opening Xhr: "+s.message)),void rs(e,s)}t=r||"";var o=new fn(e.headers);i&&function(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(m(e)||l(e))V(e,t,void 0);else for(var n=pn(e),r=dn(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}(i,(function(e,t){o.set(t,e)})),i=function(e){e:{for(var t=ns,n=e.length,r=l(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:l(e)?e.charAt(t):e[t]}(o.X()),r=a.FormData&&t instanceof a.FormData,!B(ts,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(e,t){this.a.setRequestHeader(t,e)}),e),e.m&&(e.a.responseType=e.m),"withCredentials"in e.a&&e.a.withCredentials!==e.P&&(e.a.withCredentials=e.P);try{as(e),0<e.g&&(e.v=function(e){return _t&&Dt(9)&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(e.a),Ko(e.b,cs(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.v)),e.v?(e.a.timeout=e.g,e.a.ontimeout=E(e.Ia,e)):e.o=cn(e.Ia,e.g,e)),Ko(e.b,cs(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(s){Ko(e.b,cs(e,"Send error: "+s.message)),rs(e,s)}}(s,e,n,r,i)};var Us=new J(te,"https://apis.google.com/js/client.js?onload=%{onload}"),Vs="__fcb"+Math.floor(1e6*Math.random()).toString();function js(e){if(!l(e=e.email)||!or.test(e))throw new Xr("invalid-email")}function qs(e){"email"in e&&js(e)}function Bs(e){if(!e[Ds])throw new Xr("internal-error")}function Ws(e){if(e.phoneNumber||e.temporaryProof){if(!e.phoneNumber||!e.temporaryProof)throw new Xr("internal-error")}else{if(!e.sessionInfo)throw new Xr("missing-verification-id");if(!e.code)throw new Xr("missing-verification-code")}}As.prototype.m=function(e,t,n,r,i){var o=this;Ns.then((function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:e,method:n,body:r,headers:i,authType:"none",callback:function(e){window.gapi.auth.setToken(s),t&&t(e)}})})).s((function(e){t&&t({error:{message:e&&e.message||"CORS_UNSUPPORTED"}})}))},As.prototype.ob=function(){return Sa(this,ma,{})},As.prototype.rb=function(e,t){return Sa(this,fa,{idToken:e,email:t})},As.prototype.sb=function(e,t){return Sa(this,ga,{idToken:e,password:t})};var Hs={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function Ks(e){if(!e.requestUri||!e.sessionId&&!e.postBody&&!e.pendingToken)throw new Xr("internal-error")}function zs(e,t){return t.oauthIdToken&&t.providerId&&0==t.providerId.indexOf("oidc.")&&!t.pendingToken&&(e.sessionId?t.nonce=e.sessionId:e.postBody&&Un(e=new xn(e.postBody),"nonce")&&(t.nonce=e.get("nonce"))),t}function Gs(e){var t=null;if(e.needConfirmation?(e.code="account-exists-with-different-credential",t=Ao(e)):"FEDERATED_USER_ID_ALREADY_LINKED"==e.errorMessage?(e.code="credential-already-in-use",t=Ao(e)):"EMAIL_EXISTS"==e.errorMessage?(e.code="email-already-in-use",t=Ao(e)):e.errorMessage&&(t=Ia(e.errorMessage)),t)throw t;if(!e[Ds])throw new Xr("internal-error")}function Qs(e,t){return t.returnIdpCredential=!0,Sa(e,ya,t)}function $s(e,t){return t.returnIdpCredential=!0,Sa(e,_a,t)}function Ys(e,t){return t.returnIdpCredential=!0,t.autoCreate=!1,Sa(e,va,t)}function Xs(e){if(!e.oobCode)throw new Xr("invalid-action-code")}(e=As.prototype).tb=function(e,t){var n={idToken:e},r=[];return G(Hs,(function(e,i){var o=t[i];null===o?r.push(e):i in t&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),Sa(this,fa,n)},e.kb=function(e,t){return X(e={requestType:"PASSWORD_RESET",email:e},t),Sa(this,ua,e)},e.lb=function(e,t){return X(e={requestType:"EMAIL_SIGNIN",email:e},t),Sa(this,aa,e)},e.jb=function(e,t){return X(e={requestType:"VERIFY_EMAIL",idToken:e},t),Sa(this,la,e)},e.Wa=function(e){return Sa(this,Ca,e)},e.ab=function(e,t){return Sa(this,da,{oobCode:e,newPassword:t})},e.Ma=function(e){return Sa(this,Zs,{oobCode:e})},e.Ya=function(e){return Sa(this,Js,{oobCode:e})};var Js={endpoint:"setAccountInfo",D:Xs,fa:"email",F:!0},Zs={endpoint:"resetPassword",D:Xs,K:function(e){var t=e.requestType;if(!t||!e.email&&"EMAIL_SIGNIN"!=t)throw new Xr("internal-error")},F:!0},ea={endpoint:"signupNewUser",D:function(e){if(js(e),!e.password)throw new Xr("weak-password")},K:Bs,T:!0,F:!0},ta={endpoint:"createAuthUri",F:!0},na={endpoint:"deleteAccount",V:["idToken"]},ra={endpoint:"setAccountInfo",V:["idToken","deleteProvider"],D:function(e){if(!g(e.deleteProvider))throw new Xr("internal-error")}},ia={endpoint:"emailLinkSignin",V:["email","oobCode"],D:js,K:Bs,T:!0,F:!0},oa={endpoint:"emailLinkSignin",V:["idToken","email","oobCode"],D:js,K:Bs,T:!0},sa={endpoint:"getAccountInfo"},aa={endpoint:"getOobConfirmationCode",V:["requestType"],D:function(e){if("EMAIL_SIGNIN"!=e.requestType)throw new Xr("internal-error");js(e)},fa:"email",F:!0},la={endpoint:"getOobConfirmationCode",V:["idToken","requestType"],D:function(e){if("VERIFY_EMAIL"!=e.requestType)throw new Xr("internal-error")},fa:"email",F:!0},ua={endpoint:"getOobConfirmationCode",V:["requestType"],D:function(e){if("PASSWORD_RESET"!=e.requestType)throw new Xr("internal-error");js(e)},fa:"email",F:!0},ca={wb:!0,endpoint:"getProjectConfig",Kb:"GET"},ha={wb:!0,endpoint:"getRecaptchaParam",Kb:"GET",K:function(e){if(!e.recaptchaSiteKey)throw new Xr("internal-error")}},da={endpoint:"resetPassword",D:Xs,fa:"email",F:!0},pa={endpoint:"sendVerificationCode",V:["phoneNumber","recaptchaToken"],fa:"sessionInfo",F:!0},fa={endpoint:"setAccountInfo",V:["idToken"],D:qs,T:!0},ga={endpoint:"setAccountInfo",V:["idToken"],D:function(e){if(qs(e),!e.password)throw new Xr("weak-password")},K:Bs,T:!0},ma={endpoint:"signupNewUser",K:Bs,T:!0,F:!0},ya={endpoint:"verifyAssertion",D:Ks,Ra:zs,K:Gs,T:!0,F:!0},va={endpoint:"verifyAssertion",D:Ks,Ra:zs,K:function(e){if(e.errorMessage&&"USER_NOT_FOUND"==e.errorMessage)throw new Xr("user-not-found");if(e.errorMessage)throw Ia(e.errorMessage);if(!e[Ds])throw new Xr("internal-error")},T:!0,F:!0},_a={endpoint:"verifyAssertion",D:function(e){if(Ks(e),!e.idToken)throw new Xr("internal-error")},Ra:zs,K:Gs,T:!0},ba={endpoint:"verifyCustomToken",D:function(e){if(!e.token)throw new Xr("invalid-custom-token")},K:Bs,T:!0,F:!0},wa={endpoint:"verifyPassword",D:function(e){if(js(e),!e.password)throw new Xr("wrong-password")},K:Bs,T:!0,F:!0},Ca={endpoint:"verifyPhoneNumber",D:Ws,K:Bs,F:!0},Ea={endpoint:"verifyPhoneNumber",D:function(e){if(!e.idToken)throw new Xr("internal-error");Ws(e)},K:function(e){if(e.temporaryProof)throw e.code="credential-already-in-use",Ao(e);Bs(e)}},Ta={Yb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",D:Ws,K:Bs,F:!0};function Sa(e,t,n){if(!function(e,t){if(!t||!t.length)return!0;if(!e)return!1;for(var n=0;n<t.length;n++){var r=e[t[n]];if(null==r||""===r)return!1}return!0}(n,t.V))return Je(new Xr("internal-error"));var r,i=t.Kb||"POST";return Xe(n).then(t.D).then((function(){return t.T&&(n.returnSecureToken=!0),t.F&&e.b&&void 0===n.tenantId&&(n.tenantId=e.b),function(e,t,n,r,i,o){var s=Tn(e.h+t);Cn(s,"key",e.c),o&&Cn(s,"cb",S().toString());var a="GET"==n;if(a)for(var l in r)r.hasOwnProperty(l)&&Cn(s,l,r[l]);return new He((function(t,o){Fs(e,s.toString(),(function(e){e?e.error?o(ka(e,i||{})):t(e):o(new Xr("network-request-failed"))}),n,a?void 0:Gn(Sr(r)),e.a,e.i.get())}))}(e,t.endpoint,i,n,t.Yb,t.wb||!1)})).then((function(e){return r=e,t.Ra?t.Ra(n,r):r})).then(t.K).then((function(){if(!t.fa)return r;if(!(t.fa in r))throw new Xr("internal-error");return r[t.fa]}))}function Ia(e){return ka({error:{errors:[{message:e}],code:400,message:e}})}function ka(e,t){var n=(e.error&&e.error.errors&&e.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new Xr(r[n]):null)return n;for(var i in n=e.error&&e.error.message||"",X(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation"},t||{}),t=(t=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<t.length?t[1]:void 0,r)if(0===n.indexOf(i))return new Xr(r[i],t);return!t&&e&&(t=Tr(e)),new Xr("internal-error",t)}function Aa(e){this.b=e,this.a=null,this.gb=function(e){return(Oa||(Oa=new He((function(e,t){function n(){Nr(),vr("gapi.load")("gapi.iframes",{callback:e,ontimeout:function(){Nr(),t(Error("Network Error"))},timeout:Da.get()})}if(vr("gapi.iframes.Iframe"))e();else if(vr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();a[r]=function(){vr("gapi.load")?n():t(Error("Network Error"))},Xe(ws(r=oe(Na,{onload:r}))).s((function(){t(Error("Network Error"))}))}})).s((function(e){throw Oa=null,e})))).then((function(){return new He((function(t,n){vr("gapi.iframes.getContext")().open({where:document.body,url:e.b,messageHandlersFilter:vr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),t()}e.a=r,e.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),Ra.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var Na=new J(te,"https://apis.google.com/js/api.js?onload=%{onload}"),Da=new Dr(3e4,6e4),Ra=new Dr(5e3,15e3),Oa=null;function Pa(e,t,n){this.i=e,this.g=t,this.h=n,this.f=null,this.a=Sn(this.i,"/__/auth/iframe"),Cn(this.a,"apiKey",this.g),Cn(this.a,"appName",this.h),this.b=null,this.c=[]}function xa(e,t,n,r,i){this.o=e,this.m=t,this.c=n,this.u=r,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function Ma(e){try{return i.a.app(e).auth().Ca()}catch(t){return[]}}function La(e,t,n,r,i){this.u=e,this.f=t,this.b=n,this.c=r||null,this.h=i||null,this.m=this.o=this.v=null,this.g=[],this.l=this.a=null}function Fa(e){var t=Zn();return function(e){return Sa(e,ca,{}).then((function(e){return e.authorizedDomains||[]}))}(e).then((function(e){e:{var n=Tn(t),r=n.f;n=n.b;for(var i=0;i<e.length;i++){var o=e[i],s=n,a=r;if(0==o.indexOf("chrome-extension://")?s=Tn(o).b==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:ir.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){e=!0;break e}}e=!1}if(!e)throw new Io(Zn())}))}function Ua(e){return e.l?e.l:(e.l=sr().then((function(){if(!e.o){var t=e.c,n=e.h,r=Ma(e.b),i=new Pa(e.u,e.f,e.b);i.f=t,i.b=n,i.c=z(r||[]),e.o=i.toString()}e.i=new Aa(e.o),function(e){if(!e.i)throw Error("IfcHandler must be initialized!");!function(e,t){e.gb.then((function(){e.a.register("authEvent",t,vr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(e.i,(function(t){var n={};if(t&&t.authEvent){var r=!1;for(t=Co(t.authEvent),n=0;n<e.g.length;n++)r=e.g[n](t)||r;return(n={}).status=r?"ACK":"ERROR",Xe(n)}return n.status="ERROR",Xe(n)}))}(e)})),e.l)}function Va(e){return e.m||(e.v=e.c?mr(e.c,Ma(e.b)):null,e.m=new As(e.f,Ai(e.h),e.v)),e.m}function ja(e,t,n,r,i,o,s,a,l,u,c){return(e=new xa(e,t,n,r,i)).l=o,e.g=s,e.i=a,e.b=$(l||null),e.f=u,e.nb(c).toString()}function qa(e){if(this.a=e||i.a.INTERNAL.reactNative&&i.a.INTERNAL.reactNative.AsyncStorage,!this.a)throw new Xr("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function Ba(e){this.b=e,this.a={},this.f=E(this.c,this)}Pa.prototype.toString=function(){return this.f?Cn(this.a,"v",this.f):Fn(this.a.a,"v"),this.b?Cn(this.a,"eid",this.b):Fn(this.a.a,"eid"),this.c.length?Cn(this.a,"fw",this.c.join(",")):Fn(this.a.a,"fw"),this.a.toString()},xa.prototype.nb=function(e){return this.h=e,this},xa.prototype.toString=function(){var e=Sn(this.o,"/__/auth/handler");if(Cn(e,"apiKey",this.m),Cn(e,"appName",this.c),Cn(e,"authType",this.u),this.a.isOAuthProvider){var t=this.a;try{var n=i.a.app(this.c).auth().ha()}catch(l){n=null}for(var r in t.bb=n,Cn(e,"providerId",this.a.providerId),n=Sr((t=this.a).zb))n[r]=n[r].toString();r=t.Fc,n=$(n);for(var o=0;o<r.length;o++){var s=r[o];s in n&&delete n[s]}t.eb&&t.bb&&!n[t.eb]&&(n[t.eb]=t.bb),Q(n)||Cn(e,"customParameters",Tr(n))}if("function"==typeof this.a.Hb&&(t=this.a.Hb()).length&&Cn(e,"scopes",t.join(",")),this.l?Cn(e,"redirectUrl",this.l):Fn(e.a,"redirectUrl"),this.g?Cn(e,"eventId",this.g):Fn(e.a,"eventId"),this.i?Cn(e,"v",this.i):Fn(e.a,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!En(e,a)&&Cn(e,a,this.b[a]);return this.h?Cn(e,"tid",this.h):Fn(e.a,"tid"),this.f?Cn(e,"eid",this.f):Fn(e.a,"eid"),(a=Ma(this.c)).length&&Cn(e,"fw",a.join(",")),e.toString()},(e=La.prototype).Fb=function(e,t,n){var r=new Xr("popup-closed-by-user"),i=new Xr("web-storage-unsupported"),o=this,s=!1;return this.ia().then((function(){(function(e){var t={type:"webStorageSupport"};return Ua(e).then((function(){return function(e,t){return e.gb.then((function(){return new He((function(n){e.a.send(t.type,t,n,vr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(e.i,t)})).then((function(e){if(e&&e.length&&void 0!==e[0].webStorageSupport)return e[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(e&&nr(e),t(i),s=!0)}))})).s((function(){})).then((function(){if(!s)return function(e){return new He((function(t){return function n(){hn(2e3).then((function(){if(e&&!e.closed)return n();t()}))}()}))}(e)})).then((function(){if(!s)return hn(n).then((function(){t(r)}))}))},e.Ob=function(){var e=yr();return!Er(e)&&!Ar(e)},e.Jb=function(){return!1},e.Db=function(e,t,n,r,i,o,s,a){if(!e)return Je(new Xr("popup-blocked"));if(s&&!Er())return this.ia().s((function(t){nr(e),i(t)})),r(),Xe();this.a||(this.a=Fa(Va(this)));var l=this;return this.a.then((function(){var t=l.ia().s((function(t){throw nr(e),i(t),t}));return r(),t})).then((function(){bo(n),s||er(ja(l.u,l.f,l.b,t,n,null,o,l.c,void 0,l.h,a),e)})).s((function(e){throw"auth/network-request-failed"==e.code&&(l.a=null),e}))},e.Eb=function(e,t,n,r){this.a||(this.a=Fa(Va(this)));var i=this;return this.a.then((function(){bo(t),er(ja(i.u,i.f,i.b,e,t,Zn(),n,i.c,void 0,i.h,r))})).s((function(e){throw"auth/network-request-failed"==e.code&&(i.a=null),e}))},e.ia=function(){var e=this;return Ua(this).then((function(){return e.i.gb})).s((function(){throw e.a=null,new Xr("network-request-failed")}))},e.Rb=function(){return!0},e.Aa=function(e){this.g.push(e)},e.Na=function(e){H(this.g,(function(t){return t==e}))},(e=qa.prototype).get=function(e){return Xe(this.a.getItem(e)).then((function(e){return e&&Ir(e)}))},e.set=function(e,t){return Xe(this.a.setItem(e,Tr(t)))},e.S=function(e){return Xe(this.a.removeItem(e))},e.$=function(){},e.ea=function(){};var Wa,Ha=[];function Ka(e,t,n){Q(e.a)&&e.b.addEventListener("message",e.f),void 0===e.a[t]&&(e.a[t]=[]),e.a[t].push(n)}function za(e){this.a=e}function Ga(e){this.c=e,this.b=!1,this.a=[]}function Qa(e,t,n,r){var i,o,s,a,l=n||{},u=null;if(e.b)return Je(Error("connection_unavailable"));var c=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new He((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),s=setTimeout((function(){r(Error("unsupported_event"))}),c),e.a.push(u={messageChannel:h,onMessage:o=function(e){e.data.eventId===i&&("ack"===e.data.status?(clearTimeout(s),a=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===e.data.status?(clearTimeout(a),void 0!==e.data.response?n(e.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))}}),h.port1.addEventListener("message",o),e.c.postMessage({eventType:t,eventId:i,data:l},[h.port2])):r(Error("connection_unavailable"))})).then((function(t){return $a(e,u),t})).s((function(t){throw $a(e,u),t}))}function $a(e,t){if(t){var n=t.messageChannel;n&&(n.port1.removeEventListener("message",t.onMessage),n.port1.close()),H(e.a,(function(e){return e==t}))}}function Ya(){if(!Ja())throw new Xr("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.u=a.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.o=!1,this.h=null;var e=this;ur()&&self?(this.l=function(){var e=ur()?self:null;if(V(Ha,(function(n){n.b==e&&(t=n)})),!t){var t=new Ba(e);Ha.push(t)}return t}(),Ka(this.l,"keyChanged",(function(t,n){return rl(e).then((function(t){return 0<t.length&&V(e.a,(function(e){e(t)})),{keyProcessed:B(t,n.key)}}))})),Ka(this.l,"ping",(function(){return Xe(["keyChanged"])}))):function(){var e=a.navigator;return e&&e.serviceWorker?Xe().then((function(){return e.serviceWorker.ready})).then((function(e){return e.active||null})).s((function(){return null})):Xe(null)}().then((function(t){(e.h=t)&&(e.g=new Ga(new za(t)),Qa(e.g,"ping",null,!0).then((function(t){t[0].fulfilled&&B(t[0].value,"keyChanged")&&(e.o=!0)})).s((function(){})))}))}function Xa(e){return e.m||(e.m=function e(t){return new He((function(n,r){var i=t.u.open("firebaseLocalStorageDb",1);i.onerror=function(e){try{e.preventDefault()}catch(t){}r(Error(e.target.error))},i.onupgradeneeded=function(e){e=e.target.result;try{e.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){r(t)}},i.onsuccess=function(i){(i=i.target.result).objectStoreNames.contains("firebaseLocalStorage")?n(i):function(e){return new He((function(t,n){var r=e.u.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){t()},r.onerror=function(e){n(Error(e.target.error))}}))}(t).then((function(){return e(t)})).then((function(e){n(e)})).s((function(e){r(e)}))}}))}(e)),e.m}function Ja(){try{return!!a.indexedDB}catch(yt){return!1}}function Za(e){return e.objectStore("firebaseLocalStorage")}function el(e,t){return e.transaction(["firebaseLocalStorage"],t?"readwrite":"readonly")}function tl(e){return new He((function(t,n){e.onsuccess=function(e){e&&e.target?t(e.target.result):t()},e.onerror=function(e){n(e.target.error)}}))}function nl(e,t){return e.g&&e.h&&function(){var e=a.navigator;return e&&e.serviceWorker&&e.serviceWorker.controller||null}()===e.h?Qa(e.g,"keyChanged",{key:t},e.o).then((function(){})).s((function(){})):Xe()}function rl(e){return Xa(e).then((function(e){var t=Za(el(e,!1));return t.getAll?tl(t.getAll()):new He((function(e,n){var r=[],i=t.openCursor();i.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},i.onerror=function(e){n(e.target.error)}}))})).then((function(t){var n={},r=[];if(0==e.b){for(r=0;r<t.length;r++)n[t[r].fbase_key]=t[r].value;r=function e(t,n){var r,i=[];for(r in t)r in n?typeof t[r]!=typeof n[r]?i.push(r):"object"==typeof t[r]&&null!=t[r]&&null!=n[r]?0<e(t[r],n[r]).length&&i.push(r):t[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in t||i.push(r);return i}(e.c,n),e.c=n}return r}))}function il(e){e.i&&e.i.cancel("STOP_EVENT"),e.f&&(clearTimeout(e.f),e.f=null)}function ol(e){var t=this,n=null;this.a=[],this.type="indexedDB",this.c=e,this.b=Xe().then((function(){if(Ja()){var e=kr(),r="__sak"+e;return Wa||(Wa=new Ya),(n=Wa).set(r,e).then((function(){return n.get(r)})).then((function(t){if(t!==e)throw Error("indexedDB not supported!");return n.S(r)})).then((function(){return n})).s((function(){return t.c}))}return t.c})).then((function(e){return t.type=e.type,e.$((function(e){V(t.a,(function(t){t(e)}))})),e}))}function sl(){this.a={},this.type="inMemory"}function al(){if(!function(){var e="Node"==cr();if(!(e=ll()||e&&i.a.INTERNAL.node&&i.a.INTERNAL.node.localStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==cr())throw new Xr("internal-error","The LocalStorage compatibility library was not found.");throw new Xr("web-storage-unsupported")}this.a=ll()||i.a.INTERNAL.node.localStorage,this.type="localStorage"}function ll(){try{var e=a.localStorage,t=kr();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(n){return null}}function ul(){this.type="nullStorage"}function cl(){if(!function(){var e="Node"==cr();if(!(e=hl()||e&&i.a.INTERNAL.node&&i.a.INTERNAL.node.sessionStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==cr())throw new Xr("internal-error","The SessionStorage compatibility library was not found.");throw new Xr("web-storage-unsupported")}this.a=hl()||i.a.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function hl(){try{var e=a.sessionStorage,t=kr();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(n){return null}}function dl(){var e={};e.Browser=gl,e.Node=ml,e.ReactNative=yl,e.Worker=vl,this.a=e[cr()]}Ba.prototype.c=function(e){var t=e.data.eventType,n=e.data.eventId,r=this.a[t];if(r&&0<r.length){e.ports[0].postMessage({status:"ack",eventId:n,eventType:t,response:null});var i=[];V(r,(function(t){i.push(Xe().then((function(){return t(e.origin,e.data.data)})))})),et(i).then((function(r){var i=[];V(r,(function(e){i.push({fulfilled:e.Gb,value:e.value,reason:e.reason?e.reason.message:void 0})})),V(i,(function(e){for(var t in e)void 0===e[t]&&delete e[t]})),e.ports[0].postMessage({status:"done",eventId:n,eventType:t,response:i})}))}},za.prototype.postMessage=function(e,t){this.a.postMessage(e,t)},Ga.prototype.close=function(){for(;0<this.a.length;)$a(this,this.a[0]);this.b=!0},(e=Ya.prototype).set=function(e,t){var n,r=!1,i=this;return Xa(this).then((function(t){return tl((t=Za(el(n=t,!0))).get(e))})).then((function(o){var s=Za(el(n,!0));return o?(o.value=t,tl(s.put(o))):(i.b++,r=!0,(o={}).fbase_key=e,o.value=t,tl(s.add(o)))})).then((function(){return i.c[e]=t,nl(i,e)})).ka((function(){r&&i.b--}))},e.get=function(e){return Xa(this).then((function(t){return tl(Za(el(t,!1)).get(e))})).then((function(e){return e&&e.value}))},e.S=function(e){var t=!1,n=this;return Xa(this).then((function(r){return t=!0,n.b++,tl(Za(el(r,!0)).delete(e))})).then((function(){return delete n.c[e],nl(n,e)})).ka((function(){t&&n.b--}))},e.$=function(e){0==this.a.length&&function(e){il(e),function t(){e.f=setTimeout((function(){e.i=rl(e).then((function(t){0<t.length&&V(e.a,(function(e){e(t)}))})).then((function(){t()})).s((function(e){"STOP_EVENT"!=e.message&&t()}))}),800)}()}(this),this.a.push(e)},e.ea=function(e){H(this.a,(function(t){return t==e})),0==this.a.length&&il(this)},(e=ol.prototype).get=function(e){return this.b.then((function(t){return t.get(e)}))},e.set=function(e,t){return this.b.then((function(n){return n.set(e,t)}))},e.S=function(e){return this.b.then((function(t){return t.S(e)}))},e.$=function(e){this.a.push(e)},e.ea=function(e){H(this.a,(function(t){return t==e}))},(e=sl.prototype).get=function(e){return Xe(this.a[e])},e.set=function(e,t){return this.a[e]=t,Xe()},e.S=function(e){return delete this.a[e],Xe()},e.$=function(){},e.ea=function(){},(e=al.prototype).get=function(e){var t=this;return Xe().then((function(){return Ir(t.a.getItem(e))}))},e.set=function(e,t){var n=this;return Xe().then((function(){var r=Tr(t);null===r?n.S(e):n.a.setItem(e,r)}))},e.S=function(e){var t=this;return Xe().then((function(){t.a.removeItem(e)}))},e.$=function(e){a.window&&Gt(a.window,"storage",e)},e.ea=function(e){a.window&&Yt(a.window,"storage",e)},(e=ul.prototype).get=function(){return Xe(null)},e.set=function(){return Xe()},e.S=function(){return Xe()},e.$=function(){},e.ea=function(){},(e=cl.prototype).get=function(e){var t=this;return Xe().then((function(){return Ir(t.a.getItem(e))}))},e.set=function(e,t){var n=this;return Xe().then((function(){var r=Tr(t);null===r?n.S(e):n.a.setItem(e,r)}))},e.S=function(e){var t=this;return Xe().then((function(){t.a.removeItem(e)}))},e.$=function(){},e.ea=function(){};var pl,fl,gl={C:al,Ta:cl},ml={C:al,Ta:cl},yl={C:qa,Ta:ul},vl={C:al,Ta:ul},_l={ad:"local",NONE:"none",cd:"session"};function bl(){var e=!(Ar(yr())||!lr()),t=Er(),n=_r();this.m=e,this.h=t,this.l=n,this.a={},pl||(pl=new dl),e=pl;try{this.g=!Jn()&&Pr()||!a.indexedDB?new e.a.C:new ol(ur()?new sl:new e.a.C)}catch(r){this.g=new sl,this.h=!0}try{this.i=new e.a.Ta}catch(r){this.i=new sl}this.u=new sl,this.f=E(this.Pb,this),this.b={}}function wl(){return fl||(fl=new bl),fl}function Cl(e,t){switch(t){case"session":return e.i;case"none":return e.u;default:return e.g}}function El(e,t){return"firebase:"+e.name+(t?":"+t:"")}function Tl(e,t,n){return n=El(t,n),"local"==t.C&&(e.b[n]=null),Cl(e,t.C).S(n)}function Sl(e){e.c&&(clearInterval(e.c),e.c=null)}function Il(e){this.a=e,this.b=wl()}(e=bl.prototype).get=function(e,t){return Cl(this,e.C).get(El(e,t))},e.set=function(e,t,n){var r=El(e,n),i=this,o=Cl(this,e.C);return o.set(r,t).then((function(){return o.get(r)})).then((function(t){"local"==e.C&&(i.b[r]=t)}))},e.addListener=function(e,t,n){e=El(e,t),this.l&&(this.b[e]=a.localStorage.getItem(e)),Q(this.a)&&(Cl(this,"local").$(this.f),this.h||(Jn()||!Pr())&&a.indexedDB||!this.l||function(e){Sl(e),e.c=setInterval((function(){for(var t in e.a){var n=a.localStorage.getItem(t),r=e.b[t];n!=r&&(e.b[t]=n,n=new Lt({type:"storage",key:t,target:window,oldValue:r,newValue:n,a:!0}),e.Pb(n))}}),1e3)}(this)),this.a[e]||(this.a[e]=[]),this.a[e].push(n)},e.removeListener=function(e,t,n){e=El(e,t),this.a[e]&&(H(this.a[e],(function(e){return e==n})),0==this.a[e].length&&delete this.a[e]),Q(this.a)&&(Cl(this,"local").ea(this.f),Sl(this))},e.Pb=function(e){if(e&&e.f){var t=e.a.key;if(null==t)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=a.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.$a(n))}else if(0==t.indexOf("firebase:")&&this.a[t]){if(void 0!==e.a.a?Cl(this,"local").ea(this.f):Sl(this),this.m)if(n=a.localStorage.getItem(t),(r=e.a.newValue)!==n)null!==r?a.localStorage.setItem(t,r):a.localStorage.removeItem(t);else if(this.b[t]===r&&void 0===e.a.a)return;var o=this;n=function(){void 0===e.a.a&&o.b[t]===a.localStorage.getItem(t)||(o.b[t]=a.localStorage.getItem(t),o.$a(t))},_t&&At&&10==At&&a.localStorage.getItem(t)!==e.a.newValue&&e.a.newValue!==e.a.oldValue?setTimeout(n,10):n()}}else V(e,E(this.$a,this))},e.$a=function(e){this.a[e]&&V(this.a[e],(function(e){e()}))};var kl,Al={name:"authEvent",C:"local"};function Nl(){this.a=wl()}function Dl(e,t){this.b=Rl,this.f=a.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=e,this.h=t,this.l=a.Int32Array?new Int32Array(64):Array(64),void 0!==kl||(kl=a.Int32Array?new Int32Array(Ul):Ul),this.reset()}I(Dl,(function(){this.b=-1}));for(var Rl=64,Ol=Rl-1,Pl=[],xl=0;xl<Ol;xl++)Pl[xl]=0;var Ml=K(128,Pl);function Ll(e){for(var t=e.f,n=e.l,r=0,i=0;i<t.length;)n[r++]=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3],i=4*r;for(t=16;64>t;t++){var o=(0|n[t-16])+(((i=0|n[t-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[t-7])+(((r=0|n[t-2])>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[t]=o+s|0}r=0|e.a[0],i=0|e.a[1];var a=0|e.a[2],l=0|e.a[3],u=0|e.a[4],c=0|e.a[5],h=0|e.a[6];for(o=0|e.a[7],t=0;64>t;t++){var d=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7))|0)+((s=(s=u&c^~u&h)+(0|kl[t])|0)+(0|n[t])|0)|0,o=h,h=c,c=u,u=l+s|0,l=a,a=i,i=r,r=s+d|0}e.a[0]=e.a[0]+r|0,e.a[1]=e.a[1]+i|0,e.a[2]=e.a[2]+a|0,e.a[3]=e.a[3]+l|0,e.a[4]=e.a[4]+u|0,e.a[5]=e.a[5]+c|0,e.a[6]=e.a[6]+h|0,e.a[7]=e.a[7]+o|0}function Fl(e,t,n){void 0===n&&(n=t.length);var r=0,i=e.c;if(l(t))for(;r<n;)e.f[i++]=t.charCodeAt(r++),i==e.b&&(Ll(e),i=0);else{if(!m(t))throw Error("message must be string or array");for(;r<n;){var o=t[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");e.f[i++]=o,i==e.b&&(Ll(e),i=0)}}e.c=i,e.g+=n}Dl.prototype.reset=function(){this.g=this.c=0,this.a=a.Int32Array?new Int32Array(this.h):z(this.h)};var Ul=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Vl(){Dl.call(this,8,jl)}I(Vl,Dl);var jl=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function ql(e,t,n,r,i){this.u=e,this.i=t,this.l=n,this.m=r||null,this.o=i||null,this.h=t+":"+n,this.v=new Nl,this.g=new Il(this.h),this.f=null,this.b=[],this.a=this.c=null}function Bl(e){return new Xr("invalid-cordova-configuration",e)}function Wl(e,t){for(var n=0;n<e.b.length;n++)try{e.b[n](t)}catch(r){}}function Hl(e){return e.f||(e.f=e.ia().then((function(){return new He((function(t){e.Aa((function n(r){return t(r),e.Na(n),!1})),function(e){function t(t){r=!0,i&&i.cancel(),Kl(e).then((function(r){var i=n;if(r&&t&&t.url){var o=null;-1!=(i=Bi(t.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Ir(En(o=Tn(i),"firebaseError")||null))?Jr(o):null)?new wo(r.c,r.b,null,null,o,null,r.R()):new wo(r.c,r.b,i,r.f,null,null,r.R())),i=o||n}Wl(e,i)}))}var n=new wo("unknown",null,null,null,new Xr("no-auth-event")),r=!1,i=hn(500).then((function(){return Kl(e).then((function(){r||Wl(e,n)}))})),o=a.handleOpenURL;a.handleOpenURL=function(e){if(0==e.toLowerCase().indexOf(vr("BuildInfo.packageName",a).toLowerCase()+"://")&&t({url:e}),"function"==typeof o)try{o(e)}catch(n){console.error(n)}},So||(So=new Eo),function(e){var t=So;t.a.push(e),t.b||(t.b=function(e){for(var n=0;n<t.a.length;n++)t.a[n](e)},"function"==typeof(e=vr("universalLinks.subscribe",a))&&e(null,t.b))}(t)}(e)}))}))),e.f}function Kl(e){var t=null;return function(e){return e.b.get(Al,e.a).then((function(e){return Co(e)}))}(e.g).then((function(n){return t=n,Tl((n=e.g).b,Al,n.a)})).then((function(){return t}))}function zl(e){this.a=e,this.b=wl()}(e=ql.prototype).ia=function(){return this.Da?this.Da:this.Da=(ar(void 0)?sr().then((function(){return new He((function(e,t){var n=a.document,r=setTimeout((function(){t(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),e()}),!1)}))})):Je(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof vr("universalLinks.subscribe",a))throw Bl("cordova-universal-links-plugin-fix is not installed");if(void 0===vr("BuildInfo.packageName",a))throw Bl("cordova-plugin-buildinfo is not installed");if("function"!=typeof vr("cordova.plugins.browsertab.openUrl",a))throw Bl("cordova-plugin-browsertab is not installed");if("function"!=typeof vr("cordova.InAppBrowser.open",a))throw Bl("cordova-plugin-inappbrowser is not installed")}),(function(){throw new Xr("cordova-not-ready")}))},e.Fb=function(e,t){return t(new Xr("operation-not-supported-in-this-environment")),Xe()},e.Db=function(){return Je(new Xr("operation-not-supported-in-this-environment"))},e.Rb=function(){return!1},e.Ob=function(){return!0},e.Jb=function(){return!0},e.Eb=function(e,t,n,r){if(this.c)return Je(new Xr("redirect-operation-pending"));var i=this,o=a.document,s=null,l=null,u=null,c=null;return this.c=Xe().then((function(){return bo(t),Hl(i)})).then((function(){return function(e,t,n,r,i){var o=function(){for(var e=20,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}(),s=new wo(t,r,null,o,new Xr("no-auth-event"),null,i),l=vr("BuildInfo.packageName",a);if("string"!=typeof l)throw new Xr("invalid-cordova-configuration");var u=vr("BuildInfo.displayName",a),c={};if(yr().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=l;else{if(!yr().toLowerCase().match(/android/))return Je(new Xr("operation-not-supported-in-this-environment"));c.apn=l}u&&(c.appDisplayName=u),o=function(e){var t=new Vl;Fl(t,e),e=[];var n=8*t.g;Fl(t,Ml,56>t.c?56-t.c:t.b-(t.c-56));for(var r=63;56<=r;r--)t.f[r]=255&n,n/=256;for(Ll(t),r=n=0;r<t.i;r++)for(var i=24;0<=i;i-=8)e[n++]=t.a[r]>>i&255;return function(e){return j(e,(function(e){return 1<(e=e.toString(16)).length?e:"0"+e})).join("")}(e)}(o),c.sessionId=o;var h=ja(e.u,e.i,e.l,t,n,null,r,e.m,c,e.o,i);return e.ia().then((function(){var t=e.h;return e.v.a.set(Al,s.A(),t)})).then((function(){var t=vr("cordova.plugins.browsertab.isAvailable",a);if("function"!=typeof t)throw new Xr("invalid-cordova-configuration");var n=null;t((function(t){if(t){if("function"!=typeof(n=vr("cordova.plugins.browsertab.openUrl",a)))throw new Xr("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=vr("cordova.InAppBrowser.open",a)))throw new Xr("invalid-cordova-configuration");t=yr(),e.a=n(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,e,t,n,r)})).then((function(){return new He((function(e,t){l=function(){var t=vr("cordova.plugins.browsertab.close",a);return e(),"function"==typeof t&&t(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Aa(l),c=function(){Rr()&&u()},o.addEventListener("resume",u=function(){s||(s=hn(2e3).then((function(){t(new Xr("redirect-cancelled-by-user"))})))},!1),yr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",c,!1)})).s((function(e){return Kl(i).then((function(){throw e}))}))})).ka((function(){u&&o.removeEventListener("resume",u,!1),c&&o.removeEventListener("visibilitychange",c,!1),s&&s.cancel(),l&&i.Na(l),i.c=null}))},e.Aa=function(e){this.b.push(e),Hl(this).s((function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new wo("unknown",null,null,null,new Xr("no-auth-event")),e(t))}))},e.Na=function(e){H(this.b,(function(t){return t==e}))};var Gl={name:"pendingRedirect",C:"session"};function Ql(e){return Tl(e.b,Gl,e.a)}function $l(e,t,n){this.i={},this.v=0,this.B=e,this.u=t,this.m=n,this.h=[],this.f=!1,this.l=E(this.o,this),this.b=new uu,this.w=new fu,this.g=new zl(this.u+":"+this.m),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.w,this.c.linkViaPopup=this.w,this.c.reauthViaPopup=this.w,this.a=Yl(this.B,this.u,this.m,Ii)}function Yl(e,t,n,r){var o=i.a.SDK_VERSION||null;return ar()?new ql(e,t,n,o,r):new La(e,t,n,o,r)}function Xl(e){e.f||(e.f=!0,e.a.Aa(e.l));var t=e.a;return e.a.ia().s((function(n){throw e.a==t&&e.reset(),n}))}function Jl(e){e.a.Ob()&&Xl(e).s((function(t){var n=new wo("unknown",null,null,null,new Xr("operation-not-supported-in-this-environment"));iu(t)&&e.o(n)})),e.a.Jb()||cu(e.b)}function Zl(e,t){B(e.h,t)||e.h.push(t),e.f||function(e){return e.b.get(Gl,e.a).then((function(e){return"pending"==e}))}(e.g).then((function(t){t?Ql(e.g).then((function(){Xl(e).s((function(t){var n=new wo("unknown",null,null,null,new Xr("operation-not-supported-in-this-environment"));iu(t)&&e.o(n)}))})):Jl(e)})).s((function(){Jl(e)}))}function eu(e,t){H(e.h,(function(e){return e==t}))}$l.prototype.reset=function(){this.f=!1,this.a.Na(this.l),this.a=Yl(this.B,this.u,this.m),this.i={}},$l.prototype.o=function(e){if(!e)throw new Xr("invalid-auth-event");if(6e5<=S()-this.v&&(this.i={},this.v=0),e&&e.getUid()&&this.i.hasOwnProperty(e.getUid()))return!1;for(var t=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.xb(e.c,e.b)){(t=this.c[e.c])&&(t.h(e,r),e&&(e.f||e.b)&&(this.i[e.getUid()]=!0,this.v=S())),t=!0;break}}return cu(this.b),t};var tu=new Dr(2e3,1e4),nu=new Dr(3e4,6e4);function ru(e,t,n,r,i,o,s){return e.a.Db(t,n,r,(function(){e.f||(e.f=!0,e.a.Aa(e.l))}),(function(){e.reset()}),i,o,s)}function iu(e){return!(!e||"auth/cordova-not-ready"!=e.code)}function ou(e,t,n,r,i){var o;return function(e){return e.b.set(Gl,"pending",e.a)}(e.g).then((function(){return e.a.Eb(t,n,r,i).s((function(t){if(iu(t))throw new Xr("operation-not-supported-in-this-environment");return o=t,Ql(e.g).then((function(){throw o}))})).then((function(){return e.a.Rb()?new He((function(){})):Ql(e.g).then((function(){return e.oa()})).then((function(){})).s((function(){}))}))}))}function su(e,t,n,r,i){return e.a.Fb(r,(function(e){t.ja(n,null,e,i)}),tu.get())}$l.prototype.oa=function(){return this.b.oa()};var au={};function lu(e,t,n){var r=t+":"+n;return au[r]||(au[r]=new $l(e,t,n)),au[r]}function uu(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function cu(e){e.g||(e.g=!0,pu(e,!1,null,null))}function hu(e){e.g&&!e.i&&pu(e,!1,null,null)}function du(e,t){if(e.b=function(){return Xe(t)},e.f.length)for(var n=0;n<e.f.length;n++)e.f[n](t)}function pu(e,t,n,r){t?r?function(e,t){if(e.b=function(){return Je(t)},e.c.length)for(var n=0;n<e.c.length;n++)e.c[n](t)}(e,r):du(e,n):du(e,{user:null}),e.f=[],e.c=[]}function fu(){}function gu(){this.vb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.vb},set:function(e){this.vb=e},enumerable:!1})}function mu(e,t){this.a=t,Ur(this,"verificationId",e)}function yu(e,t,n,r){return new yo(e).Wa(t,n).then((function(e){return new mu(e,r)}))}function vu(e){var t=Si(e);if(!(t&&t.exp&&t.auth_time&&t.iat))throw new Xr("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Vr(this,{token:e,expirationTime:Or(1e3*t.exp),authTime:Or(1e3*t.auth_time),issuedAtTime:Or(1e3*t.iat),signInProvider:t.firebase&&t.firebase.sign_in_provider?t.firebase.sign_in_provider:null,claims:t})}function _u(e,t,n){if(this.h=e,this.i=t,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function bu(e){this.f=e,this.b=this.a=null,this.c=0}function wu(e,t){var n=t[Ds],r=t.refreshToken;t=Cu(t.expiresIn),e.b=n,e.c=t,e.a=r}function Cu(e){return S()+1e3*parseInt(e,10)}function Eu(e,t){this.a=e||null,this.b=t||null,Vr(this,{lastSignInTime:Or(t||null),creationTime:Or(e||null)})}function Tu(e,t,n,r,i,o){Vr(this,{uid:e,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:t})}function Su(e,t){for(var n in Mt.call(this,e),t)this[n]=t[n]}function Iu(e,t,n){this.I=[],this.l=e.apiKey,this.m=e.appName,this.o=e.authDomain||null,e=i.a.SDK_VERSION?mr(i.a.SDK_VERSION):null,this.a=new As(this.l,Ai(Ii),e),this.b=new bu(this.a),Pu(this,t[Ds]),wu(this.b,t),Ur(this,"refreshToken",this.b.a),Lu(this,n||{}),sn.call(this),this.J=!1,this.o&&br()&&(this.i=lu(this.o,this.l,this.m)),this.O=[],this.h=null,this.w=function(e){return new _u((function(){return e.G(!0)}),(function(e){return!(!e||"auth/network-request-failed"!=e.code)}),(function(){var t=e.b.c-S()-3e5;return 0<t?t:0}))}(this),this.W=E(this.Ja,this);var r=this;this.ga=null,this.xa=function(e){r.ua(e.g)},this.Z=null,this.P=[],this.wa=function(e){Au(r,e.c)},this.Y=null}function ku(e,t){e.Z&&Yt(e.Z,"languageCodeChanged",e.xa),(e.Z=t)&&Gt(t,"languageCodeChanged",e.xa)}function Au(e,t){e.P=t,Ls(e.a,i.a.SDK_VERSION?mr(i.a.SDK_VERSION,e.P):null)}function Nu(e,t){e.Y&&Yt(e.Y,"frameworkChanged",e.wa),(e.Y=t)&&Gt(t,"frameworkChanged",e.wa)}function Du(e){try{return i.a.app(e.m).auth()}catch(t){throw new Xr("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function Ru(e){e.B||e.w.b||(e.w.start(),Yt(e,"tokenChanged",e.W),Gt(e,"tokenChanged",e.W))}function Ou(e){Yt(e,"tokenChanged",e.W),e.w.stop()}function Pu(e,t){e.ma=t,Ur(e,"_lat",t)}function xu(e){for(var t=[],n=0;n<e.O.length;n++)t.push(e.O[n](e));return et(t).then((function(){return e}))}function Mu(e){e.i&&!e.J&&(e.J=!0,Zl(e.i,e))}function Lu(e,t){Vr(e,{uid:t.uid,displayName:t.displayName||null,photoURL:t.photoURL||null,email:t.email||null,emailVerified:t.emailVerified||!1,phoneNumber:t.phoneNumber||null,isAnonymous:t.isAnonymous||!1,tenantId:t.tenantId||null,metadata:new Eu(t.createdAt,t.lastLoginAt),providerData:[]}),e.a.b=e.tenantId}function Fu(){}function Uu(e){return Xe().then((function(){if(e.B)throw new Xr("app-deleted")}))}function Vu(e){return j(e.providerData,(function(e){return e.providerId}))}function ju(e,t){t&&(qu(e,t.providerId),e.providerData.push(t))}function qu(e,t){H(e.providerData,(function(e){return e.providerId==t}))}function Bu(e,t,n){("uid"!=t||n)&&e.hasOwnProperty(t)&&Ur(e,t,n)}function Wu(e,t){e!=t&&(Vr(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),Ur(e,"metadata",t.metadata?function(e){return new Eu(e.a,e.b)}(t.metadata):new Eu),V(t.providerData,(function(t){ju(e,t)})),function(e,t){e.b=t.b,e.a=t.a,e.c=t.c}(e.b,t.b),Ur(e,"refreshToken",e.b.a))}function Hu(e){return e.G().then((function(t){var n=e.isAnonymous;return function(e,t){return Sa(e.a,sa,{idToken:t}).then(E(e.zc,e))}(e,t).then((function(){return n||Bu(e,"isAnonymous",!1),t}))}))}function Ku(e,t){t[Ds]&&e.ma!=t[Ds]&&(wu(e.b,t),e.dispatchEvent(new Su("tokenChanged")),Pu(e,t[Ds]),Bu(e,"refreshToken",e.b.a))}function zu(e,t){return Hu(e).then((function(){if(B(Vu(e),t))return xu(e).then((function(){throw new Xr("provider-already-linked")}))}))}function Gu(e,t,n){return jr({user:e,credential:_o(t),additionalUserInfo:t=Pi(t),operationType:n})}function Qu(e,t){return Ku(e,t),e.reload().then((function(){return e}))}function $u(e,t,n,r,o){if(!br())return Je(new Xr("operation-not-supported-in-this-environment"));if(e.h&&!o)return Je(e.h);var s=Oi(n.providerId),a=kr(e.uid+":::"),l=null;(!Er()||lr())&&e.o&&n.isOAuthProvider&&(l=ja(e.o,e.l,e.m,t,n,null,a,i.a.SDK_VERSION||null,null,null,e.tenantId));var u=rr(l,s&&s.sa,s&&s.ra);return r=r().then((function(){if(Xu(e),!o)return e.G().then((function(){}))})).then((function(){return ru(e.i,u,t,n,a,!!l,e.tenantId)})).then((function(){return new He((function(n,r){e.ja(t,null,new Xr("cancelled-popup-request"),e.g||null),e.f=n,e.v=r,e.g=a,e.c=su(e.i,e,t,u,a)}))})).then((function(e){return u&&nr(u),e?jr(e):null})).s((function(e){throw u&&nr(u),e})),Ju(e,r,o)}function Yu(e,t,n,r,i){if(!br())return Je(new Xr("operation-not-supported-in-this-environment"));if(e.h&&!i)return Je(e.h);var o=null,s=kr(e.uid+":::");return r=r().then((function(){if(Xu(e),!i)return e.G().then((function(){}))})).then((function(){return e.ca=s,xu(e)})).then((function(t){return e.da&&(t=(t=e.da).b.set(tc,e.A(),t.a)),t})).then((function(){return ou(e.i,t,n,s,e.tenantId)})).s((function(t){if(o=t,e.da)return nc(e.da);throw o})).then((function(){if(o)throw o})),Ju(e,r,i)}function Xu(e){if(!e.i||!e.J){if(e.i&&!e.J)throw new Xr("internal-error");throw new Xr("auth-domain-config-required")}}function Ju(e,t,n){var r=function(e,t,n){return e.h&&!n?(t.cancel(),Je(e.h)):t.s((function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(e.h||e.dispatchEvent(new Su("userInvalidated")),e.h=t),t}))}(e,t,n);return e.I.push(r),r.ka((function(){W(e.I,r)})),r}function Zu(e){if(!e.apiKey)return null;var t={apiKey:e.apiKey,authDomain:e.authDomain,appName:e.appName},n={};if(!(e.stsTokenManager&&e.stsTokenManager.accessToken&&e.stsTokenManager.expirationTime))return null;n[Ds]=e.stsTokenManager.accessToken,n.refreshToken=e.stsTokenManager.refreshToken||null,n.expiresIn=(e.stsTokenManager.expirationTime-S())/1e3;var r=new Iu(t,n,e);return e.providerData&&V(e.providerData,(function(e){e&&ju(r,jr(e))})),e.redirectEventId&&(r.ca=e.redirectEventId),r}function ec(e){this.a=e,this.b=wl()}uu.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},uu.prototype.h=function(e,t){if(e){this.reset(),this.g=!0;var n=e.c,r=e.b,i=e.a&&"auth/web-storage-unsupported"==e.a.code,o=e.a&&"auth/operation-not-supported-in-this-environment"==e.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?e.a?(pu(this,!0,null,e.a),Xe()):t.Ba(n,r)?function(e,t,n){n=n.Ba(t.c,t.b);var r=t.g,i=t.f,o=t.i,s=t.R(),a=!!t.c.match(/Redirect$/);n(r,i,s,o).then((function(t){pu(e,a,t,null)})).s((function(t){pu(e,a,null,t)}))}(this,e,t):Je(new Xr("invalid-auth-event")):(pu(this,!1,null,null),Xe())}else Je(new Xr("invalid-auth-event"))},uu.prototype.oa=function(){var e=this;return new He((function(t,n){e.b?e.b().then(t,n):(e.f.push(t),e.c.push(n),function(e){var t=new Xr("timeout");e.a&&e.a.cancel(),e.a=hn(nu.get()).then((function(){e.b||(e.g=!0,pu(e,!0,null,t))}))}(e))}))},fu.prototype.h=function(e,t){if(e){var n=e.c,r=e.b;e.a?(t.ja(e.c,null,e.a,e.b),Xe()):t.Ba(n,r)?function(e,t){var n=e.b,r=e.c;t.Ba(r,n)(e.g,e.f,e.R(),e.i).then((function(e){t.ja(r,e,null,n)})).s((function(e){t.ja(r,null,e,n)}))}(e,t):Je(new Xr("invalid-auth-event"))}else Je(new Xr("invalid-auth-event"))},mu.prototype.confirm=function(e){return e=vo(this.verificationId,e),this.a(e)},_u.prototype.start=function(){this.a=this.c,function e(t,n){t.stop(),t.b=hn(function(e,t){return t?(e.a=e.c,e.g()):(t=e.a,e.a*=2,e.a>e.f&&(e.a=e.f),t)}(t,n)).then((function(){return function(){var e=a.document,t=null;return Rr()||!e?Xe():new He((function(n){t=function(){Rr()&&(e.removeEventListener("visibilitychange",t,!1),n())},e.addEventListener("visibilitychange",t,!1)})).s((function(n){throw e.removeEventListener("visibilitychange",t,!1),n}))}()})).then((function(){return t.h()})).then((function(){e(t,!0)})).s((function(n){t.i(n)&&e(t,!1)}))}(this,!0)},_u.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},bu.prototype.A=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b,expirationTime:this.c}},bu.prototype.getToken=function(e){return e=!!e,this.b&&!this.a?Je(new Xr("user-token-expired")):e||!this.b||S()>this.c-3e4?this.a?function(e,t){return function(e,t){return new He((function(n,r){"refresh_token"==t.grant_type&&t.refresh_token||"authorization_code"==t.grant_type&&t.code?Fs(e,e.l+"?key="+encodeURIComponent(e.c),(function(e){e?e.error?r(ka(e)):e.access_token&&e.refresh_token?n(e):r(new Xr("internal-error")):r(new Xr("network-request-failed"))}),"POST",Ln(t).toString(),e.g,e.u.get()):r(new Xr("internal-error"))}))}(e.f,t).then((function(t){return e.b=t.access_token,e.c=Cu(t.expires_in),e.a=t.refresh_token,{accessToken:e.b,expirationTime:e.c,refreshToken:e.a}})).s((function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t}))}(this,{grant_type:"refresh_token",refresh_token:this.a}):Xe(null):Xe({accessToken:this.b,expirationTime:this.c,refreshToken:this.a})},Eu.prototype.A=function(){return{lastLoginAt:this.b,createdAt:this.a}},I(Su,Mt),I(Iu,sn),Iu.prototype.ua=function(e){this.ga=e,Ms(this.a,e)},Iu.prototype.ha=function(){return this.ga},Iu.prototype.Ca=function(){return z(this.P)},Iu.prototype.Ja=function(){this.w.b&&(this.w.stop(),this.w.start())},Ur(Iu.prototype,"providerId","firebase"),(e=Iu.prototype).reload=function(){var e=this;return Ju(this,Uu(this).then((function(){return Hu(e).then((function(){return xu(e)})).then(Fu)})))},e.dc=function(e){return this.G(e).then((function(e){return new vu(e)}))},e.G=function(e){var t=this;return Ju(this,Uu(this).then((function(){return t.b.getToken(e)})).then((function(e){if(!e)throw new Xr("internal-error");return e.accessToken!=t.ma&&(Pu(t,e.accessToken),t.dispatchEvent(new Su("tokenChanged"))),Bu(t,"refreshToken",e.refreshToken),e.accessToken})))},e.zc=function(e){if(!(e=e.users)||!e.length)throw new Xr("internal-error");Lu(this,{uid:(e=e[0]).localId,displayName:e.displayName,photoURL:e.photoUrl,email:e.email,emailVerified:!!e.emailVerified,phoneNumber:e.phoneNumber,lastLoginAt:e.lastLoginAt,createdAt:e.createdAt,tenantId:e.tenantId});for(var t=function(e){return(e=e.providerUserInfo)&&e.length?j(e,(function(e){return new Tu(e.rawId,e.providerId,e.email,e.displayName,e.photoUrl,e.phoneNumber)})):[]}(e),n=0;n<t.length;n++)ju(this,t[n]);Bu(this,"isAnonymous",!(this.email&&e.passwordHash||this.providerData&&this.providerData.length))},e.Ac=function(e){return Lr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.hb(e)},e.hb=function(e){var t=this,n=null;return Ju(this,e.f(this.a,this.uid).then((function(e){return Ku(t,e),n=Gu(t,e,"reauthenticate"),t.h=null,t.reload()})).then((function(){return n})),!0)},e.rc=function(e){return Lr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.fb(e)},e.fb=function(e){var t=this,n=null;return Ju(this,zu(this,e.providerId).then((function(){return t.G()})).then((function(n){return e.b(t.a,n)})).then((function(e){return n=Gu(t,e,"link"),Qu(t,e)})).then((function(){return n})))},e.sc=function(e,t){var n=this;return Ju(this,zu(this,"phone").then((function(){return yu(Du(n),e,t,E(n.fb,n))})))},e.Bc=function(e,t){var n=this;return Ju(this,Xe().then((function(){return yu(Du(n),e,t,E(n.hb,n))})),!0)},e.rb=function(e){var t=this;return Ju(this,this.G().then((function(n){return t.a.rb(n,e)})).then((function(e){return Ku(t,e),t.reload()})))},e.Sc=function(e){var t=this;return Ju(this,this.G().then((function(n){return e.b(t.a,n)})).then((function(e){return Ku(t,e),t.reload()})))},e.sb=function(e){var t=this;return Ju(this,this.G().then((function(n){return t.a.sb(n,e)})).then((function(e){return Ku(t,e),t.reload()})))},e.tb=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return Uu(this);var t=this;return Ju(this,this.G().then((function(n){return t.a.tb(n,{displayName:e.displayName,photoUrl:e.photoURL})})).then((function(e){return Ku(t,e),Bu(t,"displayName",e.displayName||null),Bu(t,"photoURL",e.photoUrl||null),V(t.providerData,(function(e){"password"===e.providerId&&(Ur(e,"displayName",t.displayName),Ur(e,"photoURL",t.photoURL))})),xu(t)})).then(Fu))},e.Qc=function(e){var t=this;return Ju(this,Hu(this).then((function(n){return B(Vu(t),e)?function(e,t,n){return Sa(e,ra,{idToken:t,deleteProvider:n})}(t.a,n,[e]).then((function(e){var n={};return V(e.providerUserInfo||[],(function(e){n[e.providerId]=!0})),V(Vu(t),(function(e){n[e]||qu(t,e)})),n[yo.PROVIDER_ID]||Ur(t,"phoneNumber",null),xu(t)})):xu(t).then((function(){throw new Xr("no-such-provider")}))})))},e.delete=function(){var e=this;return Ju(this,this.G().then((function(t){return Sa(e.a,na,{idToken:t})})).then((function(){e.dispatchEvent(new Su("userDeleted"))}))).then((function(){for(var t=0;t<e.I.length;t++)e.I[t].cancel("app-deleted");ku(e,null),Nu(e,null),e.I=[],e.B=!0,Ou(e),Ur(e,"refreshToken",null),e.i&&eu(e.i,e)}))},e.xb=function(e,t){return!!("linkViaPopup"==e&&(this.g||null)==t&&this.f||"reauthViaPopup"==e&&(this.g||null)==t&&this.f||"linkViaRedirect"==e&&(this.ca||null)==t||"reauthViaRedirect"==e&&(this.ca||null)==t)},e.ja=function(e,t,n,r){"linkViaPopup"!=e&&"reauthViaPopup"!=e||r!=(this.g||null)||(n&&this.v?this.v(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},e.Ba=function(e,t){return"linkViaPopup"==e&&t==(this.g||null)?E(this.Bb,this):"reauthViaPopup"==e&&t==(this.g||null)?E(this.Cb,this):"linkViaRedirect"==e&&(this.ca||null)==t?E(this.Bb,this):"reauthViaRedirect"==e&&(this.ca||null)==t?E(this.Cb,this):null},e.tc=function(e){var t=this;return $u(this,"linkViaPopup",e,(function(){return zu(t,e.providerId).then((function(){return xu(t)}))}),!1)},e.Cc=function(e){return $u(this,"reauthViaPopup",e,(function(){return Xe()}),!0)},e.uc=function(e){var t=this;return Yu(this,"linkViaRedirect",e,(function(){return zu(t,e.providerId)}),!1)},e.Dc=function(e){return Yu(this,"reauthViaRedirect",e,(function(){return Xe()}),!0)},e.Bb=function(e,t,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Ju(this,this.G().then((function(n){return $s(i.a,{requestUri:e,postBody:r,sessionId:t,idToken:n})})).then((function(e){return o=Gu(i,e,"link"),Qu(i,e)})).then((function(){return o})))},e.Cb=function(e,t,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Ju(this,Xe().then((function(){return Hi(Ys(i.a,{requestUri:e,sessionId:t,postBody:r,tenantId:n}),i.uid)})).then((function(e){return o=Gu(i,e,"reauthenticate"),Ku(i,e),i.h=null,i.reload()})).then((function(){return o})),!0)},e.jb=function(e){var t=this,n=null;return Ju(this,this.G().then((function(t){return n=t,void 0===e||Q(e)?{}:bi(new ci(e))})).then((function(e){return t.a.jb(n,e)})).then((function(e){if(t.email!=e)return t.reload()})).then((function(){})))},e.toJSON=function(){return this.A()},e.A=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.o,stsTokenManager:this.b.A(),redirectEventId:this.ca||null};return this.metadata&&X(e,this.metadata.A()),V(this.providerData,(function(t){e.providerData.push(function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}(t))})),e};var tc={name:"redirectUser",C:"session"};function nc(e){return Tl(e.b,tc,e.a)}function rc(e){this.a=e,this.b=wl(),this.c=null,this.f=function(e){var t=sc("local"),n=sc("session"),r=sc("none");return function(e,t,n){var r=El(t,n),i=Cl(e,t.C);return e.get(t,n).then((function(o){var s=null;try{s=Ir(a.localStorage.getItem(r))}catch(l){}if(s&&!o)return a.localStorage.removeItem(r),e.set(t,s,n);s&&o&&"localStorage"!=i.type&&a.localStorage.removeItem(r)}))}(e.b,t,e.a).then((function(){return e.b.get(n,e.a)})).then((function(i){return i?n:e.b.get(r,e.a).then((function(n){return n?r:e.b.get(t,e.a).then((function(n){return n?t:e.b.get(oc,e.a).then((function(e){return e?sc(e):t}))}))}))})).then((function(t){return e.c=t,ic(e,t.C)})).s((function(){e.c||(e.c=t)}))}(this),this.b.addListener(sc("local"),this.a,E(this.g,this))}function ic(e,t){var n,r=[];for(n in _l)_l[n]!==t&&r.push(Tl(e.b,sc(_l[n]),e.a));return r.push(Tl(e.b,oc,e.a)),function(e){return new He((function(t,n){var r=e.length,i=[];if(r)for(var o=function(e,n){r--,i[e]=n,0==r&&t(i)},s=function(e){n(e)},a=0;a<e.length;a++)Ze(e[a],T(o,a),s);else t(i)}))}(r)}rc.prototype.g=function(){var e=this,t=sc("local");cc(this,(function(){return Xe().then((function(){return e.c&&"local"!=e.c.C?e.b.get(t,e.a):null})).then((function(n){if(n)return ic(e,"local").then((function(){e.c=t}))}))}))};var oc={name:"persistence",C:"session"};function sc(e){return{name:"authUser",C:e}}function ac(e,t){return cc(e,(function(){return e.b.set(e.c,t.A(),e.a)}))}function lc(e){return cc(e,(function(){return Tl(e.b,e.c,e.a)}))}function uc(e,t){return cc(e,(function(){return e.b.get(e.c,e.a).then((function(e){return e&&t&&(e.authDomain=t),Zu(e||{})}))}))}function cc(e,t){return e.f=e.f.then(t,t),e.f}function hc(e){if(this.l=!1,Ur(this,"settings",new gu),Ur(this,"app",e),!_c(this).options||!_c(this).options.apiKey)throw new Xr("invalid-api-key");e=i.a.SDK_VERSION?mr(i.a.SDK_VERSION):null,this.b=new As(_c(this).options&&_c(this).options.apiKey,Ai(Ii),e),this.O=[],this.m=[],this.J=[],this.Ub=i.a.INTERNAL.createSubscribe(E(this.oc,this)),this.W=void 0,this.Vb=i.a.INTERNAL.createSubscribe(E(this.pc,this)),yc(this,null),this.h=new rc(_c(this).options.apiKey+":"+_c(this).name),this.w=new ec(_c(this).options.apiKey+":"+_c(this).name),this.Y=Ec(this,function(e){var t=_c(e).options.authDomain,n=function(e){var t=function(e,t){return e.b.get(tc,e.a).then((function(e){return e&&t&&(e.authDomain=t),Zu(e||{})}))}(e.w,_c(e).options.authDomain).then((function(t){return(e.B=t)&&(t.da=e.w),nc(e.w)}));return Ec(e,t)}(e).then((function(){return uc(e.h,t)})).then((function(t){return t?(t.da=e.w,e.B&&(e.B.ca||null)==(t.ca||null)?t:t.reload().then((function(){return ac(e.h,t).then((function(){return t}))})).s((function(n){return"auth/network-request-failed"==n.code?t:lc(e.h)}))):null})).then((function(t){yc(e,t||null)}));return Ec(e,n)}(this)),this.i=Ec(this,function(e){return e.Y.then((function(){return gc(e)})).s((function(){})).then((function(){if(!e.l)return e.ma()})).s((function(){})).then((function(){if(!e.l){e.ga=!0;var t=e.h;t.b.addListener(sc("local"),t.a,e.ma)}}))}(this)),this.ga=!1,this.ma=E(this.Nc,this),this.ub=E(this.aa,this),this.wa=E(this.bc,this),this.xa=E(this.mc,this),this.Ja=E(this.nc,this),this.a=null,function(e){var t=_c(e).options.authDomain,n=_c(e).options.apiKey;t&&br()&&(e.Tb=e.Y.then((function(){if(!e.l){if(e.a=lu(t,n,_c(e).name),Zl(e.a,e),bc(e)&&Mu(bc(e)),e.B){Mu(e.B);var r=e.B;r.ua(e.ha()),ku(r,e),Au(r=e.B,e.I),Nu(r,e),e.B=null}return e.a}})))}(this),this.INTERNAL={},this.INTERNAL.delete=E(this.delete,this),this.INTERNAL.logFramework=E(this.vc,this),this.o=0,sn.call(this),function(e){Object.defineProperty(e,"lc",{get:function(){return this.ha()},set:function(e){this.ua(e)},enumerable:!1}),e.Z=null,Object.defineProperty(e,"ti",{get:function(){return this.R()},set:function(e){this.nb(e)},enumerable:!1}),e.P=null}(this),this.I=[]}function dc(e){Mt.call(this,"languageCodeChanged"),this.g=e}function pc(e){Mt.call(this,"frameworkChanged"),this.c=e}function fc(e){return e.Tb||Je(new Xr("auth-domain-config-required"))}function gc(e){if(!br())return Je(new Xr("operation-not-supported-in-this-environment"));var t=fc(e).then((function(){return e.a.oa()})).then((function(e){return e?jr(e):null}));return Ec(e,t)}function mc(e,t){var n={};return n.apiKey=_c(e).options.apiKey,n.authDomain=_c(e).options.authDomain,n.appName=_c(e).name,e.Y.then((function(){return function(e,t,n,r){var i=new Iu(e,t);return n&&(i.da=n),r&&Au(i,r),i.reload().then((function(){return i}))}(n,t,e.w,e.Ca())})).then((function(t){return bc(e)&&t.uid==bc(e).uid?(Wu(bc(e),t),e.aa(t)):(yc(e,t),Mu(t),e.aa(t))})).then((function(){Cc(e)}))}function yc(e,t){bc(e)&&(function(e,t){H(e.O,(function(e){return e==t}))}(bc(e),e.ub),Yt(bc(e),"tokenChanged",e.wa),Yt(bc(e),"userDeleted",e.xa),Yt(bc(e),"userInvalidated",e.Ja),Ou(bc(e))),t&&(t.O.push(e.ub),Gt(t,"tokenChanged",e.wa),Gt(t,"userDeleted",e.xa),Gt(t,"userInvalidated",e.Ja),0<e.o&&Ru(t)),Ur(e,"currentUser",t),t&&(t.ua(e.ha()),ku(t,e),Au(t,e.I),Nu(t,e))}function vc(e,t){var n=null,r=null;return Ec(e,t.then((function(t){return n=_o(t),r=Pi(t),mc(e,t)})).then((function(){return jr({user:bc(e),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function _c(e){return e.app}function bc(e){return e.currentUser}function wc(e){return bc(e)&&bc(e)._lat||null}function Cc(e){if(e.ga){for(var t=0;t<e.m.length;t++)e.m[t]&&e.m[t](wc(e));if(e.W!==e.getUid()&&e.J.length)for(e.W=e.getUid(),t=0;t<e.J.length;t++)e.J[t]&&e.J[t](wc(e))}}function Ec(e,t){return e.O.push(t),t.ka((function(){W(e.O,t)})),t}function Tc(){}function Sc(){this.a={},this.b=1e12}rc.prototype.mb=function(e){var t=null,n=this;return function(e){var t=new Xr("invalid-persistence-type"),n=new Xr("unsupported-persistence-type");e:{for(r in _l)if(_l[r]==e){var r=!0;break e}r=!1}if(!r||"string"!=typeof e)throw t;switch(cr()){case"ReactNative":if("session"===e)throw n;break;case"Node":if("none"!==e)throw n;break;default:if(!_r()&&"none"!==e)throw n}}(e),cc(this,(function(){return e!=n.c.C?n.b.get(n.c,n.a).then((function(r){return t=r,ic(n,e)})).then((function(){if(n.c=sc(e),t)return n.b.set(n.c,t,n.a)})):Xe()}))},I(hc,sn),I(dc,Mt),I(pc,Mt),(e=hc.prototype).mb=function(e){return Ec(this,e=this.h.mb(e))},e.ua=function(e){this.Z===e||this.l||(this.Z=e,Ms(this.b,this.Z),this.dispatchEvent(new dc(this.ha())))},e.ha=function(){return this.Z},e.Tc=function(){var e=a.navigator;this.ua(e&&(e.languages&&e.languages[0]||e.language||e.userLanguage)||null)},e.vc=function(e){this.I.push(e),Ls(this.b,i.a.SDK_VERSION?mr(i.a.SDK_VERSION,this.I):null),this.dispatchEvent(new pc(this.I))},e.Ca=function(){return z(this.I)},e.nb=function(e){this.P===e||this.l||(this.P=e,this.b.b=this.P)},e.R=function(){return this.P},e.toJSON=function(){return{apiKey:_c(this).options.apiKey,authDomain:_c(this).options.authDomain,appName:_c(this).name,currentUser:bc(this)&&bc(this).A()}},e.xb=function(e,t){switch(e){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==t&&!!this.f;default:return!1}},e.ja=function(e,t,n,r){"signInViaPopup"==e&&this.g==r&&(n&&this.v?this.v(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},e.Ba=function(e,t){return"signInViaRedirect"==e||"signInViaPopup"==e&&this.g==t&&this.f?E(this.ac,this):null},e.ac=function(e,t,n,r){var i=this;e={requestUri:e,postBody:r,sessionId:t,tenantId:n},this.c&&(this.c.cancel(),this.c=null);var o=null,s=null,a=Qs(i.b,e).then((function(e){return o=_o(e),s=Pi(e),e}));return Ec(this,e=i.Y.then((function(){return a})).then((function(e){return mc(i,e)})).then((function(){return jr({user:bc(i),credential:o,additionalUserInfo:s,operationType:"signIn"})})))},e.Lc=function(e){if(!br())return Je(new Xr("operation-not-supported-in-this-environment"));var t=this,n=Oi(e.providerId),r=kr(),o=null;(!Er()||lr())&&_c(this).options.authDomain&&e.isOAuthProvider&&(o=ja(_c(this).options.authDomain,_c(this).options.apiKey,_c(this).name,"signInViaPopup",e,null,r,i.a.SDK_VERSION||null,null,null,this.R()));var s=rr(o,n&&n.sa,n&&n.ra);return Ec(this,n=fc(this).then((function(n){return ru(n,s,"signInViaPopup",e,r,!!o,t.R())})).then((function(){return new He((function(e,n){t.ja("signInViaPopup",null,new Xr("cancelled-popup-request"),t.g),t.f=e,t.v=n,t.g=r,t.c=su(t.a,t,"signInViaPopup",s,r)}))})).then((function(e){return s&&nr(s),e?jr(e):null})).s((function(e){throw s&&nr(s),e})))},e.Mc=function(e){if(!br())return Je(new Xr("operation-not-supported-in-this-environment"));var t=this;return Ec(this,fc(this).then((function(){return function(e){return cc(e,(function(){return e.b.set(oc,e.c.C,e.a)}))}(t.h)})).then((function(){return ou(t.a,"signInViaRedirect",e,void 0,t.R())})))},e.oa=function(){var e=this;return gc(this).then((function(t){return e.a&&hu(e.a.b),t})).s((function(t){throw e.a&&hu(e.a.b),t}))},e.Rc=function(e){if(!e)return Je(new Xr("null-user"));if(this.P!=e.tenantId)return Je(new Xr("tenant-id-mismatch"));var t=this,n={};n.apiKey=_c(this).options.apiKey,n.authDomain=_c(this).options.authDomain,n.appName=_c(this).name;var r=function(e,t,n,r){t=t||{apiKey:e.l,authDomain:e.o,appName:e.m};var i=e.b,o={};return o[Ds]=i.b,o.refreshToken=i.a,o.expiresIn=(i.c-S())/1e3,t=new Iu(t,o),n&&(t.da=n),r&&Au(t,r),Wu(t,e),t}(e,n,t.w,t.Ca());return Ec(this,this.i.then((function(){if(_c(t).options.apiKey!=e.l)return r.reload()})).then((function(){return bc(t)&&e.uid==bc(t).uid?(Wu(bc(t),e),t.aa(e)):(yc(t,r),Mu(r),t.aa(r))})).then((function(){Cc(t)})))},e.pb=function(){var e=this;return Ec(this,this.i.then((function(){return e.a&&hu(e.a.b),bc(e)?(yc(e,null),lc(e.h).then((function(){Cc(e)}))):Xe()})))},e.Nc=function(){var e=this;return uc(this.h,_c(this).options.authDomain).then((function(t){if(!e.l){var n;if(n=bc(e)&&t){n=bc(e).uid;var r=t.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Wu(bc(e),t),bc(e).G();(bc(e)||t)&&(yc(e,t),t&&(Mu(t),t.da=e.w),e.a&&Zl(e.a,e),Cc(e))}}))},e.aa=function(e){return ac(this.h,e)},e.bc=function(){Cc(this),this.aa(bc(this))},e.mc=function(){this.pb()},e.nc=function(){this.pb()},e.oc=function(e){var t=this;this.addAuthTokenListener((function(){e.next(bc(t))}))},e.pc=function(e){var t=this;!function(e,t){e.J.push(t),Ec(e,e.i.then((function(){!e.l&&B(e.J,t)&&e.W!==e.getUid()&&(e.W=e.getUid(),t(wc(e)))})))}(this,(function(){e.next(bc(t))}))},e.xc=function(e,t,n){var r=this;return this.ga&&Promise.resolve().then((function(){y(e)?e(bc(r)):y(e.next)&&e.next(bc(r))})),this.Ub(e,t,n)},e.wc=function(e,t,n){var r=this;return this.ga&&Promise.resolve().then((function(){r.W=r.getUid(),y(e)?e(bc(r)):y(e.next)&&e.next(bc(r))})),this.Vb(e,t,n)},e.cc=function(e){var t=this;return Ec(this,this.i.then((function(){return bc(t)?bc(t).G(e).then((function(e){return{accessToken:e}})):null})))},e.Hc=function(e){var t=this;return this.i.then((function(){return vc(t,Sa(t.b,ba,{token:e}))})).then((function(e){var n=e.user;return Bu(n,"isAnonymous",!1),t.aa(n),e}))},e.Ic=function(e,t){var n=this;return this.i.then((function(){return vc(n,Sa(n.b,wa,{email:e,password:t}))}))},e.Xb=function(e,t){var n=this;return this.i.then((function(){return vc(n,Sa(n.b,ea,{email:e,password:t}))}))},e.Sa=function(e){var t=this;return this.i.then((function(){return vc(t,e.na(t.b))}))},e.Gc=function(e){return Lr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Sa(e)},e.ob=function(){var e=this;return this.i.then((function(){var t=bc(e);if(t&&t.isAnonymous){var n=jr({providerId:null,isNewUser:!1});return jr({user:t,credential:null,additionalUserInfo:n,operationType:"signIn"})}return vc(e,e.b.ob()).then((function(t){var n=t.user;return Bu(n,"isAnonymous",!0),e.aa(n),t}))}))},e.getUid=function(){return bc(this)&&bc(this).uid||null},e.Wb=function(e){this.addAuthTokenListener(e),this.o++,0<this.o&&bc(this)&&Ru(bc(this))},e.Ec=function(e){var t=this;V(this.m,(function(n){n==e&&t.o--})),0>this.o&&(this.o=0),0==this.o&&bc(this)&&Ou(bc(this)),this.removeAuthTokenListener(e)},e.addAuthTokenListener=function(e){var t=this;this.m.push(e),Ec(this,this.i.then((function(){t.l||B(t.m,e)&&e(wc(t))})))},e.removeAuthTokenListener=function(e){H(this.m,(function(t){return t==e}))},e.delete=function(){this.l=!0;for(var e=0;e<this.O.length;e++)this.O[e].cancel("app-deleted");return this.O=[],this.h&&(e=this.h).b.removeListener(sc("local"),e.a,this.ma),this.a&&(eu(this.a,this),hu(this.a.b)),Promise.resolve()},e.$b=function(e){return Ec(this,function(e,t){return Sa(e,ta,{identifier:t,continueUri:wr()?Zn():"http://localhost"}).then((function(e){return e.signinMethods||[]}))}(this.b,e))},e.qc=function(e){return!!po(e)},e.lb=function(e,t){var n=this;return Ec(this,Xe().then((function(){var e=new ci(t);if(!e.c)throw new Xr("argument-error",pi+" must be true when sending sign in link to email");return bi(e)})).then((function(t){return n.b.lb(e,t)})).then((function(){})))},e.Uc=function(e){return this.Ma(e).then((function(e){return e.data.email}))},e.ab=function(e,t){return Ec(this,this.b.ab(e,t).then((function(){})))},e.Ma=function(e){return Ec(this,this.b.Ma(e).then((function(e){return new Br(e)})))},e.Ya=function(e){return Ec(this,this.b.Ya(e).then((function(){})))},e.kb=function(e,t){var n=this;return Ec(this,Xe().then((function(){return void 0===t||Q(t)?{}:bi(new ci(t))})).then((function(t){return n.b.kb(e,t)})).then((function(){})))},e.Kc=function(e,t){return Ec(this,yu(this,e,t,E(this.Sa,this)))},e.Jc=function(e,t){var n=this;return Ec(this,Xe().then((function(){var r=t||Zn(),i=ho(e,r);if(!(r=po(r)))throw new Xr("argument-error","Invalid email link!");if(r.tenantId!==n.R())throw new Xr("tenant-id-mismatch");return n.Sa(i)})))},Tc.prototype.render=function(){},Tc.prototype.reset=function(){},Tc.prototype.getResponse=function(){},Tc.prototype.execute=function(){};var Ic=null;function kc(e,t){return(t=Ac(t))&&e.a[t]||null}function Ac(e){return(e=void 0===e?1e12:e)?e.toString():null}function Nc(e,t){this.g=!1,this.c=t,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=Wn(e);var n=this;this.i=function(){n.execute()},this.h?this.execute():Gt(this.f,"click",this.i)}function Dc(e){if(e.g)throw Error("reCAPTCHA mock was already deleted!")}function Rc(){}Sc.prototype.render=function(e,t){return this.a[this.b.toString()]=new Nc(e,t),this.b++},Sc.prototype.reset=function(e){var t=kc(this,e);e=Ac(e),t&&e&&(t.delete(),delete this.a[e])},Sc.prototype.getResponse=function(e){return(e=kc(this,e))?e.getResponse():null},Sc.prototype.execute=function(e){(e=kc(this,e))&&e.execute()},Nc.prototype.getResponse=function(){return Dc(this),this.b},Nc.prototype.execute=function(){Dc(this);var e=this;this.a||(this.a=setTimeout((function(){e.b=function(){for(var e=50,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}();var t=e.c.callback,n=e.c["expired-callback"];if(t)try{t(e.b)}catch(r){}e.a=setTimeout((function(){if(e.a=null,e.b=null,n)try{n()}catch(r){}e.h&&e.execute()}),6e4)}),500))},Nc.prototype.delete=function(){Dc(this),this.g=!0,clearTimeout(this.a),this.a=null,Yt(this.f,"click",this.i)},Rc.prototype.g=function(){return Ic||(Ic=new Sc),Xe(Ic)},Rc.prototype.c=function(){};var Oc=null;function Pc(){this.b=a.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var xc=new J(te,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Mc=new Dr(3e4,6e4);Pc.prototype.g=function(e){var t=this;return new He((function(n,r){var i=setTimeout((function(){r(new Xr("network-request-failed"))}),Mc.get());!a.grecaptcha||e!==t.f&&!t.b?(a[t.a]=function(){if(a.grecaptcha){t.f=e;var o=a.grecaptcha.render;a.grecaptcha.render=function(e,n){return e=o(e,n),t.b++,e},clearTimeout(i),n(a.grecaptcha)}else clearTimeout(i),r(new Xr("internal-error"));delete a[t.a]},Xe(ws(oe(xc,{onload:t.a,hl:e||""}))).s((function(){clearTimeout(i),r(new Xr("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(a.grecaptcha))}))},Pc.prototype.c=function(){this.b--};var Lc=null;function Fc(e,t,n,r,i,o,s){if(Ur(this,"type","recaptcha"),this.c=this.f=null,this.B=!1,this.u=t,this.g=null,s?(Oc||(Oc=new Rc),s=Oc):(Lc||(Lc=new Pc),s=Lc),this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[jc])throw new Xr("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[qc],!a.document)throw new Xr("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!Wn(t)||!this.i&&Wn(t).hasChildNodes())throw new Xr("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.o=new As(e,o||null,i||null),this.v=r||function(){return null};var l=this;this.l=[];var u=this.a[Uc];this.a[Uc]=function(e){if(Bc(l,e),"function"==typeof u)u(e);else if("string"==typeof u){var t=vr(u,a);"function"==typeof t&&t(e)}};var c=this.a[Vc];this.a[Vc]=function(){if(Bc(l,null),"function"==typeof c)c();else if("string"==typeof c){var e=vr(c,a);"function"==typeof e&&e()}}}var Uc="callback",Vc="expired-callback",jc="sitekey",qc="size";function Bc(e,t){for(var n=0;n<e.l.length;n++)try{e.l[n](t)}catch(r){}}function Wc(e,t){return e.h.push(t),t.ka((function(){W(e.h,t)})),t}function Hc(e){if(e.B)throw new Xr("internal-error","RecaptchaVerifier instance has been destroyed.")}function Kc(e,t,n){var r=!1;try{this.b=n||i.a.app()}catch(a){throw new Xr("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new Xr("invalid-api-key");n=this.b.options.apiKey;var o=this,s=null;try{s=this.b.auth().Ca()}catch(a){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(a){}s=i.a.SDK_VERSION?mr(i.a.SDK_VERSION,s):null,Fc.call(this,n,e,t,(function(){try{var e=o.b.auth().ha()}catch(t){e=null}return e}),s,Ai(Ii),r)}function zc(e,t,n,r){e:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<t.length;s++)if(t[s].optional)o=!0;else{if(o)throw new Xr("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=t.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=t[i].optional&&void 0===n[i],!t[i].N(n[i])&&!o){if(t=t[i],0>i||i>=Gc.length)throw new Xr("internal-error","Argument validator received an unsupported number of arguments.");n=Gc[i],r=(r?"":n+" argument ")+(t.name?'"'+t.name+'" ':"")+"must be "+t.M+".";break e}r=null}}if(r)throw new Xr("argument-error",e+" failed: "+r)}(e=Fc.prototype).Da=function(){var e=this;return this.f?this.f:this.f=Wc(this,Xe().then((function(){if(wr()&&!ur())return sr();throw new Xr("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return e.m.g(e.v())})).then((function(t){return e.g=t,Sa(e.o,ha,{})})).then((function(t){e.a[jc]=t.recaptchaSiteKey})).s((function(t){throw e.f=null,t})))},e.render=function(){Hc(this);var e=this;return Wc(this,this.Da().then((function(){if(null===e.c){var t=e.u;if(!e.i){var n=Wn(t);t=function(e,t,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!Bn&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',Ue(s.name),'"'),s.type){o.push(' type="',Ue(s.type),'"');var a={};X(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=i.createElement(o),s&&(l(s)?o.className=s:g(s)?o.className=s.join(" "):Hn(o,s)),2<r.length&&function(e,t,n){function r(n){n&&t.appendChild(l(n)?e.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];!m(o)||v(o)&&0<o.nodeType?r(o):V(zn(o)?z(o):o,r)}}(i,o,r),o}("DIV"),n.appendChild(t)}e.c=e.g.render(t,e.a)}return e.c})))},e.verify=function(){Hc(this);var e=this;return Wc(this,this.render().then((function(t){return new He((function(n){var r=e.g.getResponse(t);if(r)n(r);else{var i=function(t){t&&(function(e,t){H(e.l,(function(e){return e==t}))}(e,i),n(t))};e.l.push(i),e.i&&e.g.execute(e.c)}}))})))},e.reset=function(){Hc(this),null!==this.c&&this.g.reset(this.c)},e.clear=function(){Hc(this),this.B=!0,this.m.c();for(var e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){e=Wn(this.u);for(var t;t=e.firstChild;)e.removeChild(t)}},I(Kc,Fc);var Gc="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Qc(e,t){return{name:e||"",M:"a valid string",optional:!!t,N:l}}function $c(e,t){return{name:e||"",M:"a boolean",optional:!!t,N:u}}function Yc(e,t){return{name:e||"",M:"a valid object",optional:!!t,N:v}}function Xc(e,t){return{name:e||"",M:"a function",optional:!!t,N:y}}function Jc(e,t){return{name:e||"",M:"null",optional:!!t,N:f}}function Zc(e){return{name:e?e+"Credential":"credential",M:e?"a valid "+e+" credential":"a valid credential",optional:!1,N:function(t){return!!t&&!(!t.na||e&&t.providerId!==e)}}}function eh(){return{name:"applicationVerifier",M:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,N:function(e){return!!(e&&l(e.type)&&y(e.verify))}}}function th(e,t,n,r){return{name:n||"",M:e.M+" or "+t.M,optional:!!r,N:function(n){return e.N(n)||t.N(n)}}}function nh(e,t){for(var n in t){var r=t[n].name;e[r]=oh(r,e[n],t[n].j)}}function rh(e,t){for(var n in t){var r=t[n].name;r!==n&&Object.defineProperty(e,r,{get:T((function(e){return this[e]}),n),set:T((function(e,t,n,r){zc(e,[n],[r],!0),this[t]=r}),r,n,t[n].Za),enumerable:!0})}}function ih(e,t,n,r){e[t]=oh(t,n,r)}function oh(e,t,n){function r(){var e=Array.prototype.slice.call(arguments);return zc(o,n,e),t.apply(this,e)}if(!n)return t;var i,o=function(e){return(e=e.split("."))[e.length-1]}(e);for(i in t)r[i]=t[i];for(i in t.prototype)r.prototype[i]=t.prototype[i];return r}nh(hc.prototype,{Ya:{name:"applyActionCode",j:[Qc("code")]},Ma:{name:"checkActionCode",j:[Qc("code")]},ab:{name:"confirmPasswordReset",j:[Qc("code"),Qc("newPassword")]},Xb:{name:"createUserWithEmailAndPassword",j:[Qc("email"),Qc("password")]},$b:{name:"fetchSignInMethodsForEmail",j:[Qc("email")]},oa:{name:"getRedirectResult",j:[]},qc:{name:"isSignInWithEmailLink",j:[Qc("emailLink")]},wc:{name:"onAuthStateChanged",j:[th(Yc(),Xc(),"nextOrObserver"),Xc("opt_error",!0),Xc("opt_completed",!0)]},xc:{name:"onIdTokenChanged",j:[th(Yc(),Xc(),"nextOrObserver"),Xc("opt_error",!0),Xc("opt_completed",!0)]},kb:{name:"sendPasswordResetEmail",j:[Qc("email"),th(Yc("opt_actionCodeSettings",!0),Jc(null,!0),"opt_actionCodeSettings",!0)]},lb:{name:"sendSignInLinkToEmail",j:[Qc("email"),Yc("actionCodeSettings")]},mb:{name:"setPersistence",j:[Qc("persistence")]},Gc:{name:"signInAndRetrieveDataWithCredential",j:[Zc()]},ob:{name:"signInAnonymously",j:[]},Sa:{name:"signInWithCredential",j:[Zc()]},Hc:{name:"signInWithCustomToken",j:[Qc("token")]},Ic:{name:"signInWithEmailAndPassword",j:[Qc("email"),Qc("password")]},Jc:{name:"signInWithEmailLink",j:[Qc("email"),Qc("emailLink",!0)]},Kc:{name:"signInWithPhoneNumber",j:[Qc("phoneNumber"),eh()]},Lc:{name:"signInWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Mc:{name:"signInWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Rc:{name:"updateCurrentUser",j:[th({name:"user",M:"an instance of Firebase User",optional:!1,N:function(e){return!!(e&&e instanceof Iu)}},Jc(),"user")]},pb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Qc(null,!0)]},Tc:{name:"useDeviceLanguage",j:[]},Uc:{name:"verifyPasswordResetCode",j:[Qc("code")]}}),rh(hc.prototype,{lc:{name:"languageCode",Za:th(Qc(),Jc(),"languageCode")},ti:{name:"tenantId",Za:th(Qc(),Jc(),"tenantId")}}),(hc.Persistence=_l).LOCAL="local",hc.Persistence.SESSION="session",hc.Persistence.NONE="none",nh(Iu.prototype,{delete:{name:"delete",j:[]},dc:{name:"getIdTokenResult",j:[$c("opt_forceRefresh",!0)]},G:{name:"getIdToken",j:[$c("opt_forceRefresh",!0)]},rc:{name:"linkAndRetrieveDataWithCredential",j:[Zc()]},fb:{name:"linkWithCredential",j:[Zc()]},sc:{name:"linkWithPhoneNumber",j:[Qc("phoneNumber"),eh()]},tc:{name:"linkWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},uc:{name:"linkWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Ac:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Zc()]},hb:{name:"reauthenticateWithCredential",j:[Zc()]},Bc:{name:"reauthenticateWithPhoneNumber",j:[Qc("phoneNumber"),eh()]},Cc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Dc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},jb:{name:"sendEmailVerification",j:[th(Yc("opt_actionCodeSettings",!0),Jc(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Qc(null,!0)]},Qc:{name:"unlink",j:[Qc("provider")]},rb:{name:"updateEmail",j:[Qc("email")]},sb:{name:"updatePassword",j:[Qc("password")]},Sc:{name:"updatePhoneNumber",j:[Zc("phone")]},tb:{name:"updateProfile",j:[Yc("profile")]}}),nh(Sc.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),nh(Tc.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),nh(He.prototype,{ka:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),rh(gu.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",Za:$c("appVerificationDisabledForTesting")}}),nh(mu.prototype,{confirm:{name:"confirm",j:[Qc("verificationCode")]}}),ih(Wi,"fromJSON",(function(e){e=l(e)?JSON.parse(e):e;for(var t,n=[Yi,uo,go,Gi],r=0;r<n.length;r++)if(t=n[r](e))return t;return null}),[th(Qc(),Yc(),"json")]),ih(co,"credential",(function(e,t){return new lo(e,t)}),[Qc("email"),Qc("password")]),nh(lo.prototype,{A:{name:"toJSON",j:[Qc(null,!0)]}}),nh(eo.prototype,{ya:{name:"addScope",j:[Qc("scope")]},Ga:{name:"setCustomParameters",j:[Yc("customOAuthParameters")]}}),ih(eo,"credential",to,[th(Qc(),Yc(),"token")]),ih(co,"credentialWithLink",ho,[Qc("email"),Qc("emailLink")]),nh(no.prototype,{ya:{name:"addScope",j:[Qc("scope")]},Ga:{name:"setCustomParameters",j:[Yc("customOAuthParameters")]}}),ih(no,"credential",ro,[th(Qc(),Yc(),"token")]),nh(io.prototype,{ya:{name:"addScope",j:[Qc("scope")]},Ga:{name:"setCustomParameters",j:[Yc("customOAuthParameters")]}}),ih(io,"credential",oo,[th(Qc(),th(Yc(),Jc()),"idToken"),th(Qc(),Jc(),"accessToken",!0)]),nh(so.prototype,{Ga:{name:"setCustomParameters",j:[Yc("customOAuthParameters")]}}),ih(so,"credential",ao,[th(Qc(),Yc(),"token"),Qc("secret",!0)]),nh(Zi.prototype,{ya:{name:"addScope",j:[Qc("scope")]},credential:{name:"credential",j:[th(Qc(),th(Yc(),Jc()),"optionsOrIdToken"),th(Qc(),Jc(),"accessToken",!0)]},Ga:{name:"setCustomParameters",j:[Yc("customOAuthParameters")]}}),nh(Qi.prototype,{A:{name:"toJSON",j:[Qc(null,!0)]}}),nh(Ki.prototype,{A:{name:"toJSON",j:[Qc(null,!0)]}}),ih(yo,"credential",vo,[Qc("verificationId"),Qc("verificationCode")]),nh(yo.prototype,{Wa:{name:"verifyPhoneNumber",j:[Qc("phoneNumber"),eh()]}}),nh(fo.prototype,{A:{name:"toJSON",j:[Qc(null,!0)]}}),nh(Xr.prototype,{toJSON:{name:"toJSON",j:[Qc(null,!0)]}}),nh(ko.prototype,{toJSON:{name:"toJSON",j:[Qc(null,!0)]}}),nh(Io.prototype,{toJSON:{name:"toJSON",j:[Qc(null,!0)]}}),nh(Kc.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),ih(ti,"parseLink",ui,[Qc("link")]),function(){if(void 0===i.a||!i.a.INTERNAL||!i.a.INTERNAL.registerService)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var e={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Wr,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:hc,AuthCredential:Wi,Error:Xr};ih(e,"EmailAuthProvider",co,[]),ih(e,"FacebookAuthProvider",eo,[]),ih(e,"GithubAuthProvider",no,[]),ih(e,"GoogleAuthProvider",io,[]),ih(e,"TwitterAuthProvider",so,[]),ih(e,"OAuthProvider",Zi,[Qc("providerId")]),ih(e,"SAMLAuthProvider",Ji,[Qc("providerId")]),ih(e,"PhoneAuthProvider",yo,[{name:"auth",M:"an instance of Firebase Auth",optional:!0,N:function(e){return!!(e&&e instanceof hc)}}]),ih(e,"RecaptchaVerifier",Kc,[th(Qc(),{name:"",M:"an HTML element",optional:!1,N:function(e){return!!(e&&e instanceof Element)}},"recaptchaContainer"),Yc("recaptchaParameters",!0),{name:"app",M:"an instance of Firebase App",optional:!0,N:function(e){return!!(e&&e instanceof i.a.app.App)}}]),ih(e,"ActionCodeURL",ti,[]),i.a.INTERNAL.registerService("auth",(function(e,t){return t({INTERNAL:{getUid:E((e=new hc(e)).getUid,e),getToken:E(e.cc,e),addAuthTokenListener:E(e.Wb,e),removeAuthTokenListener:E(e.Ec,e)}}),e}),e,(function(e,t){if("create"===e)try{t.auth()}catch(n){}})),i.a.INTERNAL.extendNamespace({User:Iu})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},wj3C:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n("mrSG"),o=n("zVF4"),s=n("q/0M"),a=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r),l=new o.ErrorFactory("app","Firebase",a),u="[DEFAULT]",c=function(){function e(e,t,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.services_={},this.tokenListeners_=[],this.analyticsEventRequests_=[],this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=o.deepCopy(e);var i=this;this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(e){r.tokenListeners_.push(e),setTimeout((function(){return e(null)}),0)},removeAuthTokenListener:function(e){r.tokenListeners_=r.tokenListeners_.filter((function(t){return t!==e}))},analytics:{logEvent:function(){i.analyticsEventRequests_.push(arguments)}}}}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise((function(t){e.checkDestroyed_(),t()})).then((function(){e.firebase_.INTERNAL.removeApp(e.name_);for(var t=[],n=0,r=Object.keys(e.services_);n<r.length;n++)for(var i=r[n],o=0,s=Object.keys(e.services_[i]);o<s.length;o++)t.push(e.services_[i][s[o]]);return Promise.all(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()})))})).then((function(){e.isDeleted_=!0,e.services_={}}))},e.prototype._getService=function(e,t){if(void 0===t&&(t=u),this.checkDestroyed_(),this.services_[e]||(this.services_[e]={}),!this.services_[e][t]){var n=t!==u?t:void 0,r=this.firebase_.INTERNAL.factories[e](this,this.extendApp.bind(this),n);this.services_[e][t]=r}return this.services_[e][t]},e.prototype._removeServiceInstance=function(e,t){void 0===t&&(t=u),this.services_[e]&&this.services_[e][t]&&delete this.services_[e][t]},e.prototype.extendApp=function(e){if(o.deepExtend(this,e),e.INTERNAL){if(e.INTERNAL.addAuthTokenListener){for(var t=0,n=this.tokenListeners_;t<n.length;t++)this.INTERNAL.addAuthTokenListener(n[t]);this.tokenListeners_=[]}if(e.INTERNAL.analytics){for(var r=0,i=this.analyticsEventRequests_;r<i.length;r++)this.INTERNAL.analytics.logEvent.apply(void 0,i[r]);this.analyticsEventRequests_=[]}}},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},e}();c.prototype.name&&c.prototype.options||c.prototype.delete||console.log("dc");var h=new s.Logger("@firebase/app");if(o.isBrowser()&&void 0!==self.firebase){h.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var d=self.firebase.SDK_VERSION;d&&d.indexOf("LITE")>=0&&h.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var p=function e(){var t=function(e){var t={},n={},r={},i={__esModule:!0,initializeApp:function(n,r){void 0===r&&(r={}),"object"==typeof r&&null!==r||(r={name:r});var s=r;void 0===s.name&&(s.name=u);var a=s.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(o.contains(t,a))throw l.create("duplicate-app",{appName:a});var h=new e(n,s,i);return t[a]=h,c(h,"create"),h},app:s,apps:null,SDK_VERSION:"7.4.0",INTERNAL:{registerService:function(t,u,c,d,p){if(void 0===p&&(p=!1),n[t])return h.debug("There were multiple attempts to register service "+t+"."),i[t];function f(e){if(void 0===e&&(e=s()),"function"!=typeof e[t])throw l.create("invalid-app-argument",{appName:t});return e[t]()}return n[t]=u,d&&(r[t]=d,a().forEach((function(e){d("create",e)}))),void 0!==c&&o.deepExtend(f,c),i[t]=f,e.prototype[t]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=this._getService.bind(this,t);return r.apply(this,p?e:[])},f},removeApp:function(e){c(t[e],"delete"),delete t[e]},factories:n,useAsService:d}};function s(e){if(!o.contains(t,e=e||u))throw l.create("no-app",{appName:e});return t[e]}function a(){return Object.keys(t).map((function(e){return t[e]}))}function c(e,t){for(var i=0,o=Object.keys(n);i<o.length;i++){var s=d(0,o[i]);if(null===s)return;r[s]&&r[s](t,e)}}function d(e,t){return"serverAuth"===t?null:t}return i.default=i,Object.defineProperty(i,"apps",{get:a}),s.App=e,i}(c);return t.INTERNAL=i.__assign(i.__assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){o.deepExtend(t,e)},createSubscribe:o.createSubscribe,ErrorFactory:o.ErrorFactory,deepExtend:o.deepExtend}),t}(),f=p.initializeApp;p.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o.isNode()&&h.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),f.apply(void 0,e)};var g=p;t.default=g,t.firebase=g},x7I3:function(e,t,n){"use strict";n.r(t),n.d(t,"ErrorCode",(function(){return ar})),n.d(t,"EventType",(function(){return lr})),n.d(t,"WebChannel",(function(){return ur})),n.d(t,"XhrIo",(function(){return cr})),n.d(t,"createWebChannelTransport",(function(){return sr}));var r,i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},o=o||{},s=i;function a(e){return"string"==typeof e}function l(e){return"number"==typeof e}function u(e,t){e=e.split("."),t=t||s;for(var n=0;n<e.length;n++)if(null==(t=t[e[n]]))return null;return t}function c(){}function h(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t}function d(e){return"array"==h(e)}function p(e){var t=h(e);return"array"==t||"object"==t&&"number"==typeof e.length}function f(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var g="closure_uid_"+(1e9*Math.random()>>>0),m=0;function y(e,t,n){return e.call.apply(e.bind,arguments)}function v(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function _(e,t,n){return(_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:v).apply(null,arguments)}function b(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var w=Date.now||function(){return+new Date};function C(e,t){function n(){}n.prototype=t.prototype,e.N=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.yb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function E(){this.j=this.j,this.i=this.i}E.prototype.j=!1,E.prototype.la=function(){!this.j&&(this.j=!0,this.G(),0)&&(this[g]||(this[g]=++m))},E.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var T=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(a(e))return a(t)&&1==t.length?e.indexOf(t,0):-1;for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},S=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=a(e)?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};function I(e){return Array.prototype.concat.apply([],arguments)}function k(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function A(e){return/^[\s\xa0]*$/.test(e)}var N,D=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function R(e,t){return-1!=e.indexOf(t)}function O(e,t){return e<t?-1:e>t?1:0}e:{var P=s.navigator;if(P){var x=P.userAgent;if(x){N=x;break e}}N=""}function M(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function L(e){var t,n={};for(t in e)n[t]=e[t];return n}var F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<F.length;o++)n=F[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function V(e){return V[" "](e),e}V[" "]=c;var j,q,B=R(N,"Opera"),W=R(N,"Trident")||R(N,"MSIE"),H=R(N,"Edge"),K=H||W,z=R(N,"Gecko")&&!(R(N.toLowerCase(),"webkit")&&!R(N,"Edge"))&&!(R(N,"Trident")||R(N,"MSIE"))&&!R(N,"Edge"),G=R(N.toLowerCase(),"webkit")&&!R(N,"Edge");function Q(){var e=s.document;return e?e.documentMode:void 0}e:{var $="",Y=(q=N,z?/rv:([^\);]+)(\)|;)/.exec(q):H?/Edge\/([\d\.]+)/.exec(q):W?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(q):G?/WebKit\/(\S+)/.exec(q):B?/(?:Version)[ \/]?(\S+)/.exec(q):void 0);if(Y&&($=Y?Y[1]:""),W){var X=Q();if(null!=X&&X>parseFloat($)){j=String(X);break e}}j=$}var J,Z={};function ee(e){return function(e,t){var n=Z;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t()}(e,(function(){for(var t=0,n=D(String(j)).split("."),r=D(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;t=O(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||O(0==s[2].length,0==a[2].length)||O(s[2],a[2]),s=s[3],a=a[3]}while(0==t)}return 0<=t}))}var te=s.document;J=te&&W?Q()||("CSS1Compat"==te.compatMode?parseInt(j,10):5):void 0;var ne=!W||9<=Number(J),re=W&&!ee("9"),ie=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{s.addEventListener("test",c,t),s.removeEventListener("test",c,t)}catch(n){}return e}();function oe(e,t){this.type=e,this.a=this.target=t,this.Ja=!0}function se(e,t){if(oe.call(this,e?e.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.a=t,t=e.relatedTarget){if(z){e:{try{V(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=a(e.pointerType)?e.pointerType:ae[e.pointerType]||"",this.c=e,e.defaultPrevented&&this.b()}}oe.prototype.b=function(){this.Ja=!1},C(se,oe);var ae={2:"touch",3:"pen",4:"mouse"};se.prototype.b=function(){se.N.b.call(this);var e=this.c;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,re)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(t){}};var le="closure_listenable_"+(1e6*Math.random()|0),ue=0;function ce(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.da=i,this.key=++ue,this.X=this.Z=!1}function he(e){e.X=!0,e.listener=null,e.proxy=null,e.src=null,e.da=null}function de(e){this.src=e,this.a={},this.b=0}function pe(e,t){var n=t.type;if(n in e.a){var r,i=e.a[n],o=T(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(he(t),0==e.a[n].length&&(delete e.a[n],e.b--))}}function fe(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.X&&o.listener==t&&o.capture==!!n&&o.da==r)return i}return-1}de.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var s=fe(e,t,r,i);return-1<s?(t=e[s],n||(t.Z=!1)):((t=new ce(t,this.src,o,!!r,i)).Z=n,e.push(t)),t};var ge="closure_lm_"+(1e6*Math.random()|0),me={};function ye(e,t,n,r,i){if(r&&r.once)return function e(t,n,r,i,o){if(d(n)){for(var s=0;s<n.length;s++)e(t,n[s],r,i,o);return null}return r=Te(r),t&&t[le]?t.Ba(n,r,f(i)?!!i.capture:!!i,o):ve(t,n,r,!0,i,o)}(e,t,n,r,i);if(d(t)){for(var o=0;o<t.length;o++)ye(e,t[o],n,r,i);return null}return n=Te(n),e&&e[le]?e.Aa(t,n,f(r)?!!r.capture:!!r,i):ve(e,t,n,!1,r,i)}function ve(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var s=f(i)?!!i.capture:!!i;if(s&&!ne)return null;var a=Ce(e);if(a||(e[ge]=a=new de(e)),(n=a.add(t,n,r,s,o)).proxy)return n;if(r=function(){var e=we,t=ne?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)ie||(i=s),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(be(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function _e(e){if(!l(e)&&e&&!e.X){var t=e.src;if(t&&t[le])pe(t.c,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(be(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Ce(t))?(pe(n,e),0==n.b&&(n.src=null,t[ge]=null)):he(e)}}}function be(e){return e in me?me[e]:me[e]="on"+e}function we(e,t){return!!e.X||function(e,t){var n=e.listener,r=e.da||e.src;return e.Z&&_e(e),n.call(r,t)}(e,ne?new se(t,this):t=new se(t||u("window.event"),this))}function Ce(e){return(e=e[ge])instanceof de?e:null}var Ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function Te(e){return"function"==h(e)?e:(e[Ee]||(e[Ee]=function(t){return e.handleEvent(t)}),e[Ee])}function Se(){E.call(this),this.c=new de(this),this.J=this,this.B=null}function Ie(e,t,n,r){if(!(t=e.c.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var s=t[o];if(s&&!s.X&&s.capture==n){var a=s.listener,l=s.da||s.src;s.Z&&pe(e.c,s),i=!1!==a.call(l,r)&&i}}return i&&0!=r.Ja}C(Se,E),Se.prototype[le]=!0,(r=Se.prototype).addEventListener=function(e,t,n,r){ye(this,e,t,n,r)},r.removeEventListener=function(e,t,n,r){!function e(t,n,r,i,o){if(d(n))for(var s=0;s<n.length;s++)e(t,n[s],r,i,o);else i=f(i)?!!i.capture:!!i,r=Te(r),t&&t[le]?(t=t.c,(n=String(n).toString())in t.a&&-1<(r=fe(s=t.a[n],r,i,o))&&(he(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete t.a[n],t.b--))):t&&(t=Ce(t))&&(n=t.a[n.toString()],t=-1,n&&(t=fe(n,r,i,o)),(r=-1<t?n[t]:null)&&_e(r))}(this,e,t,n,r)},r.dispatchEvent=function(e){var t,n=this.B;if(n)for(t=[];n;n=n.B)t.push(n);n=this.J;var r=e.type||e;if(a(e))e=new oe(e,n);else if(e instanceof oe)e.target=e.target||n;else{var i=e;U(e=new oe(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var s=e.a=t[o];i=Ie(s,r,!0,e)&&i}if(i=Ie(s=e.a=n,r,!0,e)&&i,i=Ie(s,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=Ie(s=e.a=t[o],r,!1,e)&&i;return i},r.G=function(){if(Se.N.G.call(this),this.c){var e,t=this.c;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)he(n[r]);delete t.a[e],t.b--}}this.B=null},r.Aa=function(e,t,n,r){return this.c.add(String(e),t,!1,n,r)},r.Ba=function(e,t,n,r){return this.c.add(String(e),t,!0,n,r)};var ke=s.JSON.stringify;function Ae(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function Ne(){this.b=this.a=null}Ae.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var De,Re=new Ae((function(){return new Pe}),(function(e){e.reset()}));function Oe(){var e=Fe,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function Pe(){this.next=this.b=this.a=null}function xe(e){s.setTimeout((function(){throw e}),0)}function Me(e,t){De||function(){var e=s.Promise.resolve(void 0);De=function(){e.then(Ue)}}(),Le||(De(),Le=!0),Fe.add(e,t)}Ne.prototype.add=function(e,t){var n=Re.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},Pe.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},Pe.prototype.reset=function(){this.next=this.b=this.a=null};var Le=!1,Fe=new Ne;function Ue(){for(var e;e=Oe();){try{e.a.call(e.b)}catch(n){xe(n)}var t=Re;t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}Le=!1}function Ve(e,t){Se.call(this),this.b=e||1,this.a=t||s,this.f=_(this.gb,this),this.g=w()}function je(e){e.ba=!1,e.L&&(e.a.clearTimeout(e.L),e.L=null)}function qe(e,t,n){if("function"==h(e))n&&(e=_(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=_(e.handleEvent,e)}return 2147483647<Number(t)?-1:s.setTimeout(e,t||0)}function Be(e,t,n){E.call(this),this.f=null!=n?_(e,n):e,this.c=t,this.b=_(this.ab,this),this.a=[]}function We(e){e.U=qe(e.b,e.c),e.f.apply(null,e.a)}function He(e){E.call(this),this.b=e,this.a={}}C(Ve,Se),(r=Ve.prototype).ba=!1,r.L=null,r.gb=function(){if(this.ba){var e=w()-this.g;0<e&&e<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-e):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(je(this),this.start()))}},r.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=w())},r.G=function(){Ve.N.G.call(this),je(this),delete this.a},C(Be,E),(r=Be.prototype).ea=!1,r.U=null,r.Ua=function(e){this.a=arguments,this.U?this.ea=!0:We(this)},r.G=function(){Be.N.G.call(this),this.U&&(s.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},r.ab=function(){this.U=null,this.ea&&(this.ea=!1,We(this))},C(He,E);var Ke=[];function ze(e,t,n,r){d(n)||(n&&(Ke[0]=n.toString()),n=Ke);for(var i=0;i<n.length;i++){var o=ye(t,n[i],r||e.handleEvent,!1,e.b||e);if(!o)break;e.a[o.key]=o}}function Ge(e){M(e.a,(function(e,t){this.a.hasOwnProperty(t)&&_e(e)}),e),e.a={}}function Qe(){}He.prototype.G=function(){He.N.G.call(this),Ge(this)},He.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $e=new Se;function Ye(e){oe.call(this,"serverreachability",e)}function Xe(e){$e.dispatchEvent(new Ye($e,e))}function Je(e){oe.call(this,"statevent",e)}function Ze(e){$e.dispatchEvent(new Je($e,e))}function et(e){oe.call(this,"timingevent",e)}function tt(e,t){if("function"!=h(e))throw Error("Fn must not be null and must be a function");return s.setTimeout((function(){e()}),t)}C(Ye,oe),C(Je,oe),C(et,oe);var nt={NO_ERROR:0,hb:1,ob:2,nb:3,kb:4,mb:5,pb:6,Ma:7,TIMEOUT:8,sb:9},rt={jb:"complete",wb:"success",Na:"error",Ma:"abort",ub:"ready",vb:"readystatechange",TIMEOUT:"timeout",qb:"incrementaldata",tb:"progress",lb:"downloadprogress",xb:"uploadprogress"};function it(){}function ot(){}it.prototype.a=null;var st,at={OPEN:"a",ib:"b",Na:"c",rb:"d"};function lt(){oe.call(this,"d")}function ut(){oe.call(this,"c")}function ct(){}function ht(e,t,n){this.g=e,this.W=t,this.V=n||1,this.I=new He(this),this.O=dt,this.P=new Ve(e=K?125:void 0),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}C(lt,oe),C(ut,oe),C(ct,it),st=new ct;var dt=45e3,pt={},ft={};function gt(e,t,n){e.F=1,e.f=jt(Pt(t)),e.l=n,e.H=!0,yt(e,null)}function mt(e,t,n,r){e.F=1,e.f=jt(Pt(t)),e.l=null,e.H=n,yt(e,r)}function yt(e,t){e.v=w(),bt(e),e.D=Pt(e.f),Vt(e.D,"t",e.V),e.A=0,e.a=e.g.$(e.g.Y()?t:null),0<e.J&&(e.B=new Be(_(e.Ka,e,e.a),e.J)),ze(e.I,e.a,"readystatechange",e.eb),t=e.h?L(e.h):{},e.l?(e.w||(e.w="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.a.ca(e.D,e.w,e.l,t)):(e.w="GET",e.a.ca(e.D,e.w,null,t)),Xe(1)}function vt(e,t,n){for(var r=!0;!e.m&&e.A<n.length;){var i=_t(e,n);if(i==ft){4==t&&(e.c=4,Ze(14),r=!1);break}if(i==pt){e.c=4,Ze(15),r=!1;break}St(e,i)}4==t&&0==n.length&&(e.c=1,Ze(16),r=!1),e.b=e.b&&r,r||(Tt(e),Et(e))}function _t(e,t){var n=e.A,r=t.indexOf("\n",n);return-1==r?ft:(n=Number(t.substring(n,r)),isNaN(n)?pt:(r+=1)+n>t.length?ft:(t=t.substr(r,n),e.A=r+n,t))}function bt(e){e.R=w()+e.O,wt(e,e.O)}function wt(e,t){if(null!=e.i)throw Error("WatchDog timer not null");e.i=tt(_(e.bb,e),t)}function Ct(e){e.i&&(s.clearTimeout(e.i),e.i=null)}function Et(e){e.g.Da()||e.m||e.g.na(e)}function Tt(e){Ct(e);var t=e.B;t&&"function"==typeof t.la&&t.la(),e.B=null,je(e.P),Ge(e.I),e.a&&(t=e.a,e.a=null,t.abort(),t.la())}function St(e,t){try{e.g.Ga(e,t),Xe(4)}catch(n){}}function It(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(p(e)||a(e))S(e,t,void 0);else{if(e.K&&"function"==typeof e.K)var n=e.K();else if(e.C&&"function"==typeof e.C)n=void 0;else if(p(e)||a(e)){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.C&&"function"==typeof e.C)return e.C();if(a(e))return e.split("");if(p(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}}function kt(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof kt)for(n=e.K(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function At(e,t){Dt(e.b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&Nt(e))}function Nt(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];Dt(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)Dt(i,r=e.a[t])||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function Dt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(r=ht.prototype).setTimeout=function(e){this.O=e},r.eb=function(e){e=e.target;var t=this.B;t&&3==Pn(e)?t.Ua():this.Ka(e)},r.Ka=function(e){try{if(e==this.a)e:{var t=Pn(this.a),n=this.a.ya(),r=this.a.T();if(!(3>t||3==t&&!K&&!this.a.aa())){this.m||4!=t||7==n||Xe(8==n||0>=r?3:2),Ct(this);var i=this.a.T();this.o=i;var o=this.a.aa();if(this.b=200==i){if(this.S&&!this.s){t:{if(this.a){var s=xn(this.a,"X-HTTP-Initial-Response");if(s&&!A(s)){var a=s;break t}}a=null}if(!a){this.b=!1,this.c=3,Ze(12),Tt(this),Et(this);break e}this.s=!0,St(this,a)}this.H?(vt(this,t,o),K&&this.b&&3==t&&(ze(this.I,this.P,"tick",this.cb),this.P.start())):St(this,o),4==t&&Tt(this),this.b&&!this.m&&(4==t?this.g.na(this):(this.b=!1,bt(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.c=3,Ze(12)):(this.c=0,Ze(13)),Tt(this),Et(this)}}}catch(l){}},r.cb=function(){if(this.a){var e=Pn(this.a),t=this.a.aa();this.A<t.length&&(Ct(this),vt(this,e,t),this.b&&4!=e&&bt(this))}},r.cancel=function(){this.m=!0,Tt(this)},r.bb=function(){this.i=null;var e=w();0<=e-this.R?(2!=this.F&&(Xe(3),Ze(17)),Tt(this),this.c=2,Et(this)):wt(this,this.R-e)},(r=kt.prototype).C=function(){Nt(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},r.K=function(){return Nt(this),this.a.concat()},r.get=function(e,t){return Dt(this.b,e)?this.b[e]:t},r.set=function(e,t){Dt(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},r.forEach=function(e,t){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var Rt=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ot(e,t){var n;this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1,e instanceof Ot?(this.h=void 0!==t?t:e.h,xt(this,e.f),this.j=e.j,Mt(this,e.b),Lt(this,e.i),this.a=e.a,Ft(this,en(e.c)),this.g=e.g):e&&(n=String(e).match(Rt))?(this.h=!!t,xt(this,n[1]||"",!0),this.j=qt(n[2]||""),Mt(this,n[3]||"",!0),Lt(this,n[4]),this.a=qt(n[5]||"",!0),Ft(this,n[6]||"",!0),this.g=qt(n[7]||"")):(this.h=!!t,this.c=new $t(null,this.h))}function Pt(e){return new Ot(e)}function xt(e,t,n){e.f=n?qt(t,!0):t,e.f&&(e.f=e.f.replace(/:$/,""))}function Mt(e,t,n){e.b=n?qt(t,!0):t}function Lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.i=t}else e.i=null}function Ft(e,t,n){t instanceof $t?(e.c=t,function(e,t){t&&!e.f&&(Yt(e),e.c=null,e.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Xt(this,t),Zt(this,n,e))}),e)),e.f=t}(e.c,e.h)):(n||(t=Bt(t,Gt)),e.c=new $t(t,e.h))}function Ut(e,t,n){e.c.set(t,n)}function Vt(e,t,n){d(n)||(n=[String(n)]),Zt(e.c,t,n)}function jt(e){return Ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^w()).toString(36)),e}function qt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Bt(e,t,n){return a(e)?(e=encodeURI(e).replace(t,Wt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Wt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ot.prototype.toString=function(){var e=[],t=this.f;t&&e.push(Bt(t,Ht,!0),":");var n=this.b;return(n||"file"==t)&&(e.push("//"),(t=this.j)&&e.push(Bt(t,Ht,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&e.push(":",String(n))),(n=this.a)&&(this.b&&"/"!=n.charAt(0)&&e.push("/"),e.push(Bt(n,"/"==n.charAt(0)?zt:Kt,!0))),(n=this.c.toString())&&e.push("?",n),(n=this.g)&&e.push("#",Bt(n,Qt)),e.join("")},Ot.prototype.resolve=function(e){var t=Pt(this),n=!!e.f;n?xt(t,e.f):n=!!e.j,n?t.j=e.j:n=!!e.b,n?Mt(t,e.b):n=null!=e.i;var r=e.a;if(n)Lt(t,e.i);else if(n=!!e.a){if("/"!=r.charAt(0))if(this.b&&!this.a)r="/"+r;else{var i=t.a.lastIndexOf("/");-1!=i&&(r=t.a.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(R(i,"./")||R(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?t.a=r:n=""!==e.c.toString(),n?Ft(t,en(e.c)):n=!!e.g,n&&(t.g=e.g),t};var Ht=/[#\/\?@]/g,Kt=/[#\?:]/g,zt=/[#\?]/g,Gt=/[#\?@]/g,Qt=/#/g;function $t(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function Yt(e){e.a||(e.a=new kt,e.b=0,e.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.c,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Xt(e,t){Yt(e),t=tn(e,t),Dt(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,At(e.a,t))}function Jt(e,t){return Yt(e),t=tn(e,t),Dt(e.a.b,t)}function Zt(e,t,n){Xt(e,t),0<n.length&&(e.c=null,e.a.set(tn(e,t),k(n)),e.b+=n.length)}function en(e){var t=new $t;return t.c=e.c,e.a&&(t.a=new kt(e.a),t.b=e.b),t}function tn(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function nn(e){this.a=e,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function rn(e){var t=e.a.F.a;if(null!=t)Ze(4),t?(Ze(10),zn(e.a,e,!1)):(Ze(11),zn(e.a,e,!0));else{e.b=new ht(e,void 0,void 0),e.b.h=e.h,t=Xn(t=e.a,t.Y()?e.f:null,e.i),Ze(4),Vt(t,"TYPE","xmlhttp");var n=e.a.j,r=e.a.I;n&&r&&Ut(t,n,r),mt(e.b,t,!1,e.f)}}function on(){this.a=this.b=null}function sn(){this.a=new kt}function an(e){var t=typeof e;return"object"==t&&e||"function"==t?"o"+(e[g]||(e[g]=++m)):t.charAt(0)+e}function ln(e,t){this.b=e,this.a=t}function un(e){this.g=e||cn,e=s.PerformanceNavigationTiming?0<(e=s.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(s.ka&&s.ka.Ea&&s.ka.Ea()&&s.ka.Ea().zb),this.f=e?this.g:1,this.a=null,1<this.f&&(this.a=new sn),this.b=null,this.c=[]}(r=$t.prototype).add=function(e,t){Yt(this),this.c=null,e=tn(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},r.forEach=function(e,t){Yt(this),this.a.forEach((function(n,r){S(n,(function(n){e.call(t,n,r,this)}),this)}),this)},r.K=function(){Yt(this);for(var e=this.a.C(),t=this.a.K(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},r.C=function(e){Yt(this);var t=[];if(a(e))Jt(this,e)&&(t=I(t,this.a.get(tn(this,e))));else{e=this.a.C();for(var n=0;n<e.length;n++)t=I(t,e[n])}return t},r.set=function(e,t){return Yt(this),this.c=null,Jt(this,e=tn(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},r.get=function(e,t){return e&&0<(e=this.C(e)).length?String(e[0]):t},r.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.K(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.C(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),e.push(s)}}return this.c=e.join("&")},C((function(){}),(function(){})),(r=nn.prototype).M=null,r.$=function(e){return this.a.$(e)},r.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},r.Da=function(){return!1},r.Ga=function(e,t){if(this.c=e.o,0==this.M){if(!this.a.o&&(e=e.a)){var n=xn(e,"X-Client-Wire-Protocol");this.l=n||null,this.a.j&&(e=xn(e,"X-HTTP-Session-Id"))&&(this.a.I=e)}if(t){try{var r=this.a.ja.a.parse(t)}catch(i){return(t=this.a).m=this.c,void $n(t,2)}this.f=r[0]}else(t=this.a).m=this.c,$n(t,2)}else 1==this.M&&(this.g?Ze(6):"11111"==t?(Ze(5),this.g=!0,(!W||10<=Number(J))&&(this.c=200,this.b.cancel(),Ze(11),zn(this.a,this,!0))):(Ze(7),this.g=!1))},r.na=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,rn(this)):1==this.M&&(this.g?(Ze(11),zn(this.a,this,!0)):(Ze(10),zn(this.a,this,!1)));else{0==this.M?Ze(8):1==this.M&&Ze(9);var e=this.a;e.m=this.c,$n(e,2)}},r.Y=function(){return this.a.Y()},r.ma=function(){return this.a.ma()},sn.prototype.add=function(e){this.a.set(an(e),e)},sn.prototype.C=function(){return this.a.C()};var cn=10;function hn(e,t){!e.a&&(R(t,"spdy")||R(t,"quic")||R(t,"h2"))&&(e.f=e.g,e.a=new sn,e.b&&(gn(e,e.b),e.b=null))}function dn(e){return!!e.b||!!e.a&&e.a.a.c>=e.f}function pn(e){return e.b?1:e.a?e.a.a.c:0}function fn(e,t){return e.b?e=e.b==t:e.a?(t=an(t),e=Dt(e.a.a.b,t)):e=!1,e}function gn(e,t){e.a?e.a.add(t):e.b=t}function mn(e,t){var n;e.b&&e.b==t?e.b=null:((n=e.a)&&(n=an(t),n=Dt(e.a.a.b,n)),n&&At(e.a.a,an(t)))}function yn(e){if(null!=e.b)return e.c.concat(e.b.j);if(null!=e.a&&0!=e.a.a.c){var t=e.c;return S(e.a.C(),(function(e){t=t.concat(e.j)})),t}return k(e.c)}function vn(){}function _n(){this.a=new vn}function bn(e,t,n){var r=n||"";try{It(e,(function(e,n){var i=e;f(e)&&(i=ke(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function wn(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(o){}}un.prototype.cancel=function(){this.c=yn(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(S(this.a.C(),(function(e){e.cancel()})),function(e){e.b={},e.a.length=0,e.c=0}(this.a.a))},vn.prototype.stringify=function(e){return s.JSON.stringify(e,void 0)},vn.prototype.parse=function(e){return s.JSON.parse(e,void 0)};var Cn=s.JSON.parse;function En(e){Se.call(this),this.headers=new kt,this.H=e||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=Tn,this.D=this.F=!1}C(En,Se);var Tn="",Sn=/^https?$/i,In=["POST","PUT"];function kn(e){return"content-type"==e.toLowerCase()}function An(e,t){e.b=!1,e.a&&(e.g=!0,e.a.abort(),e.g=!1),e.f=t,e.h=5,Nn(e),Rn(e)}function Nn(e){e.v||(e.v=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function Dn(e){if(e.b&&void 0!==o&&(!e.s[1]||4!=Pn(e)||2!=e.T()))if(e.l&&4==Pn(e))qe(e.Fa,0,e);else if(e.dispatchEvent("readystatechange"),4==Pn(e)){e.b=!1;try{var t,n=e.T();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.A).match(Rt)[1]||null;if(!a&&s.self&&s.self.location){var l=s.self.location.protocol;a=l.substr(0,l.length-1)}i=!Sn.test(a?a.toLowerCase():"")}t=i}t?(e.dispatchEvent("complete"),e.dispatchEvent("success")):(e.h=6,e.f=e.za()+" ["+e.T()+"]",Nn(e))}finally{Rn(e)}}}function Rn(e,t){if(e.a){On(e);var n=e.a,r=e.s[0]?c:null;e.a=null,e.s=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){}}}function On(e){e.a&&e.D&&(e.a.ontimeout=null),e.m&&(s.clearTimeout(e.m),e.m=null)}function Pn(e){return e.a?e.a.readyState:0}function xn(e,t){return e.a?e.a.getResponseHeader(t):null}function Mn(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}if(r)return e;if(n=function(e){var t="";return M(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),a(e)){if(t=encodeURIComponent(String(t)),t+=n=null!=n?"="+encodeURIComponent(String(n)):""){if(0>(n=e.indexOf("#"))&&(n=e.length),0>(r=e.indexOf("?"))||r>n){r=n;var i=""}else i=e.substring(r+1,n);n=(e=[e.substr(0,r),i,e.substr(n)])[1],e[1]=t?n?n+"&"+t:t:n,e=e[0]+(e[1]?"?"+e[1]:"")+e[2]}return e}return Ut(e,t,n),e}function Ln(e){this.f=[],this.F=new on,this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Ra=this.P=0,this.Pa=!!u("internalChannelParams.failFast",e),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Oa=u("internalChannelParams.baseRetryDelayMs",e)||5e3,this.Sa=u("internalChannelParams.retryDelaySeedMs",e)||1e4,this.Qa=u("internalChannelParams.forwardChannelMaxRetries",e)||2,this.qa=u("internalChannelParams.forwardChannelRequestTimeoutMs",e)||2e4,this.La=e&&e.Ab||void 0,this.D=void 0,this.R=e&&e.supportsCrossDomainXhr||!1,this.H="",this.b=new un(e&&e.concurrentRequestLimit),this.ja=new _n,this.o=!e||void 0===e.backgroundChannelTest||e.backgroundChannelTest,(this.W=e&&e.fastHandshake||!1)&&!this.o&&(this.o=!0),e&&e.forceLongPolling&&(this.oa=!1),this.fa=void 0}function Fn(e){if(Un(e),3==e.u){var t=e.P++,n=Pt(e.B);Ut(n,"SID",e.H),Ut(n,"RID",t),Ut(n,"TYPE","terminate"),Bn(e,n),(t=new ht(e,t,void 0)).F=2,t.f=jt(Pt(n)),n=!1,s.navigator&&s.navigator.sendBeacon&&(n=s.navigator.sendBeacon(t.f.toString(),"")),!n&&s.Image&&((new Image).src=t.f,n=!0),n||(t.a=t.g.$(null),t.a.ca(t.f)),t.v=w(),bt(t)}Yn(e)}function Un(e){e.w&&(e.w.abort(),e.w=null),e.a&&(e.a.cancel(),e.a=null),e.l&&(s.clearTimeout(e.l),e.l=null),Gn(e),e.b.cancel(),e.h&&(l(e.h)&&s.clearTimeout(e.h),e.h=null)}function Vn(e,t){e.f.push(new ln(e.Ra++,t)),3==e.u&&jn(e)}function jn(e){dn(e.b)||e.h||(e.h=!0,Me(e.Ia,e),e.A=0)}function qn(e,t){var n;n=t?t.W:e.P++;var r=Pt(e.B);Ut(r,"SID",e.H),Ut(r,"RID",n),Ut(r,"AID",e.O),Bn(e,r),e.g&&e.i&&Mn(r,e.g,e.i),n=new ht(e,n,e.A+1),null===e.g&&(n.h=e.i),t&&(e.f=t.j.concat(e.f)),t=Wn(e,n,1e3),n.setTimeout(Math.round(.5*e.qa)+Math.round(.5*e.qa*Math.random())),gn(e.b,n),gt(n,r,t)}function Bn(e,t){e.c&&It({},(function(e,n){Ut(t,n,e)}))}function Wn(e,t,n){n=Math.min(e.f.length,n);var r=e.c?_(e.c.Ta,e.c,e):null;e:for(var i=e.f,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,l=0;l<n;l++){var u=i[l].b,c=i[l].a;if(0>(u-=o))o=Math.max(0,i[l].b-100),a=!1;else try{bn(c,s,"req"+u+"_")}catch(h){r&&r(c)}}if(a){r=s.join("&");break e}}return e=e.f.splice(0,n),t.j=e,r}function Hn(e){e.a||e.l||(e.S=1,Me(e.Ha,e),e.v=0)}function Kn(e){return!(e.a||e.l||3<=e.v||(e.S++,e.l=tt(_(e.Ha,e),Qn(e,e.v)),e.v++,0))}function zn(e,t,n){var r=t.l;r&&hn(e.b,r),e.ia=e.oa&&n,e.m=t.c,e.B=Xn(e,null,e.ha),jn(e)}function Gn(e){null!=e.s&&(s.clearTimeout(e.s),e.s=null)}function Qn(e,t){var n=e.Oa+Math.floor(Math.random()*e.Sa);return e.ma()||(n*=2),n*t}function $n(e,t){if(2==t){var n=null;e.c&&(n=null);var r=_(e.fb,e);n||(n=new Ot("//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||xt(n,"https"),jt(n)),function(e,t){var n=new Qe;if(s.Image){var r=new Image;r.onload=b(wn,n,r,"TestLoadImage: loaded",!0,t),r.onerror=b(wn,n,r,"TestLoadImage: error",!1,t),r.onabort=b(wn,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=b(wn,n,r,"TestLoadImage: timeout",!1,t),s.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Ze(2);e.u=0,e.c&&e.c.ta(t),Yn(e),Un(e)}function Yn(e){e.u=0,e.m=-1,e.c&&(0==yn(e.b).length&&0==e.f.length||(e.b.c.length=0,k(e.f),e.f.length=0),e.c.sa())}function Xn(e,t,n){var r=function(e){return e instanceof Ot?Pt(e):new Ot(e,void 0)}(n);if(""!=r.b)t&&Mt(r,t+"."+r.b),Lt(r,r.i);else{var i=s.location;r=function(e,t,n,r){var i=new Ot(null,void 0);return e&&xt(i,e),t&&Mt(i,t),n&&Lt(i,n),r&&(i.a=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.V&&M(e.V,(function(e,t){Ut(r,t,e)})),n=e.I,(t=e.j)&&n&&Ut(r,t,n),Ut(r,"VER",e.wa),Bn(e,r),r}function Jn(){}function Zn(){if(W&&!(10<=Number(J)))throw Error("Environmental error: no available transport.")}function er(e,t){Se.call(this),this.a=new Ln(t),this.g=e,this.m=t&&t.testUrl?t.testUrl:function(e){for(var t=arguments[0],n=1;n<arguments.length;n++){var r,i=arguments[n];0==i.lastIndexOf("/",0)?t=i:((r=""==t)||(r=0<=(r=t.length-1)&&t.indexOf("/",r)==r),t+=r?i:"/"+i)}return t}(this.g,"test"),this.b=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.a.i=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.xa&&(e?e["X-WebChannel-Client-Profile"]=t.xa:e={"X-WebChannel-Client-Profile":t.xa}),this.a.J=e,(e=t&&t.httpHeadersOverwriteParam)&&!A(e)&&(this.a.g=e),this.l=t&&t.supportsCrossDomainXhr||!1,this.h=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!A(t)&&(this.a.j=t,null!==(e=this.b)&&t in e&&t in(e=this.b)&&delete e[t]),this.f=new rr(this)}function tr(e){lt.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.c=e)?(e=this.c,this.data=null!==t&&e in t?t[e]:void 0):this.data=t}else this.data=e}function nr(){ut.call(this),this.status=1}function rr(e){this.a=e}(r=En.prototype).ca=function(e,t,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+e);t=t?t.toUpperCase():"GET",this.A=e,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(e){var t;return(t=e.a)||(t=e.a={}),t}(this.H?this.H:st),this.a.onreadystatechange=_(this.Fa,this);try{this.w=!0,this.a.open(t,String(e),!0),this.w=!1}catch(o){return void An(this,o)}e=n||"";var i=new kt(this.headers);r&&It(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=kn,n=e.length,r=a(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:a(e)?e.charAt(t):e[t]}(i.K()),n=s.FormData&&e instanceof s.FormData,!(0<=T(In,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.a.setRequestHeader(t,e)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{On(this),0<this.o&&((this.D=function(e){return W&&ee(9)&&l(e.timeout)&&void 0!==e.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=_(this.Ca,this)):this.m=qe(this.Ca,this.o,this)),this.l=!0,this.a.send(e),this.l=!1}catch(o){An(this,o)}},r.Ca=function(){void 0!==o&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},r.abort=function(e){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=e||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Rn(this))},r.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Rn(this,!0)),En.N.G.call(this)},r.Fa=function(){this.j||(this.w||this.l||this.g?Dn(this):this.$a())},r.$a=function(){Dn(this)},r.T=function(){try{return 2<Pn(this)?this.a.status:-1}catch(q){return-1}},r.za=function(){try{return 2<Pn(this)?this.a.statusText:""}catch(q){return""}},r.aa=function(){try{return this.a?this.a.responseText:""}catch(q){return""}},r.Va=function(e){if(this.a){var t=this.a.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Cn(t)}},r.ya=function(){return this.h},r.Ya=function(){return a(this.f)?this.f:String(this.f)},(r=Ln.prototype).wa=8,r.u=1,r.Da=function(){return 0==this.u},r.Ia=function(e){if(this.h)if(this.h=null,1==this.u){if(!e){this.P=Math.floor(1e5*Math.random());var t,n=new ht(this,e=this.P++,void 0),r=this.i;if(this.J&&(r?U(r=L(r),this.J):r=this.J),null===this.g&&(n.h=r),this.W)e:{for(var i=t=0;i<this.f.length;i++){var o=this.f[i];if(void 0===(o="__data__"in o.a&&a(o=o.a.__data__)?o.length:void 0))break;if(4096<(t+=o)){t=i;break e}if(4096===t||i===this.f.length-1){t=i+1;break e}}t=1e3}else t=1e3;t=Wn(this,n,t),Ut(i=Pt(this.B),"RID",e),Ut(i,"CVER",22),this.o&&this.j&&Ut(i,"X-HTTP-Session-Id",this.j),Bn(this,i),this.g&&r&&Mn(i,this.g,r),gn(this.b,n),this.W?(Ut(i,"$req",t),Ut(i,"SID","null"),n.S=!0,gt(n,i,null)):gt(n,i,t),this.u=2}}else 3==this.u&&(e?qn(this,e):0==this.f.length||dn(this.b)||qn(this))},r.Ha=function(){this.l=null,this.a=new ht(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var e=Pt(this.pa);Ut(e,"RID","rpc"),Ut(e,"SID",this.H),Ut(e,"CI",this.ia?"0":"1"),Ut(e,"AID",this.O),Bn(this,e),Ut(e,"TYPE","xmlhttp"),this.g&&this.i&&Mn(e,this.g,this.i),this.D&&this.a.setTimeout(this.D),mt(this.a,e,!0,this.ga)},r.Ga=function(e,t){if(0!=this.u&&(this.a==e||fn(this.b,e)))if(this.m=e.o,!e.s&&fn(this.b,e)&&3==this.u){try{var n=this.ja.a.parse(t)}catch(o){n=null}if(d(n)&&3==n.length){if(0==(t=n)[0]){e:if(!this.l){if(this.a){if(!(this.a.v+3e3<e.v))break e;Gn(this),this.a.cancel(),this.a=null}Kn(this),Ze(18)}}else this.ra=t[1],0<this.ra-this.O&&37500>t[2]&&this.ia&&0==this.v&&!this.s&&(this.s=tt(_(this.Za,this),6e3));if(1>=pn(this.b)&&this.fa){try{this.fa()}catch(o){}this.fa=void 0}}else $n(this,11)}else if((e.s||this.a==e)&&Gn(this),!A(t))for(t=n=this.ja.a.parse(t),n=0;n<t.length;n++){var r=t[n];if(this.O=r[0],r=r[1],2==this.u)if("c"==r[0]){this.H=r[1],this.ga=r[2];var i=r[3];null!=i&&(this.wa=i),null!=(r=r[5])&&l(r)&&0<r&&(this.D=1.5*r),this.o&&(r=e.a)&&((i=xn(r,"X-Client-Wire-Protocol"))&&hn(this.b,i),this.j&&(r=xn(r,"X-HTTP-Session-Id")))&&(this.I=r,Ut(this.B,this.j,r)),this.u=3,this.c&&this.c.va(),r=e,this.pa=Xn(this,this.Y()?this.ga:null,this.ha),r.s?(mn(this.b,r),(i=this.D)&&r.setTimeout(i),r.i&&(Ct(r),bt(r)),this.a=r):Hn(this),0<this.f.length&&jn(this)}else"stop"!=r[0]&&"close"!=r[0]||$n(this,7);else 3==this.u&&("stop"==r[0]||"close"==r[0]?"stop"==r[0]?$n(this,7):Fn(this):"noop"!=r[0]&&this.c&&this.c.ua(r),this.v=0)}},r.Za=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,Kn(this),Ze(19))},r.na=function(e){var t=null;if(this.a==e){Gn(this),this.a=null;var n=2}else{if(!fn(this.b,e))return;t=e.j,mn(this.b,e),n=1}if(this.m=e.o,0!=this.u)if(e.b)1==n?(t=w()-e.v,$e.dispatchEvent(new et($e,e.l?e.l.length:0,t,this.A)),jn(this)):Hn(this);else{var r=e.c;if(3==r||0==r&&0<this.m||!(1==n&&function(e,t){return!(pn(e.b)>=e.b.f-(e.h?1:0)||(e.h?(e.f=t.j.concat(e.f),0):1==e.u||2==e.u||e.A>=(e.Pa?0:e.Qa)||(e.h=tt(_(e.Ia,e,t),Qn(e,e.A)),e.A++,0)))}(this,e)||2==n&&Kn(this)))switch(t&&0<t.length&&(e=this.b,e.c=e.c.concat(t)),r){case 1:$n(this,5);break;case 4:$n(this,10);break;case 3:$n(this,6);break;default:$n(this,2)}}},r.fb=function(e){Ze(e?2:1)},r.$=function(e){if(e&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new En(this.La)).F=this.R,e},r.ma=function(){return!!this.c&&!0},r.Y=function(){return this.R},(r=Jn.prototype).va=function(){},r.ua=function(){},r.ta=function(){},r.sa=function(){},r.Ta=function(){},Zn.prototype.a=function(e,t){return new er(e,t)},C(er,Se),(r=er.prototype).addEventListener=function(e,t,n,r){er.N.addEventListener.call(this,e,t,n,r)},r.removeEventListener=function(e,t,n,r){er.N.removeEventListener.call(this,e,t,n,r)},r.Wa=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var e=this.a,t=this.m,n=this.g,r=this.b||void 0;Ze(0),e.ha=n,e.V=r||{},e.o&&(e.F.b=[],e.F.a=!1),e.w=new nn(e),null===e.g&&(e.w.h=e.i),n=t,e.g&&e.i&&(n=Mn(t,e.g,e.i)),(e=e.w).i=n,t=Xn(e.a,null,e.i),Ze(3),null!=(n=e.a.F.b)?(e.f=n[0],e.M=1,rn(e)):(Vt(t,"MODE","init"),!e.a.o&&e.a.j&&Vt(t,"X-HTTP-Session-Id",e.a.j),e.b=new ht(e,void 0,void 0),e.b.h=e.h,mt(e.b,t,!1,null),e.M=0)},r.close=function(){Fn(this.a)},r.Xa=function(e){if(a(e)){var t={};t.__data__=e,Vn(this.a,t)}else this.h?((t={}).__data__=ke(e),Vn(this.a,t)):Vn(this.a,e)},r.G=function(){this.a.c=null,delete this.f,Fn(this.a),delete this.a,er.N.G.call(this)},C(tr,lt),C(nr,ut),C(rr,Jn),rr.prototype.va=function(){this.a.dispatchEvent("a")},rr.prototype.ua=function(e){this.a.dispatchEvent(new tr(e))},rr.prototype.ta=function(e){this.a.dispatchEvent(new nr(e))},rr.prototype.sa=function(){this.a.dispatchEvent("b")};var ir=b((function(e,t){function n(){}n.prototype=e.prototype;var r=new n;return e.apply(r,Array.prototype.slice.call(arguments,1)),r}),Zn);Zn.prototype.createWebChannel=Zn.prototype.a,er.prototype.send=er.prototype.Xa,er.prototype.open=er.prototype.Wa,er.prototype.close=er.prototype.close,nt.NO_ERROR=0,nt.TIMEOUT=8,nt.HTTP_ERROR=6,rt.COMPLETE="complete",ot.EventType=at,at.OPEN="a",at.CLOSE="b",at.ERROR="c",at.MESSAGE="d",Se.prototype.listen=Se.prototype.Aa,En.prototype.listenOnce=En.prototype.Ba,En.prototype.getLastError=En.prototype.Ya,En.prototype.getLastErrorCode=En.prototype.ya,En.prototype.getStatus=En.prototype.T,En.prototype.getStatusText=En.prototype.za,En.prototype.getResponseJson=En.prototype.Va,En.prototype.getResponseText=En.prototype.aa,En.prototype.send=En.prototype.ca;var or={createWebChannelTransport:ir,ErrorCode:nt,EventType:rt,WebChannel:ot,XhrIo:En},sr=or.createWebChannelTransport,ar=or.ErrorCode,lr=or.EventType,ur=or.WebChannel,cr=or.XhrIo;t.default=or},zUnb:function(e,t,n){"use strict";function r(e){return"function"==typeof e}n.r(t);let i=!1;const o={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else i&&console.log("RxJS: Back to a better error behavior. Thank you. <3");i=e},get useDeprecatedSynchronousErrorHandling(){return i}};function s(e){setTimeout(()=>{throw e})}const a={closed:!0,next(e){},error(e){if(o.useDeprecatedSynchronousErrorHandling)throw e;s(e)},complete(){}},l=Array.isArray||(e=>e&&"number"==typeof e.length);function u(e){return null!==e&&"object"==typeof e}function c(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((e,t)=>`${t+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}c.prototype=Object.create(Error.prototype);const h=c;let d=(()=>{class e{constructor(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}unsubscribe(){let e,t=!1;if(this.closed)return;let{_parent:n,_parents:i,_unsubscribe:o,_subscriptions:s}=this;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;let a=-1,c=i?i.length:0;for(;n;)n.remove(this),n=++a<c&&i[a]||null;if(r(o))try{o.call(this)}catch(d){t=!0,e=d instanceof h?p(d.errors):[d]}if(l(s))for(a=-1,c=s.length;++a<c;){const n=s[a];if(u(n))try{n.unsubscribe()}catch(d){t=!0,e=e||[],d instanceof h?e=e.concat(p(d.errors)):e.push(d)}}if(t)throw new h(e)}add(t){let n=t;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){const t=n;(n=new e)._subscriptions=[t]}break;default:if(!t)return e.EMPTY;throw new Error("unrecognized teardown "+t+" added to Subscription.")}if(n._addParent(this)){const e=this._subscriptions;e?e.push(n):this._subscriptions=[n]}return n}remove(e){const t=this._subscriptions;if(t){const n=t.indexOf(e);-1!==n&&t.splice(n,1)}}_addParent(e){let{_parent:t,_parents:n}=this;return t!==e&&(t?n?-1===n.indexOf(e)&&(n.push(e),!0):(this._parents=[e],!0):(this._parent=e,!0))}}return e.EMPTY=function(e){return e.closed=!0,e}(new e),e})();function p(e){return e.reduce((e,t)=>e.concat(t instanceof h?t.errors:t),[])}const f="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class g extends d{constructor(e,t,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a;break;case 1:if(!e){this.destination=a;break}if("object"==typeof e){e instanceof g?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new m(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new m(this,e,t,n)}}[f](){return this}static create(e,t,n){const r=new g(e,t,n);return r.syncErrorThrowable=!1,r}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parent:e,_parents:t}=this;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=e,this._parents=t,this}}class m extends g{constructor(e,t,n,i){let o;super(),this._parentSubscriber=e;let s=this;r(t)?o=t:t&&(o=t.next,n=t.error,i=t.complete,t!==a&&(r((s=Object.create(t)).unsubscribe)&&this.add(s.unsubscribe.bind(s)),s.unsubscribe=this.unsubscribe.bind(this))),this._context=s,this._next=o,this._error=n,this._complete=i}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;o.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:n}=o;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):s(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;s(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);o.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),o.useDeprecatedSynchronousErrorHandling)throw n;s(n)}}__tryOrSetError(e,t,n){if(!o.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return o.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(s(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const y="function"==typeof Symbol&&Symbol.observable||"@@observable";function v(){}function _(...e){return b(e)}function b(e){return e?1===e.length?e[0]:function(t){return e.reduce((e,t)=>t(e),t)}:v}let w=(()=>{class e{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(t){const n=new e;return n.source=this,n.operator=t,n}subscribe(e,t,n){const{operator:r}=this,i=function(e,t,n){if(e){if(e instanceof g)return e;if(e[f])return e[f]()}return e||t||n?new g(e,t,n):new g(a)}(e,t,n);if(i.add(r?r.call(i,this.source):this.source||o.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),o.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}_trySubscribe(e){try{return this._subscribe(e)}catch(t){o.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){const{closed:t,destination:n,isStopped:r}=e;if(t||r)return!1;e=n&&n instanceof g?n:null}return!0}(e)?e.error(t):console.warn(t)}}forEach(e,t){return new(t=C(t))((t,n)=>{let r;r=this.subscribe(t=>{try{e(t)}catch(i){n(i),r&&r.unsubscribe()}},n,t)})}_subscribe(e){const{source:t}=this;return t&&t.subscribe(e)}[y](){return this}pipe(...e){return 0===e.length?this:b(e)(this)}toPromise(e){return new(e=C(e))((e,t)=>{let n;this.subscribe(e=>n=e,e=>t(e),()=>e(n))})}}return e.create=t=>new e(t),e})();function C(e){if(e||(e=o.Promise||Promise),!e)throw new Error("no Promise impl found");return e}function E(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}E.prototype=Object.create(Error.prototype);const T=E;class S extends d{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}class I extends g{constructor(e){super(e),this.destination=e}}let k=(()=>{class e extends w{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[f](){return new I(this)}lift(e){const t=new A(this,this);return t.operator=e,t}next(e){if(this.closed)throw new T;if(!this.isStopped){const{observers:t}=this,n=t.length,r=t.slice();for(let i=0;i<n;i++)r[i].next(e)}}error(e){if(this.closed)throw new T;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:t}=this,n=t.length,r=t.slice();for(let i=0;i<n;i++)r[i].error(e);this.observers.length=0}complete(){if(this.closed)throw new T;this.isStopped=!0;const{observers:e}=this,t=e.length,n=e.slice();for(let r=0;r<t;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new T;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new T;return this.hasError?(e.error(this.thrownError),d.EMPTY):this.isStopped?(e.complete(),d.EMPTY):(this.observers.push(e),new S(this,e))}asObservable(){const e=new w;return e.source=this,e}}return e.create=(e,t)=>new A(e,t),e})();class A extends k{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):d.EMPTY}}function N(e){return e&&"function"==typeof e.schedule}class D extends g{constructor(e,t,n){super(),this.parent=e,this.outerValue=t,this.outerIndex=n,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}const R=e=>t=>{for(let n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.closed||t.complete()},O=e=>t=>(e.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,s),t);function P(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const x=P(),M=e=>t=>{const n=e[x]();for(;;){const e=n.next();if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t},L=e=>t=>{const n=e[y]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(t)},F=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function U(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}const V=e=>{if(e instanceof w)return t=>e._isScalar?(t.next(e.value),void t.complete()):e.subscribe(t);if(e&&"function"==typeof e[y])return L(e);if(F(e))return R(e);if(U(e))return O(e);if(e&&"function"==typeof e[x])return M(e);{const t=u(e)?"an invalid object":`'${e}'`;throw new TypeError(`You provided ${t} where a stream was expected.`+" You can provide an Observable, Promise, Array, or Iterable.")}};function j(e,t,n,r,i=new D(e,n,r)){if(!i.closed)return V(t)(i)}class q extends g{notifyNext(e,t,n,r,i){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}function B(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new W(e,t))}}class W{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new H(e,this.project,this.thisArg))}}class H extends g{constructor(e,t,n){super(e),this.project=t,this.count=0,this.thisArg=n||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}function K(e,t){return new w(t?n=>{const r=new d;let i=0;return r.add(t.schedule((function(){i!==e.length?(n.next(e[i++]),n.closed||r.add(this.schedule())):n.complete()}))),r}:R(e))}function z(e,t){if(!t)return e instanceof w?e:new w(V(e));if(null!=e){if(function(e){return e&&"function"==typeof e[y]}(e))return function(e,t){return new w(t?n=>{const r=new d;return r.add(t.schedule(()=>{const i=e[y]();r.add(i.subscribe({next(e){r.add(t.schedule(()=>n.next(e)))},error(e){r.add(t.schedule(()=>n.error(e)))},complete(){r.add(t.schedule(()=>n.complete()))}}))})),r}:L(e))}(e,t);if(U(e))return function(e,t){return new w(t?n=>{const r=new d;return r.add(t.schedule(()=>e.then(e=>{r.add(t.schedule(()=>{n.next(e),r.add(t.schedule(()=>n.complete()))}))},e=>{r.add(t.schedule(()=>n.error(e)))}))),r}:O(e))}(e,t);if(F(e))return K(e,t);if(function(e){return e&&"function"==typeof e[x]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new w(t?n=>{const r=new d;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(t.schedule(()=>{i=e[x](),r.add(t.schedule((function(){if(n.closed)return;let e,t;try{const n=i.next();e=n.value,t=n.done}catch(r){return void n.error(r)}t?n.complete():(n.next(e),this.schedule())})))})),r}:M(e))}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}function G(e,t,n=Number.POSITIVE_INFINITY){return"function"==typeof t?r=>r.pipe(G((n,r)=>z(e(n,r)).pipe(B((e,i)=>t(n,e,r,i))),n)):("number"==typeof t&&(n=t),t=>t.lift(new Q(e,n)))}class Q{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new $(e,this.project,this.concurrent))}}class $ extends q{constructor(e,t,n=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t,e,n)}_innerSub(e,t,n){const r=new D(this,void 0,void 0);this.destination.add(r),j(this,e,t,n,r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e,t,n,r,i){this.destination.next(t)}notifyComplete(e){const t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function Y(e){return e}function X(e=Number.POSITIVE_INFINITY){return G(Y,e)}function J(...e){let t=Number.POSITIVE_INFINITY,n=null,r=e[e.length-1];return N(r)?(n=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(t=e.pop())):"number"==typeof r&&(t=e.pop()),null===n&&1===e.length&&e[0]instanceof w?e[0]:X(t)(K(e,n))}function Z(){return function(e){return e.lift(new ee(e))}}class ee{constructor(e){this.connectable=e}call(e,t){const{connectable:n}=this;n._refCount++;const r=new te(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class te extends g{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:n}=this,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}const ne=class extends w{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new d).add(this.source.subscribe(new ie(this.getSubject(),this))),e.closed?(this._connection=null,e=d.EMPTY):this._connection=e),e}refCount(){return Z()(this)}}.prototype,re={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:ne._subscribe},_isComplete:{value:ne._isComplete,writable:!0},getSubject:{value:ne.getSubject},connect:{value:ne.connect},refCount:{value:ne.refCount}};class ie extends I{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}function oe(){return new k}function se(){return e=>Z()(function(e,t){return function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,re);return r.source=t,r.subjectFactory=n,r}}(oe)(e))}const ae="__parameters__";function le(e,t,n){const r=function(e){return function(...t){if(e){const n=e(...t);for(const e in n)this[e]=n[e]}}}(t);function i(...e){if(this instanceof i)return r.apply(this,e),this;const t=new i(...e);return n.annotation=t,n;function n(e,n,r){const i=e.hasOwnProperty(ae)?e[ae]:Object.defineProperty(e,ae,{value:[]})[ae];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(t),e}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i}const ue=le("Inject",e=>({token:e})),ce=le("Optional"),he=le("Self"),de=le("SkipSelf");var pe=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}({});function fe(e){for(let t in e)if(e[t]===fe)return t;throw Error("Could not find renamed property on target object.")}function ge(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function me(e){const t=e[ye];return t&&t.token===e?t:null}const ye=fe({ngInjectableDef:fe});function ve(e){if("string"==typeof e)return e;if(e instanceof Array)return"["+e.map(ve).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}const _e=fe({__forward_ref__:fe});function be(e){return e.__forward_ref__=be,e.toString=function(){return ve(this())},e}function we(e){const t=e;return"function"==typeof t&&t.hasOwnProperty(_e)&&t.__forward_ref__===be?t():e}const Ce="undefined"!=typeof globalThis&&globalThis,Ee="undefined"!=typeof window&&window,Te="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Se="undefined"!=typeof global&&global,Ie=Ce||Se||Ee||Te;class ke{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.ngInjectableDef=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.ngInjectableDef=ge({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Ae=new ke("INJECTOR",-1),Ne=new Object,De="ngTempTokenPath",Re="ngTokenPath",Oe=/\n/gm,Pe="\u0275",xe="__source",Me=fe({provide:String,useValue:fe});let Le,Fe=void 0;function Ue(e){const t=Fe;return Fe=e,t}function Ve(e,t=pe.Default){if(void 0===Fe)throw new Error("inject() must be called from an injection context");return null===Fe?function(e,t,n){const r=me(e);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&pe.Optional)return null;throw new Error(`Injector: NOT_FOUND [${ve(e)}]`)}(e,0,t):Fe.get(e,t&pe.Optional?null:void 0,t)}function je(e,t=pe.Default){return(Le||Ve)(e,t)}class qe{get(e,t=Ne){if(t===Ne){const t=new Error(`NullInjectorError: No provider for ${ve(e)}!`);throw t.name="NullInjectorError",t}return t}}function Be(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&e.charAt(1)==Pe?e.substr(2):e;let i=ve(t);if(t instanceof Array)i=t.map(ve).join(" -> ");else if("object"==typeof t){let e=[];for(let n in t)if(t.hasOwnProperty(n)){let r=t[n];e.push(n+":"+("string"==typeof r?JSON.stringify(r):ve(r)))}i=`{${e.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(Oe,"\n  ")}`}class We{}class He{}function Ke(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function ze(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}const Ge=function(){var e={Emulated:0,Native:1,None:2,ShadowDom:3};return e[e.Emulated]="Emulated",e[e.Native]="Native",e[e.None]="None",e[e.ShadowDom]="ShadowDom",e}(),Qe=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ie))(),$e="ngDebugContext",Ye="ngOriginalError",Xe="ngErrorLogger";function Je(e){return e[$e]}function Ze(e){return e[Ye]}function et(e,...t){e.error(...t)}class tt{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),n=this._findContext(e),r=function(e){return e[Xe]||et}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(e){return e?Je(e)?Je(e):this._findContext(Ze(e)):null}_findOriginalError(e){let t=Ze(e);for(;t&&Ze(t);)t=Ze(t);return t}}let nt=!0,rt=!1;function it(){return rt=!0,nt}class ot{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),this.inertBodyElement=this.inertDocument.body,null==this.inertBodyElement){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e),this.inertBodyElement=this.inertDocument.createElement("body"),e.appendChild(this.inertBodyElement)}this.inertBodyElement.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.inertBodyElement.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.getInertBodyElement=this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(e){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}getInertBodyElement_XHR(e){e="<body><remove></remove>"+e+"</body>";try{e=encodeURI(e)}catch(r){return null}const t=new XMLHttpRequest;t.responseType="document",t.open("GET","data:text/html;charset=utf-8,"+e,!1),t.send(void 0);const n=t.response.body;return n.removeChild(n.firstChild),n}getInertBodyElement_DOMParser(e){e="<body><remove></remove>"+e+"</body>";try{const t=(new window.DOMParser).parseFromString(e,"text/html").body;return t.removeChild(t.firstChild),t}catch(t){return null}}getInertBodyElement_InertDocument(e){const t=this.inertDocument.createElement("template");return"content"in t?(t.innerHTML=e,t):(this.inertBodyElement.innerHTML=e,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)}stripCustomNsAttrs(e){const t=e.attributes;for(let r=t.length-1;0<r;r--){const n=t.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||e.removeAttribute(n)}let n=e.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const st=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,at=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function lt(e){return(e=String(e)).match(st)||e.match(at)?e:(it()&&console.warn(`WARNING: sanitizing unsafe URL value ${e} (see http://g.co/ng/security#xss)`),"unsafe:"+e)}function ut(e){const t={};for(const n of e.split(","))t[n]=!0;return t}function ct(...e){const t={};for(const n of e)for(const e in n)n.hasOwnProperty(e)&&(t[e]=!0);return t}const ht=ut("area,br,col,hr,img,wbr"),dt=ut("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),pt=ut("rp,rt"),ft=ct(pt,dt),gt=ct(ht,ct(dt,ut("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ct(pt,ut("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ft),mt=ut("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),yt=ut("srcset"),vt=ct(mt,yt,ut("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ut("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),_t=ut("script,style,template");class bt{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,n=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let e=this.checkClobberedElement(t,t.nextSibling);if(e){t=e;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!gt.hasOwnProperty(t))return this.sanitizedSomething=!0,!_t.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const n=e.attributes;for(let i=0;i<n.length;i++){const e=n.item(i),t=e.name,o=t.toLowerCase();if(!vt.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=e.value;mt[o]&&(s=lt(s)),yt[o]&&(r=s,s=(r=String(r)).split(",").map(e=>lt(e.trim())).join(", ")),this.buf.push(" ",t,'="',Et(s),'"')}var r;return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();gt.hasOwnProperty(t)&&!ht.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(Et(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const wt=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ct=/([^\#-~ |!])/g;function Et(e){return e.replace(/&/g,"&amp;").replace(wt,(function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"})).replace(Ct,(function(e){return"&#"+e.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Tt;function St(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}const It=function(){var e={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};return e[e.NONE]="NONE",e[e.HTML]="HTML",e[e.STYLE]="STYLE",e[e.SCRIPT]="SCRIPT",e[e.URL]="URL",e[e.RESOURCE_URL]="RESOURCE_URL",e}();class kt{}const At=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|Z|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),Nt=/^url\(([^)]+)\)$/,Dt=/([A-Z])/g;function Rt(e){try{return null!=e?e.toString().slice(0,30):e}catch(t){return"[ERROR] Exception while trying to serialize the value"}}let Ot=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>Pt(),e})();const Pt=(...e)=>{},xt=new ke("The presence of this token marks an injector as being the root injector."),Mt=function(e,t,n){return new Bt(e,t,n)};let Lt=(()=>{class e{static create(e,t){return Array.isArray(e)?Mt(e,t,""):Mt(e.providers,e.parent,e.name||"")}}return e.THROW_IF_NOT_FOUND=Ne,e.NULL=new qe,e.ngInjectableDef=ge({token:e,providedIn:"any",factory:()=>je(Ae)}),e.__NG_ELEMENT_ID__=-1,e})();const Ft=function(e){return e},Ut=[],Vt=Ft,jt=function(){return Array.prototype.slice.call(arguments)},qt="\u0275";class Bt{constructor(e,t=Lt.NULL,n=null){this.parent=t,this.source=n;const r=this._records=new Map;r.set(Lt,{token:Lt,fn:Ft,deps:Ut,value:this,useNew:!1}),r.set(Ae,{token:Ae,fn:Ft,deps:Ut,value:this,useNew:!1}),function e(t,n){if(n)if((n=we(n))instanceof Array)for(let r=0;r<n.length;r++)e(t,n[r]);else{if("function"==typeof n)throw Ht("Function/Class not supported",n);if(!n||"object"!=typeof n||!n.provide)throw Ht("Unexpected provider",n);{let e=we(n.provide);const r=function(e){const t=function(e){let t=Ut;const n=e.deps;if(n&&n.length){t=[];for(let e=0;e<n.length;e++){let r=6,i=we(n[e]);if(i instanceof Array)for(let e=0,t=i;e<t.length;e++){const n=t[e];n instanceof ce||n==ce?r|=1:n instanceof de||n==de?r&=-3:n instanceof he||n==he?r&=-5:i=n instanceof ue?n.token:we(n)}t.push({token:i,options:r})}}else if(e.useExisting)t=[{token:we(e.useExisting),options:6}];else if(!(n||Me in e))throw Ht("'deps' required",e);return t}(e);let n=Ft,r=Ut,i=!1,o=we(e.provide);if(Me in e)r=e.useValue;else if(e.useFactory)n=e.useFactory;else if(e.useExisting);else if(e.useClass)i=!0,n=we(e.useClass);else{if("function"!=typeof o)throw Ht("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",e);i=!0,n=o}return{deps:t,fn:n,useNew:i,value:r}}(n);if(!0===n.multi){let r=t.get(e);if(r){if(r.fn!==jt)throw Wt(e)}else t.set(e,r={token:n.provide,deps:[],useNew:!1,fn:jt,value:Ut});r.deps.push({token:e=n,options:6})}const i=t.get(e);if(i&&i.fn==jt)throw Wt(e);t.set(e,r)}}}(r,e)}get(e,t,n=pe.Default){const r=this._records.get(e);try{return function e(t,n,r,i,o,s){try{return function(t,n,r,i,o,s){let a;if(!n||s&pe.SkipSelf)s&pe.Self||(a=i.get(t,o,pe.Default));else{if((a=n.value)==Vt)throw Error(qt+"Circular dependency");if(a===Ut){n.value=Vt;let t=void 0,o=n.useNew,s=n.fn,l=n.deps,u=Ut;if(l.length){u=[];for(let t=0;t<l.length;t++){const n=l[t],o=n.options,s=2&o?r.get(n.token):void 0;u.push(e(n.token,s,r,s||4&o?i:Lt.NULL,1&o?null:Lt.THROW_IF_NOT_FOUND,pe.Default))}}n.value=a=o?new s(...u):s.apply(t,u)}}return a}(t,n,r,i,o,s)}catch(a){throw a instanceof Error||(a=new Error(a)),(a[De]=a[De]||[]).unshift(t),n&&n.value==Vt&&(n.value=Ut),a}}(e,r,this._records,this.parent,t,n)}catch(i){return function(e,t,n,r){const i=e[De];throw t[xe]&&i.unshift(t[xe]),e.message=Be("\n"+e.message,i,"StaticInjectorError",r),e[Re]=i,e[De]=null,e}(i,e,0,this.source)}}toString(){const e=[];return this._records.forEach((t,n)=>e.push(ve(n))),`StaticInjector[${e.join(", ")}]`}}function Wt(e){return Ht("Cannot mix multi providers and regular providers",e)}function Ht(e,t){return new Error(Be(e,t,"StaticInjectorError"))}const Kt=new ke("AnalyzeForEntryComponents");let zt=null;function Gt(){if(!zt){const e=Ie.Symbol;if(e&&e.iterator)zt=e.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const n=e[t];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(zt=n)}}}return zt}function Qt(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}function $t(e,t){const n=Xt(e),r=Xt(t);if(n&&r)return function(e,t,n){const r=e[Gt()](),i=t[Gt()]();for(;;){const e=r.next(),t=i.next();if(e.done&&t.done)return!0;if(e.done||t.done)return!1;if(!n(e.value,t.value))return!1}}(e,t,$t);{const i=e&&("object"==typeof e||"function"==typeof e),o=t&&("object"==typeof t||"function"==typeof t);return!(n||!i||r||!o)||Qt(e,t)}}class Yt{constructor(e){this.wrapped=e}static wrap(e){return new Yt(e)}static unwrap(e){return Yt.isWrapped(e)?e.wrapped:e}static isWrapped(e){return e instanceof Yt}}function Xt(e){return!!Jt(e)&&(Array.isArray(e)||!(e instanceof Map)&&Gt()in e)}function Jt(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Zt(e){return!!e&&"function"==typeof e.then}function en(e){return!!e&&"function"==typeof e.subscribe}class tn{constructor(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}isFirstChange(){return this.firstChange}}class nn{}class rn{}function on(e){const t=Error(`No component factory found for ${ve(e)}. Did you add it to @NgModule.entryComponents?`);return t[sn]=e,t}const sn="ngComponent";class an{resolveComponentFactory(e){throw on(e)}}let ln=(()=>{class e{}return e.NULL=new an,e})();class un{constructor(e,t,n){this._parent=t,this._ngModule=n,this._factories=new Map;for(let r=0;r<e.length;r++){const t=e[r];this._factories.set(t.componentType,t)}}resolveComponentFactory(e){let t=this._factories.get(e);if(!t&&this._parent&&(t=this._parent.resolveComponentFactory(e)),!t)throw on(e);return new cn(t,this._ngModule)}}class cn extends rn{constructor(e,t){super(),this.factory=e,this.ngModule=t,this.selector=e.selector,this.componentType=e.componentType,this.ngContentSelectors=e.ngContentSelectors,this.inputs=e.inputs,this.outputs=e.outputs}create(e,t,n,r){return this.factory.create(e,t,n,r||this.ngModule)}}function hn(...e){}let dn=(()=>{class e{constructor(e){this.nativeElement=e}}return e.__NG_ELEMENT_ID__=()=>pn(e),e})();const pn=hn;class fn{}class gn{}const mn=function(){var e={Important:1,DashCase:2};return e[e.Important]="Important",e[e.DashCase]="DashCase",e}();let yn=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>vn(),e})();const vn=hn;class _n{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const bn=new _n("8.2.12");class wn{constructor(){}supports(e){return Xt(e)}create(e){return new En(e)}}const Cn=(e,t)=>t;class En{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Cn}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,n=this._removalsHead,r=0,i=null;for(;t||n;){const o=!n||t&&t.currentIndex<kn(n,r,i)?t:n,s=kn(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{i||(i=[]);const e=s-r,t=a-r;if(e!=t){for(let n=0;n<e;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;t<=o&&o<e&&(i[n]=r+1)}i[o.previousIndex]=t-e}}s!==a&&e(o,s,a)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Xt(e))throw new Error(`Error trying to diff '${ve(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t,n,r,i=this._itHead,o=!1;if(Array.isArray(e)){this.length=e.length;for(let t=0;t<this.length;t++)r=this._trackByFn(t,n=e[t]),null!==i&&Qt(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,t)),Qt(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,t),o=!0),i=i._next}else t=0,function(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[Gt()]();let r;for(;!(r=n.next()).done;)t(r.value)}}(e,e=>{r=this._trackByFn(t,e),null!==i&&Qt(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,e,r,t)),Qt(i.item,e)||this._addIdentityChange(i,e)):(i=this._mismatch(i,e,r,t),o=!0),i=i._next,t++}),this.length=t;return this._truncate(i),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e,t;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=t)e.previousIndex=e.currentIndex,t=e._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,n,r){let i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Qt(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,r)):null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Qt(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,r)):e=this._addAfter(new Tn(t,n),i,r),e}_verifyReinsertion(e,t,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?e=this._reinsertAfter(i,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,i=e._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}_moveAfter(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}_addAfter(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,n){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new In),this._linkedRecords.put(e),e.currentIndex=n,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}_addToMoves(e,t){return e.previousIndex===t?e:(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e,e)}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new In),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class Tn{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Sn{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Qt(n.trackById,e))return n;return null}remove(e){const t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}class In{constructor(){this.map=new Map}put(e){const t=e.trackById;let n=this.map.get(t);n||(n=new Sn,this.map.set(t,n)),n.add(e)}get(e,t){const n=this.map.get(e);return n?n.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function kn(e,t,n){const r=e.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}class An{constructor(){}supports(e){return e instanceof Map||Jt(e)}create(){return new Nn}}class Nn{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Jt(e)))throw new Error(`Error trying to diff '${ve(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(e,n)=>{if(t&&t.key===n)this._maybeAddToChanges(t,e),this._appendAfter=t,t=t._next;else{const r=this._getOrCreateRecordForKey(n,e);t=this._insertBeforeOrAppend(t,r)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let e=t;null!==e;e=e._nextRemoved)e===this._mapHead&&(this._mapHead=null),this._records.delete(e.key),e._nextRemoved=e._next,e.previousValue=e.currentValue,e.currentValue=null,e._prev=null,e._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const n=this._records.get(e);this._maybeAddToChanges(n,t);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Dn(e);return this._records.set(e,n),n.currentValue=t,this._addToAdditions(n),n}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Qt(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(n=>t(e[n],n))}}class Dn{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let Rn=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(null!=n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return e.create(t,n)},deps:[[e,new de,new ce]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(null!=t)return t;throw new Error(`Cannot find a differ supporting object '${e}' of type '${n=e,n.name||typeof n}'`);var n}}return e.ngInjectableDef=ge({token:e,providedIn:"root",factory:()=>new e([new wn])}),e})(),On=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return e.create(t,n)},deps:[[e,new de,new ce]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(t)return t;throw new Error(`Cannot find a differ supporting object '${e}'`)}}return e.ngInjectableDef=ge({token:e,providedIn:"root",factory:()=>new e([new An])}),e})();const Pn=[new An],xn=new Rn([new wn]),Mn=new On(Pn);let Ln=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>Fn(e,dn),e})();const Fn=hn;let Un=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>Vn(e,dn),e})();const Vn=hn;function jn(e,t,n,r){let i=`ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '${t}'. Current value: '${n}'.`;return r&&(i+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(e,t){const n=new Error(e);return qn(n,t),n}(i,e)}function qn(e,t){e[$e]=t,e[Xe]=t.logError.bind(t)}function Bn(e){return new Error(`ViewDestroyedError: Attempt to use a destroyed view: ${e}`)}function Wn(e,t,n){const r=e.state,i=1792&r;return i===t?(e.state=-1793&r|n,e.initIndex=-1,!0):i===n}function Hn(e,t,n){return(1792&e.state)===t&&e.initIndex<=n&&(e.initIndex=n+1,!0)}function Kn(e,t){return e.nodes[t]}function zn(e,t){return e.nodes[t]}function Gn(e,t){return e.nodes[t]}function Qn(e,t){return e.nodes[t]}function $n(e,t){return e.nodes[t]}const Yn={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0},Xn=()=>{},Jn=new Map;function Zn(e){let t=Jn.get(e);return t||(t=ve(e)+"_"+Jn.size,Jn.set(e,t)),t}function er(e,t,n,r){if(Yt.isWrapped(r)){r=Yt.unwrap(r);const i=e.def.nodes[t].bindingIndex+n,o=Yt.unwrap(e.oldValues[i]);e.oldValues[i]=new Yt(o)}return r}const tr="$$undefined",nr="$$empty";function rr(e){return{id:tr,styles:e.styles,encapsulation:e.encapsulation,data:e.data}}let ir=0;function or(e,t,n,r){return!(!(2&e.state)&&Qt(e.oldValues[t.bindingIndex+n],r))}function sr(e,t,n,r){return!!or(e,t,n,r)&&(e.oldValues[t.bindingIndex+n]=r,!0)}function ar(e,t,n,r){const i=e.oldValues[t.bindingIndex+n];if(1&e.state||!$t(i,r)){const o=t.bindings[n].name;throw jn(Yn.createDebugContext(e,t.nodeIndex),`${o}: ${i}`,`${o}: ${r}`,0!=(1&e.state))}}function lr(e){let t=e;for(;t;)2&t.def.flags&&(t.state|=8),t=t.viewContainerParent||t.parent}function ur(e,t){let n=e;for(;n&&n!==t;)n.state|=64,n=n.viewContainerParent||n.parent}function cr(e,t,n,r){try{return lr(33554432&e.def.nodes[t].flags?zn(e,t).componentView:e),Yn.handleEvent(e,t,n,r)}catch(i){e.root.errorHandler.handleError(i)}}function hr(e){return e.parent?zn(e.parent,e.parentNodeDef.nodeIndex):null}function dr(e){return e.parent?e.parentNodeDef.parent:null}function pr(e,t){switch(201347067&t.flags){case 1:return zn(e,t.nodeIndex).renderElement;case 2:return Kn(e,t.nodeIndex).renderText}}function fr(e){return!!e.parent&&!!(32768&e.parentNodeDef.flags)}function gr(e){return!(!e.parent||32768&e.parentNodeDef.flags)}function mr(e){return 1<<e%32}function yr(e){const t={};let n=0;const r={};return e&&e.forEach(([e,i])=>{"number"==typeof e?(t[e]=i,n|=mr(e)):r[e]=i}),{matchedQueries:t,references:r,matchedQueryIds:n}}function vr(e,t){return e.map(e=>{let n,r;return Array.isArray(e)?[r,n]=e:(r=0,n=e),n&&("function"==typeof n||"object"==typeof n)&&t&&Object.defineProperty(n,xe,{value:t,configurable:!0}),{flags:r,token:n,tokenKey:Zn(n)}})}function _r(e,t,n){let r=n.renderParent;return r?0==(1&r.flags)||0==(33554432&r.flags)||r.element.componentRendererType&&r.element.componentRendererType.encapsulation===Ge.Native?zn(e,n.renderParent.nodeIndex).renderElement:void 0:t}const br=new WeakMap;function wr(e){let t=br.get(e);return t||((t=e(()=>Xn)).factory=e,br.set(e,t)),t}function Cr(e,t,n,r,i){3===t&&(n=e.renderer.parentNode(pr(e,e.def.lastRenderRootNode))),Er(e,t,0,e.def.nodes.length-1,n,r,i)}function Er(e,t,n,r,i,o,s){for(let a=n;a<=r;a++){const n=e.def.nodes[a];11&n.flags&&Sr(e,n,t,i,o,s),a+=n.childCount}}function Tr(e,t,n,r,i,o){let s=e;for(;s&&!fr(s);)s=s.parent;const a=s.parent,l=dr(s),u=l.nodeIndex+l.childCount;for(let c=l.nodeIndex+1;c<=u;c++){const e=a.def.nodes[c];e.ngContentIndex===t&&Sr(a,e,n,r,i,o),c+=e.childCount}if(!a.parent){const s=e.root.projectableNodes[t];if(s)for(let t=0;t<s.length;t++)Ir(e,s[t],n,r,i,o)}}function Sr(e,t,n,r,i,o){if(8&t.flags)Tr(e,t.ngContent.index,n,r,i,o);else{const s=pr(e,t);if(3===n&&33554432&t.flags&&48&t.bindingFlags?(16&t.bindingFlags&&Ir(e,s,n,r,i,o),32&t.bindingFlags&&Ir(zn(e,t.nodeIndex).componentView,s,n,r,i,o)):Ir(e,s,n,r,i,o),16777216&t.flags){const s=zn(e,t.nodeIndex).viewContainer._embeddedViews;for(let e=0;e<s.length;e++)Cr(s[e],n,r,i,o)}1&t.flags&&!t.element.name&&Er(e,n,t.nodeIndex+1,t.nodeIndex+t.childCount,r,i,o)}}function Ir(e,t,n,r,i,o){const s=e.renderer;switch(n){case 1:s.appendChild(r,t);break;case 2:s.insertBefore(r,t,i);break;case 3:s.removeChild(r,t);break;case 0:o.push(t)}}const kr=/^:([^:]+):(.+)$/;function Ar(e){if(":"===e[0]){const t=e.match(kr);return[t[1],t[2]]}return["",e]}function Nr(e){let t=0;for(let n=0;n<e.length;n++)t|=e[n].flags;return t}function Dr(e,t,n,r,i,o,s,a,l,u,c,h,d,p,f,g,m,y,v,_){switch(e){case 1:return t+Rr(n)+r;case 2:return t+Rr(n)+r+Rr(i)+o;case 3:return t+Rr(n)+r+Rr(i)+o+Rr(s)+a;case 4:return t+Rr(n)+r+Rr(i)+o+Rr(s)+a+Rr(l)+u;case 5:return t+Rr(n)+r+Rr(i)+o+Rr(s)+a+Rr(l)+u+Rr(c)+h;case 6:return t+Rr(n)+r+Rr(i)+o+Rr(s)+a+Rr(l)+u+Rr(c)+h+Rr(d)+p;case 7:return t+Rr(n)+r+Rr(i)+o+Rr(s)+a+Rr(l)+u+Rr(c)+h+Rr(d)+p+Rr(f)+g;case 8:return t+Rr(n)+r+Rr(i)+o+Rr(s)+a+Rr(l)+u+Rr(c)+h+Rr(d)+p+Rr(f)+g+Rr(m)+y;case 9:return t+Rr(n)+r+Rr(i)+o+Rr(s)+a+Rr(l)+u+Rr(c)+h+Rr(d)+p+Rr(f)+g+Rr(m)+y+Rr(v)+_;default:throw new Error("Does not support more than 9 expressions")}}function Rr(e){return null!=e?e.toString():""}const Or=new Object,Pr=Zn(Lt),xr=Zn(Ae),Mr=Zn(We);function Lr(e,t,n,r){return n=we(n),{index:-1,deps:vr(r,ve(t)),flags:e,token:t,value:n}}function Fr(e,t,n=Lt.THROW_IF_NOT_FOUND){const r=Ue(e);try{if(8&t.flags)return t.token;if(2&t.flags&&(n=null),1&t.flags)return e._parent.get(t.token,n);const s=t.tokenKey;switch(s){case Pr:case xr:case Mr:return e}const a=e._def.providersByKey[s];let l;if(a){let t=e._providers[a.index];return void 0===t&&(t=e._providers[a.index]=Ur(e,a)),t===Or?void 0:t}if((l=me(t.token))&&(i=e,null!=(o=l).providedIn&&(function(e,t){return e._def.modules.indexOf(t)>-1}(i,o.providedIn)||"root"===o.providedIn&&i._def.isRoot))){const n=e._providers.length;return e._def.providers[n]=e._def.providersByKey[t.tokenKey]={flags:5120,value:l.factory,deps:[],index:n,token:t.token},e._providers[n]=Or,e._providers[n]=Ur(e,e._def.providersByKey[t.tokenKey])}return 4&t.flags?n:e._parent.get(t.token,n)}finally{Ue(r)}var i,o}function Ur(e,t){let n;switch(201347067&t.flags){case 512:n=function(e,t,n){const r=n.length;switch(r){case 0:return new t;case 1:return new t(Fr(e,n[0]));case 2:return new t(Fr(e,n[0]),Fr(e,n[1]));case 3:return new t(Fr(e,n[0]),Fr(e,n[1]),Fr(e,n[2]));default:const i=new Array(r);for(let t=0;t<r;t++)i[t]=Fr(e,n[t]);return new t(...i)}}(e,t.value,t.deps);break;case 1024:n=function(e,t,n){const r=n.length;switch(r){case 0:return t();case 1:return t(Fr(e,n[0]));case 2:return t(Fr(e,n[0]),Fr(e,n[1]));case 3:return t(Fr(e,n[0]),Fr(e,n[1]),Fr(e,n[2]));default:const i=Array(r);for(let t=0;t<r;t++)i[t]=Fr(e,n[t]);return t(...i)}}(e,t.value,t.deps);break;case 2048:n=Fr(e,t.deps[0]);break;case 256:n=t.value}return n===Or||null===n||"object"!=typeof n||131072&t.flags||"function"!=typeof n.ngOnDestroy||(t.flags|=131072),void 0===n?Or:n}function Vr(e,t){const n=e.viewContainer._embeddedViews;if((null==t||t>=n.length)&&(t=n.length-1),t<0)return null;const r=n[t];return r.viewContainerParent=null,ze(n,t),Yn.dirtyParentQueries(r),qr(r),r}function jr(e,t,n){const r=t?pr(t,t.def.lastRenderRootNode):e.renderElement,i=n.renderer.parentNode(r),o=n.renderer.nextSibling(r);Cr(n,2,i,o,void 0)}function qr(e){Cr(e,3,null,null,void 0)}const Br=new Object;function Wr(e,t,n,r,i,o){return new Hr(e,t,n,r,i,o)}class Hr extends rn{constructor(e,t,n,r,i,o){super(),this.selector=e,this.componentType=t,this._inputs=r,this._outputs=i,this.ngContentSelectors=o,this.viewDefFactory=n}get inputs(){const e=[],t=this._inputs;for(let n in t)e.push({propName:n,templateName:t[n]});return e}get outputs(){const e=[];for(let t in this._outputs)e.push({propName:t,templateName:this._outputs[t]});return e}create(e,t,n,r){if(!r)throw new Error("ngModule should be provided");const i=wr(this.viewDefFactory),o=i.nodes[0].element.componentProvider.nodeIndex,s=Yn.createRootView(e,t||[],n,i,r,Br),a=Gn(s,o).instance;return n&&s.renderer.setAttribute(zn(s,0).renderElement,"ng-version",bn.full),new Kr(s,new $r(s),a)}}class Kr extends nn{constructor(e,t,n){super(),this._view=e,this._viewRef=t,this._component=n,this._elDef=this._view.def.nodes[0],this.hostView=t,this.changeDetectorRef=t,this.instance=n}get location(){return new dn(zn(this._view,this._elDef.nodeIndex).renderElement)}get injector(){return new Zr(this._view,this._elDef)}get componentType(){return this._component.constructor}destroy(){this._viewRef.destroy()}onDestroy(e){this._viewRef.onDestroy(e)}}function zr(e,t,n){return new Gr(e,t,n)}class Gr{constructor(e,t,n){this._view=e,this._elDef=t,this._data=n,this._embeddedViews=[]}get element(){return new dn(this._data.renderElement)}get injector(){return new Zr(this._view,this._elDef)}get parentInjector(){let e=this._view,t=this._elDef.parent;for(;!t&&e;)t=dr(e),e=e.parent;return e?new Zr(e,t):new Zr(this._view,null)}clear(){for(let e=this._embeddedViews.length-1;e>=0;e--){const t=Vr(this._data,e);Yn.destroyView(t)}}get(e){const t=this._embeddedViews[e];if(t){const e=new $r(t);return e.attachToViewContainerRef(this),e}return null}get length(){return this._embeddedViews.length}createEmbeddedView(e,t,n){const r=e.createEmbeddedView(t||{});return this.insert(r,n),r}createComponent(e,t,n,r,i){const o=n||this.parentInjector;i||e instanceof cn||(i=o.get(We));const s=e.create(o,r,void 0,i);return this.insert(s.hostView,t),s}insert(e,t){if(e.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");const n=e;return function(e,t,n,r){let i=t.viewContainer._embeddedViews;null==n&&(n=i.length),r.viewContainerParent=e,Ke(i,n,r),function(e,t){const n=hr(t);if(!n||n===e||16&t.state)return;t.state|=16;let r=n.template._projectedViews;r||(r=n.template._projectedViews=[]),r.push(t),function(e,t){if(4&t.flags)return;e.nodeFlags|=4,t.flags|=4;let n=t.parent;for(;n;)n.childFlags|=4,n=n.parent}(t.parent.def,t.parentNodeDef)}(t,r),Yn.dirtyParentQueries(r),jr(t,n>0?i[n-1]:null,r)}(this._view,this._data,t,n._view),n.attachToViewContainerRef(this),e}move(e,t){if(e.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");const n=this._embeddedViews.indexOf(e._view);return function(e,t,n){const r=e.viewContainer._embeddedViews,i=r[t];ze(r,t),null==n&&(n=r.length),Ke(r,n,i),Yn.dirtyParentQueries(i),qr(i),jr(e,n>0?r[n-1]:null,i)}(this._data,n,t),e}indexOf(e){return this._embeddedViews.indexOf(e._view)}remove(e){const t=Vr(this._data,e);t&&Yn.destroyView(t)}detach(e){const t=Vr(this._data,e);return t?new $r(t):null}}function Qr(e){return new $r(e)}class $r{constructor(e){this._view=e,this._viewContainerRef=null,this._appRef=null}get rootNodes(){return function(e){const t=[];return Cr(e,0,void 0,void 0,t),t}(this._view)}get context(){return this._view.context}get destroyed(){return 0!=(128&this._view.state)}markForCheck(){lr(this._view)}detach(){this._view.state&=-5}detectChanges(){const e=this._view.root.rendererFactory;e.begin&&e.begin();try{Yn.checkAndUpdateView(this._view)}finally{e.end&&e.end()}}checkNoChanges(){Yn.checkNoChangesView(this._view)}reattach(){this._view.state|=4}onDestroy(e){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(e)}destroy(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),Yn.destroyView(this._view)}detachFromAppRef(){this._appRef=null,qr(this._view),Yn.dirtyParentQueries(this._view)}attachToAppRef(e){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}attachToViewContainerRef(e){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=e}}function Yr(e,t){return new Xr(e,t)}class Xr extends Ln{constructor(e,t){super(),this._parentView=e,this._def=t}createEmbeddedView(e){return new $r(Yn.createEmbeddedView(this._parentView,this._def,this._def.element.template,e))}get elementRef(){return new dn(zn(this._parentView,this._def.nodeIndex).renderElement)}}function Jr(e,t){return new Zr(e,t)}class Zr{constructor(e,t){this.view=e,this.elDef=t}get(e,t=Lt.THROW_IF_NOT_FOUND){return Yn.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:e,tokenKey:Zn(e)},t)}}function ei(e,t){const n=e.def.nodes[t];if(1&n.flags){const t=zn(e,n.nodeIndex);return n.element.template?t.template:t.renderElement}if(2&n.flags)return Kn(e,n.nodeIndex).renderText;if(20240&n.flags)return Gn(e,n.nodeIndex).instance;throw new Error(`Illegal state: read nodeValue for node index ${t}`)}function ti(e){return new ni(e.renderer)}class ni{constructor(e){this.delegate=e}selectRootElement(e){return this.delegate.selectRootElement(e)}createElement(e,t){const[n,r]=Ar(t),i=this.delegate.createElement(r,n);return e&&this.delegate.appendChild(e,i),i}createViewRoot(e){return e}createTemplateAnchor(e){const t=this.delegate.createComment("");return e&&this.delegate.appendChild(e,t),t}createText(e,t){const n=this.delegate.createText(t);return e&&this.delegate.appendChild(e,n),n}projectNodes(e,t){for(let n=0;n<t.length;n++)this.delegate.appendChild(e,t[n])}attachViewAfter(e,t){const n=this.delegate.parentNode(e),r=this.delegate.nextSibling(e);for(let i=0;i<t.length;i++)this.delegate.insertBefore(n,t[i],r)}detachView(e){for(let t=0;t<e.length;t++){const n=e[t],r=this.delegate.parentNode(n);this.delegate.removeChild(r,n)}}destroyView(e,t){for(let n=0;n<t.length;n++)this.delegate.destroyNode(t[n])}listen(e,t,n){return this.delegate.listen(e,t,n)}listenGlobal(e,t,n){return this.delegate.listen(e,t,n)}setElementProperty(e,t,n){this.delegate.setProperty(e,t,n)}setElementAttribute(e,t,n){const[r,i]=Ar(t);null!=n?this.delegate.setAttribute(e,i,n,r):this.delegate.removeAttribute(e,i,r)}setBindingDebugInfo(e,t,n){}setElementClass(e,t,n){n?this.delegate.addClass(e,t):this.delegate.removeClass(e,t)}setElementStyle(e,t,n){null!=n?this.delegate.setStyle(e,t,n):this.delegate.removeStyle(e,t)}invokeElementMethod(e,t,n){e[t].apply(e,n)}setText(e,t){this.delegate.setValue(e,t)}animate(){throw new Error("Renderer.animate is no longer supported!")}}function ri(e,t,n,r){return new ii(e,t,n,r)}class ii{constructor(e,t,n,r){this._moduleType=e,this._parent=t,this._bootstrapComponents=n,this._def=r,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(e){const t=e._def,n=e._providers=new Array(t.providers.length);for(let r=0;r<t.providers.length;r++){const i=t.providers[r];4096&i.flags||void 0===n[r]&&(n[r]=Ur(e,i))}}(this)}get(e,t=Lt.THROW_IF_NOT_FOUND,n=pe.Default){let r=0;return n&pe.SkipSelf?r|=1:n&pe.Self&&(r|=4),Fr(this,{token:e,tokenKey:Zn(e),flags:r},t)}get instance(){return this.get(this._moduleType)}get componentFactoryResolver(){return this.get(ln)}destroy(){if(this._destroyed)throw new Error(`The ng module ${ve(this.instance.constructor)} has already been destroyed.`);this._destroyed=!0,function(e,t){const n=e._def,r=new Set;for(let i=0;i<n.providers.length;i++)if(131072&n.providers[i].flags){const t=e._providers[i];if(t&&t!==Or){const e=t.ngOnDestroy;"function"!=typeof e||r.has(t)||(e.apply(t),r.add(t))}}}(this),this._destroyListeners.forEach(e=>e())}onDestroy(e){this._destroyListeners.push(e)}}const oi=Zn(fn),si=Zn(yn),ai=Zn(dn),li=Zn(Un),ui=Zn(Ln),ci=Zn(Ot),hi=Zn(Lt),di=Zn(Ae);function pi(e,t,n,r,i,o,s,a){const l=[];if(s)for(let c in s){const[e,t]=s[c];l[e]={flags:8,name:c,nonMinifiedName:t,ns:null,securityContext:null,suffix:null}}const u=[];if(a)for(let c in a)u.push({type:1,propName:c,target:null,eventName:a[c]});return mi(e,t|=16384,n,r,i,i,o,l,u)}function fi(e,t,n){return mi(-1,e|=16,null,0,t,t,n)}function gi(e,t,n,r,i){return mi(-1,e,t,0,n,r,i)}function mi(e,t,n,r,i,o,s,a,l){const{matchedQueries:u,references:c,matchedQueryIds:h}=yr(n);l||(l=[]),a||(a=[]),o=we(o);const d=vr(s,ve(i));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:u,matchedQueryIds:h,references:c,ngContentIndex:-1,childCount:r,bindings:a,bindingFlags:Nr(a),outputs:l,element:null,provider:{token:i,value:o,deps:d},text:null,query:null,ngContent:null}}function yi(e,t){return wi(e,t)}function vi(e,t){let n=e;for(;n.parent&&!fr(n);)n=n.parent;return Ci(n.parent,dr(n),!0,t.provider.value,t.provider.deps)}function _i(e,t){const n=Ci(e,t.parent,(32768&t.flags)>0,t.provider.value,t.provider.deps);if(t.outputs.length)for(let r=0;r<t.outputs.length;r++){const i=t.outputs[r],o=n[i.propName];if(!en(o))throw new Error(`@Output ${i.propName} not initialized in '${n.constructor.name}'.`);{const n=o.subscribe(bi(e,t.parent.nodeIndex,i.eventName));e.disposables[t.outputIndex+r]=n.unsubscribe.bind(n)}}return n}function bi(e,t,n){return r=>cr(e,t,n,r)}function wi(e,t){const n=(8192&t.flags)>0,r=t.provider;switch(201347067&t.flags){case 512:return Ci(e,t.parent,n,r.value,r.deps);case 1024:return function(e,t,n,r,i){const o=i.length;switch(o){case 0:return r();case 1:return r(Ti(e,t,n,i[0]));case 2:return r(Ti(e,t,n,i[0]),Ti(e,t,n,i[1]));case 3:return r(Ti(e,t,n,i[0]),Ti(e,t,n,i[1]),Ti(e,t,n,i[2]));default:const s=Array(o);for(let r=0;r<o;r++)s[r]=Ti(e,t,n,i[r]);return r(...s)}}(e,t.parent,n,r.value,r.deps);case 2048:return Ti(e,t.parent,n,r.deps[0]);case 256:return r.value}}function Ci(e,t,n,r,i){const o=i.length;switch(o){case 0:return new r;case 1:return new r(Ti(e,t,n,i[0]));case 2:return new r(Ti(e,t,n,i[0]),Ti(e,t,n,i[1]));case 3:return new r(Ti(e,t,n,i[0]),Ti(e,t,n,i[1]),Ti(e,t,n,i[2]));default:const s=new Array(o);for(let r=0;r<o;r++)s[r]=Ti(e,t,n,i[r]);return new r(...s)}}const Ei={};function Ti(e,t,n,r,i=Lt.THROW_IF_NOT_FOUND){if(8&r.flags)return r.token;const o=e;2&r.flags&&(i=null);const s=r.tokenKey;s===ci&&(n=!(!t||!t.element.componentView)),t&&1&r.flags&&(n=!1,t=t.parent);let a=e;for(;a;){if(t)switch(s){case oi:return ti(Si(a,t,n));case si:return Si(a,t,n).renderer;case ai:return new dn(zn(a,t.nodeIndex).renderElement);case li:return zn(a,t.nodeIndex).viewContainer;case ui:if(t.element.template)return zn(a,t.nodeIndex).template;break;case ci:return Qr(Si(a,t,n));case hi:case di:return Jr(a,t);default:const e=(n?t.element.allProviders:t.element.publicProviders)[s];if(e){let t=Gn(a,e.nodeIndex);return t||(t={instance:wi(a,e)},a.nodes[e.nodeIndex]=t),t.instance}}n=fr(a),t=dr(a),a=a.parent,4&r.flags&&(a=null)}const l=o.root.injector.get(r.token,Ei);return l!==Ei||i===Ei?l:o.root.ngModule.injector.get(r.token,i)}function Si(e,t,n){let r;if(n)r=zn(e,t.nodeIndex).componentView;else for(r=e;r.parent&&!fr(r);)r=r.parent;return r}function Ii(e,t,n,r,i,o){if(32768&n.flags){const t=zn(e,n.parent.nodeIndex).componentView;2&t.def.flags&&(t.state|=8)}if(t.instance[n.bindings[r].name]=i,524288&n.flags){o=o||{};const t=Yt.unwrap(e.oldValues[n.bindingIndex+r]);o[n.bindings[r].nonMinifiedName]=new tn(t,i,0!=(2&e.state))}return e.oldValues[n.bindingIndex+r]=i,o}function ki(e,t){if(!(e.def.nodeFlags&t))return;const n=e.def.nodes;let r=0;for(let i=0;i<n.length;i++){const o=n[i];let s=o.parent;for(!s&&o.flags&t&&Ni(e,i,o.flags&t,r++),0==(o.childFlags&t)&&(i+=o.childCount);s&&1&s.flags&&i===s.nodeIndex+s.childCount;)s.directChildFlags&t&&(r=Ai(e,s,t,r)),s=s.parent}}function Ai(e,t,n,r){for(let i=t.nodeIndex+1;i<=t.nodeIndex+t.childCount;i++){const t=e.def.nodes[i];t.flags&n&&Ni(e,i,t.flags&n,r++),i+=t.childCount}return r}function Ni(e,t,n,r){const i=Gn(e,t);if(!i)return;const o=i.instance;o&&(Yn.setCurrentNode(e,t),1048576&n&&Hn(e,512,r)&&o.ngAfterContentInit(),2097152&n&&o.ngAfterContentChecked(),4194304&n&&Hn(e,768,r)&&o.ngAfterViewInit(),8388608&n&&o.ngAfterViewChecked(),131072&n&&o.ngOnDestroy())}const Di=new ke("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Qe}),Ri={},Oi=function(){var e={LocaleId:0,DayPeriodsFormat:1,DayPeriodsStandalone:2,DaysFormat:3,DaysStandalone:4,MonthsFormat:5,MonthsStandalone:6,Eras:7,FirstDayOfWeek:8,WeekendRange:9,DateFormat:10,TimeFormat:11,DateTimeFormat:12,NumberSymbols:13,NumberFormats:14,CurrencySymbol:15,CurrencyName:16,Currencies:17,PluralCase:18,ExtraData:19};return e[e.LocaleId]="LocaleId",e[e.DayPeriodsFormat]="DayPeriodsFormat",e[e.DayPeriodsStandalone]="DayPeriodsStandalone",e[e.DaysFormat]="DaysFormat",e[e.DaysStandalone]="DaysStandalone",e[e.MonthsFormat]="MonthsFormat",e[e.MonthsStandalone]="MonthsStandalone",e[e.Eras]="Eras",e[e.FirstDayOfWeek]="FirstDayOfWeek",e[e.WeekendRange]="WeekendRange",e[e.DateFormat]="DateFormat",e[e.TimeFormat]="TimeFormat",e[e.DateTimeFormat]="DateTimeFormat",e[e.NumberSymbols]="NumberSymbols",e[e.NumberFormats]="NumberFormats",e[e.CurrencySymbol]="CurrencySymbol",e[e.CurrencyName]="CurrencyName",e[e.Currencies]="Currencies",e[e.PluralCase]="PluralCase",e[e.ExtraData]="ExtraData",e}(),Pi=void 0;var xi=["en",[["a","p"],["AM","PM"],Pi],[["AM","PM"],Pi,Pi],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Pi,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Pi,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Pi,"{1} 'at' {0}",Pi],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"$","US Dollar",{},function(e){let t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];const Mi="en-US";let Li=Mi;function Fi(e){var t;t="Expected localeId to be defined",null==e&&function(e){throw new Error(`ASSERTION ERROR: ${e}`)}(t),"string"==typeof e&&(Li=e.toLowerCase().replace(/_/g,"-"))}class Ui extends k{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,n){let r,i=e=>null,o=()=>null;e&&"object"==typeof e?(r=this.__isAsync?t=>{setTimeout(()=>e.next(t))}:t=>{e.next(t)},e.error&&(i=this.__isAsync?t=>{setTimeout(()=>e.error(t))}:t=>{e.error(t)}),e.complete&&(o=this.__isAsync?()=>{setTimeout(()=>e.complete())}:()=>{e.complete()})):(r=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)},t&&(i=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)}),n&&(o=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const s=super.subscribe(r,i,o);return e instanceof d&&e.add(s),s}}function Vi(){return this._results[Gt()]()}class ji{constructor(){this.dirty=!0,this._results=[],this.changes=new Ui,this.length=0;const e=Gt(),t=ji.prototype;t[e]||(t[e]=Vi)}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e){this._results=function e(t,n){void 0===n&&(n=t);for(let r=0;r<t.length;r++){let i=t[r];Array.isArray(i)?(n===t&&(n=t.slice(0,r)),e(i,n)):n!==t&&n.push(i)}return n}(e),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}const qi=new ke("Application Initializer");class Bi{constructor(e){this.appInits=e,this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}runInitializers(){if(this.initialized)return;const e=[],t=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const t=this.appInits[n]();Zt(t)&&e.push(t)}Promise.all(e).then(()=>{t()}).catch(e=>{this.reject(e)}),0===e.length&&t(),this.initialized=!0}}const Wi=new ke("AppId");function Hi(){return`${Ki()}${Ki()}${Ki()}`}function Ki(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const zi=new ke("Platform Initializer"),Gi=new ke("Platform ID"),Qi=new ke("appBootstrapListener");class $i{log(e){console.log(e)}warn(e){console.warn(e)}}const Yi=new ke("LocaleId"),Xi=!1;function Ji(){throw new Error("Runtime compiler is not loaded")}const Zi=Ji,eo=Ji,to=Ji,no=Ji;class ro{constructor(){this.compileModuleSync=Zi,this.compileModuleAsync=eo,this.compileModuleAndAllComponentsSync=to,this.compileModuleAndAllComponentsAsync=no}clearCache(){}clearCacheFor(e){}getModuleId(e){}}class io{}let oo,so;function ao(){const e=Ie.wtf;return!(!e||!(oo=e.trace)||(so=oo.events,0))}const lo=ao();function uo(e,t){return null}const co=lo?function(e,t=null){return so.createScope(e,t)}:(e,t)=>uo,ho=lo?function(e,t){return oo.leaveScope(e,t),t}:(e,t)=>t,po=(()=>Promise.resolve(0))();function fo(e){"undefined"==typeof Zone?po.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class go{constructor({enableLongStackTrace:e=!1}){if(this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ui(!1),this.onMicrotaskEmpty=new Ui(!1),this.onStable=new Ui(!1),this.onError=new Ui(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");var t;Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(t=this)._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,n,r,i,o,s)=>{try{return _o(t),e.invokeTask(r,i,o,s)}finally{bo(t)}},onInvoke:(e,n,r,i,o,s,a)=>{try{return _o(t),e.invoke(r,i,o,s,a)}finally{bo(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t.hasPendingMicrotasks=i.microTask,vo(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!go.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(go.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,n){return this._inner.run(e,t,n)}runTask(e,t,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,e,yo,mo,mo);try{return i.runTask(o,t,n)}finally{i.cancelTask(o)}}runGuarded(e,t,n){return this._inner.runGuarded(e,t,n)}runOutsideAngular(e){return this._outer.run(e)}}function mo(){}const yo={};function vo(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function _o(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function bo(e){e._nesting--,vo(e)}class wo{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ui,this.onMicrotaskEmpty=new Ui,this.onStable=new Ui,this.onError=new Ui}run(e){return e()}runGuarded(e){return e()}runOutsideAngular(e){return e()}runTask(e){return e()}}class Co{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{go.assertNotInAngularZone(),fo(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())fo(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(t=>!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,t,n){let r=-1;t&&t>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(e=>e.timeoutId!==r),e(this._didWork,this.getPendingTasks())},t)),this._callbacks.push({doneCb:e,timeoutId:r,updateCb:n})}whenStable(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,t,n){return[]}}class Eo{constructor(){this._applications=new Map,Io.addToWindow(this)}registerApplication(e,t){this._applications.set(e,t)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,t=!0){return Io.findTestabilityInTree(this,e,t)}}class To{addToWindow(e){}findTestabilityInTree(e,t,n){return null}}let So,Io=new To,ko=function(e,t,n){return e.get(io).createCompiler([t]).compileModuleAsync(n)},Ao=function(e){return e instanceof cn};const No=new ke("AllowMultipleToken");class Do{constructor(e,t){this.name=e,this.token=t}}function Ro(e,t,n=[]){const r=`Platform: ${t}`,i=new ke(r);return(t=[])=>{let o=Oo();if(!o||o.injector.get(No,!1))if(e)e(n.concat(t).concat({provide:i,useValue:!0}));else{const e=n.concat(t).concat({provide:i,useValue:!0});!function(e){if(So&&!So.destroyed&&!So.injector.get(No,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");So=e.get(Po);const t=e.get(zi,null);t&&t.forEach(e=>e())}(Lt.create({providers:e,name:r}))}return function(e){const t=Oo();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(i)}}function Oo(){return So&&!So.destroyed?So:null}class Po{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,t){const n="noop"===(i=t?t.ngZone:void 0)?new wo:("zone.js"===i?void 0:i)||new go({enableLongStackTrace:it()}),r=[{provide:go,useValue:n}];var i;return n.run(()=>{const t=Lt.create({providers:r,parent:this.injector,name:e.moduleType.name}),i=e.create(t),o=i.injector.get(tt,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return Xi&&Fi(i.injector.get(Yi,Mi)||Mi),i.onDestroy(()=>Lo(this._modules,i)),n.runOutsideAngular(()=>n.onError.subscribe({next:e=>{o.handleError(e)}})),function(e,t,n){try{const r=n();return Zt(r)?r.catch(n=>{throw t.runOutsideAngular(()=>e.handleError(n)),n}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(o,n,()=>{const e=i.injector.get(Bi);return e.runInitializers(),e.donePromise.then(()=>(this._moduleDoBootstrap(i),i))})})}bootstrapModule(e,t=[]){const n=xo({},t);return ko(this.injector,n,e).then(e=>this.bootstrapModuleFactory(e,n))}_moduleDoBootstrap(e){const t=e.injector.get(Mo);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(e=>t.bootstrap(e));else{if(!e.instance.ngDoBootstrap)throw new Error(`The module ${ve(e.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. `+"Please define one of these.");e.instance.ngDoBootstrap(t)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}function xo(e,t){return Array.isArray(t)?t.reduce(xo,e):Object.assign({},e,t)}let Mo=(()=>{class e{constructor(e,t,n,r,i,o){this._zone=e,this._console=t,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=it(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new w(e=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{e.next(this._stable),e.complete()})}),a=new w(e=>{let t;this._zone.runOutsideAngular(()=>{t=this._zone.onStable.subscribe(()=>{go.assertNotInAngularZone(),fo(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,e.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{go.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{e.next(!1)}))});return()=>{t.unsubscribe(),n.unsubscribe()}});this.isStable=J(s,a.pipe(se()))}bootstrap(e,t){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=e instanceof rn?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);const r=Ao(n)?null:this._injector.get(We),i=n.create(Lt.NULL,[],t||n.selector,r);i.onDestroy(()=>{this._unloadComponent(i)});const o=i.injector.get(Co,null);return o&&i.injector.get(Eo).registerApplication(i.location.nativeElement,o),this._loadComponent(i),it()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");const t=e._tickScope();try{this._runningTick=!0;for(let e of this._views)e.detectChanges();if(this._enforceNoNewChanges)for(let e of this._views)e.checkNoChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1,ho(t)}}attachView(e){const t=e;this._views.push(t),t.attachToAppRef(this)}detachView(e){const t=e;Lo(this._views,t),t.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(Qi,[]).concat(this._bootstrapListeners).forEach(t=>t(e))}_unloadComponent(e){this.detachView(e.hostView),Lo(this.components,e)}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy())}get viewCount(){return this._views.length}}return e._tickScope=co("ApplicationRef#tick()"),e})();function Lo(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class Fo{}const Uo="#",Vo="NgFactory";class jo{}const qo={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};class Bo{constructor(e,t){this._compiler=e,this._config=t||qo}load(e){return!Xi&&this._compiler instanceof ro?this.loadFactory(e):this.loadAndCompile(e)}loadAndCompile(e){let[t,r]=e.split(Uo);return void 0===r&&(r="default"),n("zn8P")(t).then(e=>e[r]).then(e=>Wo(e,t,r)).then(e=>this._compiler.compileModuleAsync(e))}loadFactory(e){let[t,r]=e.split(Uo),i=Vo;return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+t+this._config.factoryPathSuffix).then(e=>e[r+i]).then(e=>Wo(e,t,r))}}function Wo(e,t,n){if(!e)throw new Error(`Cannot find '${n}' in '${t}'`);return e}class Ho{constructor(e,t){this.name=e,this.callback=t}}class Ko{constructor(e,t,n){this.listeners=[],this.parent=null,this._debugContext=n,this.nativeNode=e,t&&t instanceof zo&&t.addChild(this)}get injector(){return this._debugContext.injector}get componentInstance(){return this._debugContext.component}get context(){return this._debugContext.context}get references(){return this._debugContext.references}get providerTokens(){return this._debugContext.providerTokens}}class zo extends Ko{constructor(e,t,n){super(e,t,n),this.properties={},this.attributes={},this.classes={},this.styles={},this.childNodes=[],this.nativeElement=e}addChild(e){e&&(this.childNodes.push(e),e.parent=this)}removeChild(e){const t=this.childNodes.indexOf(e);-1!==t&&(e.parent=null,this.childNodes.splice(t,1))}insertChildrenAfter(e,t){const n=this.childNodes.indexOf(e);-1!==n&&(this.childNodes.splice(n+1,0,...t),t.forEach(t=>{t.parent&&t.parent.removeChild(t),e.parent=this}))}insertBefore(e,t){const n=this.childNodes.indexOf(e);-1===n?this.addChild(t):(t.parent&&t.parent.removeChild(t),t.parent=this,this.childNodes.splice(n,0,t))}query(e){return this.queryAll(e)[0]||null}queryAll(e){const t=[];return function e(t,n,r){t.childNodes.forEach(t=>{t instanceof zo&&(n(t)&&r.push(t),e(t,n,r))})}(this,e,t),t}queryAllNodes(e){const t=[];return function e(t,n,r){t instanceof zo&&t.childNodes.forEach(t=>{n(t)&&r.push(t),t instanceof zo&&e(t,n,r)})}(this,e,t),t}get children(){return this.childNodes.filter(e=>e instanceof zo)}triggerEventHandler(e,t){this.listeners.forEach(n=>{n.name==e&&n.callback(t)})}}const Go=new Map,Qo=function(e){return Go.get(e)||null};function $o(e){Go.set(e.nativeNode,e)}const Yo=Ro(null,"core",[{provide:Gi,useValue:"unknown"},{provide:Po,deps:[Lt]},{provide:Eo,deps:[]},{provide:$i,deps:[]}]);function Xo(){return xn}function Jo(){return Mn}function Zo(e){return e?(Xi&&Fi(e),e):Mi}function es(e){let t=[];return e.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(e){t.push(e)}}class ts{constructor(e){}}function ns(e,t,n,r,i,o){e|=1;const{matchedQueries:s,references:a,matchedQueryIds:l}=yr(t);return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:e,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:s,matchedQueryIds:l,references:a,ngContentIndex:n,childCount:r,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:o?wr(o):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:i||Xn},provider:null,text:null,query:null,ngContent:null}}function rs(e,t,n,r,i,o,s=[],a,l,u,c,h){u||(u=Xn);const{matchedQueries:d,references:p,matchedQueryIds:f}=yr(n);let g=null,m=null;o&&([g,m]=Ar(o)),a=a||[];const y=new Array(a.length);for(let b=0;b<a.length;b++){const[e,t,n]=a[b],[r,i]=Ar(t);let o=void 0,s=void 0;switch(15&e){case 4:s=n;break;case 1:case 8:o=n}y[b]={flags:e,ns:r,name:i,nonMinifiedName:i,securityContext:o,suffix:s}}l=l||[];const v=new Array(l.length);for(let b=0;b<l.length;b++){const[e,t]=l[b];v[b]={type:0,target:e,eventName:t,propName:null}}const _=(s=s||[]).map(([e,t])=>{const[n,r]=Ar(e);return[n,r,t]});return h=function(e){if(e&&e.id===tr){const t=null!=e.encapsulation&&e.encapsulation!==Ge.None||e.styles.length||Object.keys(e.data).length;e.id=t?`c${ir++}`:nr}return e&&e.id===nr&&(e=null),e||null}(h),c&&(t|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:t|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:d,matchedQueryIds:f,references:p,ngContentIndex:r,childCount:i,bindings:y,bindingFlags:Nr(y),outputs:v,element:{ns:g,name:m,attrs:_,template:null,componentProvider:null,componentView:c||null,componentRendererType:h,publicProviders:null,allProviders:null,handleEvent:u||Xn},provider:null,text:null,query:null,ngContent:null}}function is(e,t,n){const r=n.element,i=e.root.selectorOrNode,o=e.renderer;let s;if(e.parent||!i){s=r.name?o.createElement(r.name,r.ns):o.createComment("");const i=_r(e,t,n);i&&o.appendChild(i,s)}else s=o.selectRootElement(i,!!r.componentRendererType&&r.componentRendererType.encapsulation===Ge.ShadowDom);if(r.attrs)for(let a=0;a<r.attrs.length;a++){const[e,t,n]=r.attrs[a];o.setAttribute(s,t,n,e)}return s}function os(e,t,n,r){for(let s=0;s<n.outputs.length;s++){const a=n.outputs[s],l=ss(e,n.nodeIndex,(o=a.eventName,(i=a.target)?`${i}:${o}`:o));let u=a.target,c=e;"component"===a.target&&(u=null,c=t);const h=c.renderer.listen(u||r,a.eventName,l);e.disposables[n.outputIndex+s]=h}var i,o}function ss(e,t,n){return r=>cr(e,t,n,r)}function as(e,t,n,r){if(!sr(e,t,n,r))return!1;const i=t.bindings[n],o=zn(e,t.nodeIndex),s=o.renderElement,a=i.name;switch(15&i.flags){case 1:!function(e,t,n,r,i,o){const s=t.securityContext;let a=s?e.root.sanitizer.sanitize(s,o):o;a=null!=a?a.toString():null;const l=e.renderer;null!=o?l.setAttribute(n,i,a,r):l.removeAttribute(n,i,r)}(e,i,s,i.ns,a,r);break;case 2:!function(e,t,n,r){const i=e.renderer;r?i.addClass(t,n):i.removeClass(t,n)}(e,s,a,r);break;case 4:!function(e,t,n,r,i){let o=e.root.sanitizer.sanitize(It.STYLE,i);if(null!=o){o=o.toString();const e=t.suffix;null!=e&&(o+=e)}else o=null;const s=e.renderer;null!=o?s.setStyle(n,r,o):s.removeStyle(n,r)}(e,i,s,a,r);break;case 8:!function(e,t,n,r,i){const o=t.securityContext;let s=o?e.root.sanitizer.sanitize(o,i):i;e.renderer.setProperty(n,r,s)}(33554432&t.flags&&32&i.flags?o.componentView:e,i,s,a,r)}return!0}function ls(e,t,n){let r=[];for(let i in n)r.push({propName:i,bindingType:n[i]});return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,ngContentIndex:-1,matchedQueries:{},matchedQueryIds:0,references:{},childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:{id:t,filterId:mr(t),bindings:r},ngContent:null}}function us(e){const t=e.def.nodeMatchedQueries;for(;e.parent&&gr(e);){let n=e.parentNodeDef;e=e.parent;const r=n.nodeIndex+n.childCount;for(let i=0;i<=r;i++){const r=e.def.nodes[i];67108864&r.flags&&536870912&r.flags&&(r.query.filterId&t)===r.query.filterId&&$n(e,i).setDirty(),!(1&r.flags&&i+r.childCount<n.nodeIndex)&&67108864&r.childFlags&&536870912&r.childFlags||(i+=r.childCount)}}if(134217728&e.def.nodeFlags)for(let n=0;n<e.def.nodes.length;n++){const t=e.def.nodes[n];134217728&t.flags&&536870912&t.flags&&$n(e,n).setDirty(),n+=t.childCount}}function cs(e,t){const n=$n(e,t.nodeIndex);if(!n.dirty)return;let r,i=void 0;if(67108864&t.flags){const n=t.parent.parent;i=hs(e,n.nodeIndex,n.nodeIndex+n.childCount,t.query,[]),r=Gn(e,t.parent.nodeIndex).instance}else 134217728&t.flags&&(i=hs(e,0,e.def.nodes.length-1,t.query,[]),r=e.component);n.reset(i);const o=t.query.bindings;let s=!1;for(let a=0;a<o.length;a++){const e=o[a];let t;switch(e.bindingType){case 0:t=n.first;break;case 1:t=n,s=!0}r[e.propName]=t}s&&n.notifyOnChanges()}function hs(e,t,n,r,i){for(let o=t;o<=n;o++){const t=e.def.nodes[o],n=t.matchedQueries[r.id];if(null!=n&&i.push(ds(e,t,n)),1&t.flags&&t.element.template&&(t.element.template.nodeMatchedQueries&r.filterId)===r.filterId){const n=zn(e,o);if((t.childMatchedQueries&r.filterId)===r.filterId&&(hs(e,o+1,o+t.childCount,r,i),o+=t.childCount),16777216&t.flags){const e=n.viewContainer._embeddedViews;for(let t=0;t<e.length;t++){const o=e[t],s=hr(o);s&&s===n&&hs(o,0,o.def.nodes.length-1,r,i)}}const s=n.template._projectedViews;if(s)for(let e=0;e<s.length;e++){const t=s[e];hs(t,0,t.def.nodes.length-1,r,i)}}(t.childMatchedQueries&r.filterId)!==r.filterId&&(o+=t.childCount)}return i}function ds(e,t,n){if(null!=n)switch(n){case 1:return zn(e,t.nodeIndex).renderElement;case 0:return new dn(zn(e,t.nodeIndex).renderElement);case 2:return zn(e,t.nodeIndex).template;case 3:return zn(e,t.nodeIndex).viewContainer;case 4:return Gn(e,t.nodeIndex).instance}}function ps(e,t,n){const r=_r(e,t,n);r&&Tr(e,n.ngContent.index,1,r,null,void 0)}function fs(e,t){const n=Object.keys(t),r=n.length,i=new Array(r);for(let o=0;o<r;o++){const e=n[o];i[t[e]]=e}return function(e,t,n){const r=new Array(n.length);for(let i=0;i<n.length;i++){const e=n[i];r[i]={flags:8,name:e,ns:null,nonMinifiedName:e,securityContext:null,suffix:null}}return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:64,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:-1,childCount:0,bindings:r,bindingFlags:Nr(r),outputs:[],element:null,provider:null,text:null,query:null,ngContent:null}}(0,e,i)}function gs(e,t,n){const r=new Array(n.length-1);for(let i=1;i<n.length;i++)r[i-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:n[i]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:t,childCount:0,bindings:r,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:n[0]},query:null,ngContent:null}}function ms(e,t,n){let r;const i=e.renderer;r=i.createText(n.text.prefix);const o=_r(e,t,n);return o&&i.appendChild(o,r),{renderText:r}}function ys(e,t){return(null!=e?e.toString():"")+t.suffix}function vs(e,t,n,r){let i=0,o=0,s=0,a=0,l=0,u=null,c=null,h=!1,d=!1,p=null;for(let f=0;f<t.length;f++){const e=t[f];if(e.nodeIndex=f,e.parent=u,e.bindingIndex=i,e.outputIndex=o,e.renderParent=c,s|=e.flags,l|=e.matchedQueryIds,e.element){const t=e.element;t.publicProviders=u?u.element.publicProviders:Object.create(null),t.allProviders=t.publicProviders,h=!1,d=!1,e.element.template&&(l|=e.element.template.nodeMatchedQueries)}if(bs(u,e,t.length),i+=e.bindings.length,o+=e.outputs.length,!c&&3&e.flags&&(p=e),20224&e.flags){h||(h=!0,u.element.publicProviders=Object.create(u.element.publicProviders),u.element.allProviders=u.element.publicProviders);const t=0!=(32768&e.flags);0==(8192&e.flags)||t?u.element.publicProviders[Zn(e.provider.token)]=e:(d||(d=!0,u.element.allProviders=Object.create(u.element.publicProviders)),u.element.allProviders[Zn(e.provider.token)]=e),t&&(u.element.componentProvider=e)}if(u?(u.childFlags|=e.flags,u.directChildFlags|=e.flags,u.childMatchedQueries|=e.matchedQueryIds,e.element&&e.element.template&&(u.childMatchedQueries|=e.element.template.nodeMatchedQueries)):a|=e.flags,e.childCount>0)u=e,_s(e)||(c=e);else for(;u&&f===u.nodeIndex+u.childCount;){const e=u.parent;e&&(e.childFlags|=u.childFlags,e.childMatchedQueries|=u.childMatchedQueries),c=(u=e)&&_s(u)?u.renderParent:u}}return{factory:null,nodeFlags:s,rootNodeFlags:a,nodeMatchedQueries:l,flags:e,nodes:t,updateDirectives:n||Xn,updateRenderer:r||Xn,handleEvent:(e,n,r,i)=>t[n].element.handleEvent(e,r,i),bindingCount:i,outputCount:o,lastRenderRootNode:p}}function _s(e){return 0!=(1&e.flags)&&null===e.element.name}function bs(e,t,n){const r=t.element&&t.element.template;if(r){if(!r.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(r.lastRenderRootNode&&16777216&r.lastRenderRootNode.flags)throw new Error(`Illegal State: Last root node of a template can't have embedded views, at index ${t.nodeIndex}!`)}if(20224&t.flags&&0==(1&(e?e.flags:0)))throw new Error(`Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index ${t.nodeIndex}!`);if(t.query){if(67108864&t.flags&&(!e||0==(16384&e.flags)))throw new Error(`Illegal State: Content Query nodes need to be children of directives, at index ${t.nodeIndex}!`);if(134217728&t.flags&&e)throw new Error(`Illegal State: View Query nodes have to be top level nodes, at index ${t.nodeIndex}!`)}if(t.childCount){const r=e?e.nodeIndex+e.childCount:n-1;if(t.nodeIndex<=r&&t.nodeIndex+t.childCount>r)throw new Error(`Illegal State: childCount of node leads outside of parent, at index ${t.nodeIndex}!`)}}function ws(e,t,n,r){const i=Ts(e.root,e.renderer,e,t,n);return Ss(i,e.component,r),Is(i),i}function Cs(e,t,n){const r=Ts(e,e.renderer,null,null,t);return Ss(r,n,n),Is(r),r}function Es(e,t,n,r){const i=t.element.componentRendererType;let o;return o=i?e.root.rendererFactory.createRenderer(r,i):e.root.renderer,Ts(e.root,o,e,t.element.componentProvider,n)}function Ts(e,t,n,r,i){const o=new Array(i.nodes.length),s=i.outputCount?new Array(i.outputCount):null;return{def:i,parent:n,viewContainerParent:null,parentNodeDef:r,context:null,component:null,nodes:o,state:13,root:e,renderer:t,oldValues:new Array(i.bindingCount),disposables:s,initIndex:-1}}function Ss(e,t,n){e.component=t,e.context=n}function Is(e){let t;fr(e)&&(t=zn(e.parent,e.parentNodeDef.parent.nodeIndex).renderElement);const n=e.def,r=e.nodes;for(let i=0;i<n.nodes.length;i++){const o=n.nodes[i];let s;switch(Yn.setCurrentNode(e,i),201347067&o.flags){case 1:const n=is(e,t,o);let a=void 0;if(33554432&o.flags){const t=wr(o.element.componentView);a=Yn.createComponentView(e,o,t,n)}os(e,a,o,n),s={renderElement:n,componentView:a,viewContainer:null,template:o.element.template?Yr(e,o):void 0},16777216&o.flags&&(s.viewContainer=zr(e,o,s));break;case 2:s=ms(e,t,o);break;case 512:case 1024:case 2048:case 256:(s=r[i])||4096&o.flags||(s={instance:yi(e,o)});break;case 16:s={instance:vi(e,o)};break;case 16384:(s=r[i])||(s={instance:_i(e,o)}),32768&o.flags&&Ss(zn(e,o.parent.nodeIndex).componentView,s.instance,s.instance);break;case 32:case 64:case 128:s={value:void 0};break;case 67108864:case 134217728:s=new ji;break;case 8:ps(e,t,o),s=void 0}r[i]=s}Ms(e,xs.CreateViewNodes),Vs(e,201326592,268435456,0)}function ks(e){Ds(e),Yn.updateDirectives(e,1),Ls(e,xs.CheckNoChanges),Yn.updateRenderer(e,1),Ms(e,xs.CheckNoChanges),e.state&=-97}function As(e){1&e.state?(e.state&=-2,e.state|=2):e.state&=-3,Wn(e,0,256),Ds(e),Yn.updateDirectives(e,0),Ls(e,xs.CheckAndUpdate),Vs(e,67108864,536870912,0);let t=Wn(e,256,512);ki(e,2097152|(t?1048576:0)),Yn.updateRenderer(e,0),Ms(e,xs.CheckAndUpdate),Vs(e,134217728,536870912,0),ki(e,8388608|((t=Wn(e,512,768))?4194304:0)),2&e.def.flags&&(e.state&=-9),e.state&=-97,Wn(e,768,1024)}function Ns(e,t,n,r,i,o,s,a,l,u,c,h,d){return 0===n?function(e,t,n,r,i,o,s,a,l,u,c,h){switch(201347067&t.flags){case 1:return function(e,t,n,r,i,o,s,a,l,u,c,h){const d=t.bindings.length;let p=!1;return d>0&&as(e,t,0,n)&&(p=!0),d>1&&as(e,t,1,r)&&(p=!0),d>2&&as(e,t,2,i)&&(p=!0),d>3&&as(e,t,3,o)&&(p=!0),d>4&&as(e,t,4,s)&&(p=!0),d>5&&as(e,t,5,a)&&(p=!0),d>6&&as(e,t,6,l)&&(p=!0),d>7&&as(e,t,7,u)&&(p=!0),d>8&&as(e,t,8,c)&&(p=!0),d>9&&as(e,t,9,h)&&(p=!0),p}(e,t,n,r,i,o,s,a,l,u,c,h);case 2:return function(e,t,n,r,i,o,s,a,l,u,c,h){let d=!1;const p=t.bindings,f=p.length;if(f>0&&sr(e,t,0,n)&&(d=!0),f>1&&sr(e,t,1,r)&&(d=!0),f>2&&sr(e,t,2,i)&&(d=!0),f>3&&sr(e,t,3,o)&&(d=!0),f>4&&sr(e,t,4,s)&&(d=!0),f>5&&sr(e,t,5,a)&&(d=!0),f>6&&sr(e,t,6,l)&&(d=!0),f>7&&sr(e,t,7,u)&&(d=!0),f>8&&sr(e,t,8,c)&&(d=!0),f>9&&sr(e,t,9,h)&&(d=!0),d){let d=t.text.prefix;f>0&&(d+=ys(n,p[0])),f>1&&(d+=ys(r,p[1])),f>2&&(d+=ys(i,p[2])),f>3&&(d+=ys(o,p[3])),f>4&&(d+=ys(s,p[4])),f>5&&(d+=ys(a,p[5])),f>6&&(d+=ys(l,p[6])),f>7&&(d+=ys(u,p[7])),f>8&&(d+=ys(c,p[8])),f>9&&(d+=ys(h,p[9]));const g=Kn(e,t.nodeIndex).renderText;e.renderer.setValue(g,d)}return d}(e,t,n,r,i,o,s,a,l,u,c,h);case 16384:return function(e,t,n,r,i,o,s,a,l,u,c,h){const d=Gn(e,t.nodeIndex),p=d.instance;let f=!1,g=void 0;const m=t.bindings.length;return m>0&&or(e,t,0,n)&&(f=!0,g=Ii(e,d,t,0,n,g)),m>1&&or(e,t,1,r)&&(f=!0,g=Ii(e,d,t,1,r,g)),m>2&&or(e,t,2,i)&&(f=!0,g=Ii(e,d,t,2,i,g)),m>3&&or(e,t,3,o)&&(f=!0,g=Ii(e,d,t,3,o,g)),m>4&&or(e,t,4,s)&&(f=!0,g=Ii(e,d,t,4,s,g)),m>5&&or(e,t,5,a)&&(f=!0,g=Ii(e,d,t,5,a,g)),m>6&&or(e,t,6,l)&&(f=!0,g=Ii(e,d,t,6,l,g)),m>7&&or(e,t,7,u)&&(f=!0,g=Ii(e,d,t,7,u,g)),m>8&&or(e,t,8,c)&&(f=!0,g=Ii(e,d,t,8,c,g)),m>9&&or(e,t,9,h)&&(f=!0,g=Ii(e,d,t,9,h,g)),g&&p.ngOnChanges(g),65536&t.flags&&Hn(e,256,t.nodeIndex)&&p.ngOnInit(),262144&t.flags&&p.ngDoCheck(),f}(e,t,n,r,i,o,s,a,l,u,c,h);case 32:case 64:case 128:return function(e,t,n,r,i,o,s,a,l,u,c,h){const d=t.bindings;let p=!1;const f=d.length;if(f>0&&sr(e,t,0,n)&&(p=!0),f>1&&sr(e,t,1,r)&&(p=!0),f>2&&sr(e,t,2,i)&&(p=!0),f>3&&sr(e,t,3,o)&&(p=!0),f>4&&sr(e,t,4,s)&&(p=!0),f>5&&sr(e,t,5,a)&&(p=!0),f>6&&sr(e,t,6,l)&&(p=!0),f>7&&sr(e,t,7,u)&&(p=!0),f>8&&sr(e,t,8,c)&&(p=!0),f>9&&sr(e,t,9,h)&&(p=!0),p){const p=Qn(e,t.nodeIndex);let g;switch(201347067&t.flags){case 32:g=new Array(d.length),f>0&&(g[0]=n),f>1&&(g[1]=r),f>2&&(g[2]=i),f>3&&(g[3]=o),f>4&&(g[4]=s),f>5&&(g[5]=a),f>6&&(g[6]=l),f>7&&(g[7]=u),f>8&&(g[8]=c),f>9&&(g[9]=h);break;case 64:g={},f>0&&(g[d[0].name]=n),f>1&&(g[d[1].name]=r),f>2&&(g[d[2].name]=i),f>3&&(g[d[3].name]=o),f>4&&(g[d[4].name]=s),f>5&&(g[d[5].name]=a),f>6&&(g[d[6].name]=l),f>7&&(g[d[7].name]=u),f>8&&(g[d[8].name]=c),f>9&&(g[d[9].name]=h);break;case 128:const e=n;switch(f){case 1:g=e.transform(n);break;case 2:g=e.transform(r);break;case 3:g=e.transform(r,i);break;case 4:g=e.transform(r,i,o);break;case 5:g=e.transform(r,i,o,s);break;case 6:g=e.transform(r,i,o,s,a);break;case 7:g=e.transform(r,i,o,s,a,l);break;case 8:g=e.transform(r,i,o,s,a,l,u);break;case 9:g=e.transform(r,i,o,s,a,l,u,c);break;case 10:g=e.transform(r,i,o,s,a,l,u,c,h)}}p.value=g}return p}(e,t,n,r,i,o,s,a,l,u,c,h);default:throw"unreachable"}}(e,t,r,i,o,s,a,l,u,c,h,d):function(e,t,n){switch(201347067&t.flags){case 1:return function(e,t,n){let r=!1;for(let i=0;i<n.length;i++)as(e,t,i,n[i])&&(r=!0);return r}(e,t,n);case 2:return function(e,t,n){const r=t.bindings;let i=!1;for(let o=0;o<n.length;o++)sr(e,t,o,n[o])&&(i=!0);if(i){let i="";for(let e=0;e<n.length;e++)i+=ys(n[e],r[e]);i=t.text.prefix+i;const o=Kn(e,t.nodeIndex).renderText;e.renderer.setValue(o,i)}return i}(e,t,n);case 16384:return function(e,t,n){const r=Gn(e,t.nodeIndex),i=r.instance;let o=!1,s=void 0;for(let a=0;a<n.length;a++)or(e,t,a,n[a])&&(o=!0,s=Ii(e,r,t,a,n[a],s));return s&&i.ngOnChanges(s),65536&t.flags&&Hn(e,256,t.nodeIndex)&&i.ngOnInit(),262144&t.flags&&i.ngDoCheck(),o}(e,t,n);case 32:case 64:case 128:return function(e,t,n){const r=t.bindings;let i=!1;for(let o=0;o<n.length;o++)sr(e,t,o,n[o])&&(i=!0);if(i){const i=Qn(e,t.nodeIndex);let o;switch(201347067&t.flags){case 32:o=n;break;case 64:o={};for(let i=0;i<n.length;i++)o[r[i].name]=n[i];break;case 128:const e=n[0],t=n.slice(1);o=e.transform(...t)}i.value=o}return i}(e,t,n);default:throw"unreachable"}}(e,t,r)}function Ds(e){const t=e.def;if(4&t.nodeFlags)for(let n=0;n<t.nodes.length;n++){const r=t.nodes[n];if(4&r.flags){const t=zn(e,n).template._projectedViews;if(t)for(let n=0;n<t.length;n++){const r=t[n];r.state|=32,ur(r,e)}}else 0==(4&r.childFlags)&&(n+=r.childCount)}}function Rs(e,t,n,r,i,o,s,a,l,u,c,h,d){return 0===n?function(e,t,n,r,i,o,s,a,l,u,c,h){const d=t.bindings.length;d>0&&ar(e,t,0,n),d>1&&ar(e,t,1,r),d>2&&ar(e,t,2,i),d>3&&ar(e,t,3,o),d>4&&ar(e,t,4,s),d>5&&ar(e,t,5,a),d>6&&ar(e,t,6,l),d>7&&ar(e,t,7,u),d>8&&ar(e,t,8,c),d>9&&ar(e,t,9,h)}(e,t,r,i,o,s,a,l,u,c,h,d):function(e,t,n){for(let r=0;r<n.length;r++)ar(e,t,r,n[r])}(e,t,r),!1}function Os(e,t){if($n(e,t.nodeIndex).dirty)throw jn(Yn.createDebugContext(e,t.nodeIndex),`Query ${t.query.id} not dirty`,`Query ${t.query.id} dirty`,0!=(1&e.state))}function Ps(e){if(!(128&e.state)){if(Ls(e,xs.Destroy),Ms(e,xs.Destroy),ki(e,131072),e.disposables)for(let t=0;t<e.disposables.length;t++)e.disposables[t]();!function(e){if(!(16&e.state))return;const t=hr(e);if(t){const n=t.template._projectedViews;n&&(ze(n,n.indexOf(e)),Yn.dirtyParentQueries(e))}}(e),e.renderer.destroyNode&&function(e){const t=e.def.nodes.length;for(let n=0;n<t;n++){const t=e.def.nodes[n];1&t.flags?e.renderer.destroyNode(zn(e,n).renderElement):2&t.flags?e.renderer.destroyNode(Kn(e,n).renderText):(67108864&t.flags||134217728&t.flags)&&$n(e,n).destroy()}}(e),fr(e)&&e.renderer.destroy(),e.state|=128}}const xs=function(){var e={CreateViewNodes:0,CheckNoChanges:1,CheckNoChangesProjectedViews:2,CheckAndUpdate:3,CheckAndUpdateProjectedViews:4,Destroy:5};return e[e.CreateViewNodes]="CreateViewNodes",e[e.CheckNoChanges]="CheckNoChanges",e[e.CheckNoChangesProjectedViews]="CheckNoChangesProjectedViews",e[e.CheckAndUpdate]="CheckAndUpdate",e[e.CheckAndUpdateProjectedViews]="CheckAndUpdateProjectedViews",e[e.Destroy]="Destroy",e}();function Ms(e,t){const n=e.def;if(33554432&n.nodeFlags)for(let r=0;r<n.nodes.length;r++){const i=n.nodes[r];33554432&i.flags?Fs(zn(e,r).componentView,t):0==(33554432&i.childFlags)&&(r+=i.childCount)}}function Ls(e,t){const n=e.def;if(16777216&n.nodeFlags)for(let r=0;r<n.nodes.length;r++){const i=n.nodes[r];if(16777216&i.flags){const n=zn(e,r).viewContainer._embeddedViews;for(let e=0;e<n.length;e++)Fs(n[e],t)}else 0==(16777216&i.childFlags)&&(r+=i.childCount)}}function Fs(e,t){const n=e.state;switch(t){case xs.CheckNoChanges:0==(128&n)&&(12==(12&n)?ks(e):64&n&&Us(e,xs.CheckNoChangesProjectedViews));break;case xs.CheckNoChangesProjectedViews:0==(128&n)&&(32&n?ks(e):64&n&&Us(e,t));break;case xs.CheckAndUpdate:0==(128&n)&&(12==(12&n)?As(e):64&n&&Us(e,xs.CheckAndUpdateProjectedViews));break;case xs.CheckAndUpdateProjectedViews:0==(128&n)&&(32&n?As(e):64&n&&Us(e,t));break;case xs.Destroy:Ps(e);break;case xs.CreateViewNodes:Is(e)}}function Us(e,t){Ls(e,t),Ms(e,t)}function Vs(e,t,n,r){if(!(e.def.nodeFlags&t&&e.def.nodeFlags&n))return;const i=e.def.nodes.length;for(let o=0;o<i;o++){const i=e.def.nodes[o];if(i.flags&t&&i.flags&n)switch(Yn.setCurrentNode(e,i.nodeIndex),r){case 0:cs(e,i);break;case 1:Os(e,i)}i.childFlags&t&&i.childFlags&n||(o+=i.childCount)}}let js=!1;function qs(e,t,n,r,i,o){const s=i.injector.get(gn);return Cs(Ws(e,i,s,t,n),r,o)}function Bs(e,t,n,r,i,o){const s=i.injector.get(gn),a=Ws(e,i,new wa(s),t,n),l=Zs(r);return _a(oa.create,Cs,null,[a,l,o])}function Ws(e,t,n,r,i){const o=t.injector.get(kt),s=t.injector.get(tt),a=n.createRenderer(null,null);return{ngModule:t,injector:e,projectableNodes:r,selectorOrNode:i,sanitizer:o,rendererFactory:n,renderer:a,errorHandler:s}}function Hs(e,t,n,r){const i=Zs(n);return _a(oa.create,ws,null,[e,t,i,r])}function Ks(e,t,n,r){return n=$s.get(t.element.componentProvider.provider.token)||Zs(n),_a(oa.create,Es,null,[e,t,n,r])}function zs(e,t,n,r){return ri(e,t,n,function(e){const{hasOverrides:t,hasDeprecatedOverrides:n}=function(e){let t=!1,n=!1;return 0===Gs.size?{hasOverrides:t,hasDeprecatedOverrides:n}:(e.providers.forEach(e=>{const r=Gs.get(e.token);3840&e.flags&&r&&(t=!0,n=n||r.deprecatedBehavior)}),e.modules.forEach(e=>{Qs.forEach((r,i)=>{me(i).providedIn===e&&(t=!0,n=n||r.deprecatedBehavior)})}),{hasOverrides:t,hasDeprecatedOverrides:n})}(e);return t?(function(e){for(let t=0;t<e.providers.length;t++){const r=e.providers[t];n&&(r.flags|=4096);const i=Gs.get(r.token);i&&(r.flags=-3841&r.flags|i.flags,r.deps=vr(i.deps),r.value=i.value)}if(Qs.size>0){let t=new Set(e.modules);Qs.forEach((r,i)=>{if(t.has(me(i).providedIn)){let t={token:i,flags:r.flags|(n?4096:0),deps:vr(r.deps),value:r.value,index:e.providers.length};e.providers.push(t),e.providersByKey[Zn(i)]=t}})}}(e=e.factory(()=>Xn)),e):e}(r))}const Gs=new Map,Qs=new Map,$s=new Map;function Ys(e){let t;Gs.set(e.token,e),"function"==typeof e.token&&(t=me(e.token))&&"function"==typeof t.providedIn&&Qs.set(e.token,e)}function Xs(e,t){const n=wr(t.viewDefFactory),r=wr(n.nodes[0].element.componentView);$s.set(e,r)}function Js(){Gs.clear(),Qs.clear(),$s.clear()}function Zs(e){if(0===Gs.size)return e;const t=function(e){const t=[];let n=null;for(let r=0;r<e.nodes.length;r++){const i=e.nodes[r];1&i.flags&&(n=i),n&&3840&i.flags&&Gs.has(i.provider.token)&&(t.push(n.nodeIndex),n=null)}return t}(e);if(0===t.length)return e;e=e.factory(()=>Xn);for(let r=0;r<t.length;r++)n(e,t[r]);return e;function n(e,t){for(let n=t+1;n<e.nodes.length;n++){const t=e.nodes[n];if(1&t.flags)return;if(3840&t.flags){const e=t.provider,n=Gs.get(e.token);n&&(t.flags=-3841&t.flags|n.flags,e.deps=vr(n.deps),e.value=n.value)}}}}function ea(e,t,n,r,i,o,s,a,l,u,c,h,d){const p=e.def.nodes[t];return Ns(e,p,n,r,i,o,s,a,l,u,c,h,d),224&p.flags?Qn(e,t).value:void 0}function ta(e,t,n,r,i,o,s,a,l,u,c,h,d){const p=e.def.nodes[t];return Rs(e,p,n,r,i,o,s,a,l,u,c,h,d),224&p.flags?Qn(e,t).value:void 0}function na(e){return _a(oa.detectChanges,As,null,[e])}function ra(e){return _a(oa.checkNoChanges,ks,null,[e])}function ia(e){return _a(oa.destroy,Ps,null,[e])}const oa=function(){var e={create:0,detectChanges:1,checkNoChanges:2,destroy:3,handleEvent:4};return e[e.create]="create",e[e.detectChanges]="detectChanges",e[e.checkNoChanges]="checkNoChanges",e[e.destroy]="destroy",e[e.handleEvent]="handleEvent",e}();let sa,aa,la;function ua(e,t){aa=e,la=t}function ca(e,t,n,r){return ua(e,t),_a(oa.handleEvent,e.def.handleEvent,null,[e,t,n,r])}function ha(e,t){if(128&e.state)throw Bn(oa[sa]);return ua(e,ga(e,0)),e.def.updateDirectives((function(e,n,r,...i){const o=e.def.nodes[n];return 0===t?pa(e,o,r,i):fa(e,o,r,i),16384&o.flags&&ua(e,ga(e,n)),224&o.flags?Qn(e,o.nodeIndex).value:void 0}),e)}function da(e,t){if(128&e.state)throw Bn(oa[sa]);return ua(e,ma(e,0)),e.def.updateRenderer((function(e,n,r,...i){const o=e.def.nodes[n];return 0===t?pa(e,o,r,i):fa(e,o,r,i),3&o.flags&&ua(e,ma(e,n)),224&o.flags?Qn(e,o.nodeIndex).value:void 0}),e)}function pa(e,t,n,r){if(Ns(e,t,n,...r)){const s=1===n?r[0]:r;if(16384&t.flags){const n={};for(let e=0;e<t.bindings.length;e++){const r=t.bindings[e],a=s[e];8&r.flags&&(n[(i=r.nonMinifiedName,o=void 0,o=i.replace(/[$@]/g,"_"),`ng-reflect-${i=o.replace(Dt,(...e)=>"-"+e[1].toLowerCase())}`)]=Rt(a))}const r=t.parent,a=zn(e,r.nodeIndex).renderElement;if(r.element.name)for(let t in n){const r=n[t];null!=r?e.renderer.setAttribute(a,t,r):e.renderer.removeAttribute(a,t)}else e.renderer.setValue(a,`bindings=${JSON.stringify(n,null,2)}`)}}var i,o}function fa(e,t,n,r){Rs(e,t,n,...r)}function ga(e,t){for(let n=t;n<e.def.nodes.length;n++){const t=e.def.nodes[n];if(16384&t.flags&&t.bindings&&t.bindings.length)return n}return null}function ma(e,t){for(let n=t;n<e.def.nodes.length;n++){const t=e.def.nodes[n];if(3&t.flags&&t.bindings&&t.bindings.length)return n}return null}class ya{constructor(e,t){this.view=e,this.nodeIndex=t,null==t&&(this.nodeIndex=t=0),this.nodeDef=e.def.nodes[t];let n=this.nodeDef,r=e;for(;n&&0==(1&n.flags);)n=n.parent;if(!n)for(;!n&&r;)n=dr(r),r=r.parent;this.elDef=n,this.elView=r}get elOrCompView(){return zn(this.elView,this.elDef.nodeIndex).componentView||this.view}get injector(){return Jr(this.elView,this.elDef)}get component(){return this.elOrCompView.component}get context(){return this.elOrCompView.context}get providerTokens(){const e=[];if(this.elDef)for(let t=this.elDef.nodeIndex+1;t<=this.elDef.nodeIndex+this.elDef.childCount;t++){const n=this.elView.def.nodes[t];20224&n.flags&&e.push(n.provider.token),t+=n.childCount}return e}get references(){const e={};if(this.elDef){va(this.elView,this.elDef,e);for(let t=this.elDef.nodeIndex+1;t<=this.elDef.nodeIndex+this.elDef.childCount;t++){const n=this.elView.def.nodes[t];20224&n.flags&&va(this.elView,n,e),t+=n.childCount}}return e}get componentRenderElement(){const e=function(e){for(;e&&!fr(e);)e=e.parent;return e.parent?zn(e.parent,dr(e).nodeIndex):null}(this.elOrCompView);return e?e.renderElement:void 0}get renderNode(){return 2&this.nodeDef.flags?pr(this.view,this.nodeDef):pr(this.elView,this.elDef)}logError(e,...t){let n,r;2&this.nodeDef.flags?(n=this.view.def,r=this.nodeDef.nodeIndex):(n=this.elView.def,r=this.elDef.nodeIndex);const i=function(e,t){let n=-1;for(let r=0;r<=t;r++)3&e.nodes[r].flags&&n++;return n}(n,r);let o=-1;n.factory(()=>++o===i?e.error.bind(e,...t):Xn),o<i&&(e.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),e.error(...t))}}function va(e,t,n){for(let r in t.references)n[r]=ds(e,t,t.references[r])}function _a(e,t,n,r){const i=sa,o=aa,s=la;try{sa=e;const a=t.apply(n,r);return aa=o,la=s,sa=i,a}catch(u){if(Je(u)||!aa)throw u;throw a=u,l=ba(),a instanceof Error||(a=new Error(a.toString())),qn(a,l),a}var a,l}function ba(){return aa?new ya(aa,la):null}class wa{constructor(e){this.delegate=e}createRenderer(e,t){return new Ca(this.delegate.createRenderer(e,t))}begin(){this.delegate.begin&&this.delegate.begin()}end(){this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)}}class Ca{constructor(e){this.delegate=e,this.debugContextFactory=ba,this.data=this.delegate.data}createDebugContext(e){return this.debugContextFactory(e)}destroyNode(e){const t=Qo(e);!function(e){Go.delete(e.nativeNode)}(t),t instanceof Ko&&(t.listeners.length=0),this.delegate.destroyNode&&this.delegate.destroyNode(e)}destroy(){this.delegate.destroy()}createElement(e,t){const n=this.delegate.createElement(e,t),r=this.createDebugContext(n);if(r){const t=new zo(n,null,r);t.name=e,$o(t)}return n}createComment(e){const t=this.delegate.createComment(e),n=this.createDebugContext(t);return n&&$o(new Ko(t,null,n)),t}createText(e){const t=this.delegate.createText(e),n=this.createDebugContext(t);return n&&$o(new Ko(t,null,n)),t}appendChild(e,t){const n=Qo(e),r=Qo(t);n&&r&&n instanceof zo&&n.addChild(r),this.delegate.appendChild(e,t)}insertBefore(e,t,n){const r=Qo(e),i=Qo(t),o=Qo(n);r&&i&&r instanceof zo&&r.insertBefore(o,i),this.delegate.insertBefore(e,t,n)}removeChild(e,t){const n=Qo(e),r=Qo(t);n&&r&&n instanceof zo&&n.removeChild(r),this.delegate.removeChild(e,t)}selectRootElement(e,t){const n=this.delegate.selectRootElement(e,t),r=ba();return r&&$o(new zo(n,null,r)),n}setAttribute(e,t,n,r){const i=Qo(e);i&&i instanceof zo&&(i.attributes[r?r+":"+t:t]=n),this.delegate.setAttribute(e,t,n,r)}removeAttribute(e,t,n){const r=Qo(e);r&&r instanceof zo&&(r.attributes[n?n+":"+t:t]=null),this.delegate.removeAttribute(e,t,n)}addClass(e,t){const n=Qo(e);n&&n instanceof zo&&(n.classes[t]=!0),this.delegate.addClass(e,t)}removeClass(e,t){const n=Qo(e);n&&n instanceof zo&&(n.classes[t]=!1),this.delegate.removeClass(e,t)}setStyle(e,t,n,r){const i=Qo(e);i&&i instanceof zo&&(i.styles[t]=n),this.delegate.setStyle(e,t,n,r)}removeStyle(e,t,n){const r=Qo(e);r&&r instanceof zo&&(r.styles[t]=null),this.delegate.removeStyle(e,t,n)}setProperty(e,t,n){const r=Qo(e);r&&r instanceof zo&&(r.properties[t]=n),this.delegate.setProperty(e,t,n)}listen(e,t,n){if("string"!=typeof e){const r=Qo(e);r&&r.listeners.push(new Ho(t,n))}return this.delegate.listen(e,t,n)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setValue(e,t){return this.delegate.setValue(e,t)}}function Ea(e,t,n){return new Ta(e,t,n)}class Ta extends He{constructor(e,t,n){super(),this.moduleType=e,this._bootstrapComponents=t,this._ngModuleDefFactory=n}create(e){!function(){if(js)return;js=!0;const e=it()?{setCurrentNode:ua,createRootView:Bs,createEmbeddedView:Hs,createComponentView:Ks,createNgModuleRef:zs,overrideProvider:Ys,overrideComponentView:Xs,clearOverrides:Js,checkAndUpdateView:na,checkNoChangesView:ra,destroyView:ia,createDebugContext:(e,t)=>new ya(e,t),handleEvent:ca,updateDirectives:ha,updateRenderer:da}:{setCurrentNode:()=>{},createRootView:qs,createEmbeddedView:ws,createComponentView:Es,createNgModuleRef:ri,overrideProvider:Xn,overrideComponentView:Xn,clearOverrides:Xn,checkAndUpdateView:As,checkNoChangesView:ks,destroyView:Ps,createDebugContext:(e,t)=>new ya(e,t),handleEvent:(e,t,n,r)=>e.def.handleEvent(e,t,n,r),updateDirectives:(e,t)=>e.def.updateDirectives(0===t?ea:ta,e),updateRenderer:(e,t)=>e.def.updateRenderer(0===t?ea:ta,e)};Yn.setCurrentNode=e.setCurrentNode,Yn.createRootView=e.createRootView,Yn.createEmbeddedView=e.createEmbeddedView,Yn.createComponentView=e.createComponentView,Yn.createNgModuleRef=e.createNgModuleRef,Yn.overrideProvider=e.overrideProvider,Yn.overrideComponentView=e.overrideComponentView,Yn.clearOverrides=e.clearOverrides,Yn.checkAndUpdateView=e.checkAndUpdateView,Yn.checkNoChangesView=e.checkNoChangesView,Yn.destroyView=e.destroyView,Yn.resolveDep=Ti,Yn.createDebugContext=e.createDebugContext,Yn.handleEvent=e.handleEvent,Yn.updateDirectives=e.updateDirectives,Yn.updateRenderer=e.updateRenderer,Yn.dirtyParentQueries=us}();const t=function(e){const t=Array.from(e.providers),n=Array.from(e.modules),r={};for(const i in e.providersByKey)r[i]=e.providersByKey[i];return{factory:e.factory,isRoot:e.isRoot,providers:t,modules:n,providersByKey:r}}(wr(this._ngModuleDefFactory));return Yn.createNgModuleRef(this.moduleType,e||Lt.NULL,this._bootstrapComponents,t)}}class Sa{constructor(e){this.proveedoresService=e,this.proveedores=[]}ngOnInit(){this.proveedoresService.GetProvList().snapshotChanges().subscribe(e=>{e.forEach(e=>{let t=e.payload.toJSON();t.$key=e.key,this.proveedores.push(t)})})}deleteProveedor(e){confirm("\xbfEstas seguro que deseas eliminarlo?")&&(this.proveedoresService.deleteProv(e),this.proveedores=[],this.proveedoresService.GetProvList().snapshotChanges().subscribe(e=>{e.forEach(e=>{let t=e.payload.toJSON();t.$key=e.key,this.proveedores.push(t)})}))}onEdit(e){this.proveedoresService.selectedProvee=Object.assign({},e)}}class Ia{constructor(){}ngOnInit(){}}class ka{}const Aa=new ke("Location Initialized");class Na{}const Da=new ke("appBaseHref");class Ra{constructor(e,t){this._subject=new Ui,this._urlChangeListeners=[],this._platformStrategy=e;const n=this._platformStrategy.getBaseHref();this._platformLocation=t,this._baseHref=Ra.stripTrailingSlash(Oa(n)),this._platformStrategy.onPopState(e=>{this._subject.emit({url:this.path(!0),pop:!0,state:e.state,type:e.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,t=""){return this.path()==this.normalize(e+Ra.normalizeQueryParams(t))}normalize(e){return Ra.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,Oa(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,t="",n=null){this._platformStrategy.pushState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Ra.normalizeQueryParams(t)),n)}replaceState(e,t="",n=null){this._platformStrategy.replaceState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Ra.normalizeQueryParams(t)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(e){this._urlChangeListeners.push(e),this.subscribe(e=>{this._notifyUrlChangeListeners(e.url,e.state)})}_notifyUrlChangeListeners(e="",t){this._urlChangeListeners.forEach(n=>n(e,t))}subscribe(e,t,n){return this._subject.subscribe({next:e,error:t,complete:n})}static normalizeQueryParams(e){return e&&"?"!==e[0]?"?"+e:e}static joinWithSlash(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}static stripTrailingSlash(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}}function Oa(e){return e.replace(/\/index.html$/,"")}class Pa extends Na{constructor(e,t){super(),this._platformLocation=e,this._baseHref="",null!=t&&(this._baseHref=t)}onPopState(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}getBaseHref(){return this._baseHref}path(e=!1){let t=this._platformLocation.hash;return null==t&&(t="#"),t.length>0?t.substring(1):t}prepareExternalUrl(e){const t=Ra.joinWithSlash(this._baseHref,e);return t.length>0?"#"+t:t}pushState(e,t,n,r){let i=this.prepareExternalUrl(n+Ra.normalizeQueryParams(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(e,t,i)}replaceState(e,t,n,r){let i=this.prepareExternalUrl(n+Ra.normalizeQueryParams(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}class xa extends Na{constructor(e,t){if(super(),this._platformLocation=e,null==t&&(t=this._platformLocation.getBaseHrefFromDOM()),null==t)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=t}onPopState(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Ra.joinWithSlash(this._baseHref,e)}path(e=!1){const t=this._platformLocation.pathname+Ra.normalizeQueryParams(this._platformLocation.search),n=this._platformLocation.hash;return n&&e?`${t}${n}`:t}pushState(e,t,n,r){const i=this.prepareExternalUrl(n+Ra.normalizeQueryParams(r));this._platformLocation.pushState(e,t,i)}replaceState(e,t,n,r){const i=this.prepareExternalUrl(n+Ra.normalizeQueryParams(r));this._platformLocation.replaceState(e,t,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}const Ma=function(){var e={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return e[e.Zero]="Zero",e[e.One]="One",e[e.Two]="Two",e[e.Few]="Few",e[e.Many]="Many",e[e.Other]="Other",e}(),La=function(e){return function(e){const t=e.toLowerCase().replace(/_/g,"-");let n=Ri[t];if(n)return n;const r=t.split("-")[0];if(n=Ri[r])return n;if("en"===r)return xi;throw new Error(`Missing locale data for the locale "${e}".`)}(e)[Oi.PluralCase]},Fa=new ke("UseV4Plurals");class Ua{}class Va extends Ua{constructor(e,t){super(),this.locale=e,this.deprecatedPluralFn=t}getPluralCategory(e,t){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(t||this.locale,e):La(t||this.locale)(e)){case Ma.Zero:return"zero";case Ma.One:return"one";case Ma.Two:return"two";case Ma.Few:return"few";case Ma.Many:return"many";default:return"other"}}}function ja(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const e=n.indexOf("="),[r,i]=-1==e?[n,""]:[n.slice(0,e),n.slice(e+1)];if(r.trim()===t)return decodeURIComponent(i)}return null}class qa{constructor(e,t,n,r){this.$implicit=e,this.ngForOf=t,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}class Ba{constructor(e,t,n){this._viewContainer=e,this._template=t,this._differs=n,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){it()&&null!=e&&"function"!=typeof e&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(e)}. `+"See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information."),this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(t){throw new Error(`Cannot find a differ supporting object '${n}' of type '${e=n,e.name||typeof e}'. NgFor only supports binding to Iterables such as Arrays.`)}}var e;if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const t=[];e.forEachOperation((e,n,r)=>{if(null==e.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new qa(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new Wa(e,n);t.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new Wa(e,i);t.push(o)}});for(let n=0;n<t.length;n++)this._perViewChange(t[n].view,t[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const e=this._viewContainer.get(n);e.context.index=n,e.context.count=r,e.context.ngForOf=this._ngForOf}e.forEachIdentityChange(e=>{this._viewContainer.get(e.currentIndex).context.$implicit=e.item})}_perViewChange(e,t){e.context.$implicit=t.item}static ngTemplateContextGuard(e,t){return!0}}class Wa{constructor(e,t){this.record=e,this.view=t}}class Ha{constructor(e,t){this._viewContainer=e,this._context=new Ka,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=t}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){za("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){za("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}}class Ka{constructor(){this.$implicit=null,this.ngIf=null}}function za(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${ve(t)}'.`)}class Ga{transform(e){return JSON.stringify(e,null,2)}}class Qa{}const $a=new ke("DocumentToken"),Ya="server";function Xa(e){return e===Ya}let Ja=(()=>{class e{}return e.ngInjectableDef=ge({token:e,providedIn:"root",factory:()=>new Za(je($a),window,je(tt))}),e})();class Za{constructor(e,t,n){this.document=e,this.window=t,this.errorHandler=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(e){this.supportScrollRestoration()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(this.supportScrollRestoration()){e=this.window.CSS&&this.window.CSS.escape?this.window.CSS.escape(e):e.replace(/(\"|\'\ |:|\.|\[|\]|,|=)/g,"\\$1");try{const t=this.document.querySelector(`#${e}`);if(t)return void this.scrollToElement(t);const n=this.document.querySelector(`[name='${e}']`);if(n)return void this.scrollToElement(n)}catch(t){this.errorHandler.handleError(t)}}}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}supportScrollRestoration(){try{return!!this.window&&!!this.window.scrollTo}catch(e){return!1}}}let el=null;function tl(){return el}class nl{constructor(){this.resourceLoaderType=null}get attrToPropMap(){return this._attrToPropMap}set attrToPropMap(e){this._attrToPropMap=e}}class rl extends nl{constructor(){super(),this._animationPrefix=null,this._transitionEnd=null;try{const e=this.createElement("div",document);if(null!=this.getStyle(e,"animationName"))this._animationPrefix="";else{const t=["Webkit","Moz","O","ms"];for(let n=0;n<t.length;n++)if(null!=this.getStyle(e,t[n]+"AnimationName")){this._animationPrefix="-"+t[n].toLowerCase()+"-";break}}const t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(t).forEach(n=>{null!=this.getStyle(e,n)&&(this._transitionEnd=t[n])})}catch(e){this._animationPrefix=null,this._transitionEnd=null}}getDistributedNodes(e){return e.getDistributedNodes()}resolveAndSetHref(e,t,n){e.href=null==n?t:t+"/../"+n}supportsDOMEvents(){return!0}supportsNativeShadowDOM(){return"function"==typeof document.body.createShadowRoot}getAnimationPrefix(){return this._animationPrefix?this._animationPrefix:""}getTransitionEnd(){return this._transitionEnd?this._transitionEnd:""}supportsAnimation(){return null!=this._animationPrefix&&null!=this._transitionEnd}}const il={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},ol=3,sl={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},al={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ll=(()=>{if(Ie.Node)return Ie.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))}})();class ul extends rl{parse(e){throw new Error("parse not implemented")}static makeCurrent(){var e;e=new ul,el||(el=e)}hasProperty(e,t){return t in e}setProperty(e,t,n){e[t]=n}getProperty(e,t){return e[t]}invoke(e,t,n){e[t](...n)}logError(e){window.console&&(console.error?console.error(e):console.log(e))}log(e){window.console&&window.console.log&&window.console.log(e)}logGroup(e){window.console&&window.console.group&&window.console.group(e)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}get attrToPropMap(){return il}contains(e,t){return ll.call(e,t)}querySelector(e,t){return e.querySelector(t)}querySelectorAll(e,t){return e.querySelectorAll(t)}on(e,t,n){e.addEventListener(t,n,!1)}onAndCancel(e,t,n){return e.addEventListener(t,n,!1),()=>{e.removeEventListener(t,n,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}createMouseEvent(e){const t=this.getDefaultDocument().createEvent("MouseEvent");return t.initEvent(e,!0,!0),t}createEvent(e){const t=this.getDefaultDocument().createEvent("Event");return t.initEvent(e,!0,!0),t}preventDefault(e){e.preventDefault(),e.returnValue=!1}isPrevented(e){return e.defaultPrevented||null!=e.returnValue&&!e.returnValue}getInnerHTML(e){return e.innerHTML}getTemplateContent(e){return"content"in e&&this.isTemplateElement(e)?e.content:null}getOuterHTML(e){return e.outerHTML}nodeName(e){return e.nodeName}nodeValue(e){return e.nodeValue}type(e){return e.type}content(e){return this.hasProperty(e,"content")?e.content:e}firstChild(e){return e.firstChild}nextSibling(e){return e.nextSibling}parentElement(e){return e.parentNode}childNodes(e){return e.childNodes}childNodesAsList(e){const t=e.childNodes,n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=t[r];return n}clearNodes(e){for(;e.firstChild;)e.removeChild(e.firstChild)}appendChild(e,t){e.appendChild(t)}removeChild(e,t){e.removeChild(t)}replaceChild(e,t,n){e.replaceChild(t,n)}remove(e){return e.parentNode&&e.parentNode.removeChild(e),e}insertBefore(e,t,n){e.insertBefore(n,t)}insertAllBefore(e,t,n){n.forEach(n=>e.insertBefore(n,t))}insertAfter(e,t,n){e.insertBefore(n,t.nextSibling)}setInnerHTML(e,t){e.innerHTML=t}getText(e){return e.textContent}setText(e,t){e.textContent=t}getValue(e){return e.value}setValue(e,t){e.value=t}getChecked(e){return e.checked}setChecked(e,t){e.checked=t}createComment(e){return this.getDefaultDocument().createComment(e)}createTemplate(e){const t=this.getDefaultDocument().createElement("template");return t.innerHTML=e,t}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createElementNS(e,t,n){return(n=n||this.getDefaultDocument()).createElementNS(e,t)}createTextNode(e,t){return(t=t||this.getDefaultDocument()).createTextNode(e)}createScriptTag(e,t,n){const r=(n=n||this.getDefaultDocument()).createElement("SCRIPT");return r.setAttribute(e,t),r}createStyleElement(e,t){const n=(t=t||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(e,t)),n}createShadowRoot(e){return e.createShadowRoot()}getShadowRoot(e){return e.shadowRoot}getHost(e){return e.host}clone(e){return e.cloneNode(!0)}getElementsByClassName(e,t){return e.getElementsByClassName(t)}getElementsByTagName(e,t){return e.getElementsByTagName(t)}classList(e){return Array.prototype.slice.call(e.classList,0)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}hasClass(e,t){return e.classList.contains(t)}setStyle(e,t,n){e.style[t]=n}removeStyle(e,t){e.style[t]=""}getStyle(e,t){return e.style[t]}hasStyle(e,t,n){const r=this.getStyle(e,t)||"";return n?r==n:r.length>0}tagName(e){return e.tagName}attributeMap(e){const t=new Map,n=e.attributes;for(let r=0;r<n.length;r++){const e=n.item(r);t.set(e.name,e.value)}return t}hasAttribute(e,t){return e.hasAttribute(t)}hasAttributeNS(e,t,n){return e.hasAttributeNS(t,n)}getAttribute(e,t){return e.getAttribute(t)}getAttributeNS(e,t,n){return e.getAttributeNS(t,n)}setAttribute(e,t,n){e.setAttribute(t,n)}setAttributeNS(e,t,n,r){e.setAttributeNS(t,n,r)}removeAttribute(e,t){e.removeAttribute(t)}removeAttributeNS(e,t,n){e.removeAttributeNS(t,n)}templateAwareRoot(e){return this.isTemplateElement(e)?this.content(e):e}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}getBoundingClientRect(e){try{return e.getBoundingClientRect()}catch(t){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}}getTitle(e){return e.title}setTitle(e,t){e.title=t||""}elementMatches(e,t){return!!this.isElementNode(e)&&(e.matches&&e.matches(t)||e.msMatchesSelector&&e.msMatchesSelector(t)||e.webkitMatchesSelector&&e.webkitMatchesSelector(t))}isTemplateElement(e){return this.isElementNode(e)&&"TEMPLATE"===e.nodeName}isTextNode(e){return e.nodeType===Node.TEXT_NODE}isCommentNode(e){return e.nodeType===Node.COMMENT_NODE}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}hasShadowRoot(e){return null!=e.shadowRoot&&e instanceof HTMLElement}isShadowRoot(e){return e instanceof DocumentFragment}importIntoDoc(e){return document.importNode(this.templateAwareRoot(e),!0)}adoptNode(e){return document.adoptNode(e)}getHref(e){return e.getAttribute("href")}getEventKey(e){let t=e.key;if(null==t){if(null==(t=e.keyIdentifier))return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),e.location===ol&&al.hasOwnProperty(t)&&(t=al[t]))}return sl[t]||t}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(e){const t=hl||(hl=document.querySelector("base"))?hl.getAttribute("href"):null;return null==t?null:(n=t,cl||(cl=document.createElement("a")),cl.setAttribute("href",n),"/"===cl.pathname.charAt(0)?cl.pathname:"/"+cl.pathname);var n}resetBaseElement(){hl=null}getUserAgent(){return window.navigator.userAgent}setData(e,t,n){this.setAttribute(e,"data-"+t,n)}getData(e,t){return this.getAttribute(e,"data-"+t)}getComputedStyle(e){return getComputedStyle(e)}supportsWebAnimation(){return"function"==typeof Element.prototype.animate}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(e){return ja(document.cookie,e)}setCookie(e,t){document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)}}let cl,hl=null;function dl(){return!!window.history.pushState}const pl=new ke("TRANSITION_ID"),fl=[{provide:qi,useFactory:function(e,t,n){return()=>{n.get(Bi).donePromise.then(()=>{const n=tl();Array.prototype.slice.apply(n.querySelectorAll(t,"style[ng-transition]")).filter(t=>n.getAttribute(t,"ng-transition")===e).forEach(e=>n.remove(e))})}},deps:[pl,$a,Lt],multi:!0}];class gl{static init(){var e;e=new gl,Io=e}addToWindow(e){Ie.getAngularTestability=(t,n=!0)=>{const r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r},Ie.getAllAngularTestabilities=()=>e.getAllTestabilities(),Ie.getAllAngularRootElements=()=>e.getAllRootElements(),Ie.frameworkStabilizers||(Ie.frameworkStabilizers=[]),Ie.frameworkStabilizers.push(e=>{const t=Ie.getAllAngularTestabilities();let n=t.length,r=!1;const i=function(t){r=r||t,0==--n&&e(r)};t.forEach((function(e){e.whenStable(i)}))})}findTestabilityInTree(e,t,n){if(null==t)return null;const r=e.getTestability(t);return null!=r?r:n?tl().isShadowRoot(t)?this.findTestabilityInTree(e,tl().getHost(t),!0):this.findTestabilityInTree(e,tl().parentElement(t),!0):null}}function ml(e,t){"undefined"!=typeof COMPILED&&COMPILED||((Ie.ng=Ie.ng||{})[e]=t)}const yl=(()=>({ApplicationRef:Mo,NgZone:go}))();function vl(e){return Qo(e)}const _l=new ke("EventManagerPlugins");class bl{constructor(e,t){this._zone=t,this._eventNameToPlugin=new Map,e.forEach(e=>e.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}addGlobalEventListener(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}getZone(){return this._zone}_findPluginFor(e){const t=this._eventNameToPlugin.get(e);if(t)return t;const n=this._plugins;for(let r=0;r<n.length;r++){const t=n[r];if(t.supports(e))return this._eventNameToPlugin.set(e,t),t}throw new Error(`No event manager plugin found for event ${e}`)}}class wl{constructor(e){this._doc=e}addGlobalEventListener(e,t,n){const r=tl().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,n)}}class Cl{constructor(){this._stylesSet=new Set}addStyles(e){const t=new Set;e.forEach(e=>{this._stylesSet.has(e)||(this._stylesSet.add(e),t.add(e))}),this.onStylesAdded(t)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}class El extends Cl{constructor(e){super(),this._doc=e,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(e.head)}_addStylesToHost(e,t){e.forEach(e=>{const n=this._doc.createElement("style");n.textContent=e,this._styleNodes.add(t.appendChild(n))})}addHost(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)}removeHost(e){this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach(t=>this._addStylesToHost(e,t))}ngOnDestroy(){this._styleNodes.forEach(e=>tl().remove(e))}}const Tl={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Sl=/%COMP%/g,Il="_nghost-%COMP%",kl="_ngcontent-%COMP%";function Al(e,t,n){for(let r=0;r<t.length;r++){let i=t[r];Array.isArray(i)?Al(e,i,n):(i=i.replace(Sl,e),n.push(i))}return n}function Nl(e){return t=>{!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}class Dl{constructor(e,t,n){this.eventManager=e,this.sharedStylesHost=t,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new Rl(e)}createRenderer(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case Ge.Emulated:{let n=this.rendererByCompId.get(t.id);return n||(n=new xl(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n}case Ge.Native:case Ge.ShadowDom:return new Ml(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){const e=Al(t.id,t.styles,[]);this.sharedStylesHost.addStyles(e),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}class Rl{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(Tl[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,n){e&&e.insertBefore(t,n)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error(`The selector "${e}" did not match any elements`);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,r){if(r){t=r+":"+t;const i=Tl[r];i?e.setAttributeNS(i,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){const r=Tl[n];r?e.removeAttributeNS(r,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,r){r&mn.DashCase?e.style.setProperty(t,n,r&mn.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&mn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){Pl(t,"property"),e[t]=n}setValue(e,t){e.nodeValue=t}listen(e,t,n){return Pl(t,"listener"),"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Nl(n)):this.eventManager.addEventListener(e,t,Nl(n))}}const Ol=(()=>"@".charCodeAt(0))();function Pl(e,t){if(e.charCodeAt(0)===Ol)throw new Error(`Found the synthetic ${t} ${e}. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.`)}class xl extends Rl{constructor(e,t,n,r){super(e),this.component=n;const i=Al(r+"-"+n.id,n.styles,[]);t.addStyles(i),this.contentAttr=kl.replace(Sl,r+"-"+n.id),this.hostAttr=Il.replace(Sl,r+"-"+n.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}}class Ml extends Rl{constructor(e,t,n,r){super(e),this.sharedStylesHost=t,this.hostEl=n,this.component=r,this.shadowRoot=r.encapsulation===Ge.ShadowDom?n.attachShadow({mode:"open"}):n.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const i=Al(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const e=document.createElement("style");e.textContent=i[o],this.shadowRoot.appendChild(e)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}const Ll=(()=>"undefined"!=typeof Zone&&Zone.__symbol__||function(e){return"__zone_symbol__"+e})(),Fl=Ll("addEventListener"),Ul=Ll("removeEventListener"),Vl={},jl="FALSE",ql="ANGULAR",Bl="addEventListener",Wl="removeEventListener",Hl="__zone_symbol__propagationStopped",Kl="__zone_symbol__stopImmediatePropagation",zl=(()=>{const e="undefined"!=typeof Zone&&Zone[Ll("BLACK_LISTED_EVENTS")];if(e){const t={};return e.forEach(e=>{t[e]=e}),t}})(),Gl=function(e){return!!zl&&zl.hasOwnProperty(e)},Ql=function(e){const t=Vl[e.type];if(!t)return;const n=this[t];if(!n)return;const r=[e];if(1===n.length){const e=n[0];return e.zone!==Zone.current?e.zone.run(e.handler,this,r):e.handler.apply(this,r)}{const t=n.slice();for(let n=0;n<t.length&&!0!==e[Hl];n++){const e=t[n];e.zone!==Zone.current?e.zone.run(e.handler,this,r):e.handler.apply(this,r)}}};class $l extends wl{constructor(e,t,n){super(e),this.ngZone=t,n&&Xa(n)||this.patchEvent()}patchEvent(){if("undefined"==typeof Event||!Event||!Event.prototype)return;if(Event.prototype[Kl])return;const e=Event.prototype[Kl]=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[Hl]=!0),e&&e.apply(this,arguments)}}supports(e){return!0}addEventListener(e,t,n){let r=n;if(!e[Fl]||go.isInAngularZone()&&!Gl(t))e[Bl](t,r,!1);else{let n=Vl[t];n||(n=Vl[t]=Ll(ql+t+jl));let i=e[n];const o=i&&i.length>0;i||(i=e[n]=[]);const s=Gl(t)?Zone.root:Zone.current;if(0===i.length)i.push({zone:s,handler:r});else{let e=!1;for(let t=0;t<i.length;t++)if(i[t].handler===r){e=!0;break}e||i.push({zone:s,handler:r})}o||e[Fl](t,Ql,!1)}return()=>this.removeEventListener(e,t,r)}removeEventListener(e,t,n){let r=e[Ul];if(!r)return e[Wl].apply(e,[t,n,!1]);let i=Vl[t],o=i&&e[i];if(!o)return e[Wl].apply(e,[t,n,!1]);let s=!1;for(let a=0;a<o.length;a++)if(o[a].handler===n){s=!0,o.splice(a,1);break}s?0===o.length&&r.apply(e,[t,Ql,!1]):e[Wl].apply(e,[t,n,!1])}}const Yl={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},Xl=new ke("HammerGestureConfig"),Jl=new ke("HammerLoader");class Zl{constructor(){this.events=[],this.overrides={}}buildHammer(e){const t=new Hammer(e,this.options);t.get("pinch").set({enable:!0}),t.get("rotate").set({enable:!0});for(const n in this.overrides)t.get(n).set(this.overrides[n]);return t}}class eu extends wl{constructor(e,t,n,r){super(e),this._config=t,this.console=n,this.loader=r}supports(e){return!(!Yl.hasOwnProperty(e.toLowerCase())&&!this.isCustomEvent(e)||!window.Hammer&&!this.loader&&(this.console.warn(`The "${e}" event cannot be bound because Hammer.JS is not `+"loaded and no custom loader has been specified."),1))}addEventListener(e,t,n){const r=this.manager.getZone();if(t=t.toLowerCase(),!window.Hammer&&this.loader){let r=!1,i=()=>{r=!0};return this.loader().then(()=>{if(!window.Hammer)return this.console.warn("The custom HAMMER_LOADER completed, but Hammer.JS is not present."),void(i=()=>{});r||(i=this.addEventListener(e,t,n))}).catch(()=>{this.console.warn(`The "${t}" event cannot be bound because the custom `+"Hammer.JS loader failed."),i=()=>{}}),()=>{i()}}return r.runOutsideAngular(()=>{const i=this._config.buildHammer(e),o=function(e){r.runGuarded((function(){n(e)}))};return i.on(t,o),()=>{i.off(t,o),"function"==typeof i.destroy&&i.destroy()}})}isCustomEvent(e){return this._config.events.indexOf(e)>-1}}const tu=["alt","control","meta","shift"],nu={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};class ru extends wl{constructor(e){super(e)}supports(e){return null!=ru.parseEventName(e)}addEventListener(e,t,n){const r=ru.parseEventName(t),i=ru.eventCallback(r.fullKey,n,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>tl().onAndCancel(e,r.domEventName,i))}static parseEventName(e){const t=e.toLowerCase().split("."),n=t.shift();if(0===t.length||"keydown"!==n&&"keyup"!==n)return null;const r=ru._normalizeKey(t.pop());let i="";if(tu.forEach(e=>{const n=t.indexOf(e);n>-1&&(t.splice(n,1),i+=e+".")}),i+=r,0!=t.length||0===r.length)return null;const o={};return o.domEventName=n,o.fullKey=i,o}static getEventFullKey(e){let t="",n=tl().getEventKey(e);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),tu.forEach(r=>{r!=n&&(0,nu[r])(e)&&(t+=r+".")}),t+=n}static eventCallback(e,t,n){return r=>{ru.getEventFullKey(r)===e&&n.runGuarded(()=>t(r))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}class iu{}class ou extends iu{constructor(e){super(),this._doc=e}sanitize(e,t){if(null==t)return null;switch(e){case It.NONE:return t;case It.HTML:return t instanceof au?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"HTML"),function(e,t){let n=null;try{Tt=Tt||new ot(e);let r=t?String(t):"";n=Tt.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=Tt.getInertBodyElement(r)}while(r!==o);const s=new bt,a=s.sanitizeChildren(St(n)||n);return it()&&s.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),a}finally{if(n){const e=St(n)||n;for(;e.firstChild;)e.removeChild(e.firstChild)}}}(this._doc,String(t)));case It.STYLE:return t instanceof lu?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"Style"),function(e){if(!(e=String(e).trim()))return"";const t=e.match(Nt);return t&&lt(t[1])===t[1]||e.match(At)&&function(e){let t=!0,n=!0;for(let r=0;r<e.length;r++){const i=e.charAt(r);"'"===i&&n?t=!t:'"'===i&&t&&(n=!n)}return t&&n}(e)?e:(it()&&console.warn(`WARNING: sanitizing unsafe style value ${e} (see http://g.co/ng/security#xss).`),"unsafe")}(t));case It.SCRIPT:if(t instanceof uu)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"Script"),new Error("unsafe value used in a script context");case It.URL:return t instanceof hu||t instanceof cu?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"URL"),lt(String(t)));case It.RESOURCE_URL:if(t instanceof hu)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see http://g.co/ng/security#xss)`)}}checkNotSafeValue(e,t){if(e instanceof su)throw new Error(`Required a safe ${t}, got a ${e.getTypeName()} `+"(see http://g.co/ng/security#xss)")}bypassSecurityTrustHtml(e){return new au(e)}bypassSecurityTrustStyle(e){return new lu(e)}bypassSecurityTrustScript(e){return new uu(e)}bypassSecurityTrustUrl(e){return new cu(e)}bypassSecurityTrustResourceUrl(e){return new hu(e)}}class su{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity}`+" (see http://g.co/ng/security#xss)"}}class au extends su{getTypeName(){return"HTML"}}class lu extends su{getTypeName(){return"Style"}}class uu extends su{getTypeName(){return"Script"}}class cu extends su{getTypeName(){return"URL"}}class hu extends su{getTypeName(){return"ResourceURL"}}const du=Ro(Yo,"browser",[{provide:Gi,useValue:"browser"},{provide:zi,useValue:function(){ul.makeCurrent(),gl.init()},multi:!0},{provide:ka,useClass:class extends ka{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=tl().getLocation(),this._history=tl().getHistory()}getBaseHrefFromDOM(){return tl().getBaseHref(this._doc)}onPopState(e){tl().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)}onHashChange(e){tl().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,t,n){dl()?this._history.pushState(e,t,n):this.location.hash=n}replaceState(e,t,n){dl()?this._history.replaceState(e,t,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}},deps:[$a]},{provide:$a,useFactory:function(){return document},deps:[]}]);function pu(){return new tt}class fu{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:fu,providers:[{provide:Wi,useValue:e.appId},{provide:pl,useExisting:Wi},fl]}}}"undefined"!=typeof window&&window;const gu=new w(e=>e.complete());function mu(e){return e?function(e){return new w(t=>e.schedule(()=>t.complete()))}(e):gu}class yu extends q{constructor(e,t){super(e),this.sources=t,this.completed=0,this.haveValues=0;const n=t.length;this.values=new Array(n);for(let r=0;r<n;r++){const e=j(this,t[r],null,r);e&&this.add(e)}}notifyNext(e,t,n,r,i){this.values[n]=t,i._hasValue||(i._hasValue=!0,this.haveValues++)}notifyComplete(e){const{destination:t,haveValues:n,values:r}=this,i=r.length;e._hasValue?(this.completed++,this.completed===i&&(n===i&&t.next(r),t.complete())):t.complete()}}const vu=new ke("NgValueAccessor"),_u=new ke("CompositionEventMode");class bu{constructor(e,t,n){this._renderer=e,this._elementRef=t,this._compositionMode=n,this.onChange=e=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const e=tl()?tl().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}class wu{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Cu extends wu{get formDirective(){return null}get path(){return null}}function Eu(){throw new Error("unimplemented")}class Tu extends wu{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null,this._rawValidators=[],this._rawAsyncValidators=[]}get validator(){return Eu()}get asyncValidator(){return Eu()}}class Su{constructor(e){this._cd=e}get ngClassUntouched(){return!!this._cd.control&&this._cd.control.untouched}get ngClassTouched(){return!!this._cd.control&&this._cd.control.touched}get ngClassPristine(){return!!this._cd.control&&this._cd.control.pristine}get ngClassDirty(){return!!this._cd.control&&this._cd.control.dirty}get ngClassValid(){return!!this._cd.control&&this._cd.control.valid}get ngClassInvalid(){return!!this._cd.control&&this._cd.control.invalid}get ngClassPending(){return!!this._cd.control&&this._cd.control.pending}}class Iu extends Su{constructor(e){super(e)}}class ku extends Su{constructor(e){super(e)}}function Au(e){return null==e||0===e.length}const Nu=new ke("NgValidators"),Du=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Ru{static min(e){return t=>{if(Au(t.value)||Au(e))return null;const n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}}static max(e){return t=>{if(Au(t.value)||Au(e))return null;const n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}}static required(e){return Au(e.value)?{required:!0}:null}static requiredTrue(e){return!0===e.value?null:{required:!0}}static email(e){return Au(e.value)?null:Du.test(e.value)?null:{email:!0}}static minLength(e){return t=>{if(Au(t.value))return null;const n=t.value?t.value.length:0;return n<e?{minlength:{requiredLength:e,actualLength:n}}:null}}static maxLength(e){return t=>{const n=t.value?t.value.length:0;return n>e?{maxlength:{requiredLength:e,actualLength:n}}:null}}static pattern(e){if(!e)return Ru.nullValidator;let t,n;return"string"==typeof e?(n="","^"!==e.charAt(0)&&(n+="^"),n+=e,"$"!==e.charAt(e.length-1)&&(n+="$"),t=new RegExp(n)):(n=e.toString(),t=e),e=>{if(Au(e.value))return null;const r=e.value;return t.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}static nullValidator(e){return null}static compose(e){if(!e)return null;const t=e.filter(Ou);return 0==t.length?null:function(e){return xu(function(e,t){return t.map(t=>t(e))}(e,t))}}static composeAsync(e){if(!e)return null;const t=e.filter(Ou);return 0==t.length?null:function(e){return function e(...t){let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&l(t[0])&&(t=t[0]),0===t.length?gu:n?e(t).pipe(B(e=>n(...e))):new w(e=>new yu(e,t))}(function(e,t){return t.map(t=>t(e))}(e,t).map(Pu)).pipe(B(xu))}}}function Ou(e){return null!=e}function Pu(e){const t=Zt(e)?z(e):e;if(!en(t))throw new Error("Expected validator to return Promise or Observable.");return t}function xu(e){const t=e.reduce((e,t)=>null!=t?Object.assign({},e,t):e,{});return 0===Object.keys(t).length?null:t}function Mu(e){return e.validate?t=>e.validate(t):e}function Lu(e){return e.validate?t=>e.validate(t):e}class Fu{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=e=>{},this.onTouched=()=>{}}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)}registerOnChange(e){this.onChange=t=>{e(""==t?null:parseFloat(t))}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}class Uu{constructor(){this._accessors=[]}add(e,t){this._accessors.push([e,t])}remove(e){for(let t=this._accessors.length-1;t>=0;--t)if(this._accessors[t][1]===e)return void this._accessors.splice(t,1)}select(e){this._accessors.forEach(t=>{this._isSameGroup(t,e)&&t[1]!==e&&t[1].fireUncheck(e.value)})}_isSameGroup(e,t){return!!e[0].control&&e[0]._parent===t._control._parent&&e[1].name===t.name}}const Vu={formControlName:'\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',formGroupName:'\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',formArrayName:'\n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });',ngModelGroup:'\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',ngModelWithFormGroup:'\n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  '};class ju{static controlParentException(){throw new Error(`formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      ${Vu.formControlName}`)}static ngModelGroupException(){throw new Error(`formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        ${Vu.formGroupName}\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        ${Vu.ngModelGroup}`)}static missingFormException(){throw new Error(`formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       ${Vu.formControlName}`)}static groupParentException(){throw new Error(`formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      ${Vu.formGroupName}`)}static arrayParentException(){throw new Error(`formArrayName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        ${Vu.formArrayName}`)}static disabledAttrWarning(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n       \n      Example: \n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")}static ngModelWarning(e){console.warn(`\n    It looks like you're using ngModel on the same form field as ${e}. \n    Support for using the ngModel input property and ngModelChange event with \n    reactive form directives has been deprecated in Angular v6 and will be removed \n    in Angular v7.\n    \n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/${"formControl"===e?"FormControlDirective":"FormControlName"}#use-with-ngmodel\n    `)}}function qu(e,t){return null==e?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${e}: ${t}`.slice(0,50))}class Bu{constructor(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=e=>{},this.onTouched=()=>{},this._compareWith=Qt}set compareWith(e){if("function"!=typeof e)throw new Error(`compareWith must be a function, but received ${JSON.stringify(e)}`);this._compareWith=e}writeValue(e){this.value=e;const t=this._getOptionId(e);null==t&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=qu(t,e);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(e){this.onChange=t=>{this.value=this._getOptionValue(t),e(this.value)}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const t of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(t),e))return t;return null}_getOptionValue(e){const t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t):e}}class Wu{constructor(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(qu(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}function Hu(e,t){return null==e?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${e}: ${t}`.slice(0,50))}class Ku{constructor(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(Hu(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(Hu(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}function zu(e,t){return[...t.path,e]}function Gu(e,t){e||Xu(t,"Cannot find control with"),t.valueAccessor||Xu(t,"No value accessor for form control with"),e.validator=Ru.compose([e.validator,t.validator]),e.asyncValidator=Ru.composeAsync([e.asyncValidator,t.asyncValidator]),t.valueAccessor.writeValue(e.value),function(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&Qu(e,t)})}(e,t),function(e,t){e.registerOnChange((e,n)=>{t.valueAccessor.writeValue(e),n&&t.viewToModelUpdate(e)})}(e,t),function(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&Qu(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),t.valueAccessor.setDisabledState&&e.registerOnDisabledChange(e=>{t.valueAccessor.setDisabledState(e)}),t._rawValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(()=>e.updateValueAndValidity())}),t._rawAsyncValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(()=>e.updateValueAndValidity())})}function Qu(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function $u(e,t){null==e&&Xu(t,"Cannot find control with"),e.validator=Ru.compose([e.validator,t.validator]),e.asyncValidator=Ru.composeAsync([e.asyncValidator,t.asyncValidator])}function Yu(e){return Xu(e,"There is no FormControl instance attached to form control element with")}function Xu(e,t){let n;throw n=e.path.length>1?`path: '${e.path.join(" -> ")}'`:e.path[0]?`name: '${e.path}'`:"unspecified name attribute",new Error(`${t} ${n}`)}function Ju(e){return null!=e?Ru.compose(e.map(Mu)):null}function Zu(e){return null!=e?Ru.composeAsync(e.map(Lu)):null}const ec=[class{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=e=>{},this.onTouched=()=>{}}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"checked",e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}},class{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=e=>{},this.onTouched=()=>{}}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(e))}registerOnChange(e){this.onChange=t=>{e(""==t?null:parseFloat(t))}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}},Fu,Bu,class{constructor(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=e=>{},this.onTouched=()=>{},this._compareWith=Qt}set compareWith(e){if("function"!=typeof e)throw new Error(`compareWith must be a function, but received ${JSON.stringify(e)}`);this._compareWith=e}writeValue(e){let t;if(this.value=e,Array.isArray(e)){const n=e.map(e=>this._getOptionId(e));t=(e,t)=>{e._setSelected(n.indexOf(t.toString())>-1)}}else t=(e,t)=>{e._setSelected(!1)};this._optionMap.forEach(t)}registerOnChange(e){this.onChange=t=>{const n=[];if(t.hasOwnProperty("selectedOptions")){const e=t.selectedOptions;for(let t=0;t<e.length;t++){const r=e.item(t),i=this._getOptionValue(r.value);n.push(i)}}else{const e=t.options;for(let t=0;t<e.length;t++){const r=e.item(t);if(r.selected){const e=this._getOptionValue(r.value);n.push(e)}}}this.value=n,e(n)}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_registerOption(e){const t=(this._idCounter++).toString();return this._optionMap.set(t,e),t}_getOptionId(e){for(const t of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(t)._value,e))return t;return null}_getOptionValue(e){const t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t)._value:e}},class{constructor(e,t,n,r){this._renderer=e,this._elementRef=t,this._registry=n,this._injector=r,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(Tu),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(e){this._state=e===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(e){this._fn=e,this.onChange=()=>{e(this.value),this._registry.select(this)}}fireUncheck(e){this.writeValue(e)}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_checkName(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}_throwNameError(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}}],tc="VALID",nc="INVALID",rc="PENDING",ic="DISABLED";function oc(e){const t=ac(e)?e.validators:e;return Array.isArray(t)?Ju(t):t||null}function sc(e,t){const n=ac(t)?t.asyncValidators:e;return Array.isArray(n)?Zu(n):n||null}function ac(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}class lc{constructor(e,t){this.validator=e,this.asyncValidator=t,this._onCollectionChange=()=>{},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}get parent(){return this._parent}get valid(){return this.status===tc}get invalid(){return this.status===nc}get pending(){return this.status==rc}get disabled(){return this.status===ic}get enabled(){return this.status!==ic}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this.validator=oc(e)}setAsyncValidators(e){this.asyncValidator=sc(e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=rc,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=ic,this.errors=null,this._forEachChild(t=>{t.disable(Object.assign({},e,{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign({},e,{skipPristineCheck:t})),this._onDisabledChange.forEach(e=>e(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=tc,this._forEachChild(t=>{t.enable(Object.assign({},e,{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign({},e,{skipPristineCheck:t})),this._onDisabledChange.forEach(e=>e(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==tc&&this.status!==rc||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ic:tc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=rc;const t=Pu(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(t=>this.setErrors(t,{emitEvent:e}))}}_cancelExistingSubscription(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(e,t,n){return null==t?null:(t instanceof Array||(t=t.split(".")),t instanceof Array&&0===t.length?null:t.reduce((e,t)=>e instanceof cc?e.controls.hasOwnProperty(t)?e.controls[t]:null:e instanceof hc&&e.at(t)||null,e))}(this,e)}getError(e,t){const n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Ui,this.statusChanges=new Ui}_calculateStatus(){return this._allControlsDisabled()?ic:this.errors?nc:this._anyControlsHaveStatus(rc)?rc:this._anyControlsHaveStatus(nc)?nc:tc}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ac(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}}class uc extends lc{constructor(e=null,t,n){super(oc(t),sc(n,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this._initObservables()}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(e=>e(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_clearChangeFns(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=()=>{}}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class cc extends lc{constructor(e,t,n){super(oc(t),sc(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t){this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity(),this._onCollectionChange()}setControl(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){Object.keys(e).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}reset(e={},t={}){this._forEachChild((n,r)=>{n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,n)=>(e[n]=t instanceof uc?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(e,t)=>!!t._syncPendingControls()||e);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>e(this.controls[t],t))}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){let t=!1;return this._forEachChild((n,r)=>{t=t||this.contains(r)&&e(n)}),t}_reduceValue(){return this._reduceChildren({},(e,t,n)=>((t.enabled||this.disabled)&&(e[n]=t.value),e))}_reduceChildren(e,t){let n=e;return this._forEachChild((e,r)=>{n=t(n,e,r)}),n}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,n)=>{if(void 0===e[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class hc extends lc{constructor(e,t,n){super(oc(t),sc(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}at(e){return this.controls[e]}push(e){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity(),this._onCollectionChange()}insert(e,t){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity()}removeAt(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity()}setControl(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((e,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e.forEach((e,n)=>{this.at(n)&&this.at(n).patchValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}reset(e=[],t={}){this._forEachChild((n,r)=>{n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof uc?e.value:e.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let e=this.controls.reduce((e,t)=>!!t._syncPendingControls()||e,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,n)=>{e(t,n)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,n)=>{if(void 0===e[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const dc=new ke("NgFormSelectorWarning");class pc extends Cu{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return zu(this.name,this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return Ju(this._validators)}get asyncValidator(){return Zu(this._asyncValidators)}_checkParentType(){}}class fc{}const gc=new ke("NgModelWithFormControlWarning");class mc extends Cu{constructor(e,t){super(),this._validators=e,this._asyncValidators=t,this.submitted=!1,this.directives=[],this.form=null,this.ngSubmit=new Ui}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const t=this.form.get(e.path);return Gu(t,e),t.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),t}getControl(e){return this.form.get(e.path)}removeControl(e){!function(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}(this.directives,e)}addFormGroup(e){const t=this.form.get(e.path);$u(t,e),t.updateValueAndValidity({emitEvent:!1})}removeFormGroup(e){}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){const t=this.form.get(e.path);$u(t,e),t.updateValueAndValidity({emitEvent:!1})}removeFormArray(e){}getFormArray(e){return this.form.get(e.path)}updateModel(e,t){this.form.get(e.path).setValue(t)}onSubmit(e){return this.submitted=!0,t=this.directives,this.form._syncPendingControls(),t.forEach(e=>{const t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)}),this.ngSubmit.emit(e),!1;var t}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const t=this.form.get(e.path);e.control!==t&&(function(e,t){t.valueAccessor.registerOnChange(()=>Yu(t)),t.valueAccessor.registerOnTouched(()=>Yu(t)),t._rawValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(null)}),t._rawAsyncValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(null)}),e&&e._clearChangeFns()}(e.control,e),t&&Gu(t,e),e.control=t)}),this.form._updateTreeValidity({emitEvent:!1})}_updateRegistrations(){this.form._registerOnCollectionChange(()=>this._updateDomValue()),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{}),this._oldForm=this.form}_updateValidators(){const e=Ju(this._validators);this.form.validator=Ru.compose([this.form.validator,e]);const t=Zu(this._asyncValidators);this.form.asyncValidator=Ru.composeAsync([this.form.asyncValidator,t])}_checkFormPresent(){this.form||ju.missingFormException()}}class yc extends pc{constructor(e,t,n){super(),this._parent=e,this._validators=t,this._asyncValidators=n}_checkParentType(){_c(this._parent)&&ju.groupParentException()}}class vc extends Cu{constructor(e,t,n){super(),this._parent=e,this._validators=t,this._asyncValidators=n}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return zu(this.name,this._parent)}get validator(){return Ju(this._validators)}get asyncValidator(){return Zu(this._asyncValidators)}_checkParentType(){_c(this._parent)&&ju.arrayParentException()}}function _c(e){return!(e instanceof yc||e instanceof mc||e instanceof vc)}let bc=(()=>{class e extends Tu{constructor(e,t,n,r,i){super(),this._ngModelWarningConfig=i,this._added=!1,this.update=new Ui,this._ngModelWarningSent=!1,this._parent=e,this._rawValidators=t||[],this._rawAsyncValidators=n||[],this.valueAccessor=function(e,t){if(!t)return null;Array.isArray(t)||Xu(e,"Value accessor was not provided as an array for form control with");let n=void 0,r=void 0,i=void 0;return t.forEach(t=>{t.constructor===bu?n=t:function(e){return ec.some(t=>e.constructor===t)}(t)?(r&&Xu(e,"More than one built-in value accessor matches form control with"),r=t):(i&&Xu(e,"More than one custom value accessor matches form control with"),i=t)}),i||r||n||(Xu(e,"No valid value accessor for form control with"),null)}(this,r)}set isDisabled(e){ju.disabledAttrWarning()}ngOnChanges(t){var n,r;this._added||this._setUpControl(),function(e,t){if(!e.hasOwnProperty("model"))return!1;const n=e.model;return!!n.isFirstChange()||!Qt(t,n.currentValue)}(t,this.viewModel)&&("formControlName",n=e,this,r=this._ngModelWarningConfig,it()&&"never"!==r&&((null!==r&&"once"!==r||n._ngModelWarningSentOnce)&&("always"!==r||this._ngModelWarningSent)||(ju.ngModelWarning("formControlName"),n._ngModelWarningSentOnce=!0,this._ngModelWarningSent=!0)),this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return zu(this.name,this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return Ju(this._rawValidators)}get asyncValidator(){return Zu(this._rawAsyncValidators)}_checkParentType(){!(this._parent instanceof yc)&&this._parent instanceof pc?ju.ngModelGroupException():this._parent instanceof yc||this._parent instanceof mc||this._parent instanceof vc||ju.controlParentException()}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return e._ngModelWarningSentOnce=!1,e})();class wc{get required(){return this._required}set required(e){this._required=null!=e&&!1!==e&&"false"!==`${e}`,this._onChange&&this._onChange()}validate(e){return this.required?Ru.required(e):null}registerOnValidatorChange(e){this._onChange=e}}class Cc{}class Ec{group(e,t=null){const n=this._reduceControls(e);let r=null,i=null,o=void 0;return null!=t&&(function(e){return void 0!==e.asyncValidators||void 0!==e.validators||void 0!==e.updateOn}(t)?(r=null!=t.validators?t.validators:null,i=null!=t.asyncValidators?t.asyncValidators:null,o=null!=t.updateOn?t.updateOn:void 0):(r=null!=t.validator?t.validator:null,i=null!=t.asyncValidator?t.asyncValidator:null)),new cc(n,{asyncValidators:i,updateOn:o,validators:r})}control(e,t,n){return new uc(e,t,n)}array(e,t,n){const r=e.map(e=>this._createControl(e));return new hc(r,t,n)}_reduceControls(e){const t={};return Object.keys(e).forEach(n=>{t[n]=this._createControl(e[n])}),t}_createControl(e){return e instanceof uc||e instanceof cc||e instanceof hc?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}}class Tc{static withConfig(e){return{ngModule:Tc,providers:[{provide:dc,useValue:e.warnOnDeprecatedNgFormSelector}]}}}class Sc{static withConfig(e){return{ngModule:Sc,providers:[{provide:gc,useValue:e.warnOnNgModelWithFormControl}]}}}class Ic{constructor(e,t){this.pf=e,this.proveedorService=t,this.provincias=["\xc1lava","Albacete","Alicante","Almer\xeda","Asturias","\xc1vila","Badajoz","Barcelona","Burgos","C\xe1ceres","C\xe1diz","Cantabria","Castell\xf3n","Ciudad Real","C\xf3rdoba","La Coru\xf1a","Cuenca","Gerona","Granada","Guadalajara","Guip\xfazcoa","Huelva","Huesca","IslasBaleares","Ja\xe9n","Le\xf3n","L\xe9rida","Lugo","Madrid","M\xe1laga","Murcia","Navarra","Orense","Palencia","Las Palmas","Pontevedra","La Rioja","Salamanca","Segovia","Sevilla","Soria","Tarragona","Santa Cruz de Tenerife","Teruel","Toledo","Valencia","Valladolid","Vizcaya","Zamora","Zaragoza"]}onSubmit(){this.proveedor=this.saveProveedor(),this.proveedorService.AddProv(this.proveedor),this.formpro.reset()}ngOnInit(){this.formpro=this.pf.group({nombre:["",Ru.required],cif:["",Ru.required],direccion:["",Ru.required],cp:["",Ru.required],localidad:["",Ru.required],provincia:["",Ru.required],telefono:["",Ru.required],email:["",Ru.required],contacto:["",Ru.required]})}saveProveedor(){return{nombre:this.formpro.get("nombre").value,cif:this.formpro.get("cif").value,direccion:this.formpro.get("direccion").value,cp:this.formpro.get("cp").value,localidad:this.formpro.get("localidad").value,provincia:this.formpro.get("provincia").value,telefono:this.formpro.get("telefono").value,email:this.formpro.get("email").value,contacto:this.formpro.get("contacto").value}}}class kc{constructor(e,t){this.pf=e,this.presupuestoService=t,this.iva=0,this.total=0}ngOnInit(){this.presupuestoForm=this.pf.group({proveedor:["",Ru.required],fecha:["",Ru.required],concepto:["",[Ru.required,Ru.minLength(10)]],base:["",Ru.required],tipo:["",Ru.required],iva:this.iva,total:this.total}),this.onChanges()}onSubmit(){this.presupuesto=this.savePresupuesto(),this.presupuestoService.postPresupuesto(this.presupuesto).subscribe(e=>{}),this.presupuestoForm.reset()}onChanges(){this.presupuestoForm.valueChanges.subscribe(e=>{this.base=e.base,this.tipo=e.tipo,this.presupuestoForm.value.iva=this.base*this.tipo,this.presupuestoForm.value.total=this.base+this.base*this.tipo})}savePresupuesto(){return{proveedor:this.presupuestoForm.get("proveedor").value,fecha:this.presupuestoForm.get("fecha").value,concepto:this.presupuestoForm.get("concepto").value,base:this.presupuestoForm.get("base").value,tipo:this.presupuestoForm.get("tipo").value,iva:this.presupuestoForm.get("iva").value,total:this.presupuestoForm.get("total").value}}}class Ac{constructor(e){this.presupuestosService=e,this.presupuestos=[],this.presupuestosService.getPresupuestos().subscribe(e=>{for(const t in e)e[t].id$=t,this.presupuestos.push(e[t])})}ngOnInit(){}eliminarPresupuesto(e){confirm("\xbfEstas seguro que deseas eliminarlo?")&&this.presupuestosService.delPresupuesto(e).subscribe(e=>{this.presupuestos=[],this.presupuestosService.getPresupuestos().subscribe(e=>{for(const t in e)e[t].id$=t,this.presupuestos.push(e[t])})})}}class Nc{constructor(e,t,n,r){this.pf=e,this.presupuestoService=t,this.router=n,this.activatedRouter=r,this.iva=0,this.total=0,this.activatedRouter.params.subscribe(e=>{this.id=e.id,console.log(this.id),this.presupuestoService.getPresupuesto(this.id).subscribe(e=>{this.presupuesto=e,console.log(this.presupuesto)})})}ngOnInit(){this.presupuestoForm=this.pf.group({proveedor:["",Ru.required],fecha:["",Ru.required],concepto:["",[Ru.required,Ru.minLength(10)]],base:["",Ru.required],tipo:["",Ru.required],iva:this.iva,total:this.total}),this.onChanges()}onChanges(){this.presupuestoForm.valueChanges.subscribe(e=>{this.base=e.base,this.tipo=e.tipo,this.presupuestoForm.value.iva=this.base*this.tipo,this.presupuestoForm.value.total=this.base+this.base*this.tipo})}onSubmit(){this.presupuesto=this.savePresupuesto(),this.presupuestoService.putPresupuesto(this.presupuesto,this.id).subscribe(e=>{this.router.navigate(["/presupuestos"])})}savePresupuesto(){return{proveedor:this.presupuestoForm.get("proveedor").value,fecha:this.presupuestoForm.get("fecha").value,concepto:this.presupuestoForm.get("concepto").value,base:this.presupuestoForm.get("base").value,tipo:this.presupuestoForm.get("tipo").value,iva:this.presupuestoForm.get("iva").value,total:this.presupuestoForm.get("total").value}}}class Dc{constructor(e,t,n,r){this.formBuilder=e,this.autService=t,this.router=n,this.activatedRouter=r,this.erroresForm={email:"",password:""},this.mensajesValidacion={email:{required:"Email obligatorio",email:"Introduzca una direcci\xf3n email correcta"},password:{required:"Contrase\xf1a obligatoria",pattern:"La contrase\xf1a debe tener al menos una letra y un n\xfamero ",minlength:"y m\xe1s de 6 caracteres"}}}ngOnInit(){this.registroForm=this.formBuilder.group({email:["",[Ru.required,Ru.email]],password:["",[Ru.required,Ru.pattern("^(?=.*[0-9])(?=.*[a-zA-Z])([a-zA-Z0-9]+)$"),Ru.minLength(6)]]}),this.registroForm.valueChanges.subscribe(e=>this.onValueChanged(e)),this.onValueChanged()}onSubmit(){this.userdata=this.saveUserdata(),this.autService.registroUsuario(this.userdata),window.alert("Usuario registrado correctamente"),this.router.navigate(["/inicio"])}onValueChanged(e){if(!this.registroForm)return;const t=this.registroForm;for(const n in this.erroresForm){this.erroresForm[n]="";const e=t.get(n);if(e&&e.dirty&&!e.valid){const t=this.mensajesValidacion[n];for(const r in e.errors)this.erroresForm[n]+=t[r]+" "}}}saveUserdata(){return{email:this.registroForm.get("email").value,password:this.registroForm.get("password").value}}}class Rc{constructor(e,t,n,r){this.formBuilder=e,this.autService=t,this.router=n,this.activatedRouter=r,this.mensaje=!1}ngOnInit(){this.loginForm=this.formBuilder.group({email:["",[Ru.required,Ru.email]],password:["",[Ru.required,Ru.pattern("^(?=.*[0-9])(?=.*[a-zA-Z])([a-zA-Z0-9]+)$"),Ru.minLength(6)]]})}onSubmit(){this.userdata=this.saveUserdata(),this.autService.inicioSesion(this.userdata),setTimeout(()=>{!1===this.isAuth()&&(this.mensaje=!0,window.alert("NO HAS PODIDO INICIAR SESION"))},2e3)}saveUserdata(){return{email:this.loginForm.get("email").value,password:this.loginForm.get("password").value}}isAuth(){return this.autService.isAuthenticated()}}var Oc=n("iqUP");function Pc(e){const t=new w(t=>{t.next(e),t.complete()});return t._isScalar=!0,t.value=e,t}function xc(...e){let t=e[e.length-1];switch(N(t)?e.pop():t=void 0,e.length){case 0:return mu(t);case 1:return t?K(e,t):Pc(e[0]);default:return K(e,t)}}class Mc extends k{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new T;return this._value}next(e){super.next(this._value=e)}}function Lc(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}Lc.prototype=Object.create(Error.prototype);const Fc=Lc,Uc={};class Vc{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new jc(e,this.resultSelector))}}class jc extends q{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(Uc),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let n=0;n<t;n++){const t=e[n];this.add(j(this,t,t,n))}}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,n,r,i){const o=this.values,s=this.toRespond?o[n]===Uc?--this.toRespond:this.toRespond:0;o[n]=t,0===s&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}function qc(e){return new w(t=>{let n;try{n=e()}catch(r){return void t.error(r)}return(n?z(n):mu()).subscribe(t)})}function Bc(){return X(1)}function Wc(e,t){return function(n){return n.lift(new Hc(e,t))}}class Hc{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new Kc(e,this.predicate,this.thisArg))}}class Kc extends g{constructor(e,t,n){super(e),this.predicate=t,this.thisArg=n,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)}}function zc(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}zc.prototype=Object.create(Error.prototype);const Gc=zc;function Qc(e){return function(t){return 0===e?mu():t.lift(new $c(e))}}class $c{constructor(e){if(this.total=e,this.total<0)throw new Gc}call(e,t){return t.subscribe(new Yc(e,this.total))}}class Yc extends g{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,n=this.total,r=this.count++;t.length<n?t.push(e):t[r%n]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=t++%n;e.next(r[i])}}e.complete()}}function Xc(e,t,n){return function(r){return r.lift(new Jc(e,t,n))}}class Jc{constructor(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}call(e,t){return t.subscribe(new Zc(e,this.nextOrObserver,this.error,this.complete))}}class Zc extends g{constructor(e,t,n,i){super(e),this._tapNext=v,this._tapError=v,this._tapComplete=v,this._tapError=n||v,this._tapComplete=i||v,r(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||v,this._tapError=t.error||v,this._tapComplete=t.complete||v)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}const eh=(e=th)=>Xc({hasValue:!1,next(){this.hasValue=!0},complete(){if(!this.hasValue)throw e()}});function th(){return new Fc}function nh(e=null){return t=>t.lift(new rh(e))}class rh{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new ih(e,this.defaultValue))}}class ih extends g{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function oh(e,t){const n=arguments.length>=2;return r=>r.pipe(e?Wc((t,n)=>e(t,n,r)):Y,Qc(1),n?nh(t):eh(()=>new Fc))}function sh(e){return function(t){const n=new ah(e),r=t.lift(n);return n.caught=r}}class ah{constructor(e){this.selector=e}call(e,t){return t.subscribe(new lh(e,this.selector,this.caught))}}class lh extends q{constructor(e,t,n){super(e),this.selector=t,this.caught=n}error(e){if(!this.isStopped){let n;try{n=this.selector(e,this.caught)}catch(t){return void super.error(t)}this._unsubscribeAndRecycle();const r=new D(this,void 0,void 0);this.add(r),j(this,n,void 0,void 0,r)}}}function uh(e){return t=>0===e?mu():t.lift(new ch(e))}class ch{constructor(e){if(this.total=e,this.total<0)throw new Gc}call(e,t){return t.subscribe(new hh(e,this.total))}}class hh extends g{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))}}function dh(e,t){const n=arguments.length>=2;return r=>r.pipe(e?Wc((t,n)=>e(t,n,r)):Y,uh(1),n?nh(t):eh(()=>new Fc))}class ph{constructor(e,t,n){this.predicate=e,this.thisArg=t,this.source=n}call(e,t){return t.subscribe(new fh(e,this.predicate,this.thisArg,this.source))}}class fh extends g{constructor(e,t,n,r){super(e),this.predicate=t,this.thisArg=n,this.source=r,this.index=0,this.thisArg=n||this}notifyComplete(e){this.destination.next(e),this.destination.complete()}_next(e){let t=!1;try{t=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(n){return void this.destination.error(n)}t||this.notifyComplete(!1)}_complete(){this.notifyComplete(!0)}}function gh(e,t){return"function"==typeof t?n=>n.pipe(gh((n,r)=>z(e(n,r)).pipe(B((e,i)=>t(n,e,r,i))))):t=>t.lift(new mh(e))}class mh{constructor(e){this.project=e}call(e,t){return t.subscribe(new yh(e,this.project))}}class yh extends q{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this._innerSub(t,e,n)}_innerSub(e,t,n){const r=this.innerSubscription;r&&r.unsubscribe();const i=new D(this,void 0,void 0);this.destination.add(i),this.innerSubscription=j(this,e,t,n,i)}_complete(){const{innerSubscription:e}=this;e&&!e.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=null}notifyComplete(e){this.destination.remove(e),this.innerSubscription=null,this.isStopped&&super._complete()}notifyNext(e,t,n,r,i){this.destination.next(t)}}function vh(e,t){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new _h(e,t,n))}}class _h{constructor(e,t,n=!1){this.accumulator=e,this.seed=t,this.hasSeed=n}call(e,t){return t.subscribe(new bh(e,this.accumulator,this.seed,this.hasSeed))}}class bh extends g{constructor(e,t,n,r){super(e),this.accumulator=t,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let n;try{n=this.accumulator(this.seed,e,t)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function wh(e,t){return G(e,t,1)}class Ch{constructor(e){this.callback=e}call(e,t){return t.subscribe(new Eh(e,this.callback))}}class Eh extends g{constructor(e,t){super(e),this.add(new d(t))}}class Th{constructor(e,t){this.id=e,this.url=t}}class Sh extends Th{constructor(e,t,n="imperative",r=null){super(e,t),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ih extends Th{constructor(e,t,n){super(e,t),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class kh extends Th{constructor(e,t,n){super(e,t),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ah extends Th{constructor(e,t,n){super(e,t),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Nh extends Th{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Dh extends Th{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Rh extends Th{constructor(e,t,n,r,i){super(e,t),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Oh extends Th{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ph extends Th{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xh{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Mh{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Lh{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fh{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Uh{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Vh{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jh{constructor(e,t,n){this.routerEvent=e,this.position=t,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class qh{}const Bh="primary";class Wh{constructor(e){this.params=e||{}}has(e){return this.params.hasOwnProperty(e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Hh(e){return new Wh(e)}const Kh="ngNavigationCancelingError";function zh(e){const t=Error("NavigationCancelingError: "+e);return t[Kh]=!0,t}function Gh(e,t,n){const r=n.path.split("/");if(r.length>e.length)return null;if("full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;const i={};for(let o=0;o<r.length;o++){const t=r[o],n=e[o];if(t.startsWith(":"))i[t.substring(1)]=n;else if(t!==n.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}class Qh{constructor(e,t){this.routes=e,this.module=t}}function $h(e,t=""){for(let n=0;n<e.length;n++){const r=e[n];Yh(r,Xh(t,r))}}function Yh(e,t){if(!e)throw new Error(`\n      Invalid configuration of route '${t}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);if(Array.isArray(e))throw new Error(`Invalid configuration of route '${t}': Array cannot be specified`);if(!e.component&&!e.children&&!e.loadChildren&&e.outlet&&e.outlet!==Bh)throw new Error(`Invalid configuration of route '${t}': a componentless route without children or loadChildren cannot have a named outlet set`);if(e.redirectTo&&e.children)throw new Error(`Invalid configuration of route '${t}': redirectTo and children cannot be used together`);if(e.redirectTo&&e.loadChildren)throw new Error(`Invalid configuration of route '${t}': redirectTo and loadChildren cannot be used together`);if(e.children&&e.loadChildren)throw new Error(`Invalid configuration of route '${t}': children and loadChildren cannot be used together`);if(e.redirectTo&&e.component)throw new Error(`Invalid configuration of route '${t}': redirectTo and component cannot be used together`);if(e.path&&e.matcher)throw new Error(`Invalid configuration of route '${t}': path and matcher cannot be used together`);if(void 0===e.redirectTo&&!e.component&&!e.children&&!e.loadChildren)throw new Error(`Invalid configuration of route '${t}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===e.path&&void 0===e.matcher)throw new Error(`Invalid configuration of route '${t}': routes must have either a path or a matcher specified`);if("string"==typeof e.path&&"/"===e.path.charAt(0))throw new Error(`Invalid configuration of route '${t}': path cannot start with a slash`);if(""===e.path&&void 0!==e.redirectTo&&void 0===e.pathMatch)throw new Error(`Invalid configuration of route '{path: "${t}", redirectTo: "${e.redirectTo}"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);if(void 0!==e.pathMatch&&"full"!==e.pathMatch&&"prefix"!==e.pathMatch)throw new Error(`Invalid configuration of route '${t}': pathMatch can only be set to 'prefix' or 'full'`);e.children&&$h(e.children,t)}function Xh(e,t){return t?e||t.path?e&&!t.path?`${e}/`:!e&&t.path?t.path:`${e}/${t.path}`:"":e}function Jh(e){const t=e.children&&e.children.map(Jh),n=t?Object.assign({},e,{children:t}):Object.assign({},e);return!n.component&&(t||n.loadChildren)&&n.outlet&&n.outlet!==Bh&&(n.component=qh),n}function Zh(e,t){const n=Object.keys(e),r=Object.keys(t);if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(e[i=n[o]]!==t[i])return!1;return!0}function ed(e){return Array.prototype.concat.apply([],e)}function td(e){return e.length>0?e[e.length-1]:null}function nd(e,t){for(const n in e)e.hasOwnProperty(n)&&t(e[n],n)}function rd(e){return en(e)?e:Zt(e)?z(Promise.resolve(e)):xc(e)}function id(e,t,n){return n?function(e,t){return Zh(e,t)}(e.queryParams,t.queryParams)&&function e(t,n){if(!ld(t.segments,n.segments))return!1;if(t.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children){if(!t.children[r])return!1;if(!e(t.children[r],n.children[r]))return!1}return!0}(e.root,t.root):function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>t[n]===e[n])}(e.queryParams,t.queryParams)&&function e(t,n){return function t(n,r,i){if(n.segments.length>i.length)return!!ld(n.segments.slice(0,i.length),i)&&!r.hasChildren();if(n.segments.length===i.length){if(!ld(n.segments,i))return!1;for(const t in r.children){if(!n.children[t])return!1;if(!e(n.children[t],r.children[t]))return!1}return!0}{const e=i.slice(0,n.segments.length),o=i.slice(n.segments.length);return!!ld(n.segments,e)&&!!n.children[Bh]&&t(n.children[Bh],r,o)}}(t,n,n.segments)}(e.root,t.root)}class od{constructor(e,t,n){this.root=e,this.queryParams=t,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Hh(this.queryParams)),this._queryParamMap}toString(){return dd.serialize(this)}}class sd{constructor(e,t){this.segments=e,this.children=t,this.parent=null,nd(t,(e,t)=>e.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return pd(this)}}class ad{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Hh(this.parameters)),this._parameterMap}toString(){return _d(this)}}function ld(e,t){return e.length===t.length&&e.every((e,n)=>e.path===t[n].path)}function ud(e,t){let n=[];return nd(e.children,(e,r)=>{r===Bh&&(n=n.concat(t(e,r)))}),nd(e.children,(e,r)=>{r!==Bh&&(n=n.concat(t(e,r)))}),n}class cd{}class hd{parse(e){const t=new Td(e);return new od(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){var t;return`${`/${function e(t,n){if(!t.hasChildren())return pd(t);if(n){const n=t.children[Bh]?e(t.children[Bh],!1):"",r=[];return nd(t.children,(t,n)=>{n!==Bh&&r.push(`${n}:${e(t,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=ud(t,(n,r)=>r===Bh?[e(t.children[Bh],!1)]:[`${r}:${e(n,!1)}`]);return`${pd(t)}/(${n.join("//")})`}}(e.root,!0)}`}${function(e){const t=Object.keys(e).map(t=>{const n=e[t];return Array.isArray(n)?n.map(e=>`${gd(t)}=${gd(e)}`).join("&"):`${gd(t)}=${gd(n)}`});return t.length?`?${t.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${t=e.fragment,encodeURI(t)}`:""}`}}const dd=new hd;function pd(e){return e.segments.map(e=>_d(e)).join("/")}function fd(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function gd(e){return fd(e).replace(/%3B/gi,";")}function md(e){return fd(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function yd(e){return decodeURIComponent(e)}function vd(e){return yd(e.replace(/\+/g,"%20"))}function _d(e){return`${md(e.path)}${t=e.parameters,Object.keys(t).map(e=>`;${md(e)}=${md(t[e])}`).join("")}`;var t}const bd=/^[^\/()?;=#]+/;function wd(e){const t=e.match(bd);return t?t[0]:""}const Cd=/^[^=?&#]+/,Ed=/^[^?&#]+/;class Td{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new sd([],{}):new sd([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n[Bh]=new sd(e,t)),n}parseSegment(){const e=wd(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new ad(yd(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=wd(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const e=wd(this.remaining);e&&this.capture(n=e)}e[yd(t)]=yd(n)}parseQueryParam(e){const t=function(e){const t=e.match(Cd);return t?t[0]:""}(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const e=function(e){const t=e.match(Ed);return t?t[0]:""}(this.remaining);e&&this.capture(n=e)}const r=vd(t),i=vd(n);if(e.hasOwnProperty(r)){let t=e[r];Array.isArray(t)||(e[r]=t=[t]),t.push(i)}else e[r]=i}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=wd(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=Bh);const o=this.parseChildren();t[i]=1===Object.keys(o).length?o[Bh]:new sd([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Sd{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Id(e,this._root);return t?t.children.map(e=>e.value):[]}firstChild(e){const t=Id(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=kd(e,this._root);return t.length<2?[]:t[t.length-2].children.map(e=>e.value).filter(t=>t!==e)}pathFromRoot(e){return kd(e,this._root).map(e=>e.value)}}function Id(e,t){if(e===t.value)return t;for(const n of t.children){const t=Id(e,n);if(t)return t}return null}function kd(e,t){if(e===t.value)return[t];for(const n of t.children){const r=kd(e,n);if(r.length)return r.unshift(t),r}return[]}class Ad{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Nd(e){const t={};return e&&e.children.forEach(e=>t[e.value.outlet]=e),t}class Dd extends Sd{constructor(e,t){super(e),this.snapshot=t,Ld(this,e)}toString(){return this.snapshot.toString()}}function Rd(e,t){const n=function(e,t){const n=new xd([],{},{},"",{},Bh,t,null,e.root,-1,{});return new Md("",new Ad(n,[]))}(e,t),r=new Mc([new ad("",{})]),i=new Mc({}),o=new Mc({}),s=new Mc({}),a=new Mc(""),l=new Od(r,i,s,a,o,Bh,t,n.root);return l.snapshot=n.root,new Dd(new Ad(l,[]),n)}class Od{constructor(e,t,n,r,i,o,s,a){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(B(e=>Hh(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(B(e=>Hh(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Pd(e,t="emptyOnly"){const n=e.pathFromRoot;let r=0;if("always"!==t)for(r=n.length-1;r>=1;){const e=n[r],t=n[r-1];if(e.routeConfig&&""===e.routeConfig.path)r--;else{if(t.component)break;r--}}return function(e){return e.reduce((e,t)=>({params:Object.assign({},e.params,t.params),data:Object.assign({},e.data,t.data),resolve:Object.assign({},e.resolve,t._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class xd{constructor(e,t,n,r,i,o,s,a,l,u,c){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=l,this._lastPathIndex=u,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Hh(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Hh(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(e=>e.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Md extends Sd{constructor(e,t){super(t),this.url=e,Ld(this,t)}toString(){return Fd(this._root)}}function Ld(e,t){t.value._routerState=e,t.children.forEach(t=>Ld(e,t))}function Fd(e){const t=e.children.length>0?` { ${e.children.map(Fd).join(", ")} } `:"";return`${e.value}${t}`}function Ud(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Zh(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),Zh(t.params,n.params)||e.params.next(n.params),function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Zh(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),Zh(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function Vd(e,t){var n,r;return Zh(e.params,t.params)&&ld(n=e.url,r=t.url)&&n.every((e,t)=>Zh(e.parameters,r[t].parameters))&&!(!e.parent!=!t.parent)&&(!e.parent||Vd(e.parent,t.parent))}function jd(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function qd(e,t,n,r,i){let o={};return r&&nd(r,(e,t)=>{o[t]=Array.isArray(e)?e.map(e=>`${e}`):`${e}`}),new od(n.root===e?t:function e(t,n,r){const i={};return nd(t.children,(t,o)=>{i[o]=t===n?r:e(t,n,r)}),new sd(t.segments,i)}(n.root,e,t),o,i)}class Bd{constructor(e,t,n){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=n,e&&n.length>0&&jd(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(e=>"object"==typeof e&&null!=e&&e.outlets);if(r&&r!==td(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Wd{constructor(e,t,n){this.segmentGroup=e,this.processChildren=t,this.index=n}}function Hd(e){return"object"==typeof e&&null!=e&&e.outlets?e.outlets[Bh]:`${e}`}function Kd(e,t,n){if(e||(e=new sd([],{})),0===e.segments.length&&e.hasChildren())return zd(e,t,n);const r=function(e,t,n){let r=0,i=t;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return o;const t=e.segments[i],s=Hd(n[r]),a=r<n.length-1?n[r+1]:null;if(i>0&&void 0===s)break;if(s&&a&&"object"==typeof a&&void 0===a.outlets){if(!Yd(s,a,t))return o;r+=2}else{if(!Yd(s,{},t))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const t=new sd(e.segments.slice(0,r.pathIndex),{});return t.children[Bh]=new sd(e.segments.slice(r.pathIndex),e.children),zd(t,0,i)}return r.match&&0===i.length?new sd(e.segments,{}):r.match&&!e.hasChildren()?Gd(e,t,n):r.match?zd(e,0,i):Gd(e,t,n)}function zd(e,t,n){if(0===n.length)return new sd(e.segments,{});{const r=function(e){return"object"!=typeof e[0]?{[Bh]:e}:void 0===e[0].outlets?{[Bh]:e}:e[0].outlets}(n),i={};return nd(r,(n,r)=>{null!==n&&(i[r]=Kd(e.children[r],t,n))}),nd(e.children,(e,t)=>{void 0===r[t]&&(i[t]=e)}),new sd(e.segments,i)}}function Gd(e,t,n){const r=e.segments.slice(0,t);let i=0;for(;i<n.length;){if("object"==typeof n[i]&&void 0!==n[i].outlets){const e=Qd(n[i].outlets);return new sd(r,e)}if(0===i&&jd(n[0])){r.push(new ad(e.segments[t].path,n[0])),i++;continue}const o=Hd(n[i]),s=i<n.length-1?n[i+1]:null;o&&s&&jd(s)?(r.push(new ad(o,$d(s))),i+=2):(r.push(new ad(o,{})),i++)}return new sd(r,{})}function Qd(e){const t={};return nd(e,(e,n)=>{null!==e&&(t[n]=Gd(new sd([],{}),0,e))}),t}function $d(e){const t={};return nd(e,(e,n)=>t[n]=`${e}`),t}function Yd(e,t,n){return e==n.path&&Zh(t,n.parameters)}const Xd=(e,t,n)=>B(r=>(new Jd(t,r.targetRouterState,r.currentRouterState,n).activate(e),r));class Jd{constructor(e,t,n,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=n,this.forwardEvent=r}activate(e){const t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),Ud(this.futureState.root),this.activateChildRoutes(t,n,e)}deactivateChildRoutes(e,t,n){const r=Nd(t);e.children.forEach(e=>{const t=e.value.outlet;this.deactivateRoutes(e,r[t],n),delete r[t]}),nd(r,(e,t)=>{this.deactivateRouteAndItsChildren(e,n)})}deactivateRoutes(e,t,n){const r=e.value,i=t?t.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(e,t,i.children)}else this.deactivateChildRoutes(e,t,n);else i&&this.deactivateRouteAndItsChildren(t,n)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const n=t.getContext(e.value.outlet);if(n&&n.outlet){const t=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:t,route:e,contexts:r})}}deactivateRouteAndOutlet(e,t){const n=t.getContext(e.value.outlet);if(n){const r=Nd(e),i=e.value.component?n.children:t;nd(r,(e,t)=>this.deactivateRouteAndItsChildren(e,i)),n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}}activateChildRoutes(e,t,n){const r=Nd(t);e.children.forEach(e=>{this.activateRoutes(e,r[e.value.outlet],n),this.forwardEvent(new Vh(e.value.snapshot))}),e.children.length&&this.forwardEvent(new Fh(e.value.snapshot))}activateRoutes(e,t,n){const r=e.value,i=t?t.value:null;if(Ud(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,i.children)}else this.activateChildRoutes(e,t,n);else if(r.component){const t=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const e=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),t.children.onOutletReAttached(e.contexts),t.attachRef=e.componentRef,t.route=e.route.value,t.outlet&&t.outlet.attach(e.componentRef,e.route.value),Zd(e.route)}else{const n=function(e){for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;t.attachRef=null,t.route=r,t.resolver=i,t.outlet&&t.outlet.activateWith(r,i),this.activateChildRoutes(e,null,t.children)}}else this.activateChildRoutes(e,null,n)}}function Zd(e){Ud(e.value),e.children.forEach(Zd)}function ep(e){return"function"==typeof e}function tp(e){return e instanceof od}class np{constructor(e){this.segmentGroup=e||null}}class rp{constructor(e){this.urlTree=e}}function ip(e){return new w(t=>t.error(new np(e)))}function op(e){return new w(t=>t.error(new rp(e)))}function sp(e){return new w(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e}'`)))}class ap{constructor(e,t,n,r,i){this.configLoader=t,this.urlSerializer=n,this.urlTree=r,this.config=i,this.allowRedirects=!0,this.ngModule=e.get(We)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,Bh).pipe(B(e=>this.createUrlTree(e,this.urlTree.queryParams,this.urlTree.fragment))).pipe(sh(e=>{if(e instanceof rp)return this.allowRedirects=!1,this.match(e.urlTree);if(e instanceof np)throw this.noMatchError(e);throw e}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Bh).pipe(B(t=>this.createUrlTree(t,e.queryParams,e.fragment))).pipe(sh(e=>{if(e instanceof np)throw this.noMatchError(e);throw e}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,n){const r=e.segments.length>0?new sd([],{[Bh]:e}):e;return new od(r,t,n)}expandSegmentGroup(e,t,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe(B(e=>new sd([],e))):this.expandSegment(e,n,t,n.segments,r,!0)}expandChildren(e,t,n){return function(e,t){if(0===Object.keys(e).length)return xc({});const n=[],r=[],i={};return nd(e,(e,o)=>{const s=t(o,e).pipe(B(e=>i[o]=e));o===Bh?n.push(s):r.push(s)}),xc.apply(null,n.concat(r)).pipe(Bc(),oh(),B(()=>i))}(n.children,(n,r)=>this.expandSegmentGroup(e,t,r,n))}expandSegment(e,t,n,r,i,o){return xc(...n).pipe(B(s=>this.expandSegmentAgainstRoute(e,t,n,s,r,i,o).pipe(sh(e=>{if(e instanceof np)return xc(null);throw e}))),Bc(),dh(e=>!!e),sh((e,n)=>{if(e instanceof Fc||"EmptyError"===e.name){if(this.noLeftoversInUrl(t,r,i))return xc(new sd([],{}));throw new np(t)}throw e}))}noLeftoversInUrl(e,t,n){return 0===t.length&&!e.children[n]}expandSegmentAgainstRoute(e,t,n,r,i,o,s){return hp(r)!==o?ip(t):void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,i):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,r,i,o):ip(t)}expandSegmentAgainstRouteUsingRedirect(e,t,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?op(i):this.lineralizeSegments(n,i).pipe(G(n=>{const i=new sd(n,{});return this.expandSegment(e,i,t,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:l,positionalParamSegments:u}=lp(t,r,i);if(!s)return ip(t);const c=this.applyRedirectCommands(a,r.redirectTo,u);return r.redirectTo.startsWith("/")?op(c):this.lineralizeSegments(r,c).pipe(G(r=>this.expandSegment(e,t,n,r.concat(i.slice(l)),o,!1)))}matchSegmentAgainstRoute(e,t,n,r){if("**"===n.path)return n.loadChildren?this.configLoader.load(e.injector,n).pipe(B(e=>(n._loadedConfig=e,new sd(r,{})))):xc(new sd(r,{}));const{matched:i,consumedSegments:o,lastChild:s}=lp(t,n,r);if(!i)return ip(t);const a=r.slice(s);return this.getChildConfig(e,n,r).pipe(G(e=>{const n=e.module,r=e.routes,{segmentGroup:i,slicedSegments:s}=function(e,t,n,r){return n.length>0&&function(e,t,n){return n.some(n=>cp(e,t,n)&&hp(n)!==Bh)}(e,n,r)?{segmentGroup:up(new sd(t,function(e,t){const n={};n[Bh]=t;for(const r of e)""===r.path&&hp(r)!==Bh&&(n[hp(r)]=new sd([],{}));return n}(r,new sd(n,e.children)))),slicedSegments:[]}:0===n.length&&function(e,t,n){return n.some(n=>cp(e,t,n))}(e,n,r)?{segmentGroup:up(new sd(e.segments,function(e,t,n,r){const i={};for(const o of n)cp(e,t,o)&&!r[hp(o)]&&(i[hp(o)]=new sd([],{}));return Object.assign({},r,i)}(e,n,r,e.children))),slicedSegments:n}:{segmentGroup:e,slicedSegments:n}}(t,o,a,r);return 0===s.length&&i.hasChildren()?this.expandChildren(n,r,i).pipe(B(e=>new sd(o,e))):0===r.length&&0===s.length?xc(new sd(o,{})):this.expandSegment(n,i,r,s,Bh,!0).pipe(B(e=>new sd(o.concat(e.segments),e.children)))}))}getChildConfig(e,t,n){return t.children?xc(new Qh(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?xc(t._loadedConfig):function(e,t,n){const r=t.canLoad;return r&&0!==r.length?z(r).pipe(B(r=>{const i=e.get(r);let o;if(function(e){return e&&ep(e.canLoad)}(i))o=i.canLoad(t,n);else{if(!ep(i))throw new Error("Invalid CanLoad guard");o=i(t,n)}return rd(o)})).pipe(Bc(),(i=e=>!0===e,e=>e.lift(new ph(i,void 0,e)))):xc(!0);var i}(e.injector,t,n).pipe(G(n=>n?this.configLoader.load(e.injector,t).pipe(B(e=>(t._loadedConfig=e,e))):function(e){return new w(t=>t.error(zh(`Cannot load children because the guard of the route "path: '${e.path}'" returned false`)))}(t))):xc(new Qh([],e))}lineralizeSegments(e,t){let n=[],r=t.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return xc(n);if(r.numberOfChildren>1||!r.children[Bh])return sp(e.redirectTo);r=r.children[Bh]}}applyRedirectCommands(e,t,n){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,n)}applyRedirectCreatreUrlTree(e,t,n,r){const i=this.createSegmentGroup(e,t.root,n,r);return new od(i,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const n={};return nd(e,(e,r)=>{if("string"==typeof e&&e.startsWith(":")){const i=e.substring(1);n[r]=t[i]}else n[r]=e}),n}createSegmentGroup(e,t,n,r){const i=this.createSegments(e,t.segments,n,r);let o={};return nd(t.children,(t,i)=>{o[i]=this.createSegmentGroup(e,t,n,r)}),new sd(i,o)}createSegments(e,t,n,r){return t.map(t=>t.path.startsWith(":")?this.findPosParam(e,t,r):this.findOrReturn(t,n))}findPosParam(e,t,n){const r=n[t.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return r}findOrReturn(e,t){let n=0;for(const r of t){if(r.path===e.path)return t.splice(n),r;n++}return e}}function lp(e,t,n){if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const r=(t.matcher||Gh)(n,e,t);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function up(e){if(1===e.numberOfChildren&&e.children[Bh]){const t=e.children[Bh];return new sd(e.segments.concat(t.segments),t.children)}return e}function cp(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function hp(e){return e.outlet||Bh}class dp{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class pp{constructor(e,t){this.component=e,this.route=t}}function fp(e,t,n){const r=e._root;return function e(t,n,r,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=Nd(n);return t.children.forEach(t=>{!function(t,n,r,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,a=n?n.value:null,l=r?r.getContext(t.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){const u=function(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!ld(e.url,t.url);case"pathParamsOrQueryParamsChange":return!ld(e.url,t.url)||!Zh(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Vd(e,t)||!Zh(e.queryParams,t.queryParams);case"paramsChange":default:return!Vd(e,t)}}(a,s,s.routeConfig.runGuardsAndResolvers);u?o.canActivateChecks.push(new dp(i)):(s.data=a.data,s._resolvedData=a._resolvedData),e(t,n,s.component?l?l.children:null:r,i,o),u&&o.canDeactivateChecks.push(new pp(l&&l.outlet&&l.outlet.component||null,a))}else a&&mp(n,l,o),o.canActivateChecks.push(new dp(i)),e(t,null,s.component?l?l.children:null:r,i,o)}(t,s[t.value.outlet],r,i.concat([t.value]),o),delete s[t.value.outlet]}),nd(s,(e,t)=>mp(e,r.getContext(t),o)),o}(r,t?t._root:null,n,[r.value])}function gp(e,t,n){const r=function(e){if(!e)return null;for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(r?r.module.injector:n).get(e)}function mp(e,t,n){const r=Nd(e),i=e.value;nd(r,(e,r)=>{mp(e,i.component?t?t.children.getContext(r):null:t,n)}),n.canDeactivateChecks.push(new pp(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}const yp=Symbol("INITIAL_VALUE");function vp(){return gh(e=>(function(...e){let t=null,n=null;return N(e[e.length-1])&&(n=e.pop()),"function"==typeof e[e.length-1]&&(t=e.pop()),1===e.length&&l(e[0])&&(e=e[0]),K(e,n).lift(new Vc(t))})(...e.map(e=>e.pipe(uh(1),function(...e){return t=>{let n=e[e.length-1];N(n)?e.pop():n=null;const r=e.length;return function(...e){return Bc()(xc(...e))}(1!==r||n?r>0?K(e,n):mu(n):Pc(e[0]),t)}}(yp)))).pipe(vh((e,t)=>{let n=!1;return t.reduce((e,r,i)=>{if(e!==yp)return e;if(r===yp&&(n=!0),!n){if(!1===r)return r;if(i===t.length-1||tp(r))return r}return e},e)},yp),Wc(e=>e!==yp),B(e=>tp(e)?e:!0===e),uh(1)))}function _p(e,t){return null!==e&&t&&t(new Uh(e)),xc(!0)}function bp(e,t){return null!==e&&t&&t(new Lh(e)),xc(!0)}function wp(e,t,n){const r=t.routeConfig?t.routeConfig.canActivate:null;return r&&0!==r.length?xc(r.map(r=>qc(()=>{const i=gp(r,t,n);let o;if(function(e){return e&&ep(e.canActivate)}(i))o=rd(i.canActivate(t,e));else{if(!ep(i))throw new Error("Invalid CanActivate guard");o=rd(i(t,e))}return o.pipe(dh())}))).pipe(vp()):xc(!0)}function Cp(e,t,n){const r=t[t.length-1],i=t.slice(0,t.length-1).reverse().map(e=>(function(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null})(e)).filter(e=>null!==e).map(t=>qc(()=>xc(t.guards.map(i=>{const o=gp(i,t.node,n);let s;if(function(e){return e&&ep(e.canActivateChild)}(o))s=rd(o.canActivateChild(r,e));else{if(!ep(o))throw new Error("Invalid CanActivateChild guard");s=rd(o(r,e))}return s.pipe(dh())})).pipe(vp())));return xc(i).pipe(vp())}class Ep{}class Tp{constructor(e,t,n,r,i,o){this.rootComponentType=e,this.config=t,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){try{const e=kp(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Bh),n=new xd([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Bh,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Ad(n,t),i=new Md(this.url,r);return this.inheritParamsAndData(i._root),xc(i)}catch(e){return new w(t=>t.error(e))}}inheritParamsAndData(e){const t=e.value,n=Pd(t,this.paramsInheritanceStrategy);t.params=Object.freeze(n.params),t.data=Object.freeze(n.data),e.children.forEach(e=>this.inheritParamsAndData(e))}processSegmentGroup(e,t,n){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,n)}processChildren(e,t){const n=ud(t,(t,n)=>this.processSegmentGroup(e,t,n));return function(e){const t={};e.forEach(e=>{const n=t[e.value.outlet];if(n){const t=n.url.map(e=>e.toString()).join("/"),r=e.value.url.map(e=>e.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${t}' and '${r}'.`)}t[e.value.outlet]=e.value})}(n),n.sort((e,t)=>e.value.outlet===Bh?-1:t.value.outlet===Bh?1:e.value.outlet.localeCompare(t.value.outlet)),n}processSegment(e,t,n,r){for(const o of e)try{return this.processSegmentAgainstRoute(o,t,n,r)}catch(i){if(!(i instanceof Ep))throw i}if(this.noLeftoversInUrl(t,n,r))return[];throw new Ep}noLeftoversInUrl(e,t,n){return 0===t.length&&!e.children[n]}processSegmentAgainstRoute(e,t,n,r){if(e.redirectTo)throw new Ep;if((e.outlet||Bh)!==r)throw new Ep;let i,o=[],s=[];if("**"===e.path){const o=n.length>0?td(n).parameters:{};i=new xd(n,o,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Dp(e),r,e.component,e,Sp(t),Ip(t)+n.length,Rp(e))}else{const a=function(e,t,n){if(""===t.path){if("full"===t.pathMatch&&(e.hasChildren()||n.length>0))throw new Ep;return{consumedSegments:[],lastChild:0,parameters:{}}}const r=(t.matcher||Gh)(n,e,t);if(!r)throw new Ep;const i={};nd(r.posParams,(e,t)=>{i[t]=e.path});const o=r.consumed.length>0?Object.assign({},i,r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:o}}(t,e,n);o=a.consumedSegments,s=n.slice(a.lastChild),i=new xd(o,a.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Dp(e),r,e.component,e,Sp(t),Ip(t)+o.length,Rp(e))}const a=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(e),{segmentGroup:l,slicedSegments:u}=kp(t,o,s,a,this.relativeLinkResolution);if(0===u.length&&l.hasChildren()){const e=this.processChildren(a,l);return[new Ad(i,e)]}if(0===a.length&&0===u.length)return[new Ad(i,[])];const c=this.processSegment(a,l,u,Bh);return[new Ad(i,c)]}}function Sp(e){let t=e;for(;t._sourceSegment;)t=t._sourceSegment;return t}function Ip(e){let t=e,n=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)n+=(t=t._sourceSegment)._segmentIndexShift?t._segmentIndexShift:0;return n-1}function kp(e,t,n,r,i){if(n.length>0&&function(e,t,n){return n.some(n=>Ap(e,t,n)&&Np(n)!==Bh)}(e,n,r)){const i=new sd(t,function(e,t,n,r){const i={};i[Bh]=r,r._sourceSegment=e,r._segmentIndexShift=t.length;for(const o of n)if(""===o.path&&Np(o)!==Bh){const n=new sd([],{});n._sourceSegment=e,n._segmentIndexShift=t.length,i[Np(o)]=n}return i}(e,t,r,new sd(n,e.children)));return i._sourceSegment=e,i._segmentIndexShift=t.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(e,t,n){return n.some(n=>Ap(e,t,n))}(e,n,r)){const o=new sd(e.segments,function(e,t,n,r,i,o){const s={};for(const a of r)if(Ap(e,n,a)&&!i[Np(a)]){const n=new sd([],{});n._sourceSegment=e,n._segmentIndexShift="legacy"===o?e.segments.length:t.length,s[Np(a)]=n}return Object.assign({},i,s)}(e,t,n,r,e.children,i));return o._sourceSegment=e,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:n}}const o=new sd(e.segments,e.children);return o._sourceSegment=e,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:n}}function Ap(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function Np(e){return e.outlet||Bh}function Dp(e){return e.data||{}}function Rp(e){return e.resolve||{}}function Op(e,t,n,r){const i=gp(e,t,r);return rd(i.resolve?i.resolve(t,n):i(t,n))}function Pp(e){return function(t){return t.pipe(gh(t=>{const n=e(t);return n?z(n).pipe(B(()=>t)):z([t])}))}}class xp{}class Mp{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}const Lp=new ke("ROUTES");class Fp{constructor(e,t,n,r){this.loader=e,this.compiler=t,this.onLoadStartListener=n,this.onLoadEndListener=r}load(e,t){return this.onLoadStartListener&&this.onLoadStartListener(t),this.loadModuleFactory(t.loadChildren).pipe(B(n=>{this.onLoadEndListener&&this.onLoadEndListener(t);const r=n.create(e);return new Qh(ed(r.injector.get(Lp)).map(Jh),r)}))}loadModuleFactory(e){return"string"==typeof e?z(this.loader.load(e)):rd(e()).pipe(G(e=>e instanceof He?xc(e):z(this.compiler.compileModuleAsync(e))))}}class Up{}class Vp{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function jp(e){throw e}function qp(e,t,n){return t.parse("/")}function Bp(e,t){return xc(null)}class Wp{constructor(e,t,n,r,i,o,s,a){this.rootComponentType=e,this.urlSerializer=t,this.rootContexts=n,this.location=r,this.config=a,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new k,this.errorHandler=jp,this.malformedUriErrorHandler=qp,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Bp,afterPreactivation:Bp},this.urlHandlingStrategy=new Vp,this.routeReuseStrategy=new Mp,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=i.get(We),this.console=i.get($i);const l=i.get(go);this.isNgZoneEnabled=l instanceof go,this.resetConfig(a),this.currentUrlTree=new od(new sd([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Fp(o,s,e=>this.triggerEvent(new xh(e)),e=>this.triggerEvent(new Mh(e))),this.routerState=Rd(this.currentUrlTree,this.rootComponentType),this.transitions=new Mc({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(e){const t=this.events;return e.pipe(Wc(e=>0!==e.id),B(e=>Object.assign({},e,{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl)})),gh(e=>{let n=!1,r=!1;return xc(e).pipe(Xc(e=>{this.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign({},this.lastSuccessfulNavigation,{previousNavigation:null}):null}}),gh(e=>{const n=!this.navigated||e.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return xc(e).pipe(gh(e=>{const n=this.transitions.getValue();return t.next(new Sh(e.id,this.serializeUrl(e.extractedUrl),e.source,e.restoredState)),n!==this.transitions.getValue()?gu:[e]}),gh(e=>Promise.resolve(e)),function(e,t,n,r){return function(i){return i.pipe(gh(i=>(function(e,t,n,r,i){return new ap(e,t,n,r,i).apply()})(e,t,n,i.extractedUrl,r).pipe(B(e=>Object.assign({},i,{urlAfterRedirects:e})))))}}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Xc(e=>{this.currentNavigation=Object.assign({},this.currentNavigation,{finalUrl:e.urlAfterRedirects})}),function(e,t,n,r,i){return function(o){return o.pipe(G(o=>(function(e,t,n,r,i="emptyOnly",o="legacy"){return new Tp(e,t,n,r,i,o).recognize()})(e,t,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(B(e=>Object.assign({},o,{targetSnapshot:e})))))}}(this.rootComponentType,this.config,e=>this.serializeUrl(e),this.paramsInheritanceStrategy,this.relativeLinkResolution),Xc(e=>{"eager"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(e.urlAfterRedirects,!!e.extras.replaceUrl,e.id,e.extras.state),this.browserUrlTree=e.urlAfterRedirects)}),Xc(e=>{const n=new Nh(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.next(n)}));if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=e,a=new Sh(n,this.serializeUrl(r),i,o);t.next(a);const l=Rd(r,this.rootComponentType).snapshot;return xc(Object.assign({},e,{targetSnapshot:l,urlAfterRedirects:r,extras:Object.assign({},s,{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=e.rawUrl,this.browserUrlTree=e.urlAfterRedirects,e.resolve(null),gu}),Pp(e=>{const{targetSnapshot:t,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=e;return this.hooks.beforePreactivation(t,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Xc(e=>{const t=new Dh(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),B(e=>Object.assign({},e,{guards:fp(e.targetSnapshot,e.currentSnapshot,this.rootContexts)})),function(e,t){return function(n){return n.pipe(G(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?xc(Object.assign({},n,{guardsResult:!0})):function(e,t,n,r){return z(e).pipe(G(e=>(function(e,t,n,r,i){const o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return o&&0!==o.length?xc(o.map(o=>{const s=gp(o,t,i);let a;if(function(e){return e&&ep(e.canDeactivate)}(s))a=rd(s.canDeactivate(e,t,n,r));else{if(!ep(s))throw new Error("Invalid CanDeactivate guard");a=rd(s(e,t,n,r))}return a.pipe(dh())})).pipe(vp()):xc(!0)})(e.component,e.route,n,t,r)),dh(e=>!0!==e,!0))}(s,r,i,e).pipe(G(n=>n&&function(e){return"boolean"==typeof e}(n)?function(e,t,n,r){return z(t).pipe(wh(t=>z([bp(t.route.parent,r),_p(t.route,r),Cp(e,t.path,n),wp(e,t.route,n)]).pipe(Bc(),dh(e=>!0!==e,!0))),dh(e=>!0!==e,!0))}(r,o,e,t):xc(n)),B(e=>Object.assign({},n,{guardsResult:e})))}))}}(this.ngModule.injector,e=>this.triggerEvent(e)),Xc(e=>{if(tp(e.guardsResult)){const t=zh(`Redirecting to "${this.serializeUrl(e.guardsResult)}"`);throw t.url=e.guardsResult,t}}),Xc(e=>{const t=new Rh(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);this.triggerEvent(t)}),Wc(e=>{if(!e.guardsResult){this.resetUrlToCurrentUrlTree();const n=new kh(e.id,this.serializeUrl(e.extractedUrl),"");return t.next(n),e.resolve(!1),!1}return!0}),Pp(e=>{if(e.guards.canActivateChecks.length)return xc(e).pipe(Xc(e=>{const t=new Oh(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),function(e,t){return function(n){return n.pipe(G(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;return i.length?z(i).pipe(wh(n=>(function(e,t,n,r){return function(e,t,n,r){const i=Object.keys(e);if(0===i.length)return xc({});if(1===i.length){const o=i[0];return Op(e[o],t,n,r).pipe(B(e=>({[o]:e})))}const o={};return z(i).pipe(G(i=>Op(e[i],t,n,r).pipe(B(e=>(o[i]=e,e))))).pipe(oh(),B(()=>o))}(e._resolve,e,t,r).pipe(B(t=>(e._resolvedData=t,e.data=Object.assign({},e.data,Pd(e,n).resolve),null)))})(n.route,r,e,t)),function(e,t){return arguments.length>=2?function(n){return _(vh(e,t),Qc(1),nh(t))(n)}:function(t){return _(vh((t,n,r)=>e(t,n,r+1)),Qc(1))(t)}}((e,t)=>e),B(e=>n)):xc(n)}))}}(this.paramsInheritanceStrategy,this.ngModule.injector),Xc(e=>{const t=new Ph(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}))}),Pp(e=>{const{targetSnapshot:t,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=e;return this.hooks.afterPreactivation(t,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),B(e=>{const t=function(e,t,n){const r=function e(t,n,r){if(r&&t.shouldReuseRoute(n.value,r.value.snapshot)){const i=r.value;i._futureSnapshot=n.value;const o=function(t,n,r){return n.children.map(n=>{for(const i of r.children)if(t.shouldReuseRoute(i.value.snapshot,n.value))return e(t,n,i);return e(t,n)})}(t,n,r);return new Ad(i,o)}{const r=t.retrieve(n.value);if(r){const e=r.route;return function e(t,n){if(t.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=t.value;for(let r=0;r<t.children.length;++r)e(t.children[r],n.children[r])}(n,e),e}{const r=new Od(new Mc((i=n.value).url),new Mc(i.params),new Mc(i.queryParams),new Mc(i.fragment),new Mc(i.data),i.outlet,i.component,i),o=n.children.map(n=>e(t,n));return new Ad(r,o)}}var i}(e,t._root,n?n._root:void 0);return new Dd(r,t)}(this.routeReuseStrategy,e.targetSnapshot,e.currentRouterState);return Object.assign({},e,{targetRouterState:t})}),Xc(e=>{this.currentUrlTree=e.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl),this.routerState=e.targetRouterState,"deferred"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!e.extras.replaceUrl,e.id,e.extras.state),this.browserUrlTree=e.urlAfterRedirects)}),Xd(this.rootContexts,this.routeReuseStrategy,e=>this.triggerEvent(e)),Xc({next(){n=!0},complete(){n=!0}}),function(e){return t=>t.lift(new Ch(e))}(()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new kh(e.id,this.serializeUrl(e.extractedUrl),`Navigation ID ${e.id} is not equal to the current navigation id ${this.navigationId}`);t.next(n),e.resolve(!1)}this.currentNavigation=null}),sh(n=>{if(r=!0,function(e){return e&&e[Kh]}(n)){const r=tp(n.url);r||(this.navigated=!0,this.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl));const i=new kh(e.id,this.serializeUrl(e.extractedUrl),n.message);t.next(i),e.resolve(!1),r&&this.navigateByUrl(n.url)}else{this.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl);const r=new Ah(e.id,this.serializeUrl(e.extractedUrl),n);t.next(r);try{e.resolve(this.errorHandler(n))}catch(i){e.reject(i)}}return gu}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}getTransition(){const e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}setTransition(e){this.transitions.next(Object.assign({},this.getTransition(),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{let t=this.parseUrl(e.url);const n="popstate"===e.type?"popstate":"hashchange",r=e.state&&e.state.navigationId?e.state:null;setTimeout(()=>{this.scheduleNavigation(t,n,r,{replaceUrl:!0})},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){$h(e),this.config=e.map(Jh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}createUrlTree(e,t={}){const{relativeTo:n,queryParams:r,fragment:i,preserveQueryParams:o,queryParamsHandling:s,preserveFragment:a}=t;it()&&o&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");const l=n||this.routerState.root,u=a?this.currentUrlTree.fragment:i;let c=null;if(s)switch(s){case"merge":c=Object.assign({},this.currentUrlTree.queryParams,r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}else c=o?this.currentUrlTree.queryParams:r||null;return null!==c&&(c=this.removeEmptyProps(c)),function(e,t,n,r,i){if(0===n.length)return qd(t.root,t.root,t,r,i);const o=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new Bd(!0,0,e);let t=0,n=!1;const r=e.reduce((e,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const t={};return nd(r.outlets,(e,n)=>{t[n]="string"==typeof e?e.split("/"):e}),[...e,{outlets:t}]}if(r.segmentPath)return[...e,r.segmentPath]}return"string"!=typeof r?[...e,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?t++:""!=r&&e.push(r))}),e):[...e,r]},[]);return new Bd(n,t,r)}(n);if(o.toRoot())return qd(t.root,new sd([],{}),t,r,i);const s=function(e,t,n){if(e.isAbsolute)return new Wd(t.root,!0,0);if(-1===n.snapshot._lastPathIndex)return new Wd(n.snapshot._urlSegment,!0,0);const r=jd(e.commands[0])?0:1;return function(e,t,n){let r=e,i=t,o=n;for(;o>i;){if(o-=i,!(r=r.parent))throw new Error("Invalid number of '../'");i=r.segments.length}return new Wd(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,e.numberOfDoubleDots)}(o,t,e),a=s.processChildren?zd(s.segmentGroup,s.index,o.commands):Kd(s.segmentGroup,s.index,o.commands);return qd(s.segmentGroup,a,t,r,i)}(l,this.currentUrlTree,e,c,u)}navigateByUrl(e,t={skipLocationChange:!1}){it()&&this.isNgZoneEnabled&&!go.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");const n=tp(e)?e:this.parseUrl(e),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,t)}navigate(e,t={skipLocationChange:!1}){return function(e){for(let t=0;t<e.length;t++){const n=e[t];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,t),t)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let t;try{t=this.urlSerializer.parse(e)}catch(n){t=this.malformedUriErrorHandler(n,this.urlSerializer,e)}return t}isActive(e,t){if(tp(e))return id(this.currentUrlTree,e,t);const n=this.parseUrl(e);return id(this.currentUrlTree,n,t)}removeEmptyProps(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return null!=r&&(t[n]=r),t},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.events.next(new Ih(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,e.resolve(!0)},e=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(e,t,n,r){const i=this.getTransition();if(i&&"imperative"!==t&&"imperative"===i.source&&i.rawUrl.toString()===e.toString())return Promise.resolve(!0);if(i&&"hashchange"==t&&"popstate"===i.source&&i.rawUrl.toString()===e.toString())return Promise.resolve(!0);if(i&&"popstate"==t&&"hashchange"===i.source&&i.rawUrl.toString()===e.toString())return Promise.resolve(!0);let o=null,s=null;const a=new Promise((e,t)=>{o=e,s=t}),l=++this.navigationId;return this.setTransition({id:l,source:t,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:r,resolve:o,reject:s,promise:a,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),a.catch(e=>Promise.reject(e))}setBrowserUrl(e,t,n,r){const i=this.urlSerializer.serialize(e);r=r||{},this.location.isCurrentPathEqualTo(i)||t?this.location.replaceState(i,"",Object.assign({},r,{navigationId:n})):this.location.go(i,"",Object.assign({},r,{navigationId:n}))}resetStateAndUrl(e,t,n){this.routerState=e,this.currentUrlTree=t,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}class Hp{constructor(e,t,n,r,i){this.router=e,this.route=t,this.commands=[],null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}set preserveQueryParams(e){it()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated!, use queryParamsHandling instead."),this.preserve=e}onClick(){const e={skipLocationChange:zp(this.skipLocationChange),replaceUrl:zp(this.replaceUrl)};return this.router.navigateByUrl(this.urlTree,e),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:zp(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:zp(this.preserveFragment)})}}class Kp{constructor(e,t,n){this.router=e,this.route=t,this.locationStrategy=n,this.commands=[],this.subscription=e.events.subscribe(e=>{e instanceof Ih&&this.updateTargetUrlAndHref()})}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}set preserveQueryParams(e){it()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=e}ngOnChanges(e){this.updateTargetUrlAndHref()}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,t,n,r){if(0!==e||t||n||r)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const i={skipLocationChange:zp(this.skipLocationChange),replaceUrl:zp(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,i),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:zp(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:zp(this.preserveFragment)})}}function zp(e){return""===e||!!e}class Gp{constructor(e,t,n,r,i){this.router=e,this.element=t,this.renderer=n,this.link=r,this.linkWithHref=i,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.subscription=e.events.subscribe(e=>{e instanceof Ih&&this.update()})}ngAfterContentInit(){this.links.changes.subscribe(e=>this.update()),this.linksWithHrefs.changes.subscribe(e=>this.update()),this.update()}set routerLinkActive(e){const t=Array.isArray(e)?e:e.split(" ");this.classes=t.filter(e=>!!e)}ngOnChanges(e){this.update()}ngOnDestroy(){this.subscription.unsubscribe()}update(){this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then(()=>{const e=this.hasActiveLinks();this.isActive!==e&&(this.isActive=e,this.classes.forEach(t=>{e?this.renderer.addClass(this.element.nativeElement,t):this.renderer.removeClass(this.element.nativeElement,t)}))})}isLinkActive(e){return t=>e.isActive(t.urlTree,this.routerLinkActiveOptions.exact)}hasActiveLinks(){const e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.linkWithHref&&e(this.linkWithHref)||this.links.some(e)||this.linksWithHrefs.some(e)}}class Qp{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new $p,this.attachRef=null}}class $p{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const n=this.getOrCreateContext(e);n.outlet=t,this.contexts.set(e,n)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Qp,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class Yp{constructor(e,t,n,r,i){this.parentContexts=e,this.location=t,this.resolver=n,this.changeDetector=i,this.activated=null,this._activatedRoute=null,this.activateEvents=new Ui,this.deactivateEvents=new Ui,this.name=r||Bh,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,e}attach(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,t){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const n=(t=t||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new Xp(e,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}class Xp{constructor(e,t,n){this.route=e,this.childContexts=t,this.parent=n}get(e,t){return e===Od?this.route:e===$p?this.childContexts:this.parent.get(e,t)}}class Jp{}class Zp{preload(e,t){return t().pipe(sh(()=>xc(null)))}}class ef{preload(e,t){return xc(null)}}class tf{constructor(e,t,n,r,i){this.router=e,this.injector=r,this.preloadingStrategy=i,this.loader=new Fp(t,n,t=>e.triggerEvent(new xh(t)),t=>e.triggerEvent(new Mh(t)))}setUpPreloading(){this.subscription=this.router.events.pipe(Wc(e=>e instanceof Ih),wh(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(We);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription.unsubscribe()}processRoutes(e,t){const n=[];for(const r of t)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const e=r._loadedConfig;n.push(this.processRoutes(e.module,e.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(e,r)):r.children&&n.push(this.processRoutes(e,r.children));return z(n).pipe(X(),B(e=>void 0))}preloadConfig(e,t){return this.preloadingStrategy.preload(t,()=>this.loader.load(e.injector,t).pipe(G(e=>(t._loadedConfig=e,this.processRoutes(e.module,e.routes)))))}}class nf{constructor(e,t,n={}){this.router=e,this.viewportScroller=t,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Sh?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Ih&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof jh&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,t){this.router.triggerEvent(new jh(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,t))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}const rf=new ke("ROUTER_CONFIGURATION"),of=new ke("ROUTER_FORROOT_GUARD"),sf=[Ra,{provide:cd,useClass:hd},{provide:Wp,useFactory:pf,deps:[Mo,cd,$p,Ra,Lt,Fo,ro,Lp,rf,[Up,new ce],[xp,new ce]]},$p,{provide:Od,useFactory:ff,deps:[Wp]},{provide:Fo,useClass:Bo},tf,ef,Zp,{provide:rf,useValue:{enableTracing:!1}}];function af(){return new Do("Router",Wp)}class lf{constructor(e,t){}static forRoot(e,t){return{ngModule:lf,providers:[sf,df(e),{provide:of,useFactory:hf,deps:[[Wp,new ce,new de]]},{provide:rf,useValue:t||{}},{provide:Na,useFactory:cf,deps:[ka,[new ue(Da),new ce],rf]},{provide:nf,useFactory:uf,deps:[Wp,Ja,rf]},{provide:Jp,useExisting:t&&t.preloadingStrategy?t.preloadingStrategy:ef},{provide:Do,multi:!0,useFactory:af},[gf,{provide:qi,multi:!0,useFactory:mf,deps:[gf]},{provide:vf,useFactory:yf,deps:[gf]},{provide:Qi,multi:!0,useExisting:vf}]]}}static forChild(e){return{ngModule:lf,providers:[df(e)]}}}function uf(e,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new nf(e,t,n)}function cf(e,t,n={}){return n.useHash?new Pa(e,t):new xa(e,t)}function hf(e){if(e)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function df(e){return[{provide:Kt,multi:!0,useValue:e},{provide:Lp,multi:!0,useValue:e}]}function pf(e,t,n,r,i,o,s,a,l={},u,c){const h=new Wp(null,t,n,r,i,o,s,ed(a));if(u&&(h.urlHandlingStrategy=u),c&&(h.routeReuseStrategy=c),l.errorHandler&&(h.errorHandler=l.errorHandler),l.malformedUriErrorHandler&&(h.malformedUriErrorHandler=l.malformedUriErrorHandler),l.enableTracing){const e=tl();h.events.subscribe(t=>{e.logGroup(`Router Event: ${t.constructor.name}`),e.log(t.toString()),e.log(t),e.logGroupEnd()})}return l.onSameUrlNavigation&&(h.onSameUrlNavigation=l.onSameUrlNavigation),l.paramsInheritanceStrategy&&(h.paramsInheritanceStrategy=l.paramsInheritanceStrategy),l.urlUpdateStrategy&&(h.urlUpdateStrategy=l.urlUpdateStrategy),l.relativeLinkResolution&&(h.relativeLinkResolution=l.relativeLinkResolution),h}function ff(e){return e.routerState.root}class gf{constructor(e){this.injector=e,this.initNavigation=!1,this.resultOfPreactivationDone=new k}appInitializer(){return this.injector.get(Aa,Promise.resolve(null)).then(()=>{let e=null;const t=new Promise(t=>e=t),n=this.injector.get(Wp),r=this.injector.get(rf);if(this.isLegacyDisabled(r)||this.isLegacyEnabled(r))e(!0);else if("disabled"===r.initialNavigation)n.setUpLocationChangeListener(),e(!0);else{if("enabled"!==r.initialNavigation)throw new Error(`Invalid initialNavigation options: '${r.initialNavigation}'`);n.hooks.afterPreactivation=()=>this.initNavigation?xc(null):(this.initNavigation=!0,e(!0),this.resultOfPreactivationDone),n.initialNavigation()}return t})}bootstrapListener(e){const t=this.injector.get(rf),n=this.injector.get(tf),r=this.injector.get(nf),i=this.injector.get(Wp),o=this.injector.get(Mo);e===o.components[0]&&(this.isLegacyEnabled(t)?i.initialNavigation():this.isLegacyDisabled(t)&&i.setUpLocationChangeListener(),n.setUpPreloading(),r.init(),i.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(e){return"legacy_enabled"===e.initialNavigation||!0===e.initialNavigation||void 0===e.initialNavigation}isLegacyDisabled(e){return"legacy_disabled"===e.initialNavigation||!1===e.initialNavigation}}function mf(e){return e.appInitializer.bind(e)}function yf(e){return e.bootstrapListener.bind(e)}const vf=new ke("Router Initializer");let _f=(()=>{class e{constructor(e,t){this.router=e,this.activatedRouter=t}registroUsuario(e){Oc.auth().createUserWithEmailAndPassword(e.email,e.password).catch(e=>{console.log(e)})}inicioSesion(e){Oc.auth().signInWithEmailAndPassword(e.email,e.password).then(e=>{console.log(e),this.router.navigate(["/inicio"]),window.alert("Has iniciado session correctamente")}).catch(e=>{console.log(e)})}isAuthenticated(){return!!Oc.auth().currentUser}logout(){Oc.auth().signOut()}}return e.ngInjectableDef=ge({factory:function(){return new e(je(Wp),je(Od))},token:e,providedIn:"root"}),e})(),bf=(()=>{class e{constructor(e){this.autenticacionService=e}canActivate(e,t){return this.autenticacionService.isAuthenticated()}}return e.ngInjectableDef=ge({factory:function(){return new e(je(_f))},token:e,providedIn:"root"}),e})();class wf{constructor(e,t,n,r){this.pf=e,this.proveedorService=t,this.router=n,this.activatedRouter=r,this.provincias=["\xc1lava","Albacete","Alicante","Almer\xeda","Asturias","\xc1vila","Badajoz","Barcelona","Burgos","C\xe1ceres","C\xe1diz","Cantabria","Castell\xf3n","Ciudad Real","C\xf3rdoba","La Coru\xf1a","Cuenca","Gerona","Granada","Guadalajara","Guip\xfazcoa","Huelva","Huesca","IslasBaleares","Ja\xe9n","Le\xf3n","L\xe9rida","Lugo","Madrid","M\xe1laga","Murcia","Navarra","Orense","Palencia","Las Palmas","Pontevedra","La Rioja","Salamanca","Segovia","Sevilla","Soria","Tarragona","Santa Cruz de Tenerife","Teruel","Toledo","Valencia","Valladolid","Vizcaya","Zamora","Zaragoza"],this.activatedRouter.params.subscribe(e=>{this.id=e.id,console.log(this.id),this.proveedorService.GetProv(this.id).valueChanges().subscribe(e=>{this.proveedor=e,console.log(this.proveedor)})})}ngOnInit(){this.formpro=this.pf.group({nombre:["",Ru.required],cif:["",Ru.required],direccion:["",Ru.required],cp:["",Ru.required],localidad:["",Ru.required],provincia:["",Ru.required],telefono:["",Ru.required],email:["",Ru.required],contacto:["",Ru.required]})}onSubmit(){this.proveedor=this.saveProveedor(),this.proveedorService.AddProv(this.proveedor),this.router.navigate(["/proveedores"])}saveProveedor(){return{nombre:this.formpro.get("nombre").value,cif:this.formpro.get("cif").value,direccion:this.formpro.get("direccion").value,cp:this.formpro.get("cp").value,localidad:this.formpro.get("localidad").value,provincia:this.formpro.get("provincia").value,telefono:this.formpro.get("telefono").value,email:this.formpro.get("email").value,contacto:this.formpro.get("contacto").value}}}class Cf{}class Ef{constructor(){this.title="appCompras",this.firebaseConfig={apiKey:"AIzaSyB0pcVMk8n0Zf43hA_nE2WlkNKKhG8afMg",authDomain:"comprasapp-bb34b.firebaseapp.com",databaseURL:"https://comprasapp-bb34b.firebaseio.com",projectId:"comprasapp-bb34b",storageBucket:"comprasapp-bb34b.appspot.com",messagingSenderId:"35093441216",appId:"1:35093441216:web:d5caa96090cad5e98adb25",measurementId:"G-R8C7R6B5QR"}}ngOnInit(){Oc.initializeApp(this.firebaseConfig)}}var Tf=rr({encapsulation:2,styles:[],data:{}});function Sf(e){return vs(0,[(e()(),rs(0,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),pi(1,212992,null,0,Yp,[$p,Un,ln,[8,null],Ot],null,null)],(function(e,t){e(t,1,0)}),null)}function If(e){return vs(0,[(e()(),rs(0,0,null,null,1,"ng-component",[],null,null,null,Sf,Tf)),pi(1,49152,null,0,qh,[],null,null)],null,null)}var kf=Wr("ng-component",qh,If,{},{},[]);n("mrSG");class Af{constructor(e,t,n,r,i,o){this.toastId=e,this.config=t,this.message=n,this.title=r,this.toastType=i,this.toastRef=o,this._onTap=new k,this._onAction=new k,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}}const Nf={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing"},Df=new ke("ToastConfig");class Rf{constructor(e,t){this.component=e,this.injector=t}attach(e,t){return this._attachedHost=e,e.attach(this,t)}detach(){const e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class Of{attach(e,t){return this._attachedPortal=e,this.attachComponentPortal(e,t)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}}class Pf extends Of{constructor(e,t,n){super(),this._hostDomElement=e,this._componentFactoryResolver=t,this._appRef=n}attachComponentPortal(e,t){const n=this._componentFactoryResolver.resolveComponentFactory(e.component);let r;return r=n.create(e.injector),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.detachView(r.hostView),r.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(r),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(r)),r}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let xf=(()=>{let e=class{constructor(e){this._document=e}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e=this._document.createElement("div");e.classList.add("overlay-container"),this._document.body.appendChild(e),this._containerElement=e}};return e.ngInjectableDef=ge({factory:function(){return new e(je($a))},token:e,providedIn:"root"}),e})();class Mf{constructor(e){this._portalHost=e}attach(e,t=!0){return this._portalHost.attach(e,t)}detach(){return this._portalHost.detach()}}let Lf=(()=>{let e=class{constructor(e,t,n,r){this._overlayContainer=e,this._componentFactoryResolver=t,this._appRef=n,this._document=r,this._paneElements=new Map}create(e,t){return this._createOverlayRef(this.getPaneElement(e,t))}getPaneElement(e="",t){return this._paneElements.get(t)||this._paneElements.set(t,{}),this._paneElements.get(t)[e]||(this._paneElements.get(t)[e]=this._createPaneElement(e,t)),this._paneElements.get(t)[e]}_createPaneElement(e,t){const n=this._document.createElement("div");return n.id="toast-container",n.classList.add(e),n.classList.add("toast-container"),t?t.getContainerElement().appendChild(n):this._overlayContainer.getContainerElement().appendChild(n),n}_createPortalHost(e){return new Pf(e,this._componentFactoryResolver,this._appRef)}_createOverlayRef(e){return new Mf(this._createPortalHost(e))}};return e.ngInjectableDef=ge({factory:function(){return new e(je(xf),je(ln),je(Mo),je($a))},token:e,providedIn:"root"}),e})();class Ff{constructor(e){this._overlayRef=e,this.duplicatesCount=0,this._afterClosed=new k,this._activate=new k,this._manualClose=new k,this._resetTimeout=new k,this._countDuplicate=new k}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,t){e&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}}class Uf{constructor(e,t){this._toastPackage=e,this._parentInjector=t}get(e,t,n){return e===Af?this._toastPackage:this._parentInjector.get(e,t,n)}}let Vf=(()=>{let e=class{constructor(e,t,n,r,i){this.overlay=t,this._injector=n,this.sanitizer=r,this.ngZone=i,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig=Object.assign({},e.default,e.config),e.config.iconClasses&&(this.toastrConfig.iconClasses=Object.assign({},e.default.iconClasses,e.config.iconClasses))}show(e,t,n={},r=""){return this._preBuildNotification(r,e,t,this.applyConfig(n))}success(e,t,n={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",e,t,this.applyConfig(n))}error(e,t,n={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",e,t,this.applyConfig(n))}info(e,t,n={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",e,t,this.applyConfig(n))}warning(e,t,n={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",e,t,this.applyConfig(n))}clear(e){for(const t of this.toasts)if(void 0!==e){if(t.toastId===e)return void t.toastRef.manualClose()}else t.toastRef.manualClose()}remove(e){const t=this._findToast(e);if(!t)return!1;if(t.activeToast.toastRef.close(),this.toasts.splice(t.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length)return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const e=this.toasts[this.currentlyActive].toastRef;e.isInactive()||(this.currentlyActive=this.currentlyActive+1,e.activate())}return!0}findDuplicate(e,t,n){for(const r of this.toasts)if(r.message===e)return r.toastRef.onDuplicate(t,n),r;return null}applyConfig(e={}){return Object.assign({},this.toastrConfig,e)}_findToast(e){for(let t=0;t<this.toasts.length;t++)if(this.toasts[t].toastId===e)return{index:t,activeToast:this.toasts[t]};return null}_preBuildNotification(e,t,n,r){return r.onActivateTick?this.ngZone.run(()=>this._buildNotification(e,t,n,r)):this._buildNotification(e,t,n,r)}_buildNotification(e,t,n,r){if(!r.toastComponent)throw new Error("toastComponent required");const i=this.findDuplicate(t,this.toastrConfig.resetTimeoutOnDuplicate&&r.timeOut>0,this.toastrConfig.countDuplicates);if(t&&this.toastrConfig.preventDuplicates&&null!==i)return i;this.previousToastMessage=t;let o=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(o=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const s=this.overlay.create(r.positionClass,this.overlayContainer);this.index=this.index+1;let a=t;t&&r.enableHtml&&(a=this.sanitizer.sanitize(It.HTML,t));const l=new Ff(s),u=new Af(this.index,r,a,n,e,l),c=new Uf(u,this._injector),h=new Rf(r.toastComponent,c),d=s.attach(h,this.toastrConfig.newestOnTop);l.componentInstance=d._component;const p={toastId:this.index,message:t||"",toastRef:l,onShown:l.afterActivate(),onHidden:l.afterClosed(),onTap:u.onTap(),onAction:u.onAction(),portal:d};return o||setTimeout(()=>{p.toastRef.activate(),this.currentlyActive=this.currentlyActive+1}),this.toasts.push(p),p}};return e.ngInjectableDef=ge({factory:function(){return new e(je(Df),je(Lf),je(Ae),je(iu),je(go))},token:e,providedIn:"root"}),e})(),jf=class{constructor(e,t,n){this.toastrService=e,this.toastPackage=t,this.ngZone=n,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=t.message,this.title=t.title,this.options=t.config,this.originalTimeout=t.config.timeOut,this.toastClasses=`${t.toastType} ${t.config.toastClass}`,this.sub=t.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=t.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=t.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=t.toastRef.countDuplicate().subscribe(e=>{this.duplicatesCount=e})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state=Object.assign({},this.state,{value:"active"}),!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const e=(new Date).getTime();this.width=(this.hideTime-e)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=Object.assign({},this.state,{value:"active"}),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state=Object.assign({},this.state,{value:"removed"}),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0!==this.options.disableTimeOut&&"extendedTimeOut"!==this.options.disableTimeOut&&0!==this.options.extendedTimeOut&&"removed"!==this.state.value&&(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(e,t){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(e),t)):this.timeout=setTimeout(()=>e(),t)}outsideInterval(e,t){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(e),t)):this.intervalId=setInterval(()=>e(),t)}runInsideAngular(e){this.ngZone?this.ngZone.run(()=>e()):e()}};var qf;const Bf=Object.assign({},Nf,{toastComponent:jf});let Wf=qf=class{static forRoot(e={}){return{ngModule:qf,providers:[{provide:Df,useValue:{default:Bf,config:e}}]}}};var Hf;const Kf=Object.assign({},Nf,{toastComponent:class{constructor(e,t,n){this.toastrService=e,this.toastPackage=t,this.appRef=n,this.width=-1,this.toastClasses="",this.state="inactive",this.message=t.message,this.title=t.title,this.options=t.config,this.originalTimeout=t.config.timeOut,this.toastClasses=`${t.toastType} ${t.config.toastClass}`,this.sub=t.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=t.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=t.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=t.toastRef.countDuplicate().subscribe(e=>{this.duplicatesCount=e})}get displayStyle(){if("inactive"===this.state)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state="active",!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const e=(new Date).getTime();this.width=(this.hideTime-e)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state="active",this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=(new Date).getTime()+(this.originalTimeout||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){"removed"!==this.state&&(clearTimeout(this.timeout),this.state="removed",this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){"removed"!==this.state&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0!==this.options.disableTimeOut&&"extendedTimeOut"!==this.options.disableTimeOut&&0!==this.options.extendedTimeOut&&"removed"!==this.state&&(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}}});Hf=class{static forRoot(e={}){return{ngModule:Hf,providers:[{provide:Df,useValue:{default:Kf,config:e}}]}}};var zf=rr({encapsulation:2,styles:[],data:{animation:[{type:7,name:"flyInOut",definitions:[{type:0,name:"inactive",styles:{type:6,styles:{opacity:0},offset:null},options:void 0},{type:0,name:"active",styles:{type:6,styles:{opacity:1},offset:null},options:void 0},{type:0,name:"removed",styles:{type:6,styles:{opacity:0},offset:null},options:void 0},{type:1,expr:"inactive => active",animation:{type:4,styles:null,timings:"{{ easeTime }}ms {{ easing }}"},options:null},{type:1,expr:"active => removed",animation:{type:4,styles:null,timings:"{{ easeTime }}ms {{ easing }}"},options:null}],options:{}}]}});function Gf(e){return vs(0,[(e()(),rs(0,0,null,null,2,"button",[["aria-label","Close"],["class","toast-close-button"]],null,[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.remove()&&r),r}),null,null)),(e()(),rs(1,0,null,null,1,"span",[["aria-hidden","true"]],null,null,null,null,null)),(e()(),gs(-1,null,["\xd7"]))],null,null)}function Qf(e){return vs(0,[(e()(),rs(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),gs(1,null,["[","]"]))],null,(function(e,t){e(t,1,0,t.component.duplicatesCount+1)}))}function $f(e){return vs(0,[(e()(),rs(0,0,null,null,3,"div",[],[[8,"className",0],[1,"aria-label",0]],null,null,null,null)),(e()(),gs(1,null,[" "," "])),(e()(),ns(16777216,null,null,1,null,Qf)),pi(3,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null)],(function(e,t){e(t,3,0,t.component.duplicatesCount)}),(function(e,t){var n=t.component;e(t,0,0,n.options.titleClass,n.title),e(t,1,0,n.title)}))}function Yf(e){return vs(0,[(e()(),rs(0,0,null,null,0,"div",[["aria-live","polite"],["role","alertdialog"]],[[8,"className",0],[8,"innerHTML",1]],null,null,null,null))],null,(function(e,t){var n=t.component;e(t,0,0,n.options.messageClass,n.message)}))}function Xf(e){return vs(0,[(e()(),rs(0,0,null,null,1,"div",[["aria-live","polite"],["role","alertdialog"]],[[8,"className",0],[1,"aria-label",0]],null,null,null,null)),(e()(),gs(1,null,[" "," "]))],null,(function(e,t){var n=t.component;e(t,0,0,n.options.messageClass,n.message),e(t,1,0,n.message)}))}function Jf(e){return vs(0,[(e()(),rs(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),rs(1,0,null,null,0,"div",[["class","toast-progress"]],[[4,"width",null]],null,null,null,null))],null,(function(e,t){e(t,1,0,t.component.width+"%")}))}function Zf(e){return vs(0,[(e()(),ns(16777216,null,null,1,null,Gf)),pi(1,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),ns(16777216,null,null,1,null,$f)),pi(3,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),ns(16777216,null,null,1,null,Yf)),pi(5,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),ns(16777216,null,null,1,null,Xf)),pi(7,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),ns(16777216,null,null,1,null,Jf)),pi(9,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,1,0,n.options.closeButton),e(t,3,0,n.title),e(t,5,0,n.message&&n.options.enableHtml),e(t,7,0,n.message&&!n.options.enableHtml),e(t,9,0,n.options.progressBar)}),null)}function eg(e){return vs(0,[(e()(),rs(0,0,null,null,1,"div",[["toast-component",""]],[[8,"className",0],[40,"@flyInOut",0],[4,"display",null]],[[null,"click"],[null,"mouseenter"],[null,"mouseleave"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==ei(e,1).tapToast()&&r),"mouseenter"===t&&(r=!1!==ei(e,1).stickAround()&&r),"mouseleave"===t&&(r=!1!==ei(e,1).delayedHideToast()&&r),r}),Zf,zf)),pi(1,180224,null,0,jf,[Vf,Af,go],null,null)],null,(function(e,t){e(t,0,0,ei(t,1).toastClasses,ei(t,1).state,ei(t,1).displayStyle)}))}var tg=Wr("[toast-component]",jf,eg,{},{},[]),ng=rr({encapsulation:0,styles:[[""]],data:{}});function rg(e){return vs(0,[(e()(),rs(0,0,null,null,1,"h2",[],null,null,null,null,null)),(e()(),gs(-1,null,["Bienvenido a nuestra aplicaci\xf3n Compras App"]))],null,null)}function ig(e){return vs(0,[(e()(),rs(0,0,null,null,1,"app-inicio",[],null,null,null,rg,ng)),pi(1,114688,null,0,Ia,[],null,null)],(function(e,t){e(t,1,0)}),null)}var og=Wr("app-inicio",Ia,ig,{},{},[]);function sg(e){return null==e}function ag(e){return"function"==typeof e.set}function lg(e,t){return ag(t)?t:e.ref(t)}function ug(e,t){if("string"==typeof e)return t.stringCase();if(ag(e))return t.firebaseCase();if("function"==typeof e.exportVal)return t.snapshotCase();throw new Error(`Expects a string, snapshot, or reference. Got: ${typeof e}`)}class cg extends d{constructor(e,t){super()}schedule(e,t=0){return this}}class hg extends cg{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,n=0){return setInterval(e.flush.bind(e,this),n)}recycleAsyncId(e,t,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let n=!1,r=void 0;try{this.work(e)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}_unsubscribe(){const e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}let dg=(()=>{class e{constructor(t,n=e.now){this.SchedulerAction=t,this.now=n}schedule(e,t=0,n){return new this.SchedulerAction(this,e).schedule(n,t)}}return e.now=()=>Date.now(),e})();class pg extends dg{constructor(e,t=dg.now){super(e,()=>pg.delegate&&pg.delegate!==this?pg.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,n){return pg.delegate&&pg.delegate!==this?pg.delegate.schedule(e,t,n):super.schedule(e,t,n)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}const fg=new pg(hg);let gg=(()=>{class e{constructor(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}}accept(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)}toObservable(){switch(this.kind){case"N":return xc(this.value);case"E":return e=this.error,new w(t=>t.error(e));case"C":return mu()}var e;throw new Error("unexpected notification kind value")}static createNext(t){return void 0!==t?new e("N",t):e.undefinedValueNotification}static createError(t){return new e("E",void 0,t)}static createComplete(){return e.completeNotification}}return e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e})();class mg{constructor(e,t){this.delay=e,this.scheduler=t}call(e,t){return t.subscribe(new yg(e,this.delay,this.scheduler))}}class yg extends g{constructor(e,t,n){super(e),this.delay=t,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}static dispatch(e){const t=e.source,n=t.queue,r=e.scheduler,i=e.destination;for(;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){const t=Math.max(0,n[0].time-r.now());this.schedule(e,t)}else this.unsubscribe(),t.active=!1}_schedule(e){this.active=!0,this.destination.add(e.schedule(yg.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))}scheduleNotification(e){if(!0===this.errored)return;const t=this.scheduler,n=new vg(t.now()+this.delay,e);this.queue.push(n),!1===this.active&&this._schedule(t)}_next(e){this.scheduleNotification(gg.createNext(e))}_error(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()}_complete(){this.scheduleNotification(gg.createComplete()),this.unsubscribe()}}class vg{constructor(e,t){this.time=e,this.notification=t}}function _g(e,t,n="on"){return new w(r=>{const i=e[n](t,(e,t)=>{r.next({snapshot:e,prevKey:t}),"once"==n&&r.complete()},r.error.bind(r));return"on"==n?{unsubscribe(){e.off(t,i)}}:{unsubscribe(){}}}).pipe(B(e=>{const{snapshot:n,prevKey:r}=e;let i=null;return n.exists()&&(i=n.key),{type:t,payload:n,prevKey:r,key:i}}),function(e,t=fg){var n;const r=(n=e)instanceof Date&&!isNaN(+n)?+e-t.now():Math.abs(e);return e=>e.lift(new mg(r,t))}(0),se())}class bg{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new wg(e,this.compare,this.keySelector))}}class wg extends g{constructor(e,t,n){super(e),this.keySelector=n,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:n}=this;t=n?n(e):e}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:e}=this;n=e(this.key,t)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=t,this.destination.next(e))}}function Cg(e,t){const n=e.length;for(let r=0;r<n;r++)if(e[r].payload.key===t)return r;return-1}function Eg(e,t){const{payload:n,prevKey:r,key:i}=t,o=Cg(e,i),s=function(e,t){if(sg(t))return 0;{const n=Cg(e,t);return-1===n?e.length:n+1}}(e,r);switch(t.type){case"value":if(t.payload&&t.payload.exists()){let n=null;t.payload.forEach(t=>{const r={payload:t,type:"value",prevKey:n,key:t.key};return n=t.key,e=[...e,r],!1})}return e;case"child_added":if(o>-1){const i=e[o-1];(i&&i.key||null)!=r&&(e=e.filter(e=>e.payload.key!==n.key)).splice(s,0,t)}else{if(null==r)return[t,...e];(e=e.slice()).splice(s,0,t)}return e;case"child_removed":return e.filter(e=>e.payload.key!==n.key);case"child_changed":return e.map(e=>e.payload.key===i?t:e);case"child_moved":if(o>-1){const t=e.splice(o,1)[0];return(e=e.slice()).splice(s,0,t),e}return e;default:return e}}function Tg(e){return(sg(e)||0===e.length)&&(e=["child_added","child_removed","child_changed","child_moved"]),e}function Sg(e,t){return function(e,t){return _g(e,"value","once").pipe(gh(n=>{const r=[xc(n)];return t.forEach(t=>r.push(_g(e,t))),J(...r).pipe(vh(Eg,[]))}),e=>e.lift(new bg(void 0,void 0)))}(e,t=Tg(t))}function Ig(e,t){return J(...(t=Tg(t)).map(t=>_g(e,t)))}class kg{constructor(e,t){this.observables=e,this.project=t}call(e,t){return t.subscribe(new Ag(e,this.observables,this.project))}}class Ag extends q{constructor(e,t,n){super(e),this.observables=t,this.project=n,this.toRespond=[];const r=t.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++){let e=t[i];this.add(j(this,e,e,i))}}notifyNext(e,t,n,r,i){this.values[n]=t;const o=this.toRespond;if(o.length>0){const e=o.indexOf(n);-1!==e&&o.splice(e,1)}}notifyComplete(){}_next(e){if(0===this.toRespond.length){const t=[e,...this.values];this.project?this._tryProject(t):this.destination.next(t)}}_tryProject(e){let t;try{t=this.project.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}class Ng{constructor(e){this.predicate=e}call(e,t){return t.subscribe(new Dg(e,this.predicate))}}class Dg extends g{constructor(e,t){super(e),this.predicate=t,this.skipping=!0,this.index=0}_next(e){const t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)}tryCallPredicate(e){try{const t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(t){this.destination.error(t)}}}function Rg(e,t){return function(n,r){return ug(n,{stringCase:()=>e.child(n)[t](r),firebaseCase:()=>n[t](r),snapshotCase:()=>n.ref[t](r)})}}function Og(e){return function(){return _g(e,"value")}}class Pg extends hg{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(e,t,n):e.flush(this)}}class xg extends pg{}const Mg=new xg(Pg),Lg=new ke("angularfire2.realtimeDatabaseURL");class Fg{constructor(e,t){this.zone=e,this.platformId=t}schedule(...e){return this.zone.runGuarded((function(){return Mg.schedule.apply(Mg,e)}))}keepUnstableUntilFirst(e){return Xa(this.platformId)?new w(t=>{const n=()=>{},r=Zone.current.scheduleMacroTask("firebaseZoneBlock",n,{},n,n);e.subscribe(e=>{"scheduled"===r.state&&r.invoke(),t.next(e)},e=>{"scheduled"===r.state&&r.invoke(),t.error(e)},()=>{"scheduled"===r.state&&r.invoke(),t.complete()})}):e}runOutsideAngular(e){return new w(t=>this.zone.runOutsideAngular(()=>e.subscribe(e=>this.zone.run(()=>t.next(e)),e=>this.zone.run(()=>t.error(e)),()=>this.zone.run(()=>t.complete()))))}}const Ug=e=>t=>new w(n=>t.subscribe(t=>e.run(()=>n.next(t)),t=>e.run(()=>n.error(t)),()=>e.run(()=>n.complete())));var Vg,jg=n("Wcq6"),qg=n.n(jg);const Bg=new ke("angularfire2.app.options"),Wg=new ke("angularfire2.app.nameOrConfig");class Hg{}function Kg(e,t,n){const r="object"==typeof n&&n||{};return r.name=r.name||"string"==typeof n&&n||"[DEFAULT]",qg.a.apps.filter(e=>e&&e.name===r.name)[0]||t.runOutsideAngular(()=>qg.a.initializeApp(e,r))}let zg=Vg=class{static initializeApp(e,t){return{ngModule:Vg,providers:[{provide:Bg,useValue:e},{provide:Wg,useValue:t}]}}},Gg=class{constructor(e,t,n,r,i){this.scheduler=new Fg(i,r),this.database=i.runOutsideAngular(()=>Kg(e,i,t).database(n||void 0))}list(e,t){const n=lg(this.database,e);let r=n;return t&&(r=t(n)),function(e,t){return{query:e,update:Rg(e.ref,"update"),set:Rg(e.ref,"set"),push:t=>e.ref.push(t),remove:(n=e.ref,function(e){return e?ug(e,{stringCase:()=>n.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):n.remove()}),snapshotChanges(n){const r=Sg(e,n);return t.scheduler.keepUnstableUntilFirst(t.scheduler.runOutsideAngular(r))},stateChanges(n){const r=Ig(e,n);return t.scheduler.keepUnstableUntilFirst(t.scheduler.runOutsideAngular(r))},auditTrail(n){const r=function(e,t){return function(e,t){return function(e){return _g(e,"value").pipe(B(e=>{let t;return e.payload.forEach(e=>(t=e.key,!1)),{data:e,lastKeyToLoad:t}}))}(e).pipe(function(...e){return t=>{let n;return"function"==typeof e[e.length-1]&&(n=e.pop()),t.lift(new kg(e,n))}}(t),B(([e,t])=>{let n=e.lastKeyToLoad;const r=t.map(e=>e.key);return{actions:t,lastKeyToLoad:n,loadedKeys:r}}),(n=e=>-1===e.loadedKeys.indexOf(e.lastKeyToLoad),e=>e.lift(new Ng(n))),B(e=>e.actions));var n}(e,Ig(e,t).pipe(vh((e,t)=>[...e,t],[])))}(e,n);return t.scheduler.keepUnstableUntilFirst(t.scheduler.runOutsideAngular(r))},valueChanges(n){const r=Sg(e,n);return t.scheduler.keepUnstableUntilFirst(t.scheduler.runOutsideAngular(r)).pipe(B(e=>e.map(e=>e.payload.val())))}};var n}(r,this)}object(e){const t=lg(this.database,e);return r=this,{query:n=t,snapshotChanges(){const e=Og(n)();return r.scheduler.keepUnstableUntilFirst(r.scheduler.runOutsideAngular(e))},update:e=>n.ref.update(e),set:e=>n.ref.set(e),remove:()=>n.ref.remove(),valueChanges(){const e=Og(n)();return r.scheduler.keepUnstableUntilFirst(r.scheduler.runOutsideAngular(e)).pipe(B(e=>e.payload.exists()?e.payload.val():null))}};var n,r}createPushId(){return this.database.ref().push().key}},Qg=(()=>{class e{constructor(e){this.db=e}AddProv(e){this.provsRef.push(e)}GetProv(e){return this.provRef=this.db.object("proveedores/"+e),this.provRef}GetProvList(){return this.provsRef=this.db.list("proveedores"),this.provsRef}deleteProv(e){this.provsRef.remove(e)}errorMgmt(e){console.log(e)}createProveedor(e){return this.db.list("proveedores").push(e)}}return e.ngInjectableDef=ge({factory:function(){return new e(je(Gg))},token:e,providedIn:"root"}),e})();var $g=rr({encapsulation:0,styles:[[""]],data:{}});function Yg(e){return vs(0,[(e()(),rs(0,0,null,null,14,"tr",[],null,null,null,null,null)),(e()(),rs(1,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),gs(2,null,["",""])),(e()(),rs(3,0,null,null,2,"td",[],null,null,null,null,null)),(e()(),rs(4,0,null,null,1,"a",[],[[8,"href",4]],null,null,null,null)),(e()(),gs(5,null,["",""])),(e()(),rs(6,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),gs(7,null,["",""])),(e()(),rs(8,0,null,null,3,"td",[],null,null,null,null,null)),(e()(),rs(9,0,null,null,2,"button",[["class","btn btn-success"],["type","button"]],null,[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==ei(e,10).onClick()&&r),r}),null,null)),pi(10,16384,null,0,Hp,[Wp,Od,[8,null],yn,dn],{routerLink:[0,"routerLink"]},null),(e()(),gs(-1,null,["Editar"])),(e()(),rs(12,0,null,null,2,"td",[],null,null,null,null,null)),(e()(),rs(13,0,null,null,1,"button",[["class","btn btn-danger"]],null,[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.deleteProveedor(e.context.$implicit.$key)&&r),r}),null,null)),(e()(),gs(-1,null,["Eliminar"]))],(function(e,t){e(t,10,0,Dr(1,"/editprovee/",t.context.$implicit.$key,""))}),(function(e,t){e(t,2,0,t.context.$implicit.nombre),e(t,4,0,Dr(1,"mailto:",t.context.$implicit.email,"")),e(t,5,0,t.context.$implicit.email),e(t,7,0,t.context.$implicit.telefono)}))}function Xg(e){return vs(0,[(e()(),rs(0,0,null,null,1,"h3",[],null,null,null,null,null)),(e()(),gs(-1,null,["Listado de Proveedores"])),(e()(),rs(2,0,null,null,2,"a",[["class","btn btn-primary float-md-right"],["routerLink","/addprovee"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==ei(e,3).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r}),null,null)),pi(3,671744,null,0,Kp,[Wp,Od,Na],{routerLink:[0,"routerLink"]},null),(e()(),gs(-1,null,["A\xf1adir nuevo proveedor"])),(e()(),rs(5,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),rs(6,0,null,null,15,"table",[["class","table table-bordered table-striped tabla"],["style","margin-top: 40px;"]],null,null,null,null,null)),(e()(),rs(7,0,null,null,11,"thead",[],null,null,null,null,null)),(e()(),rs(8,0,null,null,10,"tr",[["class","filters"]],null,null,null,null,null)),(e()(),rs(9,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),gs(-1,null,["Nombre"])),(e()(),rs(11,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),gs(-1,null,["Correo Electr\xf3nico"])),(e()(),rs(13,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),gs(-1,null,["Telefono"])),(e()(),rs(15,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),gs(-1,null,["Editar"])),(e()(),rs(17,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),gs(-1,null,["Eliminar"])),(e()(),rs(19,0,null,null,2,"tbody",[],null,null,null,null,null)),(e()(),ns(16777216,null,null,1,null,Yg)),pi(21,278528,null,0,Ba,[Un,Ln,Rn],{ngForOf:[0,"ngForOf"]},null)],(function(e,t){var n=t.component;e(t,3,0,"/addprovee"),e(t,21,0,n.proveedores)}),(function(e,t){e(t,2,0,ei(t,3).target,ei(t,3).href)}))}function Jg(e){return vs(0,[(e()(),rs(0,0,null,null,1,"app-proveedores",[],null,null,null,Xg,$g)),pi(1,114688,null,0,Sa,[Qg],null,null)],(function(e,t){e(t,1,0)}),null)}var Zg=Wr("app-proveedores",Sa,Jg,{},{},[]),em=rr({encapsulation:0,styles:[["input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-left:5px solid #a94442}input.ng-valid.ng-dirty[_ngcontent-%COMP%]{border-left:5px solid #42a948}.check[_ngcontent-%COMP%]{color:#42a948}.uncheck[_ngcontent-%COMP%]{color:#a94442}"]],data:{}});function tm(e){return vs(0,[(e()(),rs(0,0,null,null,3,"option",[],[[8,"selected",0]],null,null,null,null)),pi(1,147456,null,0,Wu,[dn,yn,[2,Bu]],null,null),pi(2,147456,null,0,Ku,[dn,yn,[8,null]],null,null),(e()(),gs(3,null,[""," "]))],null,(function(e,t){e(t,0,0,t.context.$implicit),e(t,3,0,t.context.$implicit)}))}function nm(e){return vs(0,[(e()(),rs(0,0,null,null,0,"i",[["class","fa fa-check-circle check"]],null,null,null,null,null))],null,null)}function rm(e){return vs(0,[(e()(),rs(0,0,null,null,0,"i",[["class","fa fa-exclamation-circle uncheck"]],null,null,null,null,null))],null,null)}function im(e){return vs(0,[(e()(),rs(0,0,null,null,1,"p",[["class","alert alert-danger"]],null,null,null,null,null)),(e()(),gs(-1,null,[" Por favor introduzca una direcci\xf3n de correo correcta. "]))],null,null)}function om(e){return vs(0,[(e()(),rs(0,0,null,null,1,"p",[["class","alert alert-danger "]],null,null,null,null,null)),(e()(),gs(-1,null,[" Por favor complete todos los campos "]))],null,null)}function sm(e){return vs(0,[(e()(),rs(0,0,null,null,121,"div",[["class","row"]],null,null,null,null,null)),(e()(),rs(1,0,null,null,120,"div",[["class","col-xs-12 col-sm-10 col-md-8 col-sm-offset-1 col-md-offset 2"]],null,null,null,null,null)),(e()(),rs(2,0,null,null,1,"h2",[],null,null,null,null,null)),(e()(),gs(-1,null,["A\xf1adir nuevo proveedor"])),(e()(),rs(4,0,null,null,2,"a",[["class","btn btn-primary float-md-right"],["routerLink","/proveedores"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==ei(e,5).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r}),null,null)),pi(5,671744,null,0,Kp,[Wp,Od,Na],{routerLink:[0,"routerLink"]},null),(e()(),gs(-1,null,["Regresar al listado de Proveedores"])),(e()(),rs(7,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),rs(8,0,null,null,102,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],(function(e,t,n){var r=!0,i=e.component;return"submit"===t&&(r=!1!==ei(e,10).onSubmit(n)&&r),"reset"===t&&(r=!1!==ei(e,10).onReset()&&r),"ngSubmit"===t&&(r=!1!==i.onSubmit()&&r),r}),null,null)),pi(9,16384,null,0,fc,[],null,null),pi(10,540672,null,0,mc,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),gi(2048,null,Cu,null,[mc]),pi(12,16384,null,0,ku,[[4,Cu]],null,null),(e()(),rs(13,0,null,null,8,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),rs(14,0,null,null,1,"label",[["for","nombre"]],null,null,null,null,null)),(e()(),gs(-1,null,["Nombre"])),(e()(),rs(16,0,null,null,5,"input",[["class","form-control"],["formControlName","nombre"],["id","nombre"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,t,n){var r=!0;return"input"===t&&(r=!1!==ei(e,17)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==ei(e,17).onTouched()&&r),"compositionstart"===t&&(r=!1!==ei(e,17)._compositionStart()&&r),"compositionend"===t&&(r=!1!==ei(e,17)._compositionEnd(n.target.value)&&r),r}),null,null)),pi(17,16384,null,0,bu,[yn,dn,[2,_u]],null,null),gi(1024,null,vu,(function(e){return[e]}),[bu]),pi(19,671744,null,0,bc,[[3,Cu],[8,null],[8,null],[6,vu],[2,gc]],{name:[0,"name"]},null),gi(2048,null,Tu,null,[bc]),pi(21,16384,null,0,Iu,[[4,Tu]],null,null),(e()(),rs(22,0,null,null,8,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),rs(23,0,null,null,1,"label",[["for","cif"]],null,null,null,null,null)),(e()(),gs(-1,null,["C.I.F."])),(e()(),rs(25,0,null,null,5,"input",[["class","form-control"],["formControlName","cif"],["id","cif"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,t,n){var r=!0;return"input"===t&&(r=!1!==ei(e,26)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==ei(e,26).onTouched()&&r),"compositionstart"===t&&(r=!1!==ei(e,26)._compositionStart()&&r),"compositionend"===t&&(r=!1!==ei(e,26)._compositionEnd(n.target.value)&&r),r}),null,null)),pi(26,16384,null,0,bu,[yn,dn,[2,_u]],null,null),gi(1024,null,vu,(function(e){return[e]}),[bu]),pi(28,671744,null,0,bc,[[3,Cu],[8,null],[8,null],[6,vu],[2,gc]],{name:[0,"name"]},null),gi(2048,null,Tu,null,[bc]),pi(30,16384,null,0,Iu,[[4,Tu]],null,null),(e()(),rs(31,0,null,null,8,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),rs(32,0,null,null,1,"label",[["for","direccion"]],null,null,null,null,null)),(e()(),gs(-1,null,["Direcci\xf3n"])),(e()(),rs(34,0,null,null,5,"input",[["class","form-control"],["formControlName","direccion"],["id","direccion"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,t,n){var r=!0;return"input"===t&&(r=!1!==ei(e,35)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==ei(e,35).onTouched()&&r),"compositionstart"===t&&(r=!1!==ei(e,35)._compositionStart()&&r),"compositionend"===t&&(r=!1!==ei(e,35)._compositionEnd(n.target.value)&&r),r}),null,null)),pi(35,16384,null,0,bu,[yn,dn,[2,_u]],null,null),gi(1024,null,vu,(function(e){return[e]}),[bu]),pi(37,671744,null,0,bc,[[3,Cu],[8,null],[8,null],[6,vu],[2,gc]],{name:[0,"name"]},null),gi(2048,null,Tu,null,[bc]),pi(39,16384,null,0,Iu,[[4,Tu]],null,null),(e()(),rs(40,0,null,null,8,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),rs(41,0,null,null,1,"label",[["for","cp"]],null,null,null,null,null)),(e()(),gs(-1,null,["C\xf3digo Postal"])),(e()(),rs(43,0,null,null,5,"input",[["class","form-control"],["formControlName","cp"],["id","cp"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,t,n){var r=!0;return"input"===t&&(r=!1!==ei(e,44)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==ei(e,44).onTouched()&&r),"compositionstart"===t&&(r=!1!==ei(e,44)._compositionStart()&&r),"compositionend"===t&&(r=!1!==ei(e,44)._compositionEnd(n.target.value)&&r),r}),null,null)),pi(44,16384,null,0,bu,[yn,dn,[2,_u]],null,null),gi(1024,null,vu,(function(e){return[e]}),[bu]),pi(46,671744,null,0,bc,[[3,Cu],[8,null],[8,null],[6,vu],[2,gc]],{name:[0,"name"]},null),gi(2048,null,Tu,null,[bc]),pi(48,16384,null,0,Iu,[[4,Tu]],null,null),(e()(),rs(49,0,null,null,8,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),rs(50,0,null,null,1,"label",[["for","localidad"]],null,null,null,null,null)),(e()(),gs(-1,null,["Localidad"])),(e()(),rs(52,0,null,null,5,"input",[["class","form-control"],["formControlName","localidad"],["id","localidad"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,t,n){var r=!0;return"input"===t&&(r=!1!==ei(e,53)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==ei(e,53).onTouched()&&r),"compositionstart"===t&&(r=!1!==ei(e,53)._compositionStart()&&r),"compositionend"===t&&(r=!1!==ei(e,53)._compositionEnd(n.target.value)&&r),r}),null,null)),pi(53,16384,null,0,bu,[yn,dn,[2,_u]],null,null),gi(1024,null,vu,(function(e){return[e]}),[bu]),pi(55,671744,null,0,bc,[[3,Cu],[8,null],[8,null],[6,vu],[2,gc]],{name:[0,"name"]},null),gi(2048,null,Tu,null,[bc]),pi(57,16384,null,0,Iu,[[4,Tu]],null,null),(e()(),rs(58,0,null,null,14,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),rs(59,0,null,null,1,"label",[["for","provincia"]],null,null,null,null,null)),(e()(),gs(-1,null,["Provincia"])),(e()(),rs(61,0,null,null,11,"select",[["class","form-control"],["formControlName","provincia"],["id","provincia"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],(function(e,t,n){var r=!0;return"change"===t&&(r=!1!==ei(e,62).onChange(n.target.value)&&r),"blur"===t&&(r=!1!==ei(e,62).onTouched()&&r),r}),null,null)),pi(62,16384,null,0,Bu,[yn,dn],null,null),gi(1024,null,vu,(function(e){return[e]}),[Bu]),pi(64,671744,null,0,bc,[[3,Cu],[8,null],[8,null],[6,vu],[2,gc]],{name:[0,"name"]},null),gi(2048,null,Tu,null,[bc]),pi(66,16384,null,0,Iu,[[4,Tu]],null,null),(e()(),rs(67,0,null,null,3,"option",[["value",""]],null,null,null,null,null)),pi(68,147456,null,0,Wu,[dn,yn,[2,Bu]],{value:[0,"value"]},null),pi(69,147456,null,0,Ku,[dn,yn,[8,null]],{value:[0,"value"]},null),(e()(),gs(-1,null,["Seleccione la provincia"])),(e()(),ns(16777216,null,null,1,null,tm)),pi(72,278528,null,0,Ba,[Un,Ln,Rn],{ngForOf:[0,"ngForOf"]},null),(e()(),rs(73,0,null,null,9,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),rs(74,0,null,null,1,"label",[["for","telefono"]],null,null,null,null,null)),(e()(),gs(-1,null,["Tel\xe9fono"])),(e()(),rs(76,0,null,null,6,"input",[["class","form-control"],["formControlName","telefono"],["id","telefono"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,t,n){var r=!0;return"input"===t&&(r=!1!==ei(e,77)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==ei(e,77).onTouched()&&r),"compositionstart"===t&&(r=!1!==ei(e,77)._compositionStart()&&r),"compositionend"===t&&(r=!1!==ei(e,77)._compositionEnd(n.target.value)&&r),"change"===t&&(r=!1!==ei(e,78).onChange(n.target.value)&&r),"input"===t&&(r=!1!==ei(e,78).onChange(n.target.value)&&r),"blur"===t&&(r=!1!==ei(e,78).onTouched()&&r),r}),null,null)),pi(77,16384,null,0,bu,[yn,dn,[2,_u]],null,null),pi(78,16384,null,0,Fu,[yn,dn],null,null),gi(1024,null,vu,(function(e,t){return[e,t]}),[bu,Fu]),pi(80,671744,null,0,bc,[[3,Cu],[8,null],[8,null],[6,vu],[2,gc]],{name:[0,"name"]},null),gi(2048,null,Tu,null,[bc]),pi(82,16384,null,0,Iu,[[4,Tu]],null,null),(e()(),rs(83,0,null,null,14,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),rs(84,0,null,null,1,"label",[["for","email"]],null,null,null,null,null)),(e()(),gs(-1,null,["Correo Electr\xf3nico"])),(e()(),ns(16777216,null,null,1,null,nm)),pi(87,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),ns(16777216,null,null,1,null,rm)),pi(89,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),rs(90,0,null,null,5,"input",[["class","form-control"],["formControlName","email"],["id","email"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,t,n){var r=!0;return"input"===t&&(r=!1!==ei(e,91)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==ei(e,91).onTouched()&&r),"compositionstart"===t&&(r=!1!==ei(e,91)._compositionStart()&&r),"compositionend"===t&&(r=!1!==ei(e,91)._compositionEnd(n.target.value)&&r),r}),null,null)),pi(91,16384,null,0,bu,[yn,dn,[2,_u]],null,null),gi(1024,null,vu,(function(e){return[e]}),[bu]),pi(93,671744,null,0,bc,[[3,Cu],[8,null],[8,null],[6,vu],[2,gc]],{name:[0,"name"]},null),gi(2048,null,Tu,null,[bc]),pi(95,16384,null,0,Iu,[[4,Tu]],null,null),(e()(),ns(16777216,null,null,1,null,im)),pi(97,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),rs(98,0,null,null,8,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),rs(99,0,null,null,1,"label",[["for","contacto"]],null,null,null,null,null)),(e()(),gs(-1,null,["Persona de contacto"])),(e()(),rs(101,0,null,null,5,"input",[["class","form-control"],["formControlName","contacto"],["id","contacto"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,t,n){var r=!0;return"input"===t&&(r=!1!==ei(e,102)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==ei(e,102).onTouched()&&r),"compositionstart"===t&&(r=!1!==ei(e,102)._compositionStart()&&r),"compositionend"===t&&(r=!1!==ei(e,102)._compositionEnd(n.target.value)&&r),r}),null,null)),pi(102,16384,null,0,bu,[yn,dn,[2,_u]],null,null),gi(1024,null,vu,(function(e){return[e]}),[bu]),pi(104,671744,null,0,bc,[[3,Cu],[8,null],[8,null],[6,vu],[2,gc]],{name:[0,"name"]},null),gi(2048,null,Tu,null,[bc]),pi(106,16384,null,0,Iu,[[4,Tu]],null,null),(e()(),rs(107,0,null,null,1,"button",[["class","btn btn-success"],["type","submit"]],[[8,"disabled",0]],null,null,null,null)),(e()(),gs(-1,null,["A\xf1adir Proveedor"])),(e()(),ns(16777216,null,null,1,null,om)),pi(110,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),rs(111,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),rs(112,0,null,null,1,"pre",[],null,null,null,null,null)),(e()(),gs(113,null,[" Estado Dirty: ",""])),(e()(),rs(114,0,null,null,1,"pre",[],null,null,null,null,null)),(e()(),gs(115,null,[" Estado Pristine: ",""])),(e()(),rs(116,0,null,null,1,"pre",[],null,null,null,null,null)),(e()(),gs(117,null,[" Estado Touched: ",""])),(e()(),rs(118,0,null,null,1,"pre",[],null,null,null,null,null)),(e()(),gs(119,null,[" Estado Valid: ",""])),(e()(),rs(120,0,null,null,1,"pre",[],null,null,null,null,null)),(e()(),gs(121,null,[" Estado Invalid: ",""]))],(function(e,t){var n=t.component;e(t,5,0,"/proveedores"),e(t,10,0,n.formpro),e(t,19,0,"nombre"),e(t,28,0,"cif"),e(t,37,0,"direccion"),e(t,46,0,"cp"),e(t,55,0,"localidad"),e(t,64,0,"provincia"),e(t,68,0,""),e(t,69,0,""),e(t,72,0,n.provincias),e(t,80,0,"telefono"),e(t,87,0,n.formpro.controls.email.valid),e(t,89,0,n.formpro.controls.email.invalid&&n.formpro.controls.email.touched),e(t,93,0,"email"),e(t,97,0,n.formpro.controls.email.invalid&&n.formpro.controls.email.touched),e(t,104,0,"contacto"),e(t,110,0,!n.formpro.valid)}),(function(e,t){var n=t.component;e(t,4,0,ei(t,5).target,ei(t,5).href),e(t,8,0,ei(t,12).ngClassUntouched,ei(t,12).ngClassTouched,ei(t,12).ngClassPristine,ei(t,12).ngClassDirty,ei(t,12).ngClassValid,ei(t,12).ngClassInvalid,ei(t,12).ngClassPending),e(t,16,0,ei(t,21).ngClassUntouched,ei(t,21).ngClassTouched,ei(t,21).ngClassPristine,ei(t,21).ngClassDirty,ei(t,21).ngClassValid,ei(t,21).ngClassInvalid,ei(t,21).ngClassPending),e(t,25,0,ei(t,30).ngClassUntouched,ei(t,30).ngClassTouched,ei(t,30).ngClassPristine,ei(t,30).ngClassDirty,ei(t,30).ngClassValid,ei(t,30).ngClassInvalid,ei(t,30).ngClassPending),e(t,34,0,ei(t,39).ngClassUntouched,ei(t,39).ngClassTouched,ei(t,39).ngClassPristine,ei(t,39).ngClassDirty,ei(t,39).ngClassValid,ei(t,39).ngClassInvalid,ei(t,39).ngClassPending),e(t,43,0,ei(t,48).ngClassUntouched,ei(t,48).ngClassTouched,ei(t,48).ngClassPristine,ei(t,48).ngClassDirty,ei(t,48).ngClassValid,ei(t,48).ngClassInvalid,ei(t,48).ngClassPending),e(t,52,0,ei(t,57).ngClassUntouched,ei(t,57).ngClassTouched,ei(t,57).ngClassPristine,ei(t,57).ngClassDirty,ei(t,57).ngClassValid,ei(t,57).ngClassInvalid,ei(t,57).ngClassPending),e(t,61,0,ei(t,66).ngClassUntouched,ei(t,66).ngClassTouched,ei(t,66).ngClassPristine,ei(t,66).ngClassDirty,ei(t,66).ngClassValid,ei(t,66).ngClassInvalid,ei(t,66).ngClassPending),e(t,76,0,ei(t,82).ngClassUntouched,ei(t,82).ngClassTouched,ei(t,82).ngClassPristine,ei(t,82).ngClassDirty,ei(t,82).ngClassValid,ei(t,82).ngClassInvalid,ei(t,82).ngClassPending),e(t,90,0,ei(t,95).ngClassUntouched,ei(t,95).ngClassTouched,ei(t,95).ngClassPristine,ei(t,95).ngClassDirty,ei(t,95).ngClassValid,ei(t,95).ngClassInvalid,ei(t,95).ngClassPending),e(t,101,0,ei(t,106).ngClassUntouched,ei(t,106).ngClassTouched,ei(t,106).ngClassPristine,ei(t,106).ngClassDirty,ei(t,106).ngClassValid,ei(t,106).ngClassInvalid,ei(t,106).ngClassPending),e(t,107,0,!n.formpro.valid),e(t,113,0,n.formpro.controls.email.dirty),e(t,115,0,n.formpro.controls.email.pristine),e(t,117,0,n.formpro.controls.email.touched),e(t,119,0,n.formpro.controls.email.valid),e(t,121,0,n.formpro.controls.email.invalid)}))}function am(e){return vs(0,[(e()(),rs(0,0,null,null,1,"app-addprovee",[],null,null,null,sm,em)),pi(1,114688,null,0,Ic,[Ec,Qg],null,null)],(function(e,t){e(t,1,0)}),null)}var lm=Wr("app-addprovee",Ic,am,{},{},[]),um=rr({encapsulation:0,styles:[["input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-left:5px solid #a94442}input.ng-valid.ng-dirty[_ngcontent-%COMP%]{border-left:5px solid #42a948}select.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-left:5px solid #a94442}select.ng-valid.ng-dirty[_ngcontent-%COMP%]{border-left:5px solid #42a948}.check[_ngcontent-%COMP%]{color:#42a948}.uncheck[_ngcontent-%COMP%]{color:#a94442}"]],data:{}});function cm(e){return vs(0,[(e()(),rs(0,0,null,null,0,"i",[["class","fa fa-check-circle check"]],null,null,null,null,null))],null,null)}function hm(e){return vs(0,[(e()(),rs(0,0,null,null,0,"i",[["class","fa fa-exclamation-circle uncheck"]],null,null,null,null,null))],null,null)}function dm(e){return vs(0,[(e()(),rs(0,0,null,null,1,"p",[["class","alert alert-danger"]],null,null,null,null,null)),(e()(),gs(-1,null,[" El campo Nombre es obligatorio. "]))],null,null)}function pm(e){return vs(0,[(e()(),rs(0,0,null,null,0,"i",[["class","fa fa-check-circle check"]],null,null,null,null,null))],null,null)}function fm(e){return vs(0,[(e()(),rs(0,0,null,null,0,"i",[["class","fa fa-exclamation-circle uncheck"]],null,null,null,null,null))],null,null)}function gm(e){return vs(0,[(e()(),rs(0,0,null,null,1,"p",[["class","alert alert-danger"]],null,null,null,null,null)),(e()(),gs(-1,null,[" El campo Cif es obligatorio. "]))],null,null)}function mm(e){return vs(0,[(e()(),rs(0,0,null,null,0,"i",[["class","fa fa-check-circle check"]],null,null,null,null,null))],null,null)}function ym(e){return vs(0,[(e()(),rs(0,0,null,null,0,"i",[["class","fa fa-exclamation-circle uncheck"]],null,null,null,null,null))],null,null)}function vm(e){return vs(0,[(e()(),rs(0,0,null,null,1,"p",[["class","alert alert-danger"]],null,null,null,null,null)),(e()(),gs(-1,null,[" El campo es Direcci\xf3n obligatorio. "]))],null,null)}function _m(e){return vs(0,[(e()(),rs(0,0,null,null,0,"i",[["class","fa fa-check-circle check"]],null,null,null,null,null))],null,null)}function bm(e){return vs(0,[(e()(),rs(0,0,null,null,0,"i",[["class","fa fa-exclamation-circle uncheck"]],null,null,null,null,null))],null,null)}function wm(e){return vs(0,[(e()(),rs(0,0,null,null,1,"p",[["class","alert alert-danger"]],null,null,null,null,null)),(e()(),gs(-1,null,[" El campo C\xf3digo Postal es obligatorio. "]))],null,null)}function Cm(e){return vs(0,[(e()(),rs(0,0,null,null,0,"i",[["class","fa fa-check-circle check"]],null,null,null,null,null))],null,null)}function Em(e){return vs(0,[(e()(),rs(0,0,null,null,0,"i",[["class","fa fa-exclamation-circle uncheck"]],null,null,null,null,null))],null,null)}function Tm(e){return vs(0,[(e()(),rs(0,0,null,null,1,"p",[["class","alert alert-danger"]],null,null,null,null,null)),(e()(),gs(-1,null,[" El campo Localidad es obligatorio. "]))],null,null)}function Sm(e){return vs(0,[(e()(),rs(0,0,null,null,0,"i",[["class","fa fa-check-circle check"]],null,null,null,null,null))],null,null)}function Im(e){return vs(0,[(e()(),rs(0,0,null,null,0,"i",[["class","fa fa-exclamation-circle uncheck"]],null,null,null,null,null))],null,null)}function km(e){return vs(0,[(e()(),rs(0,0,null,null,3,"option",[],null,null,null,null,null)),pi(1,147456,null,0,Wu,[dn,yn,[2,Bu]],{ngValue:[0,"ngValue"]},null),pi(2,147456,null,0,Ku,[dn,yn,[8,null]],{ngValue:[0,"ngValue"]},null),(e()(),gs(3,null,[""," "]))],(function(e,t){var n=t.component;e(t,1,0,n.proveedor.provincia),e(t,2,0,n.proveedor.provincia)}),(function(e,t){e(t,3,0,t.context.$implicit)}))}function Am(e){return vs(0,[(e()(),rs(0,0,null,null,1,"p",[["class","alert alert-danger"]],null,null,null,null,null)),(e()(),gs(-1,null,[" El campo Provincia es obligatorio. "]))],null,null)}function Nm(e){return vs(0,[(e()(),rs(0,0,null,null,0,"i",[["class","fa fa-check-circle check"]],null,null,null,null,null))],null,null)}function Dm(e){return vs(0,[(e()(),rs(0,0,null,null,0,"i",[["class","fa fa-exclamation-circle uncheck"]],null,null,null,null,null))],null,null)}function Rm(e){return vs(0,[(e()(),rs(0,0,null,null,1,"p",[["class","alert alert-danger"]],null,null,null,null,null)),(e()(),gs(-1,null,[" El campo Telefono es obligatorio. "]))],null,null)}function Om(e){return vs(0,[(e()(),rs(0,0,null,null,0,"i",[["class","fa fa-check-circle check"]],null,null,null,null,null))],null,null)}function Pm(e){return vs(0,[(e()(),rs(0,0,null,null,0,"i",[["class","fa fa-exclamation-circle uncheck"]],null,null,null,null,null))],null,null)}function xm(e){return vs(0,[(e()(),rs(0,0,null,null,1,"p",[["class","alert alert-danger"]],null,null,null,null,null)),(e()(),gs(-1,null,[" Por favor introduzca una direcci\xf3n de correo correcta. "]))],null,null)}function Mm(e){return vs(0,[(e()(),rs(0,0,null,null,0,"i",[["class","fa fa-check-circle check"]],null,null,null,null,null))],null,null)}function Lm(e){return vs(0,[(e()(),rs(0,0,null,null,0,"i",[["class","fa fa-exclamation-circle uncheck"]],null,null,null,null,null))],null,null)}function Fm(e){return vs(0,[(e()(),rs(0,0,null,null,1,"p",[["class","alert alert-danger"]],null,null,null,null,null)),(e()(),gs(-1,null,[" El campo Localidad es obligatorio. "]))],null,null)}function Um(e){return vs(0,[(e()(),rs(0,0,null,null,1,"p",[["class","alert alert-danger"]],null,null,null,null,null)),(e()(),gs(-1,null,[" Por favor complete todos los campos "]))],null,null)}function Vm(e){return vs(0,[(e()(),rs(0,0,null,null,162,"div",[["class","row"]],null,null,null,null,null)),(e()(),rs(1,0,null,null,161,"div",[["class","col-xs-12 col-sm-10 col-md-8 col-sm-offset-1 col-md-offset 2"]],null,null,null,null,null)),(e()(),rs(2,0,null,null,1,"h2",[],null,null,null,null,null)),(e()(),gs(-1,null,["Editar proveedor"])),(e()(),rs(4,0,null,null,2,"a",[["class","btn btn-primary float-md-right"],["routerLink","/proveedores"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==ei(e,5).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r}),null,null)),pi(5,671744,null,0,Kp,[Wp,Od,Na],{routerLink:[0,"routerLink"]},null),(e()(),gs(-1,null,["Regresar al listado"])),(e()(),rs(7,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),rs(8,0,null,null,154,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],(function(e,t,n){var r=!0,i=e.component;return"submit"===t&&(r=!1!==ei(e,10).onSubmit(n)&&r),"reset"===t&&(r=!1!==ei(e,10).onReset()&&r),"ngSubmit"===t&&(r=!1!==i.onSubmit()&&r),r}),null,null)),pi(9,16384,null,0,fc,[],null,null),pi(10,540672,null,0,mc,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),gi(2048,null,Cu,null,[mc]),pi(12,16384,null,0,ku,[[4,Cu]],null,null),(e()(),rs(13,0,null,null,14,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),rs(14,0,null,null,1,"label",[["for","nombre"]],null,null,null,null,null)),(e()(),gs(-1,null,["Nombre"])),(e()(),ns(16777216,null,null,1,null,cm)),pi(17,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),ns(16777216,null,null,1,null,hm)),pi(19,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),rs(20,0,null,null,5,"input",[["class","form-control"],["formControlName","nombre"],["id","nombre"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,t,n){var r=!0,i=e.component;return"input"===t&&(r=!1!==ei(e,21)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==ei(e,21).onTouched()&&r),"compositionstart"===t&&(r=!1!==ei(e,21)._compositionStart()&&r),"compositionend"===t&&(r=!1!==ei(e,21)._compositionEnd(n.target.value)&&r),"ngModelChange"===t&&(r=!1!==(i.proveedor.nombre=n)&&r),r}),null,null)),pi(21,16384,null,0,bu,[yn,dn,[2,_u]],null,null),gi(1024,null,vu,(function(e){return[e]}),[bu]),pi(23,671744,null,0,bc,[[3,Cu],[8,null],[8,null],[6,vu],[2,gc]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),gi(2048,null,Tu,null,[bc]),pi(25,16384,null,0,Iu,[[4,Tu]],null,null),(e()(),ns(16777216,null,null,1,null,dm)),pi(27,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),rs(28,0,null,null,14,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),rs(29,0,null,null,1,"label",[["for","cif"]],null,null,null,null,null)),(e()(),gs(-1,null,["C.I.F."])),(e()(),ns(16777216,null,null,1,null,pm)),pi(32,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),ns(16777216,null,null,1,null,fm)),pi(34,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),rs(35,0,null,null,5,"input",[["class","form-control"],["formControlName","cif"],["id","cif"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,t,n){var r=!0,i=e.component;return"input"===t&&(r=!1!==ei(e,36)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==ei(e,36).onTouched()&&r),"compositionstart"===t&&(r=!1!==ei(e,36)._compositionStart()&&r),"compositionend"===t&&(r=!1!==ei(e,36)._compositionEnd(n.target.value)&&r),"ngModelChange"===t&&(r=!1!==(i.proveedor.cif=n)&&r),r}),null,null)),pi(36,16384,null,0,bu,[yn,dn,[2,_u]],null,null),gi(1024,null,vu,(function(e){return[e]}),[bu]),pi(38,671744,null,0,bc,[[3,Cu],[8,null],[8,null],[6,vu],[2,gc]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),gi(2048,null,Tu,null,[bc]),pi(40,16384,null,0,Iu,[[4,Tu]],null,null),(e()(),ns(16777216,null,null,1,null,gm)),pi(42,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),rs(43,0,null,null,14,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),rs(44,0,null,null,1,"label",[["for","direccion"]],null,null,null,null,null)),(e()(),gs(-1,null,["Direcci\xf3n"])),(e()(),ns(16777216,null,null,1,null,mm)),pi(47,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),ns(16777216,null,null,1,null,ym)),pi(49,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),rs(50,0,null,null,5,"input",[["class","form-control"],["formControlName","direccion"],["id","direccion"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,t,n){var r=!0,i=e.component;return"input"===t&&(r=!1!==ei(e,51)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==ei(e,51).onTouched()&&r),"compositionstart"===t&&(r=!1!==ei(e,51)._compositionStart()&&r),"compositionend"===t&&(r=!1!==ei(e,51)._compositionEnd(n.target.value)&&r),"ngModelChange"===t&&(r=!1!==(i.proveedor.direccion=n)&&r),r}),null,null)),pi(51,16384,null,0,bu,[yn,dn,[2,_u]],null,null),gi(1024,null,vu,(function(e){return[e]}),[bu]),pi(53,671744,null,0,bc,[[3,Cu],[8,null],[8,null],[6,vu],[2,gc]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),gi(2048,null,Tu,null,[bc]),pi(55,16384,null,0,Iu,[[4,Tu]],null,null),(e()(),ns(16777216,null,null,1,null,vm)),pi(57,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),rs(58,0,null,null,15,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),rs(59,0,null,null,1,"label",[["for","cp"]],null,null,null,null,null)),(e()(),gs(-1,null,["C\xf3digo Postal"])),(e()(),ns(16777216,null,null,1,null,_m)),pi(62,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),ns(16777216,null,null,1,null,bm)),pi(64,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),rs(65,0,null,null,6,"input",[["class","form-control"],["formControlName","cp"],["id","cp"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,t,n){var r=!0,i=e.component;return"input"===t&&(r=!1!==ei(e,66)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==ei(e,66).onTouched()&&r),"compositionstart"===t&&(r=!1!==ei(e,66)._compositionStart()&&r),"compositionend"===t&&(r=!1!==ei(e,66)._compositionEnd(n.target.value)&&r),"change"===t&&(r=!1!==ei(e,67).onChange(n.target.value)&&r),"input"===t&&(r=!1!==ei(e,67).onChange(n.target.value)&&r),"blur"===t&&(r=!1!==ei(e,67).onTouched()&&r),"ngModelChange"===t&&(r=!1!==(i.proveedor.cp=n)&&r),r}),null,null)),pi(66,16384,null,0,bu,[yn,dn,[2,_u]],null,null),pi(67,16384,null,0,Fu,[yn,dn],null,null),gi(1024,null,vu,(function(e,t){return[e,t]}),[bu,Fu]),pi(69,671744,null,0,bc,[[3,Cu],[8,null],[8,null],[6,vu],[2,gc]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),gi(2048,null,Tu,null,[bc]),pi(71,16384,null,0,Iu,[[4,Tu]],null,null),(e()(),ns(16777216,null,null,1,null,wm)),pi(73,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),rs(74,0,null,null,14,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),rs(75,0,null,null,1,"label",[["for","localidad"]],null,null,null,null,null)),(e()(),gs(-1,null,["Localidad"])),(e()(),ns(16777216,null,null,1,null,Cm)),pi(78,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),ns(16777216,null,null,1,null,Em)),pi(80,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),rs(81,0,null,null,5,"input",[["class","form-control"],["formControlName","localidad"],["id","localidad"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,t,n){var r=!0,i=e.component;return"input"===t&&(r=!1!==ei(e,82)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==ei(e,82).onTouched()&&r),"compositionstart"===t&&(r=!1!==ei(e,82)._compositionStart()&&r),"compositionend"===t&&(r=!1!==ei(e,82)._compositionEnd(n.target.value)&&r),"ngModelChange"===t&&(r=!1!==(i.proveedor.localidad=n)&&r),r}),null,null)),pi(82,16384,null,0,bu,[yn,dn,[2,_u]],null,null),gi(1024,null,vu,(function(e){return[e]}),[bu]),pi(84,671744,null,0,bc,[[3,Cu],[8,null],[8,null],[6,vu],[2,gc]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),gi(2048,null,Tu,null,[bc]),pi(86,16384,null,0,Iu,[[4,Tu]],null,null),(e()(),ns(16777216,null,null,1,null,Tm)),pi(88,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),rs(89,0,null,null,20,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),rs(90,0,null,null,1,"label",[["for","provincia"]],null,null,null,null,null)),(e()(),gs(-1,null,["Provincia"])),(e()(),ns(16777216,null,null,1,null,Sm)),pi(93,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),ns(16777216,null,null,1,null,Im)),pi(95,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),rs(96,0,null,null,11,"select",[["class","form-control"],["formControlName","provincia"],["id","provincia"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(e,t,n){var r=!0,i=e.component;return"change"===t&&(r=!1!==ei(e,97).onChange(n.target.value)&&r),"blur"===t&&(r=!1!==ei(e,97).onTouched()&&r),"ngModelChange"===t&&(r=!1!==(i.proveedor.provincia=n)&&r),r}),null,null)),pi(97,16384,null,0,Bu,[yn,dn],null,null),gi(1024,null,vu,(function(e){return[e]}),[Bu]),pi(99,671744,null,0,bc,[[3,Cu],[8,null],[8,null],[6,vu],[2,gc]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),gi(2048,null,Tu,null,[bc]),pi(101,16384,null,0,Iu,[[4,Tu]],null,null),(e()(),rs(102,0,null,null,3,"option",[],null,null,null,null,null)),pi(103,147456,null,0,Wu,[dn,yn,[2,Bu]],null,null),pi(104,147456,null,0,Ku,[dn,yn,[8,null]],null,null),(e()(),gs(-1,null,["Seleccione la provincia"])),(e()(),ns(16777216,null,null,1,null,km)),pi(107,278528,null,0,Ba,[Un,Ln,Rn],{ngForOf:[0,"ngForOf"]},null),(e()(),ns(16777216,null,null,1,null,Am)),pi(109,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),rs(110,0,null,null,15,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),rs(111,0,null,null,1,"label",[["for","telefono"]],null,null,null,null,null)),(e()(),gs(-1,null,["Tel\xe9fono"])),(e()(),ns(16777216,null,null,1,null,Nm)),pi(114,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),ns(16777216,null,null,1,null,Dm)),pi(116,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),rs(117,0,null,null,6,"input",[["class","form-control"],["formControlName","telefono"],["id","telefono"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,t,n){var r=!0,i=e.component;return"input"===t&&(r=!1!==ei(e,118)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==ei(e,118).onTouched()&&r),"compositionstart"===t&&(r=!1!==ei(e,118)._compositionStart()&&r),"compositionend"===t&&(r=!1!==ei(e,118)._compositionEnd(n.target.value)&&r),"change"===t&&(r=!1!==ei(e,119).onChange(n.target.value)&&r),"input"===t&&(r=!1!==ei(e,119).onChange(n.target.value)&&r),"blur"===t&&(r=!1!==ei(e,119).onTouched()&&r),"ngModelChange"===t&&(r=!1!==(i.proveedor.telefono=n)&&r),r}),null,null)),pi(118,16384,null,0,bu,[yn,dn,[2,_u]],null,null),pi(119,16384,null,0,Fu,[yn,dn],null,null),gi(1024,null,vu,(function(e,t){return[e,t]}),[bu,Fu]),pi(121,671744,null,0,bc,[[3,Cu],[8,null],[8,null],[6,vu],[2,gc]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),gi(2048,null,Tu,null,[bc]),pi(123,16384,null,0,Iu,[[4,Tu]],null,null),(e()(),ns(16777216,null,null,1,null,Rm)),pi(125,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),rs(126,0,null,null,14,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),rs(127,0,null,null,1,"label",[["for","email"]],null,null,null,null,null)),(e()(),gs(-1,null,["Correo Electr\xf3nico"])),(e()(),ns(16777216,null,null,1,null,Om)),pi(130,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),ns(16777216,null,null,1,null,Pm)),pi(132,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),rs(133,0,null,null,5,"input",[["class","form-control"],["formControlName","email"],["id","email"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,t,n){var r=!0,i=e.component;return"input"===t&&(r=!1!==ei(e,134)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==ei(e,134).onTouched()&&r),"compositionstart"===t&&(r=!1!==ei(e,134)._compositionStart()&&r),"compositionend"===t&&(r=!1!==ei(e,134)._compositionEnd(n.target.value)&&r),"ngModelChange"===t&&(r=!1!==(i.proveedor.email=n)&&r),r}),null,null)),pi(134,16384,null,0,bu,[yn,dn,[2,_u]],null,null),gi(1024,null,vu,(function(e){return[e]}),[bu]),pi(136,671744,null,0,bc,[[3,Cu],[8,null],[8,null],[6,vu],[2,gc]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),gi(2048,null,Tu,null,[bc]),pi(138,16384,null,0,Iu,[[4,Tu]],null,null),(e()(),ns(16777216,null,null,1,null,xm)),pi(140,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),rs(141,0,null,null,14,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),rs(142,0,null,null,1,"label",[["for","contacto"]],null,null,null,null,null)),(e()(),gs(-1,null,["Persona de contacto"])),(e()(),ns(16777216,null,null,1,null,Mm)),pi(145,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),ns(16777216,null,null,1,null,Lm)),pi(147,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),rs(148,0,null,null,5,"input",[["class","form-control"],["formControlName","contacto"],["id","contacto"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,t,n){var r=!0,i=e.component;return"input"===t&&(r=!1!==ei(e,149)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==ei(e,149).onTouched()&&r),"compositionstart"===t&&(r=!1!==ei(e,149)._compositionStart()&&r),"compositionend"===t&&(r=!1!==ei(e,149)._compositionEnd(n.target.value)&&r),"ngModelChange"===t&&(r=!1!==(i.proveedor.contacto=n)&&r),r}),null,null)),pi(149,16384,null,0,bu,[yn,dn,[2,_u]],null,null),gi(1024,null,vu,(function(e){return[e]}),[bu]),pi(151,671744,null,0,bc,[[3,Cu],[8,null],[8,null],[6,vu],[2,gc]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),gi(2048,null,Tu,null,[bc]),pi(153,16384,null,0,Iu,[[4,Tu]],null,null),(e()(),ns(16777216,null,null,1,null,Fm)),pi(155,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),rs(156,0,null,null,1,"button",[["class","btn btn-primary"],["type","submit"]],[[8,"disabled",0]],null,null,null,null)),(e()(),gs(-1,null,["Guardar Cambios"])),(e()(),rs(158,0,null,null,2,"a",[["class","btn btn-danger"],["routerLink","/proveedores"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==ei(e,159).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r}),null,null)),pi(159,671744,null,0,Kp,[Wp,Od,Na],{routerLink:[0,"routerLink"]},null),(e()(),gs(-1,null,["Cancelar"])),(e()(),ns(16777216,null,null,1,null,Um)),pi(162,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,5,0,"/proveedores"),e(t,10,0,n.formpro),e(t,17,0,n.formpro.controls.nombre.valid),e(t,19,0,n.formpro.controls.nombre.invalid&&n.formpro.controls.nombre.touched),e(t,23,0,"nombre",n.proveedor.nombre),e(t,27,0,n.formpro.controls.nombre.invalid&&n.formpro.controls.nombre.touched),e(t,32,0,n.formpro.controls.cif.valid),e(t,34,0,n.formpro.controls.cif.invalid&&n.formpro.controls.cif.touched),e(t,38,0,"cif",n.proveedor.cif),e(t,42,0,n.formpro.controls.cif.invalid&&n.formpro.controls.cif.touched),e(t,47,0,n.formpro.controls.direccion.valid),e(t,49,0,n.formpro.controls.direccion.invalid&&n.formpro.controls.direccion.touched),e(t,53,0,"direccion",n.proveedor.direccion),e(t,57,0,n.formpro.controls.direccion.invalid&&n.formpro.controls.direccion.touched),e(t,62,0,n.formpro.controls.cp.valid),e(t,64,0,n.formpro.controls.cp.invalid&&n.formpro.controls.cp.touched),e(t,69,0,"cp",n.proveedor.cp),e(t,73,0,n.formpro.controls.cp.invalid&&n.formpro.controls.cp.touched),e(t,78,0,n.formpro.controls.localidad.valid),e(t,80,0,n.formpro.controls.localidad.invalid&&n.formpro.controls.localidad.touched),e(t,84,0,"localidad",n.proveedor.localidad),e(t,88,0,n.formpro.controls.localidad.invalid&&n.formpro.controls.localidad.touched),e(t,93,0,n.formpro.controls.provincia.valid),e(t,95,0,n.formpro.controls.provincia.invalid&&n.formpro.controls.provincia.touched),e(t,99,0,"provincia",n.proveedor.provincia),e(t,107,0,n.provincias),e(t,109,0,n.formpro.controls.provincia.invalid&&n.formpro.controls.provincia.touched),e(t,114,0,n.formpro.controls.telefono.valid),e(t,116,0,n.formpro.controls.telefono.invalid&&n.formpro.controls.telefono.touched),e(t,121,0,"telefono",n.proveedor.telefono),e(t,125,0,n.formpro.controls.telefono.invalid&&n.formpro.controls.telefono.touched),e(t,130,0,n.formpro.controls.email.valid),e(t,132,0,n.formpro.controls.email.invalid&&n.formpro.controls.email.touched),e(t,136,0,"email",n.proveedor.email),e(t,140,0,n.formpro.controls.email.invalid&&n.formpro.controls.email.touched),e(t,145,0,n.formpro.controls.contacto.valid),e(t,147,0,n.formpro.controls.contacto.invalid&&n.formpro.controls.contacto.touched),e(t,151,0,"contacto",n.proveedor.contacto),e(t,155,0,n.formpro.controls.contacto.invalid&&n.formpro.controls.contacto.touched),e(t,159,0,"/proveedores"),e(t,162,0,!n.formpro.valid)}),(function(e,t){var n=t.component;e(t,4,0,ei(t,5).target,ei(t,5).href),e(t,8,0,ei(t,12).ngClassUntouched,ei(t,12).ngClassTouched,ei(t,12).ngClassPristine,ei(t,12).ngClassDirty,ei(t,12).ngClassValid,ei(t,12).ngClassInvalid,ei(t,12).ngClassPending),e(t,20,0,ei(t,25).ngClassUntouched,ei(t,25).ngClassTouched,ei(t,25).ngClassPristine,ei(t,25).ngClassDirty,ei(t,25).ngClassValid,ei(t,25).ngClassInvalid,ei(t,25).ngClassPending),e(t,35,0,ei(t,40).ngClassUntouched,ei(t,40).ngClassTouched,ei(t,40).ngClassPristine,ei(t,40).ngClassDirty,ei(t,40).ngClassValid,ei(t,40).ngClassInvalid,ei(t,40).ngClassPending),e(t,50,0,ei(t,55).ngClassUntouched,ei(t,55).ngClassTouched,ei(t,55).ngClassPristine,ei(t,55).ngClassDirty,ei(t,55).ngClassValid,ei(t,55).ngClassInvalid,ei(t,55).ngClassPending),e(t,65,0,ei(t,71).ngClassUntouched,ei(t,71).ngClassTouched,ei(t,71).ngClassPristine,ei(t,71).ngClassDirty,ei(t,71).ngClassValid,ei(t,71).ngClassInvalid,ei(t,71).ngClassPending),e(t,81,0,ei(t,86).ngClassUntouched,ei(t,86).ngClassTouched,ei(t,86).ngClassPristine,ei(t,86).ngClassDirty,ei(t,86).ngClassValid,ei(t,86).ngClassInvalid,ei(t,86).ngClassPending),e(t,96,0,ei(t,101).ngClassUntouched,ei(t,101).ngClassTouched,ei(t,101).ngClassPristine,ei(t,101).ngClassDirty,ei(t,101).ngClassValid,ei(t,101).ngClassInvalid,ei(t,101).ngClassPending),e(t,117,0,ei(t,123).ngClassUntouched,ei(t,123).ngClassTouched,ei(t,123).ngClassPristine,ei(t,123).ngClassDirty,ei(t,123).ngClassValid,ei(t,123).ngClassInvalid,ei(t,123).ngClassPending),e(t,133,0,ei(t,138).ngClassUntouched,ei(t,138).ngClassTouched,ei(t,138).ngClassPristine,ei(t,138).ngClassDirty,ei(t,138).ngClassValid,ei(t,138).ngClassInvalid,ei(t,138).ngClassPending),e(t,148,0,ei(t,153).ngClassUntouched,ei(t,153).ngClassTouched,ei(t,153).ngClassPristine,ei(t,153).ngClassDirty,ei(t,153).ngClassValid,ei(t,153).ngClassInvalid,ei(t,153).ngClassPending),e(t,156,0,!n.formpro.valid),e(t,158,0,ei(t,159).target,ei(t,159).href)}))}function jm(e){return vs(0,[(e()(),rs(0,0,null,null,1,"app-editprovee",[],null,null,null,Vm,um)),pi(1,114688,null,0,wf,[Ec,Qg,Wp,Od],null,null)],(function(e,t){e(t,1,0)}),null)}var qm=Wr("app-editprovee",wf,jm,{},{},[]);class Bm{}class Wm{}class Hm{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(e=>{const t=e.indexOf(":");if(t>0){const n=e.slice(0,t),r=n.toLowerCase(),i=e.slice(t+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let n=e[t];const r=t.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Hm?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Hm;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Hm?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let n=e.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...n),this.headers.set(t,r);break;case"d":const i=e.value;if(i){let e=this.headers.get(t);if(!e)return;0===(e=e.filter(e=>-1===i.indexOf(e))).length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,e)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Km{encodeKey(e){return zm(e)}encodeValue(e){return zm(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}function zm(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class Gm{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Km,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(e,t){const n=new Map;return e.length>0&&e.split("&").forEach(e=>{const r=e.indexOf("="),[i,o]=-1==r?[t.decodeKey(e),""]:[t.decodeKey(e.slice(0,r)),t.decodeValue(e.slice(r+1))],s=n.get(i)||[];s.push(o),n.set(i,s)}),n}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const n=e.fromObject[t];this.map.set(t,Array.isArray(n)?n:[n])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(e=>t+"="+this.encoder.encodeValue(e)).join("&")}).join("&")}clone(e){const t=new Gm({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat([e]),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(e.value),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let t=this.map.get(e.param)||[];const n=t.indexOf(e.value);-1!==n&&t.splice(n,1),t.length>0?this.map.set(e.param,t):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}function Qm(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer}function $m(e){return"undefined"!=typeof Blob&&e instanceof Blob}function Ym(e){return"undefined"!=typeof FormData&&e instanceof FormData}class Xm{constructor(e,t,n,r){let i;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new Hm),this.params){const e=this.params.toString();if(0===e.length)this.urlWithParams=t;else{const n=t.indexOf("?");this.urlWithParams=t+(-1===n?"?":n<t.length-1?"&":"")+e}}else this.params=new Gm,this.urlWithParams=t}serializeBody(){return null===this.body?null:Qm(this.body)||$m(this.body)||Ym(this.body)||"string"==typeof this.body?this.body:this.body instanceof Gm?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body?null:Ym(this.body)?null:$m(this.body)?this.body.type||null:Qm(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Gm?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(e={}){const t=e.method||this.method,n=e.url||this.url,r=e.responseType||this.responseType,i=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,s=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let a=e.headers||this.headers,l=e.params||this.params;return void 0!==e.setHeaders&&(a=Object.keys(e.setHeaders).reduce((t,n)=>t.set(n,e.setHeaders[n]),a)),e.setParams&&(l=Object.keys(e.setParams).reduce((t,n)=>t.set(n,e.setParams[n]),l)),new Xm(t,n,i,{params:l,headers:a,reportProgress:s,responseType:r,withCredentials:o})}}const Jm=function(){var e={Sent:0,UploadProgress:1,ResponseHeader:2,DownloadProgress:3,Response:4,User:5};return e[e.Sent]="Sent",e[e.UploadProgress]="UploadProgress",e[e.ResponseHeader]="ResponseHeader",e[e.DownloadProgress]="DownloadProgress",e[e.Response]="Response",e[e.User]="User",e}();class Zm{constructor(e,t=200,n="OK"){this.headers=e.headers||new Hm,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||n,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class ey extends Zm{constructor(e={}){super(e),this.type=Jm.ResponseHeader}clone(e={}){return new ey({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class ty extends Zm{constructor(e={}){super(e),this.type=Jm.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new ty({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class ny extends Zm{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function ry(e,t){return{body:t,headers:e.headers,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}class iy{constructor(e){this.handler=e}request(e,t,n={}){let r;if(e instanceof Xm)r=e;else{let i=void 0;i=n.headers instanceof Hm?n.headers:new Hm(n.headers);let o=void 0;n.params&&(o=n.params instanceof Gm?n.params:new Gm({fromObject:n.params})),r=new Xm(e,t,void 0!==n.body?n.body:null,{headers:i,params:o,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=xc(r).pipe(wh(e=>this.handler.handle(e)));if(e instanceof Xm||"events"===n.observe)return i;const o=i.pipe(Wc(e=>e instanceof ty));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return o.pipe(B(e=>{if(null!==e.body&&!(e.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return e.body}));case"blob":return o.pipe(B(e=>{if(null!==e.body&&!(e.body instanceof Blob))throw new Error("Response is not a Blob.");return e.body}));case"text":return o.pipe(B(e=>{if(null!==e.body&&"string"!=typeof e.body)throw new Error("Response is not a string.");return e.body}));case"json":default:return o.pipe(B(e=>e.body))}case"response":return o;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(e,t={}){return this.request("DELETE",e,t)}get(e,t={}){return this.request("GET",e,t)}head(e,t={}){return this.request("HEAD",e,t)}jsonp(e,t){return this.request("JSONP",e,{params:(new Gm).append(t,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,t={}){return this.request("OPTIONS",e,t)}patch(e,t,n={}){return this.request("PATCH",e,ry(n,t))}post(e,t,n={}){return this.request("POST",e,ry(n,t))}put(e,t,n={}){return this.request("PUT",e,ry(n,t))}}class oy{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const sy=new ke("HTTP_INTERCEPTORS");class ay{intercept(e,t){return t.handle(e)}}const ly=/^\)\]\}',?\n/;class uy{}class cy{constructor(){}build(){return new XMLHttpRequest}}class hy{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without JsonpClientModule installed.");return new w(t=>{const n=this.xhrFactory.build();if(n.open(e.method,e.urlWithParams),e.withCredentials&&(n.withCredentials=!0),e.headers.forEach((e,t)=>n.setRequestHeader(e,t.join(","))),e.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const t=e.detectContentTypeHeader();null!==t&&n.setRequestHeader("Content-Type",t)}if(e.responseType){const t=e.responseType.toLowerCase();n.responseType="json"!==t?t:"text"}const r=e.serializeBody();let i=null;const o=()=>{if(null!==i)return i;const t=1223===n.status?204:n.status,r=n.statusText||"OK",o=new Hm(n.getAllResponseHeaders()),s=function(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(n)||e.url;return i=new ey({headers:o,status:t,statusText:r,url:s})},s=()=>{let{headers:r,status:i,statusText:s,url:a}=o(),l=null;204!==i&&(l=void 0===n.response?n.responseText:n.response),0===i&&(i=l?200:0);let u=i>=200&&i<300;if("json"===e.responseType&&"string"==typeof l){const e=l;l=l.replace(ly,"");try{l=""!==l?JSON.parse(l):null}catch(c){l=e,u&&(u=!1,l={error:c,text:l})}}u?(t.next(new ty({body:l,headers:r,status:i,statusText:s,url:a||void 0})),t.complete()):t.error(new ny({error:l,headers:r,status:i,statusText:s,url:a||void 0}))},a=e=>{const{url:r}=o(),i=new ny({error:e,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});t.error(i)};let l=!1;const u=r=>{l||(t.next(o()),l=!0);let i={type:Jm.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===e.responseType&&n.responseText&&(i.partialText=n.responseText),t.next(i)},c=e=>{let n={type:Jm.UploadProgress,loaded:e.loaded};e.lengthComputable&&(n.total=e.total),t.next(n)};return n.addEventListener("load",s),n.addEventListener("error",a),e.reportProgress&&(n.addEventListener("progress",u),null!==r&&n.upload&&n.upload.addEventListener("progress",c)),n.send(r),t.next({type:Jm.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("load",s),e.reportProgress&&(n.removeEventListener("progress",u),null!==r&&n.upload&&n.upload.removeEventListener("progress",c)),n.abort()}})}}const dy=new ke("XSRF_COOKIE_NAME"),py=new ke("XSRF_HEADER_NAME");class fy{}class gy{constructor(e,t,n){this.doc=e,this.platform=t,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=ja(e,this.cookieName),this.lastCookieString=e),this.lastToken}}class my{constructor(e,t){this.tokenService=e,this.headerName=t}intercept(e,t){const n=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||n.startsWith("http://")||n.startsWith("https://"))return t.handle(e);const r=this.tokenService.getToken();return null===r||e.headers.has(this.headerName)||(e=e.clone({headers:e.headers.set(this.headerName,r)})),t.handle(e)}}class yy{constructor(e,t){this.backend=e,this.injector=t,this.chain=null}handle(e){if(null===this.chain){const e=this.injector.get(sy,[]);this.chain=e.reduceRight((e,t)=>new oy(e,t),this.backend)}return this.chain.handle(e)}}class vy{static disable(){return{ngModule:vy,providers:[{provide:my,useClass:ay}]}}static withOptions(e={}){return{ngModule:vy,providers:[e.cookieName?{provide:dy,useValue:e.cookieName}:[],e.headerName?{provide:py,useValue:e.headerName}:[]]}}}class _y{}let by=(()=>{class e{constructor(e){this.http=e,this.preURL="https://comprasapp-bb34b.firebaseio.com/presupuestos",this.presURL="https://comprasapp-bb34b.firebaseio.com/presupuestos.json"}getPresupuestos(){return this.http.get(this.presURL).pipe(B(e=>e))}getPresupuesto(e){return this.http.get(`${this.preURL}/${e}.json`).pipe(B(e=>e))}postPresupuesto(e){const t=JSON.stringify(e),n=(new Hm).set("Content-Type","application/json");return this.http.post(this.presURL,t,{headers:n}).pipe(B(e=>(console.log(e),e)))}putPresupuesto(e,t){const n=JSON.stringify(e),r=new Hm({"Content-Type":"application/json"});return this.http.put(`${this.preURL}/${t}.json`,n,{headers:r}).pipe(B(e=>(console.log(e),e)))}delPresupuesto(e){return this.http.delete(`${this.preURL}/${e}.json`).pipe(B(e=>e))}}return e.ngInjectableDef=ge({factory:function(){return new e(je(iy))},token:e,providedIn:"root"}),e})();var wy=rr({encapsulation:0,styles:[["input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-left:5px solid #a94442}input.ng-valid.ng-dirty[_ngcontent-%COMP%]{border-left:5px solid #42a948}.check[_ngcontent-%COMP%]{color:#42a948}.uncheck[_ngcontent-%COMP%]{color:#a94442}"]],data:{}});function Cy(e){return vs(0,[(e()(),rs(0,0,null,null,0,"i",[["class","fa fa-check-circle check"]],null,null,null,null,null))],null,null)}function Ey(e){return vs(0,[(e()(),rs(0,0,null,null,0,"i",[["class","fa fa-exclamation-circle uncheck"]],null,null,null,null,null))],null,null)}function Ty(e){return vs(0,[(e()(),rs(0,0,null,null,1,"p",[["class","alert alert-danger"]],null,null,null,null,null)),(e()(),gs(-1,null,[" El campo Proveedor es obligatorio. "]))],null,null)}function Sy(e){return vs(0,[(e()(),rs(0,0,null,null,0,"i",[["class","fa fa-check-circle check"]],null,null,null,null,null))],null,null)}function Iy(e){return vs(0,[(e()(),rs(0,0,null,null,0,"i",[["class","fa fa-exclamation-circle uncheck"]],null,null,null,null,null))],null,null)}function ky(e){return vs(0,[(e()(),rs(0,0,null,null,1,"p",[["class","alert alert-danger"]],null,null,null,null,null)),(e()(),gs(-1,null,[" El campo Fecha es obligatorio. "]))],null,null)}function Ay(e){return vs(0,[(e()(),rs(0,0,null,null,0,"i",[["class","fa fa-check-circle check"]],null,null,null,null,null))],null,null)}function Ny(e){return vs(0,[(e()(),rs(0,0,null,null,0,"i",[["class","fa fa-exclamation-circle uncheck"]],null,null,null,null,null))],null,null)}function Dy(e){return vs(0,[(e()(),rs(0,0,null,null,1,"p",[["class","alert alert-danger"]],null,null,null,null,null)),(e()(),gs(-1,null,[" El campo Concepto es obligatorio. "]))],null,null)}function Ry(e){return vs(0,[(e()(),rs(0,0,null,null,0,"i",[["class","fa fa-check-circle check"]],null,null,null,null,null))],null,null)}function Oy(e){return vs(0,[(e()(),rs(0,0,null,null,0,"i",[["class","fa fa-exclamation-circle uncheck"]],null,null,null,null,null))],null,null)}function Py(e){return vs(0,[(e()(),rs(0,0,null,null,1,"p",[["class","alert alert-danger"]],null,null,null,null,null)),(e()(),gs(-1,null,[" El campo Base Imponible es obligatorio. "]))],null,null)}function xy(e){return vs(0,[(e()(),rs(0,0,null,null,0,"i",[["class","fa fa-check-circle check"]],null,null,null,null,null))],null,null)}function My(e){return vs(0,[(e()(),rs(0,0,null,null,0,"i",[["class","fa fa-exclamation-circle uncheck"]],null,null,null,null,null))],null,null)}function Ly(e){return vs(0,[(e()(),rs(0,0,null,null,1,"p",[["class","alert alert-danger"]],null,null,null,null,null)),(e()(),gs(-1,null,[" El campo Tipo de Iva es obligatorio. "]))],null,null)}function Fy(e){return vs(0,[(e()(),rs(0,0,null,null,1,"p",[["class","alert alert-danger"]],null,null,null,null,null)),(e()(),gs(-1,null,[" Por favor complete todos los campos "]))],null,null)}function Uy(e){return vs(0,[(e()(),rs(0,0,null,null,145,"div",[["class","row"]],null,null,null,null,null)),(e()(),rs(1,0,null,null,144,"div",[["class","col-xs-12 col-sm-10 col-md-8 col-sm-offset-1 col-md-offset 2"]],null,null,null,null,null)),(e()(),rs(2,0,null,null,1,"h2",[],null,null,null,null,null)),(e()(),gs(-1,null,["A\xf1adir nuevo presupuesto"])),(e()(),rs(4,0,null,null,2,"a",[["class","btn btn-primary float-md-right"],["routerLink","/presupuestos"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==ei(e,5).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r}),null,null)),pi(5,671744,null,0,Kp,[Wp,Od,Na],{routerLink:[0,"routerLink"]},null),(e()(),gs(-1,null,["Regresar al listado"])),(e()(),rs(7,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),rs(8,0,null,null,127,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],(function(e,t,n){var r=!0,i=e.component;return"submit"===t&&(r=!1!==ei(e,10).onSubmit(n)&&r),"reset"===t&&(r=!1!==ei(e,10).onReset()&&r),"ngSubmit"===t&&(r=!1!==i.onSubmit()&&r),r}),null,null)),pi(9,16384,null,0,fc,[],null,null),pi(10,540672,null,0,mc,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),gi(2048,null,Cu,null,[mc]),pi(12,16384,null,0,ku,[[4,Cu]],null,null),(e()(),rs(13,0,null,null,14,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),rs(14,0,null,null,1,"label",[["for","proveedor"]],null,null,null,null,null)),(e()(),gs(-1,null,["Proveedor"])),(e()(),ns(16777216,null,null,1,null,Cy)),pi(17,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),ns(16777216,null,null,1,null,Ey)),pi(19,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),rs(20,0,null,null,5,"input",[["class","form-control"],["formControlName","proveedor"],["id","proveedor"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,t,n){var r=!0;return"input"===t&&(r=!1!==ei(e,21)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==ei(e,21).onTouched()&&r),"compositionstart"===t&&(r=!1!==ei(e,21)._compositionStart()&&r),"compositionend"===t&&(r=!1!==ei(e,21)._compositionEnd(n.target.value)&&r),r}),null,null)),pi(21,16384,null,0,bu,[yn,dn,[2,_u]],null,null),gi(1024,null,vu,(function(e){return[e]}),[bu]),pi(23,671744,null,0,bc,[[3,Cu],[8,null],[8,null],[6,vu],[2,gc]],{name:[0,"name"]},null),gi(2048,null,Tu,null,[bc]),pi(25,16384,null,0,Iu,[[4,Tu]],null,null),(e()(),ns(16777216,null,null,1,null,Ty)),pi(27,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),rs(28,0,null,null,14,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),rs(29,0,null,null,1,"label",[["for","fecha"]],null,null,null,null,null)),(e()(),gs(-1,null,["Fecha"])),(e()(),ns(16777216,null,null,1,null,Sy)),pi(32,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),ns(16777216,null,null,1,null,Iy)),pi(34,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),rs(35,0,null,null,5,"input",[["class","form-control"],["formControlName","fecha"],["id","fecha"],["type","date"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,t,n){var r=!0;return"input"===t&&(r=!1!==ei(e,36)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==ei(e,36).onTouched()&&r),"compositionstart"===t&&(r=!1!==ei(e,36)._compositionStart()&&r),"compositionend"===t&&(r=!1!==ei(e,36)._compositionEnd(n.target.value)&&r),r}),null,null)),pi(36,16384,null,0,bu,[yn,dn,[2,_u]],null,null),gi(1024,null,vu,(function(e){return[e]}),[bu]),pi(38,671744,null,0,bc,[[3,Cu],[8,null],[8,null],[6,vu],[2,gc]],{name:[0,"name"]},null),gi(2048,null,Tu,null,[bc]),pi(40,16384,null,0,Iu,[[4,Tu]],null,null),(e()(),ns(16777216,null,null,1,null,ky)),pi(42,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),rs(43,0,null,null,14,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),rs(44,0,null,null,1,"label",[["for","concepto"]],null,null,null,null,null)),(e()(),gs(-1,null,["Concepto"])),(e()(),ns(16777216,null,null,1,null,Ay)),pi(47,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),ns(16777216,null,null,1,null,Ny)),pi(49,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),rs(50,0,null,null,5,"input",[["class","form-control"],["formControlName","concepto"],["id","concepto"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,t,n){var r=!0;return"input"===t&&(r=!1!==ei(e,51)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==ei(e,51).onTouched()&&r),"compositionstart"===t&&(r=!1!==ei(e,51)._compositionStart()&&r),"compositionend"===t&&(r=!1!==ei(e,51)._compositionEnd(n.target.value)&&r),r}),null,null)),pi(51,16384,null,0,bu,[yn,dn,[2,_u]],null,null),gi(1024,null,vu,(function(e){return[e]}),[bu]),pi(53,671744,null,0,bc,[[3,Cu],[8,null],[8,null],[6,vu],[2,gc]],{name:[0,"name"]},null),gi(2048,null,Tu,null,[bc]),pi(55,16384,null,0,Iu,[[4,Tu]],null,null),(e()(),ns(16777216,null,null,1,null,Dy)),pi(57,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),rs(58,0,null,null,15,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),rs(59,0,null,null,1,"label",[["for","base"]],null,null,null,null,null)),(e()(),gs(-1,null,["Base Imponible"])),(e()(),ns(16777216,null,null,1,null,Ry)),pi(62,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),ns(16777216,null,null,1,null,Oy)),pi(64,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),rs(65,0,null,null,6,"input",[["class","form-control"],["formControlName","base"],["id","base"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,t,n){var r=!0;return"input"===t&&(r=!1!==ei(e,66)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==ei(e,66).onTouched()&&r),"compositionstart"===t&&(r=!1!==ei(e,66)._compositionStart()&&r),"compositionend"===t&&(r=!1!==ei(e,66)._compositionEnd(n.target.value)&&r),"change"===t&&(r=!1!==ei(e,67).onChange(n.target.value)&&r),"input"===t&&(r=!1!==ei(e,67).onChange(n.target.value)&&r),"blur"===t&&(r=!1!==ei(e,67).onTouched()&&r),r}),null,null)),pi(66,16384,null,0,bu,[yn,dn,[2,_u]],null,null),pi(67,16384,null,0,Fu,[yn,dn],null,null),gi(1024,null,vu,(function(e,t){return[e,t]}),[bu,Fu]),pi(69,671744,null,0,bc,[[3,Cu],[8,null],[8,null],[6,vu],[2,gc]],{name:[0,"name"]},null),gi(2048,null,Tu,null,[bc]),pi(71,16384,null,0,Iu,[[4,Tu]],null,null),(e()(),ns(16777216,null,null,1,null,Py)),pi(73,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),rs(74,0,null,null,34,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),rs(75,0,null,null,1,"label",[["for","tipo"]],null,null,null,null,null)),(e()(),gs(-1,null,["Tipo de IVA"])),(e()(),ns(16777216,null,null,1,null,xy)),pi(78,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),ns(16777216,null,null,1,null,My)),pi(80,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),rs(81,0,null,null,25,"select",[["class","form-control"],["formControlName","tipo"],["id","tipo"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],(function(e,t,n){var r=!0;return"change"===t&&(r=!1!==ei(e,82).onChange(n.target.value)&&r),"blur"===t&&(r=!1!==ei(e,82).onTouched()&&r),r}),null,null)),pi(82,16384,null,0,Bu,[yn,dn],null,null),gi(1024,null,vu,(function(e){return[e]}),[Bu]),pi(84,671744,null,0,bc,[[3,Cu],[8,null],[8,null],[6,vu],[2,gc]],{name:[0,"name"]},null),gi(2048,null,Tu,null,[bc]),pi(86,16384,null,0,Iu,[[4,Tu]],null,null),(e()(),rs(87,0,null,null,3,"option",[["value",""]],null,null,null,null,null)),pi(88,147456,null,0,Wu,[dn,yn,[2,Bu]],{value:[0,"value"]},null),pi(89,147456,null,0,Ku,[dn,yn,[8,null]],{value:[0,"value"]},null),(e()(),gs(-1,null,["Seleccione..."])),(e()(),rs(91,0,null,null,3,"option",[["value","0"]],null,null,null,null,null)),pi(92,147456,null,0,Wu,[dn,yn,[2,Bu]],{value:[0,"value"]},null),pi(93,147456,null,0,Ku,[dn,yn,[8,null]],{value:[0,"value"]},null),(e()(),gs(-1,null,[" 0 %"])),(e()(),rs(95,0,null,null,3,"option",[["value","0.04"]],null,null,null,null,null)),pi(96,147456,null,0,Wu,[dn,yn,[2,Bu]],{value:[0,"value"]},null),pi(97,147456,null,0,Ku,[dn,yn,[8,null]],{value:[0,"value"]},null),(e()(),gs(-1,null,[" 4 %"])),(e()(),rs(99,0,null,null,3,"option",[["value","0.10"]],null,null,null,null,null)),pi(100,147456,null,0,Wu,[dn,yn,[2,Bu]],{value:[0,"value"]},null),pi(101,147456,null,0,Ku,[dn,yn,[8,null]],{value:[0,"value"]},null),(e()(),gs(-1,null,["10 %"])),(e()(),rs(103,0,null,null,3,"option",[["value","0.21"]],null,null,null,null,null)),pi(104,147456,null,0,Wu,[dn,yn,[2,Bu]],{value:[0,"value"]},null),pi(105,147456,null,0,Ku,[dn,yn,[8,null]],{value:[0,"value"]},null),(e()(),gs(-1,null,["21 %"])),(e()(),ns(16777216,null,null,1,null,Ly)),pi(108,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),rs(109,0,null,null,9,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),rs(110,0,null,null,1,"label",[["for","iva"]],null,null,null,null,null)),(e()(),gs(-1,null,["Importe IVA"])),(e()(),rs(112,0,null,null,6,"input",[["class","form-control"],["disabled",""],["formControlName","iva"],["id","iva"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,t,n){var r=!0,i=e.component;return"input"===t&&(r=!1!==ei(e,113)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==ei(e,113).onTouched()&&r),"compositionstart"===t&&(r=!1!==ei(e,113)._compositionStart()&&r),"compositionend"===t&&(r=!1!==ei(e,113)._compositionEnd(n.target.value)&&r),"change"===t&&(r=!1!==ei(e,114).onChange(n.target.value)&&r),"input"===t&&(r=!1!==ei(e,114).onChange(n.target.value)&&r),"blur"===t&&(r=!1!==ei(e,114).onTouched()&&r),"ngModelChange"===t&&(r=!1!==(i.presupuestoForm.value.iva=n)&&r),r}),null,null)),pi(113,16384,null,0,bu,[yn,dn,[2,_u]],null,null),pi(114,16384,null,0,Fu,[yn,dn],null,null),gi(1024,null,vu,(function(e,t){return[e,t]}),[bu,Fu]),pi(116,671744,null,0,bc,[[3,Cu],[8,null],[8,null],[6,vu],[2,gc]],{name:[0,"name"],isDisabled:[1,"isDisabled"],model:[2,"model"]},{update:"ngModelChange"}),gi(2048,null,Tu,null,[bc]),pi(118,16384,null,0,Iu,[[4,Tu]],null,null),(e()(),rs(119,0,null,null,9,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),rs(120,0,null,null,1,"label",[["for","total"]],null,null,null,null,null)),(e()(),gs(-1,null,["Total Factura IVA Incluido"])),(e()(),rs(122,0,null,null,6,"input",[["class","form-control"],["disabled",""],["formControlName","total"],["id","total"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,t,n){var r=!0,i=e.component;return"input"===t&&(r=!1!==ei(e,123)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==ei(e,123).onTouched()&&r),"compositionstart"===t&&(r=!1!==ei(e,123)._compositionStart()&&r),"compositionend"===t&&(r=!1!==ei(e,123)._compositionEnd(n.target.value)&&r),"change"===t&&(r=!1!==ei(e,124).onChange(n.target.value)&&r),"input"===t&&(r=!1!==ei(e,124).onChange(n.target.value)&&r),"blur"===t&&(r=!1!==ei(e,124).onTouched()&&r),"ngModelChange"===t&&(r=!1!==(i.presupuestoForm.value.total=n)&&r),r}),null,null)),pi(123,16384,null,0,bu,[yn,dn,[2,_u]],null,null),pi(124,16384,null,0,Fu,[yn,dn],null,null),gi(1024,null,vu,(function(e,t){return[e,t]}),[bu,Fu]),pi(126,671744,null,0,bc,[[3,Cu],[8,null],[8,null],[6,vu],[2,gc]],{name:[0,"name"],isDisabled:[1,"isDisabled"],model:[2,"model"]},{update:"ngModelChange"}),gi(2048,null,Tu,null,[bc]),pi(128,16384,null,0,Iu,[[4,Tu]],null,null),(e()(),rs(129,0,null,null,1,"button",[["class","btn btn-primary"],["type","submit"]],[[8,"disabled",0]],null,null,null,null)),(e()(),gs(-1,null,["A\xf1adir Presupuesto"])),(e()(),rs(131,0,null,null,2,"a",[["class","btn btn-danger"],["routerLink","/presupuestos"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==ei(e,132).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r}),null,null)),pi(132,671744,null,0,Kp,[Wp,Od,Na],{routerLink:[0,"routerLink"]},null),(e()(),gs(-1,null,["Cancelar"])),(e()(),ns(16777216,null,null,1,null,Fy)),pi(135,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),rs(136,0,null,null,2,"pre",[],null,null,null,null,null)),(e()(),gs(137,null,["Valor del formulario: ",""])),fi(0,Ga,[]),(e()(),rs(139,0,null,null,2,"pre",[],null,null,null,null,null)),(e()(),gs(140,null,["Status del formulario: ",""])),fi(0,Ga,[]),(e()(),rs(142,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),rs(143,0,null,null,2,"pre",[],null,null,null,null,null)),(e()(),gs(144,null,["",""])),fi(0,Ga,[])],(function(e,t){var n=t.component;e(t,5,0,"/presupuestos"),e(t,10,0,n.presupuestoForm),e(t,17,0,n.presupuestoForm.controls.proveedor.valid),e(t,19,0,n.presupuestoForm.controls.proveedor.invalid&&n.presupuestoForm.controls.proveedor.touched),e(t,23,0,"proveedor"),e(t,27,0,n.presupuestoForm.controls.proveedor.invalid&&n.presupuestoForm.controls.proveedor.touched),e(t,32,0,n.presupuestoForm.controls.fecha.valid),e(t,34,0,n.presupuestoForm.controls.fecha.invalid&&n.presupuestoForm.controls.fecha.touched),e(t,38,0,"fecha"),e(t,42,0,n.presupuestoForm.controls.fecha.invalid&&n.presupuestoForm.controls.fecha.touched),e(t,47,0,n.presupuestoForm.controls.concepto.valid),e(t,49,0,n.presupuestoForm.controls.concepto.invalid&&n.presupuestoForm.controls.concepto.touched),e(t,53,0,"concepto"),e(t,57,0,n.presupuestoForm.controls.concepto.invalid&&n.presupuestoForm.controls.concepto.touched),e(t,62,0,n.presupuestoForm.controls.base.valid),e(t,64,0,n.presupuestoForm.controls.base.invalid&&n.presupuestoForm.controls.base.touched),e(t,69,0,"base"),e(t,73,0,n.presupuestoForm.controls.base.invalid&&n.presupuestoForm.controls.base.touched),e(t,78,0,n.presupuestoForm.controls.tipo.valid),e(t,80,0,n.presupuestoForm.controls.tipo.invalid&&n.presupuestoForm.controls.tipo.touched),e(t,84,0,"tipo"),e(t,88,0,""),e(t,89,0,""),e(t,92,0,"0"),e(t,93,0,"0"),e(t,96,0,"0.04"),e(t,97,0,"0.04"),e(t,100,0,"0.10"),e(t,101,0,"0.10"),e(t,104,0,"0.21"),e(t,105,0,"0.21"),e(t,108,0,n.presupuestoForm.controls.tipo.invalid&&n.presupuestoForm.controls.tipo.touched),e(t,116,0,"iva","",n.presupuestoForm.value.iva),e(t,126,0,"total","",n.presupuestoForm.value.total),e(t,132,0,"/presupuestos"),e(t,135,0,!n.presupuestoForm.valid)}),(function(e,t){var n=t.component;e(t,4,0,ei(t,5).target,ei(t,5).href),e(t,8,0,ei(t,12).ngClassUntouched,ei(t,12).ngClassTouched,ei(t,12).ngClassPristine,ei(t,12).ngClassDirty,ei(t,12).ngClassValid,ei(t,12).ngClassInvalid,ei(t,12).ngClassPending),e(t,20,0,ei(t,25).ngClassUntouched,ei(t,25).ngClassTouched,ei(t,25).ngClassPristine,ei(t,25).ngClassDirty,ei(t,25).ngClassValid,ei(t,25).ngClassInvalid,ei(t,25).ngClassPending),e(t,35,0,ei(t,40).ngClassUntouched,ei(t,40).ngClassTouched,ei(t,40).ngClassPristine,ei(t,40).ngClassDirty,ei(t,40).ngClassValid,ei(t,40).ngClassInvalid,ei(t,40).ngClassPending),e(t,50,0,ei(t,55).ngClassUntouched,ei(t,55).ngClassTouched,ei(t,55).ngClassPristine,ei(t,55).ngClassDirty,ei(t,55).ngClassValid,ei(t,55).ngClassInvalid,ei(t,55).ngClassPending),e(t,65,0,ei(t,71).ngClassUntouched,ei(t,71).ngClassTouched,ei(t,71).ngClassPristine,ei(t,71).ngClassDirty,ei(t,71).ngClassValid,ei(t,71).ngClassInvalid,ei(t,71).ngClassPending),e(t,81,0,ei(t,86).ngClassUntouched,ei(t,86).ngClassTouched,ei(t,86).ngClassPristine,ei(t,86).ngClassDirty,ei(t,86).ngClassValid,ei(t,86).ngClassInvalid,ei(t,86).ngClassPending),e(t,112,0,ei(t,118).ngClassUntouched,ei(t,118).ngClassTouched,ei(t,118).ngClassPristine,ei(t,118).ngClassDirty,ei(t,118).ngClassValid,ei(t,118).ngClassInvalid,ei(t,118).ngClassPending),e(t,122,0,ei(t,128).ngClassUntouched,ei(t,128).ngClassTouched,ei(t,128).ngClassPristine,ei(t,128).ngClassDirty,ei(t,128).ngClassValid,ei(t,128).ngClassInvalid,ei(t,128).ngClassPending),e(t,129,0,!n.presupuestoForm.valid),e(t,131,0,ei(t,132).target,ei(t,132).href),e(t,137,0,er(t,137,0,ei(t,138).transform(n.presupuestoForm.value))),e(t,140,0,er(t,140,0,ei(t,141).transform(n.presupuestoForm.status))),e(t,144,0,er(t,144,0,ei(t,145).transform(n.presupuesto)))}))}function Vy(e){return vs(0,[(e()(),rs(0,0,null,null,1,"app-addpres",[],null,null,null,Uy,wy)),pi(1,114688,null,0,kc,[Ec,by],null,null)],(function(e,t){e(t,1,0)}),null)}var jy=Wr("app-addpres",kc,Vy,{},{},[]),qy=rr({encapsulation:0,styles:[[""]],data:{}});function By(e){return vs(0,[(e()(),rs(0,0,null,null,19,"tr",[],null,null,null,null,null)),(e()(),rs(1,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),gs(2,null,["",""])),(e()(),rs(3,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),gs(4,null,["",""])),(e()(),rs(5,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),gs(6,null,["",""])),(e()(),rs(7,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),gs(8,null,["",""])),(e()(),rs(9,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),gs(10,null,["",""])),(e()(),rs(11,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),gs(12,null,["",""])),(e()(),rs(13,0,null,null,3,"td",[],null,null,null,null,null)),(e()(),rs(14,0,null,null,2,"button",[["class","btn btn-success"],["type","button"]],null,[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==ei(e,15).onClick()&&r),r}),null,null)),pi(15,16384,null,0,Hp,[Wp,Od,[8,null],yn,dn],{routerLink:[0,"routerLink"]},null),(e()(),gs(-1,null,["Editar"])),(e()(),rs(17,0,null,null,2,"td",[],null,null,null,null,null)),(e()(),rs(18,0,null,null,1,"button",[["class","btn btn-danger"]],null,[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.eliminarPresupuesto(e.context.$implicit.id$)&&r),r}),null,null)),(e()(),gs(-1,null,["Eliminar"]))],(function(e,t){e(t,15,0,Dr(1,"/editpres/",t.context.$implicit.id$,""))}),(function(e,t){e(t,2,0,t.context.$implicit.proveedor),e(t,4,0,t.context.$implicit.fecha),e(t,6,0,t.context.$implicit.concepto),e(t,8,0,t.context.$implicit.base),e(t,10,0,t.context.$implicit.iva),e(t,12,0,t.context.$implicit.total)}))}function Wy(e){return vs(0,[(e()(),rs(0,0,null,null,1,"h3",[],null,null,null,null,null)),(e()(),gs(-1,null,["Listado de Presupuestos"])),(e()(),rs(2,0,null,null,2,"a",[["class","btn btn-primary float-md-right"],["routerLink","/addpres"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==ei(e,3).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r}),null,null)),pi(3,671744,null,0,Kp,[Wp,Od,Na],{routerLink:[0,"routerLink"]},null),(e()(),gs(-1,null,["A\xf1adir nuevo presupuesto"])),(e()(),rs(5,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),rs(6,0,null,null,21,"table",[["class","table table-bordered table-striped tabla"],["style","margin-top:\n    40px;"]],null,null,null,null,null)),(e()(),rs(7,0,null,null,17,"thead",[],null,null,null,null,null)),(e()(),rs(8,0,null,null,16,"tr",[["class","filters"]],null,null,null,null,null)),(e()(),rs(9,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),gs(-1,null,["Proveedor"])),(e()(),rs(11,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),gs(-1,null,["Fecha"])),(e()(),rs(13,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),gs(-1,null,["Concepto"])),(e()(),rs(15,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),gs(-1,null,["Base"])),(e()(),rs(17,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),gs(-1,null,["IVA"])),(e()(),rs(19,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),gs(-1,null,["Total"])),(e()(),rs(21,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),gs(-1,null,["Editar"])),(e()(),rs(23,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),gs(-1,null,["Eliminar"])),(e()(),rs(25,0,null,null,2,"tbody",[],null,null,null,null,null)),(e()(),ns(16777216,null,null,1,null,By)),pi(27,278528,null,0,Ba,[Un,Ln,Rn],{ngForOf:[0,"ngForOf"]},null)],(function(e,t){var n=t.component;e(t,3,0,"/addpres"),e(t,27,0,n.presupuestos)}),(function(e,t){e(t,2,0,ei(t,3).target,ei(t,3).href)}))}function Hy(e){return vs(0,[(e()(),rs(0,0,null,null,1,"app-presupuestos",[],null,null,null,Wy,qy)),pi(1,114688,null,0,Ac,[by],null,null)],(function(e,t){e(t,1,0)}),null)}var Ky=Wr("app-presupuestos",Ac,Hy,{},{},[]),zy=rr({encapsulation:0,styles:[["input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-left:5px solid #a94442}input.ng-valid.ng-dirty[_ngcontent-%COMP%]{border-left:5px solid #42a948}select.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-left:5px solid #a94442}select.ng-valid.ng-dirty[_ngcontent-%COMP%]{border-left:5px solid #42a948}.check[_ngcontent-%COMP%]{color:#42a948}.uncheck[_ngcontent-%COMP%]{color:#a94442}"]],data:{}});function Gy(e){return vs(0,[(e()(),rs(0,0,null,null,0,"i",[["class","fa fa-check-circle check"]],null,null,null,null,null))],null,null)}function Qy(e){return vs(0,[(e()(),rs(0,0,null,null,0,"i",[["class","fa fa-exclamation-circle uncheck"]],null,null,null,null,null))],null,null)}function $y(e){return vs(0,[(e()(),rs(0,0,null,null,1,"p",[["class","alert alert-danger"]],null,null,null,null,null)),(e()(),gs(-1,null,[" El campo Proveedor es obligatorio. "]))],null,null)}function Yy(e){return vs(0,[(e()(),rs(0,0,null,null,0,"i",[["class","fa fa-check-circle check"]],null,null,null,null,null))],null,null)}function Xy(e){return vs(0,[(e()(),rs(0,0,null,null,0,"i",[["class","fa fa-exclamation-circle uncheck"]],null,null,null,null,null))],null,null)}function Jy(e){return vs(0,[(e()(),rs(0,0,null,null,1,"p",[["class","alert alert-danger"]],null,null,null,null,null)),(e()(),gs(-1,null,[" El campo Fecha es obligatorio. "]))],null,null)}function Zy(e){return vs(0,[(e()(),rs(0,0,null,null,0,"i",[["class","fa fa-check-circle check"]],null,null,null,null,null))],null,null)}function ev(e){return vs(0,[(e()(),rs(0,0,null,null,0,"i",[["class","fa fa-exclamation-circle uncheck"]],null,null,null,null,null))],null,null)}function tv(e){return vs(0,[(e()(),rs(0,0,null,null,1,"p",[["class","alert alert-danger"]],null,null,null,null,null)),(e()(),gs(-1,null,[" El campo Concepto es obligatorio y debe tener m\xe1s de 10 caracteres. "]))],null,null)}function nv(e){return vs(0,[(e()(),rs(0,0,null,null,0,"i",[["class","fa fa-check-circle check"]],null,null,null,null,null))],null,null)}function rv(e){return vs(0,[(e()(),rs(0,0,null,null,0,"i",[["class","fa fa-exclamation-circle uncheck"]],null,null,null,null,null))],null,null)}function iv(e){return vs(0,[(e()(),rs(0,0,null,null,1,"p",[["class","alert alert-danger"]],null,null,null,null,null)),(e()(),gs(-1,null,[" El campo Base Imponible es obligatorio. "]))],null,null)}function ov(e){return vs(0,[(e()(),rs(0,0,null,null,0,"i",[["class","fa fa-check-circle check"]],null,null,null,null,null))],null,null)}function sv(e){return vs(0,[(e()(),rs(0,0,null,null,0,"i",[["class","fa fa-exclamation-circle uncheck"]],null,null,null,null,null))],null,null)}function av(e){return vs(0,[(e()(),rs(0,0,null,null,1,"p",[["class","alert alert-danger"]],null,null,null,null,null)),(e()(),gs(-1,null,[" El campo Tipo de IVA es obligatorio. "]))],null,null)}function lv(e){return vs(0,[(e()(),rs(0,0,null,null,1,"p",[["class","alert alert-danger"]],null,null,null,null,null)),(e()(),gs(-1,null,[" Por favor complete todos los campos "]))],null,null)}function uv(e){return vs(0,[(e()(),rs(0,0,null,null,136,"div",[["class","row"]],null,null,null,null,null)),(e()(),rs(1,0,null,null,135,"div",[["class","col-xs-12 col-sm-10 col-md-8 col-sm-offset-1 col-md-offset 2"]],null,null,null,null,null)),(e()(),rs(2,0,null,null,1,"h2",[],null,null,null,null,null)),(e()(),gs(-1,null,["Editar Presupuesto"])),(e()(),rs(4,0,null,null,2,"a",[["class","btn btn-primary float-md-right"],["routerLink","/presupuestos"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==ei(e,5).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r}),null,null)),pi(5,671744,null,0,Kp,[Wp,Od,Na],{routerLink:[0,"routerLink"]},null),(e()(),gs(-1,null,["Regresar al listado"])),(e()(),rs(7,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),rs(8,0,null,null,127,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],(function(e,t,n){var r=!0,i=e.component;return"submit"===t&&(r=!1!==ei(e,10).onSubmit(n)&&r),"reset"===t&&(r=!1!==ei(e,10).onReset()&&r),"ngSubmit"===t&&(r=!1!==i.onSubmit()&&r),r}),null,null)),pi(9,16384,null,0,fc,[],null,null),pi(10,540672,null,0,mc,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),gi(2048,null,Cu,null,[mc]),pi(12,16384,null,0,ku,[[4,Cu]],null,null),(e()(),rs(13,0,null,null,14,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),rs(14,0,null,null,1,"label",[["for","proveedor"]],null,null,null,null,null)),(e()(),gs(-1,null,["Proveedor"])),(e()(),ns(16777216,null,null,1,null,Gy)),pi(17,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),ns(16777216,null,null,1,null,Qy)),pi(19,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),rs(20,0,null,null,5,"input",[["class","form-control"],["formControlName","proveedor"],["id","proveedor"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,t,n){var r=!0,i=e.component;return"input"===t&&(r=!1!==ei(e,21)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==ei(e,21).onTouched()&&r),"compositionstart"===t&&(r=!1!==ei(e,21)._compositionStart()&&r),"compositionend"===t&&(r=!1!==ei(e,21)._compositionEnd(n.target.value)&&r),"ngModelChange"===t&&(r=!1!==(i.presupuesto.proveedor=n)&&r),r}),null,null)),pi(21,16384,null,0,bu,[yn,dn,[2,_u]],null,null),gi(1024,null,vu,(function(e){return[e]}),[bu]),pi(23,671744,null,0,bc,[[3,Cu],[8,null],[8,null],[6,vu],[2,gc]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),gi(2048,null,Tu,null,[bc]),pi(25,16384,null,0,Iu,[[4,Tu]],null,null),(e()(),ns(16777216,null,null,1,null,$y)),pi(27,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),rs(28,0,null,null,14,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),rs(29,0,null,null,1,"label",[["for","fecha"]],null,null,null,null,null)),(e()(),gs(-1,null,["Fecha Presupuesto"])),(e()(),ns(16777216,null,null,1,null,Yy)),pi(32,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),ns(16777216,null,null,1,null,Xy)),pi(34,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),rs(35,0,null,null,5,"input",[["class","form-control"],["formControlName","fecha"],["id","fecha"],["type","date"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,t,n){var r=!0,i=e.component;return"input"===t&&(r=!1!==ei(e,36)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==ei(e,36).onTouched()&&r),"compositionstart"===t&&(r=!1!==ei(e,36)._compositionStart()&&r),"compositionend"===t&&(r=!1!==ei(e,36)._compositionEnd(n.target.value)&&r),"ngModelChange"===t&&(r=!1!==(i.presupuesto.fecha=n)&&r),r}),null,null)),pi(36,16384,null,0,bu,[yn,dn,[2,_u]],null,null),gi(1024,null,vu,(function(e){return[e]}),[bu]),pi(38,671744,null,0,bc,[[3,Cu],[8,null],[8,null],[6,vu],[2,gc]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),gi(2048,null,Tu,null,[bc]),pi(40,16384,null,0,Iu,[[4,Tu]],null,null),(e()(),ns(16777216,null,null,1,null,Jy)),pi(42,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),rs(43,0,null,null,14,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),rs(44,0,null,null,1,"label",[["for","concepto"]],null,null,null,null,null)),(e()(),gs(-1,null,["Concepto"])),(e()(),ns(16777216,null,null,1,null,Zy)),pi(47,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),ns(16777216,null,null,1,null,ev)),pi(49,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),rs(50,0,null,null,5,"input",[["class","form-control"],["formControlName","concepto"],["id","concepto"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,t,n){var r=!0,i=e.component;return"input"===t&&(r=!1!==ei(e,51)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==ei(e,51).onTouched()&&r),"compositionstart"===t&&(r=!1!==ei(e,51)._compositionStart()&&r),"compositionend"===t&&(r=!1!==ei(e,51)._compositionEnd(n.target.value)&&r),"ngModelChange"===t&&(r=!1!==(i.presupuesto.concepto=n)&&r),r}),null,null)),pi(51,16384,null,0,bu,[yn,dn,[2,_u]],null,null),gi(1024,null,vu,(function(e){return[e]}),[bu]),pi(53,671744,null,0,bc,[[3,Cu],[8,null],[8,null],[6,vu],[2,gc]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),gi(2048,null,Tu,null,[bc]),pi(55,16384,null,0,Iu,[[4,Tu]],null,null),(e()(),ns(16777216,null,null,1,null,tv)),pi(57,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),rs(58,0,null,null,15,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),rs(59,0,null,null,1,"label",[["for","base"]],null,null,null,null,null)),(e()(),gs(-1,null,["Base Imponible"])),(e()(),ns(16777216,null,null,1,null,nv)),pi(62,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),ns(16777216,null,null,1,null,rv)),pi(64,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),rs(65,0,null,null,6,"input",[["class","form-control"],["formControlName","base"],["id","base"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,t,n){var r=!0,i=e.component;return"input"===t&&(r=!1!==ei(e,66)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==ei(e,66).onTouched()&&r),"compositionstart"===t&&(r=!1!==ei(e,66)._compositionStart()&&r),"compositionend"===t&&(r=!1!==ei(e,66)._compositionEnd(n.target.value)&&r),"change"===t&&(r=!1!==ei(e,67).onChange(n.target.value)&&r),"input"===t&&(r=!1!==ei(e,67).onChange(n.target.value)&&r),"blur"===t&&(r=!1!==ei(e,67).onTouched()&&r),"ngModelChange"===t&&(r=!1!==(i.presupuesto.base=n)&&r),r}),null,null)),pi(66,16384,null,0,bu,[yn,dn,[2,_u]],null,null),pi(67,16384,null,0,Fu,[yn,dn],null,null),gi(1024,null,vu,(function(e,t){return[e,t]}),[bu,Fu]),pi(69,671744,null,0,bc,[[3,Cu],[8,null],[8,null],[6,vu],[2,gc]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),gi(2048,null,Tu,null,[bc]),pi(71,16384,null,0,Iu,[[4,Tu]],null,null),(e()(),ns(16777216,null,null,1,null,iv)),pi(73,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),rs(74,0,null,null,34,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),rs(75,0,null,null,1,"label",[["for","tipo"]],null,null,null,null,null)),(e()(),gs(-1,null,["Tipo de IVA"])),(e()(),ns(16777216,null,null,1,null,ov)),pi(78,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),ns(16777216,null,null,1,null,sv)),pi(80,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),rs(81,0,null,null,25,"select",[["class","form-control"],["formControlName","tipo"],["id","tipo"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(e,t,n){var r=!0,i=e.component;return"change"===t&&(r=!1!==ei(e,82).onChange(n.target.value)&&r),"blur"===t&&(r=!1!==ei(e,82).onTouched()&&r),"ngModelChange"===t&&(r=!1!==(i.presupuesto.tipo=n)&&r),r}),null,null)),pi(82,16384,null,0,Bu,[yn,dn],null,null),gi(1024,null,vu,(function(e){return[e]}),[Bu]),pi(84,671744,null,0,bc,[[3,Cu],[8,null],[8,null],[6,vu],[2,gc]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),gi(2048,null,Tu,null,[bc]),pi(86,16384,null,0,Iu,[[4,Tu]],null,null),(e()(),rs(87,0,null,null,3,"option",[["value",""]],null,null,null,null,null)),pi(88,147456,null,0,Wu,[dn,yn,[2,Bu]],{value:[0,"value"]},null),pi(89,147456,null,0,Ku,[dn,yn,[8,null]],{value:[0,"value"]},null),(e()(),gs(-1,null,["Seleccione..."])),(e()(),rs(91,0,null,null,3,"option",[["value","0"]],null,null,null,null,null)),pi(92,147456,null,0,Wu,[dn,yn,[2,Bu]],{value:[0,"value"]},null),pi(93,147456,null,0,Ku,[dn,yn,[8,null]],{value:[0,"value"]},null),(e()(),gs(-1,null,[" 0 %"])),(e()(),rs(95,0,null,null,3,"option",[["value","0.04"]],null,null,null,null,null)),pi(96,147456,null,0,Wu,[dn,yn,[2,Bu]],{value:[0,"value"]},null),pi(97,147456,null,0,Ku,[dn,yn,[8,null]],{value:[0,"value"]},null),(e()(),gs(-1,null,[" 4 %"])),(e()(),rs(99,0,null,null,3,"option",[["value","0.10"]],null,null,null,null,null)),pi(100,147456,null,0,Wu,[dn,yn,[2,Bu]],{value:[0,"value"]},null),pi(101,147456,null,0,Ku,[dn,yn,[8,null]],{value:[0,"value"]},null),(e()(),gs(-1,null,["10 %"])),(e()(),rs(103,0,null,null,3,"option",[["value","0.21"]],null,null,null,null,null)),pi(104,147456,null,0,Wu,[dn,yn,[2,Bu]],{value:[0,"value"]},null),pi(105,147456,null,0,Ku,[dn,yn,[8,null]],{value:[0,"value"]},null),(e()(),gs(-1,null,["21 %"])),(e()(),ns(16777216,null,null,1,null,av)),pi(108,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),rs(109,0,null,null,9,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),rs(110,0,null,null,1,"label",[["for","iva"]],null,null,null,null,null)),(e()(),gs(-1,null,["Importe IVA"])),(e()(),rs(112,0,null,null,6,"input",[["class","form-control"],["disabled",""],["formControlName","iva"],["id","iva"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,t,n){var r=!0,i=e.component;return"input"===t&&(r=!1!==ei(e,113)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==ei(e,113).onTouched()&&r),"compositionstart"===t&&(r=!1!==ei(e,113)._compositionStart()&&r),"compositionend"===t&&(r=!1!==ei(e,113)._compositionEnd(n.target.value)&&r),"change"===t&&(r=!1!==ei(e,114).onChange(n.target.value)&&r),"input"===t&&(r=!1!==ei(e,114).onChange(n.target.value)&&r),"blur"===t&&(r=!1!==ei(e,114).onTouched()&&r),"ngModelChange"===t&&(r=!1!==(i.presupuestoForm.value.iva=n)&&r),r}),null,null)),pi(113,16384,null,0,bu,[yn,dn,[2,_u]],null,null),pi(114,16384,null,0,Fu,[yn,dn],null,null),gi(1024,null,vu,(function(e,t){return[e,t]}),[bu,Fu]),pi(116,671744,null,0,bc,[[3,Cu],[8,null],[8,null],[6,vu],[2,gc]],{name:[0,"name"],isDisabled:[1,"isDisabled"],model:[2,"model"]},{update:"ngModelChange"}),gi(2048,null,Tu,null,[bc]),pi(118,16384,null,0,Iu,[[4,Tu]],null,null),(e()(),rs(119,0,null,null,9,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),rs(120,0,null,null,1,"label",[["for","total"]],null,null,null,null,null)),(e()(),gs(-1,null,["Total Factura IVA Incluido"])),(e()(),rs(122,0,null,null,6,"input",[["class","form-control"],["disabled",""],["formControlName","total"],["id","total"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,t,n){var r=!0,i=e.component;return"input"===t&&(r=!1!==ei(e,123)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==ei(e,123).onTouched()&&r),"compositionstart"===t&&(r=!1!==ei(e,123)._compositionStart()&&r),"compositionend"===t&&(r=!1!==ei(e,123)._compositionEnd(n.target.value)&&r),"change"===t&&(r=!1!==ei(e,124).onChange(n.target.value)&&r),"input"===t&&(r=!1!==ei(e,124).onChange(n.target.value)&&r),"blur"===t&&(r=!1!==ei(e,124).onTouched()&&r),"ngModelChange"===t&&(r=!1!==(i.presupuestoForm.value.total=n)&&r),r}),null,null)),pi(123,16384,null,0,bu,[yn,dn,[2,_u]],null,null),pi(124,16384,null,0,Fu,[yn,dn],null,null),gi(1024,null,vu,(function(e,t){return[e,t]}),[bu,Fu]),pi(126,671744,null,0,bc,[[3,Cu],[8,null],[8,null],[6,vu],[2,gc]],{name:[0,"name"],isDisabled:[1,"isDisabled"],model:[2,"model"]},{update:"ngModelChange"}),gi(2048,null,Tu,null,[bc]),pi(128,16384,null,0,Iu,[[4,Tu]],null,null),(e()(),rs(129,0,null,null,1,"button",[["class","btn btn-primary"],["type","submit"]],[[8,"disabled",0]],null,null,null,null)),(e()(),gs(-1,null,["Guardar Cambios"])),(e()(),rs(131,0,null,null,2,"a",[["class","btn btn-danger"],["routerLink","/presupuestos"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==ei(e,132).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r}),null,null)),pi(132,671744,null,0,Kp,[Wp,Od,Na],{routerLink:[0,"routerLink"]},null),(e()(),gs(-1,null,["Cancelar"])),(e()(),ns(16777216,null,null,1,null,lv)),pi(135,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),rs(136,0,null,null,0,"hr",[],null,null,null,null,null))],(function(e,t){var n=t.component;e(t,5,0,"/presupuestos"),e(t,10,0,n.presupuestoForm),e(t,17,0,n.presupuestoForm.controls.proveedor.valid),e(t,19,0,n.presupuestoForm.controls.proveedor.invalid&&n.presupuestoForm.controls.proveedor.touched),e(t,23,0,"proveedor",n.presupuesto.proveedor),e(t,27,0,n.presupuestoForm.controls.proveedor.invalid&&n.presupuestoForm.controls.proveedor.touched),e(t,32,0,n.presupuestoForm.controls.fecha.valid),e(t,34,0,n.presupuestoForm.controls.fecha.invalid&&n.presupuestoForm.controls.fecha.touched),e(t,38,0,"fecha",n.presupuesto.fecha),e(t,42,0,n.presupuestoForm.controls.fecha.invalid&&n.presupuestoForm.controls.fecha.touched),e(t,47,0,n.presupuestoForm.controls.concepto.valid),e(t,49,0,n.presupuestoForm.controls.concepto.invalid&&n.presupuestoForm.controls.concepto.touched),e(t,53,0,"concepto",n.presupuesto.concepto),e(t,57,0,n.presupuestoForm.controls.concepto.invalid&&n.presupuestoForm.controls.concepto.touched),e(t,62,0,n.presupuestoForm.controls.base.valid),e(t,64,0,n.presupuestoForm.controls.base.invalid&&n.presupuestoForm.controls.base.touched),e(t,69,0,"base",n.presupuesto.base),e(t,73,0,n.presupuestoForm.controls.base.invalid&&n.presupuestoForm.controls.base.touched),e(t,78,0,n.presupuestoForm.controls.tipo.valid),e(t,80,0,n.presupuestoForm.controls.tipo.invalid&&n.presupuestoForm.controls.tipo.touched),e(t,84,0,"tipo",n.presupuesto.tipo),e(t,88,0,""),e(t,89,0,""),e(t,92,0,"0"),e(t,93,0,"0"),e(t,96,0,"0.04"),e(t,97,0,"0.04"),e(t,100,0,"0.10"),e(t,101,0,"0.10"),e(t,104,0,"0.21"),e(t,105,0,"0.21"),e(t,108,0,n.presupuestoForm.controls.tipo.invalid&&n.presupuestoForm.controls.tipo.touched),e(t,116,0,"iva","",n.presupuestoForm.value.iva),e(t,126,0,"total","",n.presupuestoForm.value.total),e(t,132,0,"/presupuestos"),e(t,135,0,!n.presupuestoForm.valid)}),(function(e,t){var n=t.component;e(t,4,0,ei(t,5).target,ei(t,5).href),e(t,8,0,ei(t,12).ngClassUntouched,ei(t,12).ngClassTouched,ei(t,12).ngClassPristine,ei(t,12).ngClassDirty,ei(t,12).ngClassValid,ei(t,12).ngClassInvalid,ei(t,12).ngClassPending),e(t,20,0,ei(t,25).ngClassUntouched,ei(t,25).ngClassTouched,ei(t,25).ngClassPristine,ei(t,25).ngClassDirty,ei(t,25).ngClassValid,ei(t,25).ngClassInvalid,ei(t,25).ngClassPending),e(t,35,0,ei(t,40).ngClassUntouched,ei(t,40).ngClassTouched,ei(t,40).ngClassPristine,ei(t,40).ngClassDirty,ei(t,40).ngClassValid,ei(t,40).ngClassInvalid,ei(t,40).ngClassPending),e(t,50,0,ei(t,55).ngClassUntouched,ei(t,55).ngClassTouched,ei(t,55).ngClassPristine,ei(t,55).ngClassDirty,ei(t,55).ngClassValid,ei(t,55).ngClassInvalid,ei(t,55).ngClassPending),e(t,65,0,ei(t,71).ngClassUntouched,ei(t,71).ngClassTouched,ei(t,71).ngClassPristine,ei(t,71).ngClassDirty,ei(t,71).ngClassValid,ei(t,71).ngClassInvalid,ei(t,71).ngClassPending),e(t,81,0,ei(t,86).ngClassUntouched,ei(t,86).ngClassTouched,ei(t,86).ngClassPristine,ei(t,86).ngClassDirty,ei(t,86).ngClassValid,ei(t,86).ngClassInvalid,ei(t,86).ngClassPending),e(t,112,0,ei(t,118).ngClassUntouched,ei(t,118).ngClassTouched,ei(t,118).ngClassPristine,ei(t,118).ngClassDirty,ei(t,118).ngClassValid,ei(t,118).ngClassInvalid,ei(t,118).ngClassPending),e(t,122,0,ei(t,128).ngClassUntouched,ei(t,128).ngClassTouched,ei(t,128).ngClassPristine,ei(t,128).ngClassDirty,ei(t,128).ngClassValid,ei(t,128).ngClassInvalid,ei(t,128).ngClassPending),e(t,129,0,!n.presupuestoForm.valid),e(t,131,0,ei(t,132).target,ei(t,132).href)}))}function cv(e){return vs(0,[(e()(),rs(0,0,null,null,1,"app-editpres",[],null,null,null,uv,zy)),pi(1,114688,null,0,Nc,[Ec,by,Wp,Od],null,null)],(function(e,t){e(t,1,0)}),null)}var hv=Wr("app-editpres",Nc,cv,{},{},[]),dv=rr({encapsulation:0,styles:[[""]],data:{}});function pv(e){return vs(0,[(e()(),rs(0,0,null,null,1,"p",[["class","alert alert-danger"]],null,null,null,null,null)),(e()(),gs(1,null,[" "," "]))],null,(function(e,t){e(t,1,0,t.component.erroresForm.email)}))}function fv(e){return vs(0,[(e()(),rs(0,0,null,null,1,"p",[["class","alert alert-danger"]],null,null,null,null,null)),(e()(),gs(1,null,[" "," "]))],null,(function(e,t){e(t,1,0,t.component.erroresForm.password)}))}function gv(e){return vs(0,[(e()(),rs(0,0,null,null,40,"div",[["class","row"]],null,null,null,null,null)),(e()(),rs(1,0,null,null,39,"div",[["class","col-md-6 offset-md-3"]],null,null,null,null,null)),(e()(),rs(2,0,null,null,33,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],(function(e,t,n){var r=!0,i=e.component;return"submit"===t&&(r=!1!==ei(e,4).onSubmit(n)&&r),"reset"===t&&(r=!1!==ei(e,4).onReset()&&r),"ngSubmit"===t&&(r=!1!==i.onSubmit()&&r),r}),null,null)),pi(3,16384,null,0,fc,[],null,null),pi(4,540672,null,0,mc,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),gi(2048,null,Cu,null,[mc]),pi(6,16384,null,0,ku,[[4,Cu]],null,null),(e()(),rs(7,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),gs(-1,null,["Introduzca sus datos de registro"])),(e()(),rs(9,0,null,null,1,"label",[],null,null,null,null,null)),(e()(),gs(-1,null,["Correo Electr\xf3nico"])),(e()(),rs(11,0,null,null,7,"input",[["autofocus",""],["class","form-control"],["formControlName","email"],["id","inputEmail"],["required",""],["type","email"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,t,n){var r=!0;return"input"===t&&(r=!1!==ei(e,12)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==ei(e,12).onTouched()&&r),"compositionstart"===t&&(r=!1!==ei(e,12)._compositionStart()&&r),"compositionend"===t&&(r=!1!==ei(e,12)._compositionEnd(n.target.value)&&r),r}),null,null)),pi(12,16384,null,0,bu,[yn,dn,[2,_u]],null,null),pi(13,16384,null,0,wc,[],{required:[0,"required"]},null),gi(1024,null,Nu,(function(e){return[e]}),[wc]),gi(1024,null,vu,(function(e){return[e]}),[bu]),pi(16,671744,null,0,bc,[[3,Cu],[6,Nu],[8,null],[6,vu],[2,gc]],{name:[0,"name"]},null),gi(2048,null,Tu,null,[bc]),pi(18,16384,null,0,Iu,[[4,Tu]],null,null),(e()(),ns(16777216,null,null,1,null,pv)),pi(20,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),rs(21,0,null,null,1,"label",[],null,null,null,null,null)),(e()(),gs(-1,null,["Contrase\xf1a"])),(e()(),rs(23,0,null,null,7,"input",[["class","form-control"],["formControlName","password"],["id","inputPassword"],["required",""],["type","password"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,t,n){var r=!0;return"input"===t&&(r=!1!==ei(e,24)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==ei(e,24).onTouched()&&r),"compositionstart"===t&&(r=!1!==ei(e,24)._compositionStart()&&r),"compositionend"===t&&(r=!1!==ei(e,24)._compositionEnd(n.target.value)&&r),r}),null,null)),pi(24,16384,null,0,bu,[yn,dn,[2,_u]],null,null),pi(25,16384,null,0,wc,[],{required:[0,"required"]},null),gi(1024,null,Nu,(function(e){return[e]}),[wc]),gi(1024,null,vu,(function(e){return[e]}),[bu]),pi(28,671744,null,0,bc,[[3,Cu],[6,Nu],[8,null],[6,vu],[2,gc]],{name:[0,"name"]},null),gi(2048,null,Tu,null,[bc]),pi(30,16384,null,0,Iu,[[4,Tu]],null,null),(e()(),ns(16777216,null,null,1,null,fv)),pi(32,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),rs(33,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),rs(34,0,null,null,1,"button",[["class","btn btn-primary"],["type","submit"]],[[8,"disabled",0]],null,null,null,null)),(e()(),gs(-1,null,["Registrar"])),(e()(),rs(36,0,null,null,4,"p",[],null,null,null,null,null)),(e()(),gs(-1,null,["Si ya dispone de cuenta pulse "])),(e()(),rs(38,0,null,null,2,"a",[["routerLink","/iniciosesion"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==ei(e,39).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r}),null,null)),pi(39,671744,null,0,Kp,[Wp,Od,Na],{routerLink:[0,"routerLink"]},null),(e()(),gs(-1,null,["aqu\xed"]))],(function(e,t){var n=t.component;e(t,4,0,n.registroForm),e(t,13,0,""),e(t,16,0,"email"),e(t,20,0,n.erroresForm.email),e(t,25,0,""),e(t,28,0,"password"),e(t,32,0,n.erroresForm.password),e(t,39,0,"/iniciosesion")}),(function(e,t){var n=t.component;e(t,2,0,ei(t,6).ngClassUntouched,ei(t,6).ngClassTouched,ei(t,6).ngClassPristine,ei(t,6).ngClassDirty,ei(t,6).ngClassValid,ei(t,6).ngClassInvalid,ei(t,6).ngClassPending),e(t,11,0,ei(t,13).required?"":null,ei(t,18).ngClassUntouched,ei(t,18).ngClassTouched,ei(t,18).ngClassPristine,ei(t,18).ngClassDirty,ei(t,18).ngClassValid,ei(t,18).ngClassInvalid,ei(t,18).ngClassPending),e(t,23,0,ei(t,25).required?"":null,ei(t,30).ngClassUntouched,ei(t,30).ngClassTouched,ei(t,30).ngClassPristine,ei(t,30).ngClassDirty,ei(t,30).ngClassValid,ei(t,30).ngClassInvalid,ei(t,30).ngClassPending),e(t,34,0,!n.registroForm.valid),e(t,38,0,ei(t,39).target,ei(t,39).href)}))}function mv(e){return vs(0,[(e()(),rs(0,0,null,null,1,"app-registro",[],null,null,null,gv,dv)),pi(1,114688,null,0,Dc,[Ec,_f,Wp,Od],null,null)],(function(e,t){e(t,1,0)}),null)}var yv=Wr("app-registro",Dc,mv,{},{},[]),vv=rr({encapsulation:0,styles:[[""]],data:{}});function _v(e){return vs(0,[(e()(),rs(0,0,null,null,1,"p",[["class","alert alert-danger"]],null,null,null,null,null)),(e()(),gs(-1,null,[" El usuario o contrase\xf1a no es correcto "]))],null,null)}function bv(e){return vs(0,[(e()(),rs(0,0,null,null,38,"div",[["class","row"]],null,null,null,null,null)),(e()(),rs(1,0,null,null,37,"div",[["class","col-md-6 offset-md-3"]],null,null,null,null,null)),(e()(),rs(2,0,null,null,29,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],(function(e,t,n){var r=!0,i=e.component;return"submit"===t&&(r=!1!==ei(e,4).onSubmit(n)&&r),"reset"===t&&(r=!1!==ei(e,4).onReset()&&r),"ngSubmit"===t&&(r=!1!==i.onSubmit()&&r),r}),null,null)),pi(3,16384,null,0,fc,[],null,null),pi(4,540672,null,0,mc,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),gi(2048,null,Cu,null,[mc]),pi(6,16384,null,0,ku,[[4,Cu]],null,null),(e()(),rs(7,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),gs(-1,null,["Introduzca los siguientes datos:"])),(e()(),rs(9,0,null,null,1,"label",[],null,null,null,null,null)),(e()(),gs(-1,null,["Correo Electr\xf3nico"])),(e()(),rs(11,0,null,null,7,"input",[["autofocus",""],["class","form-control"],["formControlName","email"],["id","inputEmail"],["required",""],["type","email"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,t,n){var r=!0;return"input"===t&&(r=!1!==ei(e,12)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==ei(e,12).onTouched()&&r),"compositionstart"===t&&(r=!1!==ei(e,12)._compositionStart()&&r),"compositionend"===t&&(r=!1!==ei(e,12)._compositionEnd(n.target.value)&&r),r}),null,null)),pi(12,16384,null,0,bu,[yn,dn,[2,_u]],null,null),pi(13,16384,null,0,wc,[],{required:[0,"required"]},null),gi(1024,null,Nu,(function(e){return[e]}),[wc]),gi(1024,null,vu,(function(e){return[e]}),[bu]),pi(16,671744,null,0,bc,[[3,Cu],[6,Nu],[8,null],[6,vu],[2,gc]],{name:[0,"name"]},null),gi(2048,null,Tu,null,[bc]),pi(18,16384,null,0,Iu,[[4,Tu]],null,null),(e()(),rs(19,0,null,null,1,"label",[],null,null,null,null,null)),(e()(),gs(-1,null,["Contrase\xf1a"])),(e()(),rs(21,0,null,null,7,"input",[["class","form-control"],["formControlName","password"],["id","inputPassword"],["required",""],["type","password"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,t,n){var r=!0;return"input"===t&&(r=!1!==ei(e,22)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==ei(e,22).onTouched()&&r),"compositionstart"===t&&(r=!1!==ei(e,22)._compositionStart()&&r),"compositionend"===t&&(r=!1!==ei(e,22)._compositionEnd(n.target.value)&&r),r}),null,null)),pi(22,16384,null,0,bu,[yn,dn,[2,_u]],null,null),pi(23,16384,null,0,wc,[],{required:[0,"required"]},null),gi(1024,null,Nu,(function(e){return[e]}),[wc]),gi(1024,null,vu,(function(e){return[e]}),[bu]),pi(26,671744,null,0,bc,[[3,Cu],[6,Nu],[8,null],[6,vu],[2,gc]],{name:[0,"name"]},null),gi(2048,null,Tu,null,[bc]),pi(28,16384,null,0,Iu,[[4,Tu]],null,null),(e()(),rs(29,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),rs(30,0,null,null,1,"button",[["class","btn btn-primary"],["type","submit"]],[[8,"disabled",0]],null,null,null,null)),(e()(),gs(-1,null,["Inicie sesi\xf3n"])),(e()(),ns(16777216,null,null,1,null,_v)),pi(33,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),rs(34,0,null,null,4,"p",[],null,null,null,null,null)),(e()(),gs(-1,null,["Si no dispone de cuenta pulse "])),(e()(),rs(36,0,null,null,2,"a",[["routerLink","/registro"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==ei(e,37).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r}),null,null)),pi(37,671744,null,0,Kp,[Wp,Od,Na],{routerLink:[0,"routerLink"]},null),(e()(),gs(-1,null,["aqu\xed"]))],(function(e,t){var n=t.component;e(t,4,0,n.loginForm),e(t,13,0,""),e(t,16,0,"email"),e(t,23,0,""),e(t,26,0,"password"),e(t,33,0,n.mensaje),e(t,37,0,"/registro")}),(function(e,t){var n=t.component;e(t,2,0,ei(t,6).ngClassUntouched,ei(t,6).ngClassTouched,ei(t,6).ngClassPristine,ei(t,6).ngClassDirty,ei(t,6).ngClassValid,ei(t,6).ngClassInvalid,ei(t,6).ngClassPending),e(t,11,0,ei(t,13).required?"":null,ei(t,18).ngClassUntouched,ei(t,18).ngClassTouched,ei(t,18).ngClassPristine,ei(t,18).ngClassDirty,ei(t,18).ngClassValid,ei(t,18).ngClassInvalid,ei(t,18).ngClassPending),e(t,21,0,ei(t,23).required?"":null,ei(t,28).ngClassUntouched,ei(t,28).ngClassTouched,ei(t,28).ngClassPristine,ei(t,28).ngClassDirty,ei(t,28).ngClassValid,ei(t,28).ngClassInvalid,ei(t,28).ngClassPending),e(t,30,0,!n.loginForm.valid),e(t,36,0,ei(t,37).target,ei(t,37).href)}))}function wv(e){return vs(0,[(e()(),rs(0,0,null,null,1,"app-inises",[],null,null,null,bv,vv)),pi(1,114688,null,0,Rc,[Ec,_f,Wp,Od],null,null)],(function(e,t){e(t,1,0)}),null)}var Cv=Wr("app-inises",Rc,wv,{},{},[]);class Ev{constructor(e,t,n){this.autService=e,this.router=t,this.activatedRouter=n}ngOnInit(){}isAuth(){return this.autService.isAuthenticated()}onLogout(){this.autService.logout(),window.alert("Has cerrado la sesion"),this.router.navigate(["/inicio"])}}var Tv=rr({encapsulation:0,styles:[["nav[_ngcontent-%COMP%]{margin-bottom:40px}"]],data:{}});function Sv(e){return vs(0,[(e()(),rs(0,0,null,null,7,"li",[["class","nav-item"],["routerLinkActive","active"]],null,null,null,null,null)),pi(1,1720320,null,2,Gp,[Wp,dn,yn,[2,Hp],[2,Kp]],{routerLinkActiveOptions:[0,"routerLinkActiveOptions"],routerLinkActive:[1,"routerLinkActive"]},null),ls(603979776,1,{links:1}),ls(603979776,2,{linksWithHrefs:1}),fs(4,{exact:0}),(e()(),rs(5,0,null,null,2,"a",[["class","nav-link"],["routerLink","/"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==ei(e,6).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r}),null,null)),pi(6,671744,[[2,4]],0,Kp,[Wp,Od,Na],{routerLink:[0,"routerLink"]},null),(e()(),gs(-1,null,["Inicio"]))],(function(e,t){var n=e(t,4,0,!0);e(t,1,0,n,"active"),e(t,6,0,"/")}),(function(e,t){e(t,5,0,ei(t,6).target,ei(t,6).href)}))}function Iv(e){return vs(0,[(e()(),rs(0,0,null,null,6,"li",[["class","nav-item"],["routerLinkActive","active"]],null,null,null,null,null)),pi(1,1720320,null,2,Gp,[Wp,dn,yn,[2,Hp],[2,Kp]],{routerLinkActive:[0,"routerLinkActive"]},null),ls(603979776,3,{links:1}),ls(603979776,4,{linksWithHrefs:1}),(e()(),rs(4,0,null,null,2,"a",[["class","nav-link"],["routerLink","/proveedores"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==ei(e,5).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r}),null,null)),pi(5,671744,[[4,4]],0,Kp,[Wp,Od,Na],{routerLink:[0,"routerLink"]},null),(e()(),gs(-1,null,["Proveedores"]))],(function(e,t){e(t,1,0,"active"),e(t,5,0,"/proveedores")}),(function(e,t){e(t,4,0,ei(t,5).target,ei(t,5).href)}))}function kv(e){return vs(0,[(e()(),rs(0,0,null,null,6,"li",[["class","nav-item"],["routerLinkActive","active"]],null,null,null,null,null)),pi(1,1720320,null,2,Gp,[Wp,dn,yn,[2,Hp],[2,Kp]],{routerLinkActive:[0,"routerLinkActive"]},null),ls(603979776,5,{links:1}),ls(603979776,6,{linksWithHrefs:1}),(e()(),rs(4,0,null,null,2,"a",[["class","nav-link"],["routerLink","/presupuestos"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==ei(e,5).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r}),null,null)),pi(5,671744,[[6,4]],0,Kp,[Wp,Od,Na],{routerLink:[0,"routerLink"]},null),(e()(),gs(-1,null,["Presupuestos "]))],(function(e,t){e(t,1,0,"active"),e(t,5,0,"/presupuestos")}),(function(e,t){e(t,4,0,ei(t,5).target,ei(t,5).href)}))}function Av(e){return vs(0,[(e()(),rs(0,0,null,null,6,"li",[["class","nav-item"],["routerLinkActive","active"]],null,null,null,null,null)),pi(1,1720320,null,2,Gp,[Wp,dn,yn,[2,Hp],[2,Kp]],{routerLinkActive:[0,"routerLinkActive"]},null),ls(603979776,7,{links:1}),ls(603979776,8,{linksWithHrefs:1}),(e()(),rs(4,0,null,null,2,"a",[["class","nav-link"],["routerLink","/registro"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==ei(e,5).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r}),null,null)),pi(5,671744,[[8,4]],0,Kp,[Wp,Od,Na],{routerLink:[0,"routerLink"]},null),(e()(),gs(-1,null,["Registro "]))],(function(e,t){e(t,1,0,"active"),e(t,5,0,"/registro")}),(function(e,t){e(t,4,0,ei(t,5).target,ei(t,5).href)}))}function Nv(e){return vs(0,[(e()(),rs(0,0,null,null,3,"li",[["class","nav-item"]],null,null,null,null,null)),(e()(),rs(1,0,null,null,2,"button",[["class","btn btn-primary float-md-right"],["routerLink","/iniciosesion"]],null,[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==ei(e,2).onClick()&&r),r}),null,null)),pi(2,16384,null,0,Hp,[Wp,Od,[8,null],yn,dn],{routerLink:[0,"routerLink"]},null),(e()(),gs(-1,null,["Inicie sesi\xf3n"]))],(function(e,t){e(t,2,0,"/iniciosesion")}),null)}function Dv(e){return vs(0,[(e()(),rs(0,0,null,null,2,"li",[["class","nav-item"]],null,null,null,null,null)),(e()(),rs(1,0,null,null,1,"button",[["class","btn btn-primary float-md-right"]],null,[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.onLogout()&&r),r}),null,null)),(e()(),gs(-1,null,["Cerrar sesi\xf3n"]))],null,null)}function Rv(e){return vs(0,[(e()(),rs(0,0,null,null,18,"nav",[["class","navbar navbar-expand-lg navbar-light bg-light"]],null,null,null,null,null)),(e()(),rs(1,0,null,null,1,"a",[["class","navbar-brand"],["href","#"]],null,null,null,null,null)),(e()(),gs(-1,null,["Compras App"])),(e()(),rs(3,0,null,null,1,"button",[["aria-controls","navbarNavAltMarkup"],["aria-expanded","false"],["aria-label","Toggle navigation"],["class","navbar-toggler"],["data-target","#navbarNavAltMarkup"],["data-toggle","collapse"],["type","button"]],null,null,null,null,null)),(e()(),rs(4,0,null,null,0,"span",[["class","navbar-toggler-icon"]],null,null,null,null,null)),(e()(),rs(5,0,null,null,13,"div",[["class","collapse navbar-collapse"],["id","navbarNavAltMarkup"]],null,null,null,null,null)),(e()(),rs(6,0,null,null,12,"ul",[["class","navbar-nav mr-auto w-100 justify-content-end"]],null,null,null,null,null)),(e()(),ns(16777216,null,null,1,null,Sv)),pi(8,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),ns(16777216,null,null,1,null,Iv)),pi(10,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),ns(16777216,null,null,1,null,kv)),pi(12,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),ns(16777216,null,null,1,null,Av)),pi(14,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),ns(16777216,null,null,1,null,Nv)),pi(16,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null),(e()(),ns(16777216,null,null,1,null,Dv)),pi(18,16384,null,0,Ha,[Un,Ln],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,8,0,n.isAuth()),e(t,10,0,n.isAuth()),e(t,12,0,n.isAuth()),e(t,14,0,n.isAuth()),e(t,16,0,!n.isAuth()),e(t,18,0,n.isAuth())}),null)}var Ov=rr({encapsulation:0,styles:[[""]],data:{}});function Pv(e){return vs(0,[(e()(),rs(0,0,null,null,1,"app-header",[],null,null,null,Rv,Tv)),pi(1,114688,null,0,Ev,[_f,Wp,Od],null,null),(e()(),rs(2,0,null,null,2,"div",[["class","container"]],null,null,null,null,null)),(e()(),rs(3,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),pi(4,212992,null,0,Yp,[$p,Un,ln,[8,null],Ot],null,null)],(function(e,t){e(t,1,0),e(t,4,0)}),null)}function xv(e){return vs(0,[(e()(),rs(0,0,null,null,1,"app-root",[],null,null,null,Pv,Ov)),pi(1,114688,null,0,Ef,[],null,null)],(function(e,t){e(t,1,0)}),null)}var Mv=Wr("app-root",Ef,xv,{},{},[]);class Lv{}class Fv{}const Uv="*";function Vv(e,t=null){return{type:2,steps:e,options:t}}function jv(e){return{type:6,styles:e,offset:null}}function qv(e){Promise.resolve(null).then(e)}class Bv{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){qv(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){}setPosition(e){}getPosition(){return 0}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}}class Wv{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,n=0,r=0;const i=this.players.length;0==i?qv(()=>this._onFinish()):this.players.forEach(e=>{e.onDone(()=>{++t==i&&this._onFinish()}),e.onDestroy(()=>{++n==i&&this._onDestroy()}),e.onStart(()=>{++r==i&&this._onStart()})}),this.totalTime=this.players.reduce((e,t)=>Math.max(e,t.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(e=>{const n=e.totalTime?Math.min(1,t/e.totalTime):1;e.setPosition(n)})}getPosition(){let e=0;return this.players.forEach(t=>{const n=t.getPosition();e=Math.min(n,e)}),e}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}}const Hv="!";function Kv(){return"undefined"!=typeof process}function zv(e){switch(e.length){case 0:return new Bv;case 1:return e[0];default:return new Wv(e)}}function Gv(e,t,n,r,i={},o={}){const s=[],a=[];let l=-1,u=null;if(r.forEach(e=>{const n=e.offset,r=n==l,c=r&&u||{};Object.keys(e).forEach(n=>{let r=n,a=e[n];if("offset"!==n)switch(r=t.normalizePropertyName(r,s),a){case Hv:a=i[n];break;case Uv:a=o[n];break;default:a=t.normalizeStyleValue(n,r,a,s)}c[r]=a}),r||a.push(c),u=c,l=n}),s.length){const e="\n - ";throw new Error(`Unable to animate due to the following errors:${e}${s.join(e)}`)}return a}function Qv(e,t,n,r){switch(t){case"start":e.onStart(()=>r(n&&$v(n,"start",e)));break;case"done":e.onDone(()=>r(n&&$v(n,"done",e)));break;case"destroy":e.onDestroy(()=>r(n&&$v(n,"destroy",e)))}}function $v(e,t,n){const r=n.totalTime,i=Yv(e.element,e.triggerName,e.fromState,e.toState,t||e.phaseName,null==r?e.totalTime:r,!!n.disabled),o=e._data;return null!=o&&(i._data=o),i}function Yv(e,t,n,r,i="",o=0,s){return{element:e,triggerName:t,fromState:n,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function Xv(e,t,n){let r;return e instanceof Map?(r=e.get(t))||e.set(t,r=n):(r=e[t])||(r=e[t]=n),r}function Jv(e){const t=e.indexOf(":");return[e.substring(1,t),e.substr(t+1)]}let Zv=(e,t)=>!1,e_=(e,t)=>!1,t_=(e,t,n)=>[];const n_=Kv();(n_||"undefined"!=typeof Element)&&(Zv=(e,t)=>e.contains(t),e_=(()=>{if(n_||Element.prototype.matches)return(e,t)=>e.matches(t);{const e=Element.prototype,t=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector;return t?(e,n)=>t.apply(e,[n]):e_}})(),t_=(e,t,n)=>{let r=[];if(n)r.push(...e.querySelectorAll(t));else{const n=e.querySelector(t);n&&r.push(n)}return r});let r_=null,i_=!1;function o_(e){r_||(r_=("undefined"!=typeof document?document.body:null)||{},i_=!!r_.style&&"WebkitAppearance"in r_.style);let t=!0;return r_.style&&!function(e){return"ebkit"==e.substring(1,6)}(e)&&!(t=e in r_.style)&&i_&&(t="Webkit"+e.charAt(0).toUpperCase()+e.substr(1)in r_.style),t}const s_=e_,a_=Zv,l_=t_;function u_(e){const t={};return Object.keys(e).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");t[r]=e[n]}),t}class c_{validateStyleProperty(e){return o_(e)}matchesElement(e,t){return s_(e,t)}containsElement(e,t){return a_(e,t)}query(e,t,n){return l_(e,t,n)}computeStyle(e,t,n){return n||""}animate(e,t,n,r,i,o=[],s){return new Bv(n,r)}}let h_=(()=>{class e{}return e.NOOP=new c_,e})();const d_=1e3,p_="{{",f_="ng-enter",g_="ng-leave",m_="ng-trigger",y_=".ng-trigger",v_="ng-animating",__=".ng-animating";function b_(e){if("number"==typeof e)return e;const t=e.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:w_(parseFloat(t[1]),t[2])}function w_(e,t){switch(t){case"s":return e*d_;default:return e}}function C_(e,t,n){return e.hasOwnProperty("duration")?e:function(e,t,n){let r,i=0,o="";if("string"==typeof e){const n=e.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return t.push(`The provided timing value "${e}" is invalid.`),{duration:0,delay:0,easing:""};r=w_(parseFloat(n[1]),n[2]);const s=n[3];null!=s&&(i=w_(parseFloat(s),n[4]));const a=n[5];a&&(o=a)}else r=e;if(!n){let n=!1,o=t.length;r<0&&(t.push("Duration values below 0 are not allowed for this animation step."),n=!0),i<0&&(t.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&t.splice(o,0,`The provided timing value "${e}" is invalid.`)}return{duration:r,delay:i,easing:o}}(e,t,n)}function E_(e,t={}){return Object.keys(e).forEach(n=>{t[n]=e[n]}),t}function T_(e,t,n={}){if(t)for(let r in e)n[r]=e[r];else E_(e,n);return n}function S_(e,t,n){return n?t+":"+n+";":""}function I_(e){let t="";for(let n=0;n<e.style.length;n++){const r=e.style.item(n);t+=S_(0,r,e.style.getPropertyValue(r))}for(const n in e.style)e.style.hasOwnProperty(n)&&!n.startsWith("_")&&(t+=S_(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),e.style[n]));e.setAttribute("style",t)}function k_(e,t,n){e.style&&(Object.keys(t).forEach(r=>{const i=M_(r);n&&!n.hasOwnProperty(r)&&(n[r]=e.style[i]),e.style[i]=t[r]}),Kv()&&I_(e))}function A_(e,t){e.style&&(Object.keys(t).forEach(t=>{const n=M_(t);e.style[n]=""}),Kv()&&I_(e))}function N_(e){return Array.isArray(e)?1==e.length?e[0]:Vv(e):e}const D_=new RegExp(`${p_}\\s*(.+?)\\s*}}`,"g");function R_(e){let t=[];if("string"==typeof e){const n=e.toString();let r;for(;r=D_.exec(n);)t.push(r[1]);D_.lastIndex=0}return t}function O_(e,t,n){const r=e.toString(),i=r.replace(D_,(e,r)=>{let i=t[r];return t.hasOwnProperty(r)||(n.push(`Please provide a value for the animation param ${r}`),i=""),i.toString()});return i==r?e:i}function P_(e){const t=[];let n=e.next();for(;!n.done;)t.push(n.value),n=e.next();return t}const x_=/-+([a-z0-9])/g;function M_(e){return e.replace(x_,(...e)=>e[1].toUpperCase())}function L_(e,t){return 0===e||0===t}function F_(e,t,n){const r=Object.keys(n);if(r.length&&t.length){let o=t[0],s=[];if(r.forEach(e=>{o.hasOwnProperty(e)||s.push(e),o[e]=n[e]}),s.length)for(var i=1;i<t.length;i++){let n=t[i];s.forEach((function(t){n[t]=V_(e,t)}))}}return t}function U_(e,t,n){switch(t.type){case 7:return e.visitTrigger(t,n);case 0:return e.visitState(t,n);case 1:return e.visitTransition(t,n);case 2:return e.visitSequence(t,n);case 3:return e.visitGroup(t,n);case 4:return e.visitAnimate(t,n);case 5:return e.visitKeyframes(t,n);case 6:return e.visitStyle(t,n);case 8:return e.visitReference(t,n);case 9:return e.visitAnimateChild(t,n);case 10:return e.visitAnimateRef(t,n);case 11:return e.visitQuery(t,n);case 12:return e.visitStagger(t,n);default:throw new Error(`Unable to resolve animation metadata node #${t.type}`)}}function V_(e,t){return window.getComputedStyle(e)[t]}const j_="*";function q_(e,t){const n=[];return"string"==typeof e?e.split(/\s*,\s*/).forEach(e=>(function(e,t,n){if(":"==e[0]){const r=function(e,t){switch(e){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,t)=>parseFloat(t)>parseFloat(e);case":decrement":return(e,t)=>parseFloat(t)<parseFloat(e);default:return t.push(`The transition alias value "${e}" is not supported`),"* => *"}}(e,n);if("function"==typeof r)return void t.push(r);e=r}const r=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${e}" is not supported`),t;const i=r[1],o=r[2],s=r[3];t.push(H_(i,s)),"<"!=o[0]||i==j_&&s==j_||t.push(H_(s,i))})(e,n,t)):n.push(e),n}const B_=new Set(["true","1"]),W_=new Set(["false","0"]);function H_(e,t){const n=B_.has(e)||W_.has(e),r=B_.has(t)||W_.has(t);return(i,o)=>{let s=e==j_||e==i,a=t==j_||t==o;return!s&&n&&"boolean"==typeof i&&(s=i?B_.has(e):W_.has(e)),!a&&r&&"boolean"==typeof o&&(a=o?B_.has(t):W_.has(t)),s&&a}}const K_=":self",z_=new RegExp(`s*${K_}s*,?`,"g");function G_(e,t,n){return new $_(e).build(t,n)}const Q_="";class $_{constructor(e){this._driver=e}build(e,t){const n=new Y_(t);return this._resetContextStyleTimingState(n),U_(this,N_(e),n)}_resetContextStyleTimingState(e){e.currentQuerySelector=Q_,e.collectedStyles={},e.collectedStyles[Q_]={},e.currentTime=0}visitTrigger(e,t){let n=t.queryCount=0,r=t.depCount=0;const i=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(e=>{if(this._resetContextStyleTimingState(t),0==e.type){const n=e,r=n.name;r.toString().split(/\s*,\s*/).forEach(e=>{n.name=e,i.push(this.visitState(n,t))}),n.name=r}else if(1==e.type){const i=this.visitTransition(e,t);n+=i.queryCount,r+=i.depCount,o.push(i)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:i,transitions:o,queryCount:n,depCount:r,options:null}}visitState(e,t){const n=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(n.containsDynamicStyles){const i=new Set,o=r||{};if(n.styles.forEach(e=>{if(X_(e)){const t=e;Object.keys(t).forEach(e=>{R_(t[e]).forEach(e=>{o.hasOwnProperty(e)||i.add(e)})})}}),i.size){const n=P_(i.values());t.errors.push(`state("${e.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:e.name,style:n,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const n=U_(this,N_(e.animation),t);return{type:1,matchers:q_(e.expr,t.errors),animation:n,queryCount:t.queryCount,depCount:t.depCount,options:J_(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(e=>U_(this,e,t)),options:J_(e.options)}}visitGroup(e,t){const n=t.currentTime;let r=0;const i=e.steps.map(e=>{t.currentTime=n;const i=U_(this,e,t);return r=Math.max(r,t.currentTime),i});return t.currentTime=r,{type:3,steps:i,options:J_(e.options)}}visitAnimate(e,t){const n=function(e,t){let n=null;if(e.hasOwnProperty("duration"))n=e;else if("number"==typeof e)return Z_(C_(e,t).duration,0,"");const r=e;if(r.split(/\s+/).some(e=>"{"==e.charAt(0)&&"{"==e.charAt(1))){const e=Z_(0,0,"");return e.dynamic=!0,e.strValue=r,e}return Z_((n=n||C_(r,t)).duration,n.delay,n.easing)}(e.timings,t.errors);let r;t.currentAnimateTimings=n;let i=e.styles?e.styles:jv({});if(5==i.type)r=this.visitKeyframes(i,t);else{let i=e.styles,o=!1;if(!i){o=!0;const e={};n.easing&&(e.easing=n.easing),i=jv(e)}t.currentTime+=n.duration+n.delay;const s=this.visitStyle(i,t);s.isEmptyStep=o,r=s}return t.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(e,t){const n=this._makeStyleAst(e,t);return this._validateStyleAst(n,t),n}_makeStyleAst(e,t){const n=[];Array.isArray(e.styles)?e.styles.forEach(e=>{"string"==typeof e?e==Uv?n.push(e):t.errors.push(`The provided style string value ${e} is not allowed.`):n.push(e)}):n.push(e.styles);let r=!1,i=null;return n.forEach(e=>{if(X_(e)){const t=e,n=t.easing;if(n&&(i=n,delete t.easing),!r)for(let e in t)if(t[e].toString().indexOf(p_)>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:e.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(e,t){const n=t.currentAnimateTimings;let r=t.currentTime,i=t.currentTime;n&&i>0&&(i-=n.duration+n.delay),e.styles.forEach(e=>{"string"!=typeof e&&Object.keys(e).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void t.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const o=t.collectedStyles[t.currentQuerySelector],s=o[n];let a=!0;s&&(i!=r&&i>=s.startTime&&r<=s.endTime&&(t.errors.push(`The CSS property "${n}" that exists between the times of "${s.startTime}ms" and "${s.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${r}ms"`),a=!1),i=s.startTime),a&&(o[n]={startTime:i,endTime:r}),t.options&&function(e,t,n){const r=t.params||{},i=R_(e);i.length&&i.forEach(e=>{r.hasOwnProperty(e)||n.push(`Unable to resolve the local animation param ${e} in the given list of values`)})}(e[n],t.options,t.errors)})})}visitKeyframes(e,t){const n={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const i=[];let o=!1,s=!1,a=0;const l=e.steps.map(e=>{const n=this._makeStyleAst(e,t);let l=null!=n.offset?n.offset:function(e){if("string"==typeof e)return null;let t=null;if(Array.isArray(e))e.forEach(e=>{if(X_(e)&&e.hasOwnProperty("offset")){const n=e;t=parseFloat(n.offset),delete n.offset}});else if(X_(e)&&e.hasOwnProperty("offset")){const n=e;t=parseFloat(n.offset),delete n.offset}return t}(n.styles),u=0;return null!=l&&(r++,u=n.offset=l),s=s||u<0||u>1,o=o||u<a,a=u,i.push(u),n});s&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),o&&t.errors.push("Please ensure that all keyframe offsets are in order");const u=e.steps.length;let c=0;r>0&&r<u?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(c=1/(u-1));const h=u-1,d=t.currentTime,p=t.currentAnimateTimings,f=p.duration;return l.forEach((e,r)=>{const o=c>0?r==h?1:c*r:i[r],s=o*f;t.currentTime=d+p.delay+s,p.duration=s,this._validateStyleAst(e,t),e.offset=o,n.styles.push(e)}),n}visitReference(e,t){return{type:8,animation:U_(this,N_(e.animation),t),options:J_(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:J_(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:J_(e.options)}}visitQuery(e,t){const n=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[i,o]=function(e){const t=!!e.split(/\s*,\s*/).find(e=>e==K_);return t&&(e=e.replace(z_,"")),[e=e.replace(/@\*/g,y_).replace(/@\w+/g,e=>y_+"-"+e.substr(1)).replace(/:animating/g,__),t]}(e.selector);t.currentQuerySelector=n.length?n+" "+i:i,Xv(t.collectedStyles,t.currentQuerySelector,{});const s=U_(this,N_(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=n,{type:11,selector:i,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:s,originalSelector:e.selector,options:J_(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");const n="full"===e.timings?{duration:0,delay:0,easing:"full"}:C_(e.timings,t.errors,!0);return{type:12,animation:U_(this,N_(e.animation),t),timings:n,options:null}}}class Y_{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function X_(e){return!Array.isArray(e)&&"object"==typeof e}function J_(e){var t;return e?(e=E_(e)).params&&(e.params=(t=e.params)?E_(t):null):e={},e}function Z_(e,t,n){return{duration:e,delay:t,easing:n}}function eb(e,t,n,r,i,o,s=null,a=!1){return{type:1,element:e,keyframes:t,preStyleProps:n,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}class tb{constructor(){this._map=new Map}consume(e){let t=this._map.get(e);return t?this._map.delete(e):t=[],t}append(e,t){let n=this._map.get(e);n||this._map.set(e,n=[]),n.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const nb=1,rb=new RegExp(":enter","g"),ib=new RegExp(":leave","g");function ob(e,t,n,r,i,o={},s={},a,l,u=[]){return(new sb).buildKeyframes(e,t,n,r,i,o,s,a,l,u)}class sb{buildKeyframes(e,t,n,r,i,o,s,a,l,u=[]){l=l||new tb;const c=new lb(e,t,l,r,i,u,[]);c.options=a,c.currentTimeline.setStyles([o],null,c.errors,a),U_(this,n,c);const h=c.timelines.filter(e=>e.containsAnimation());if(h.length&&Object.keys(s).length){const e=h[h.length-1];e.allowOnlyTimelineStyles()||e.setStyles([s],null,c.errors,a)}return h.length?h.map(e=>e.buildKeyframes()):[eb(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const n=t.subInstructions.consume(t.element);if(n){const r=t.createSubContext(e.options),i=t.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);i!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const n=t.createSubContext(e.options);n.transformIntoNewTimeline(),this.visitReference(e.animation,n),t.transformIntoNewTimeline(n.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,n){let r=t.currentTimeline.currentTime;const i=null!=n.duration?b_(n.duration):null,o=null!=n.delay?b_(n.delay):null;return 0!==i&&e.forEach(e=>{const n=t.appendInstructionToTimeline(e,i,o);r=Math.max(r,n.duration+n.delay)}),r}visitReference(e,t){t.updateOptions(e.options,!0),U_(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const n=t.subContextCount;let r=t;const i=e.options;if(i&&(i.params||i.delay)&&((r=t.createSubContext(i)).transformIntoNewTimeline(),null!=i.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=ab);const e=b_(i.delay);r.delayNextStep(e)}e.steps.length&&(e.steps.forEach(e=>U_(this,e,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const n=[];let r=t.currentTimeline.currentTime;const i=e.options&&e.options.delay?b_(e.options.delay):0;e.steps.forEach(o=>{const s=t.createSubContext(e.options);i&&s.delayNextStep(i),U_(this,o,s),r=Math.max(r,s.currentTimeline.currentTime),n.push(s.currentTimeline)}),n.forEach(e=>t.currentTimeline.mergeTimelineCollectedStyles(e)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const n=e.strValue;return C_(t.params?O_(n,t.params,t.errors):n,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const n=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;n.delay&&(t.incrementTime(n.delay),r.snapshotCurrentStyles());const i=e.style;5==i.type?this.visitKeyframes(i,t):(t.incrementTime(n.duration),this.visitStyle(i,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const n=t.currentTimeline,r=t.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const i=r&&r.easing||e.easing;e.isEmptyStep?n.applyEmptyStep(i):n.setStyles(e.styles,i,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const n=t.currentAnimateTimings,r=t.currentTimeline.duration,i=n.duration,o=t.createSubContext().currentTimeline;o.easing=n.easing,e.styles.forEach(e=>{o.forwardTime((e.offset||0)*i),o.setStyles(e.styles,e.easing,t.errors,t.options),o.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(o),t.transformIntoNewTimeline(r+i),t.previousNode=e}visitQuery(e,t){const n=t.currentTimeline.currentTime,r=e.options||{},i=r.delay?b_(r.delay):0;i&&(6===t.previousNode.type||0==n&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=ab);let o=n;const s=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=s.length;let a=null;s.forEach((n,r)=>{t.currentQueryIndex=r;const s=t.createSubContext(e.options,n);i&&s.delayNextStep(i),n===t.element&&(a=s.currentTimeline),U_(this,e.animation,s),s.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,s.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),a&&(t.currentTimeline.mergeTimelineCollectedStyles(a),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const n=t.parentContext,r=t.currentTimeline,i=e.timings,o=Math.abs(i.duration),s=o*(t.currentQueryTotal-1);let a=o*t.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=s-a;break;case"full":a=n.currentStaggerTime}const l=t.currentTimeline;a&&l.delayNextStep(a);const u=l.currentTime;U_(this,e.animation,t),t.previousNode=e,n.currentStaggerTime=r.currentTime-u+(r.startTime-n.currentTimeline.startTime)}}const ab={};class lb{constructor(e,t,n,r,i,o,s,a){this._driver=e,this.element=t,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=o,this.timelines=s,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=ab,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new ub(this._driver,t,0),s.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const n=e;let r=this.options;null!=n.duration&&(r.duration=b_(n.duration)),null!=n.delay&&(r.delay=b_(n.delay));const i=n.params;if(i){let e=r.params;e||(e=this.options.params={}),Object.keys(i).forEach(n=>{t&&e.hasOwnProperty(n)||(e[n]=O_(i[n],e,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const n=e.params={};Object.keys(t).forEach(e=>{n[e]=t[e]})}}return e}createSubContext(e=null,t,n){const r=t||this.element,i=new lb(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(e),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(e){return this.previousNode=ab,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,n){const r={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+e.delay,easing:""},i=new cb(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(i),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,n,r,i,o){let s=[];if(r&&s.push(this.element),e.length>0){e=(e=e.replace(rb,"."+this._enterClassName)).replace(ib,"."+this._leaveClassName);let t=this._driver.query(this.element,e,1!=n);0!==n&&(t=n<0?t.slice(t.length+n,t.length):t.slice(0,n)),s.push(...t)}return i||0!=s.length||o.push(`\`query("${t}")\` returned zero elements. (Use \`query("${t}", { optional: true })\` if you wish to allow this.)`),s}}class ub{constructor(e,t,n,r){this._driver=e,this.element=t,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new ub(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=nb,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(e=>{this._backFill[e]=this._globalTimelineStyles[e]||Uv,this._currentKeyframe[e]=Uv}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,n,r){t&&(this._previousKeyframe.easing=t);const i=r&&r.params||{},o=function(e,t){const n={};let r;return e.forEach(e=>{"*"===e?(r=r||Object.keys(t)).forEach(e=>{n[e]=Uv}):T_(e,!1,n)}),n}(e,this._globalTimelineStyles);Object.keys(o).forEach(e=>{const t=O_(o[e],i,n);this._pendingStyles[e]=t,this._localTimelineStyles.hasOwnProperty(e)||(this._backFill[e]=this._globalTimelineStyles.hasOwnProperty(e)?this._globalTimelineStyles[e]:Uv),this._updateStyle(e,t)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(t=>{this._currentKeyframe[t]=e[t]}),Object.keys(this._localTimelineStyles).forEach(e=>{this._currentKeyframe.hasOwnProperty(e)||(this._currentKeyframe[e]=this._localTimelineStyles[e])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const n=this._styleSummary[t],r=e._styleSummary[t];(!n||r.time>n.time)&&this._updateStyle(t,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((i,o)=>{const s=T_(i,!0);Object.keys(s).forEach(n=>{const r=s[n];r==Hv?e.add(n):r==Uv&&t.add(n)}),n||(s.offset=o/this.duration),r.push(s)});const i=e.size?P_(e.values()):[],o=t.size?P_(t.values()):[];if(n){const e=r[0],t=E_(e);e.offset=0,t.offset=1,r=[e,t]}return eb(this.element,r,i,o,this.duration,this.startTime,this.easing,!1)}}class cb extends ub{constructor(e,t,n,r,i,o,s=!1){super(e,t,o.delay),this.element=t,this.keyframes=n,this.preStyleProps=r,this.postStyleProps=i,this._stretchStartingKeyframe=s,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const i=[],o=n+t,s=t/o,a=T_(e[0],!1);a.offset=0,i.push(a);const l=T_(e[0],!1);l.offset=hb(s),i.push(l);const u=e.length-1;for(let r=1;r<=u;r++){let s=T_(e[r],!1);s.offset=hb((t+s.offset*n)/o),i.push(s)}n=o,t=0,r="",e=i}return eb(this.element,e,this.preStyleProps,this.postStyleProps,n,t,r,!0)}}function hb(e,t=3){const n=Math.pow(10,t-1);return Math.round(e*n)/n}class db{}class pb extends db{normalizePropertyName(e,t){return M_(e)}normalizeStyleValue(e,t,n,r){let i="";const o=n.toString().trim();if(fb[t]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{const t=n.match(/^[+-]?[\d\.]+([a-z]*)$/);t&&0==t[1].length&&r.push(`Please provide a CSS unit value for ${e}:${n}`)}return o+i}}const fb=(()=>(function(e){const t={};return e.forEach(e=>t[e]=!0),t})("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function gb(e,t,n,r,i,o,s,a,l,u,c,h,d){return{type:0,element:e,triggerName:t,isRemovalTransition:i,fromState:n,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:l,preStyleProps:u,postStyleProps:c,totalTime:h,errors:d}}const mb={};class yb{constructor(e,t,n){this._triggerName=e,this.ast=t,this._stateStyles=n}match(e,t,n,r){return function(e,t,n,r,i){return e.some(e=>e(t,n,r,i))}(this.ast.matchers,e,t,n,r)}buildStyles(e,t,n){const r=this._stateStyles["*"],i=this._stateStyles[e],o=r?r.buildStyles(t,n):{};return i?i.buildStyles(t,n):o}build(e,t,n,r,i,o,s,a,l,u){const c=[],h=this.ast.options&&this.ast.options.params||mb,d=this.buildStyles(n,s&&s.params||mb,c),p=a&&a.params||mb,f=this.buildStyles(r,p,c),g=new Set,m=new Map,y=new Map,v="void"===r,_={params:Object.assign({},h,p)},b=u?[]:ob(e,t,this.ast.animation,i,o,d,f,_,l,c);let w=0;if(b.forEach(e=>{w=Math.max(e.duration+e.delay,w)}),c.length)return gb(t,this._triggerName,n,r,v,d,f,[],[],m,y,w,c);b.forEach(e=>{const n=e.element,r=Xv(m,n,{});e.preStyleProps.forEach(e=>r[e]=!0);const i=Xv(y,n,{});e.postStyleProps.forEach(e=>i[e]=!0),n!==t&&g.add(n)});const C=P_(g.values());return gb(t,this._triggerName,n,r,v,d,f,b,C,m,y,w)}}class vb{constructor(e,t){this.styles=e,this.defaultParams=t}buildStyles(e,t){const n={},r=E_(this.defaultParams);return Object.keys(e).forEach(t=>{const n=e[t];null!=n&&(r[t]=n)}),this.styles.styles.forEach(e=>{if("string"!=typeof e){const i=e;Object.keys(i).forEach(e=>{let o=i[e];o.length>1&&(o=O_(o,r,t)),n[e]=o})}}),n}}class _b{constructor(e,t){this.name=e,this.ast=t,this.transitionFactories=[],this.states={},t.states.forEach(e=>{this.states[e.name]=new vb(e.style,e.options&&e.options.params||{})}),bb(this.states,"true","1"),bb(this.states,"false","0"),t.transitions.forEach(t=>{this.transitionFactories.push(new yb(e,t,this.states))}),this.fallbackTransition=new yb(e,{type:1,animation:{type:2,steps:[],options:null},matchers:[(e,t)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,n,r){return this.transitionFactories.find(i=>i.match(e,t,n,r))||null}matchStyles(e,t,n){return this.fallbackTransition.buildStyles(e,t,n)}}function bb(e,t,n){e.hasOwnProperty(t)?e.hasOwnProperty(n)||(e[n]=e[t]):e.hasOwnProperty(n)&&(e[t]=e[n])}const wb=new tb;class Cb{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(e,t){const n=[],r=G_(this._driver,t,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[e]=r}_buildPlayer(e,t,n){const r=e.element,i=Gv(0,this._normalizer,0,e.keyframes,t,n);return this._driver.animate(r,i,e.duration,e.delay,e.easing,[],!0)}create(e,t,n={}){const r=[],i=this._animations[e];let o;const s=new Map;if(i?(o=ob(this._driver,t,i,f_,g_,{},{},n,wb,r)).forEach(e=>{const t=Xv(s,e.element,{});e.postStyleProps.forEach(e=>t[e]=null)}):(r.push("The requested animation doesn't exist or has already been destroyed"),o=[]),r.length)throw new Error(`Unable to create the animation due to the following errors: ${r.join("\n")}`);s.forEach((e,t)=>{Object.keys(e).forEach(n=>{e[n]=this._driver.computeStyle(t,n,Uv)})});const a=zv(o.map(e=>{const t=s.get(e.element);return this._buildPlayer(e,{},t)}));return this._playersById[e]=a,a.onDestroy(()=>this.destroy(e)),this.players.push(a),a}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const n=this.players.indexOf(t);n>=0&&this.players.splice(n,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw new Error(`Unable to find the timeline player referenced by ${e}`);return t}listen(e,t,n,r){const i=Yv(t,"","","");return Qv(this._getPlayer(e),n,i,r),()=>{}}command(e,t,n,r){if("register"==n)return void this.register(e,r[0]);if("create"==n)return void this.create(e,t,r[0]||{});const i=this._getPlayer(e);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const Eb="ng-animate-queued",Tb=".ng-animate-queued",Sb="ng-animate-disabled",Ib=".ng-animate-disabled",kb="ng-star-inserted",Ab=".ng-star-inserted",Nb=[],Db={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Rb={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ob="__ng_removed";class Pb{constructor(e,t=""){this.namespaceId=t;const n=e&&e.hasOwnProperty("value");if(this.value=null!=(r=n?e.value:e)?r:null,n){const t=E_(e);delete t.value,this.options=t}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const e=this.options.params;Object.keys(t).forEach(n=>{null==e[n]&&(e[n]=t[n])})}}}const xb="void",Mb=new Pb(xb);class Lb{constructor(e,t,n){this.id=e,this.hostElement=t,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Hb(t,this._hostClassName)}listen(e,t,n,r){if(!this._triggers.hasOwnProperty(t))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${t}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${t}" because the provided event is undefined!`);if("start"!=(i=n)&&"done"!=i)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${t}" is not supported!`);var i;const o=Xv(this._elementListeners,e,[]),s={name:t,phase:n,callback:r};o.push(s);const a=Xv(this._engine.statesByElement,e,{});return a.hasOwnProperty(t)||(Hb(e,m_),Hb(e,m_+"-"+t),a[t]=Mb),()=>{this._engine.afterFlush(()=>{const e=o.indexOf(s);e>=0&&o.splice(e,1),this._triggers[t]||delete a[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw new Error(`The provided animation trigger "${e}" has not been registered!`);return t}trigger(e,t,n,r=!0){const i=this._getTrigger(t),o=new Ub(this.id,t,e);let s=this._engine.statesByElement.get(e);s||(Hb(e,m_),Hb(e,m_+"-"+t),this._engine.statesByElement.set(e,s={}));let a=s[t];const l=new Pb(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&l.absorbOptions(a.options),s[t]=l,a||(a=Mb),l.value!==xb&&a.value===l.value){if(!function(e,t){const n=Object.keys(e),r=Object.keys(t);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const r=n[i];if(!t.hasOwnProperty(r)||e[r]!==t[r])return!1}return!0}(a.params,l.params)){const t=[],n=i.matchStyles(a.value,a.params,t),r=i.matchStyles(l.value,l.params,t);t.length?this._engine.reportError(t):this._engine.afterFlush(()=>{A_(e,n),k_(e,r)})}return}const u=Xv(this._engine.playersByElement,e,[]);u.forEach(e=>{e.namespaceId==this.id&&e.triggerName==t&&e.queued&&e.destroy()});let c=i.matchTransition(a.value,l.value,e,l.params),h=!1;if(!c){if(!r)return;c=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:c,fromState:a,toState:l,player:o,isFallbackTransition:h}),h||(Hb(e,Eb),o.onStart(()=>{Kb(e,Eb)})),o.onDone(()=>{let t=this.players.indexOf(o);t>=0&&this.players.splice(t,1);const n=this._engine.playersByElement.get(e);if(n){let e=n.indexOf(o);e>=0&&n.splice(e,1)}}),this.players.push(o),u.push(o),o}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,n)=>{delete t[e]}),this._elementListeners.forEach((t,n)=>{this._elementListeners.set(n,t.filter(t=>t.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(e=>e.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t,n=!1){this._engine.driver.query(e,y_,!0).forEach(e=>{if(e[Ob])return;const n=this._engine.fetchNamespacesByElement(e);n.size?n.forEach(n=>n.triggerLeaveAnimation(e,t,!1,!0)):this.clearElementCache(e)})}triggerLeaveAnimation(e,t,n,r){const i=this._engine.statesByElement.get(e);if(i){const o=[];if(Object.keys(i).forEach(t=>{if(this._triggers[t]){const n=this.trigger(e,t,xb,r);n&&o.push(n)}}),o.length)return this._engine.markElementAsRemoved(this.id,e,!0,t),n&&zv(o).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e);if(t){const n=new Set;t.forEach(t=>{const r=t.name;if(n.has(r))return;n.add(r);const i=this._triggers[r].fallbackTransition,o=this._engine.statesByElement.get(e)[r]||Mb,s=new Pb(xb),a=new Ub(this.id,r,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:r,transition:i,fromState:o,toState:s,player:a,isFallbackTransition:!0})})}}removeNode(e,t){const n=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t,!0),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(n.totalAnimations){const t=n.players.length?n.playersByQueriedElement.get(e):[];if(t&&t.length)r=!0;else{let t=e;for(;t=t.parentNode;)if(n.statesByElement.get(t)){r=!0;break}}}this.prepareLeaveAnimationListeners(e),r?n.markElementAsRemoved(this.id,e,!1,t):(n.afterFlush(()=>this.clearElementCache(e)),n.destroyInnerAnimations(e),n._onRemovalComplete(e,t))}insertNode(e,t){Hb(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const i=n.element,o=this._elementListeners.get(i);o&&o.forEach(t=>{if(t.name==n.triggerName){const r=Yv(i,n.triggerName,n.fromState.value,n.toState.value);r._data=e,Qv(n.player,t.phase,r,t.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(n)}),this._queue=[],t.sort((e,t)=>{const n=e.transition.ast.depCount,r=t.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(e.element,t.element)?1:-1})}destroy(e){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),!!this._queue.find(t=>t.element===e)||t}}class Fb{constructor(e,t,n){this.bodyNode=e,this.driver=t,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(e,t)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(t=>{t.queued&&e.push(t)})}),e}createNamespace(e,t){const n=new Lb(e,t,this);return t.parentNode?this._balanceNamespaceList(n,t):(this.newHostElements.set(t,n),this.collectEnterElement(t)),this._namespaceLookup[e]=n}_balanceNamespaceList(e,t){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,t)){this._namespaceList.splice(i+1,0,e),r=!0;break}r||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}register(e,t){let n=this._namespaceLookup[e];return n||(n=this.createNamespace(e,t)),n}registerTrigger(e,t,n){let r=this._namespaceLookup[e];r&&r.register(t,n)&&this.totalAnimations++}destroy(e,t){if(!e)return;const n=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[e];const t=this._namespaceList.indexOf(n);t>=0&&this._namespaceList.splice(t,1)}),this.afterFlushAnimationsDone(()=>n.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,n=this.statesByElement.get(e);if(n){const e=Object.keys(n);for(let r=0;r<e.length;r++){const i=n[e[r]].namespaceId;if(i){const e=this._fetchNamespace(i);e&&t.add(e)}}}return t}trigger(e,t,n,r){if(Vb(t)){const i=this._fetchNamespace(e);if(i)return i.trigger(t,n,r),!0}return!1}insertNode(e,t,n,r){if(!Vb(t))return;const i=t[Ob];if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const e=this.collectedLeaveElements.indexOf(t);e>=0&&this.collectedLeaveElements.splice(e,1)}if(e){const r=this._fetchNamespace(e);r&&r.insertNode(t,n)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Hb(e,Sb)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Kb(e,Sb))}removeNode(e,t,n,r){if(Vb(t)){const i=e?this._fetchNamespace(e):null;if(i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),n){const n=this.namespacesByHostElement.get(t);n&&n.id!==e&&n.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,n,r){this.collectedLeaveElements.push(t),t[Ob]={namespaceId:e,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(e,t,n,r,i){return Vb(t)?this._fetchNamespace(e).listen(t,n,r,i):()=>{}}_buildInstruction(e,t,n,r,i){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,n,r,e.fromState.options,e.toState.options,t,i)}destroyInnerAnimations(e){let t=this.driver.query(e,y_,!0);t.forEach(e=>this.destroyActiveAnimationsForElement(e)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,__,!0)).forEach(e=>this.finishActiveQueriedAnimationOnElement(e))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(e=>{e.queued?e.markedForDestroy=!0:e.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(e=>e.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return zv(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Ob];if(t&&t.setForRemoval){if(e[Ob]=Db,t.namespaceId){this.destroyInnerAnimations(e);const n=this._fetchNamespace(t.namespaceId);n&&n.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}this.driver.matchesElement(e,Ib)&&this.markElementAsDisabled(e,!1),this.driver.query(e,Ib,!0).forEach(e=>{this.markElementAsDisabled(e,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((e,t)=>this._balanceNamespaceList(e,t)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)Hb(this.collectedEnterElements[n],kb);if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{t=this._flushAnimations(n,e)}finally{for(let e=0;e<n.length;e++)n[e]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(e=>e()),this._flushFns=[],this._whenQuietFns.length){const e=this._whenQuietFns;this._whenQuietFns=[],t.length?zv(t).onDone(()=>{e.forEach(e=>e())}):e.forEach(e=>e())}}reportError(e){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${e.join("\n")}`)}_flushAnimations(e,t){const n=new tb,r=[],i=new Map,o=[],s=new Map,a=new Map,l=new Map,u=new Set;this.disabledNodes.forEach(e=>{u.add(e);const t=this.driver.query(e,Tb,!0);for(let n=0;n<t.length;n++)u.add(t[n])});const c=this.bodyNode,h=Array.from(this.statesByElement.keys()),d=Bb(h,this.collectedEnterElements),p=new Map;let f=0;d.forEach((e,t)=>{const n=f_+f++;p.set(t,n),e.forEach(e=>Hb(e,n))});const g=[],m=new Set,y=new Set;for(let D=0;D<this.collectedLeaveElements.length;D++){const e=this.collectedLeaveElements[D],t=e[Ob];t&&t.setForRemoval&&(g.push(e),m.add(e),t.hasAnimation?this.driver.query(e,Ab,!0).forEach(e=>m.add(e)):y.add(e))}const v=new Map,_=Bb(h,Array.from(m));_.forEach((e,t)=>{const n=g_+f++;v.set(t,n),e.forEach(e=>Hb(e,n))}),e.push(()=>{d.forEach((e,t)=>{const n=p.get(t);e.forEach(e=>Kb(e,n))}),_.forEach((e,t)=>{const n=v.get(t);e.forEach(e=>Kb(e,n))}),g.forEach(e=>{this.processLeaveNode(e)})});const b=[],w=[];for(let D=this._namespaceList.length-1;D>=0;D--)this._namespaceList[D].drainQueuedTransitions(t).forEach(e=>{const t=e.player,i=e.element;if(b.push(t),this.collectedEnterElements.length){const e=i[Ob];if(e&&e.setForMove)return void t.destroy()}const u=!c||!this.driver.containsElement(c,i),h=v.get(i),d=p.get(i),f=this._buildInstruction(e,n,d,h,u);if(!f.errors||!f.errors.length)return u?(t.onStart(()=>A_(i,f.fromStyles)),t.onDestroy(()=>k_(i,f.toStyles)),void r.push(t)):e.isFallbackTransition?(t.onStart(()=>A_(i,f.fromStyles)),t.onDestroy(()=>k_(i,f.toStyles)),void r.push(t)):(f.timelines.forEach(e=>e.stretchStartingKeyframe=!0),n.append(i,f.timelines),o.push({instruction:f,player:t,element:i}),f.queriedElements.forEach(e=>Xv(s,e,[]).push(t)),f.preStyleProps.forEach((e,t)=>{const n=Object.keys(e);if(n.length){let e=a.get(t);e||a.set(t,e=new Set),n.forEach(t=>e.add(t))}}),void f.postStyleProps.forEach((e,t)=>{const n=Object.keys(e);let r=l.get(t);r||l.set(t,r=new Set),n.forEach(e=>r.add(e))}));w.push(f)});if(w.length){const e=[];w.forEach(t=>{e.push(`@${t.triggerName} has failed due to:\n`),t.errors.forEach(t=>e.push(`- ${t}\n`))}),b.forEach(e=>e.destroy()),this.reportError(e)}const C=new Map,E=new Map;o.forEach(e=>{const t=e.element;n.has(t)&&(E.set(t,t),this._beforeAnimationBuild(e.player.namespaceId,e.instruction,C))}),r.forEach(e=>{const t=e.element;this._getPreviousPlayers(t,!1,e.namespaceId,e.triggerName,null).forEach(e=>{Xv(C,t,[]).push(e),e.destroy()})});const T=g.filter(e=>Gb(e,a,l)),S=new Map;qb(S,this.driver,y,l,Uv).forEach(e=>{Gb(e,a,l)&&T.push(e)});const I=new Map;d.forEach((e,t)=>{qb(I,this.driver,new Set(e),a,Hv)}),T.forEach(e=>{const t=S.get(e),n=I.get(e);S.set(e,Object.assign({},t,n))});const k=[],A=[],N={};o.forEach(e=>{const{element:t,player:o,instruction:s}=e;if(n.has(t)){if(u.has(t))return o.onDestroy(()=>k_(t,s.toStyles)),o.disabled=!0,o.overrideTotalTime(s.totalTime),void r.push(o);let e=N;if(E.size>1){let n=t;const r=[];for(;n=n.parentNode;){const t=E.get(n);if(t){e=t;break}r.push(n)}r.forEach(t=>E.set(t,e))}const n=this._buildAnimation(o.namespaceId,s,C,i,I,S);if(o.setRealPlayer(n),e===N)k.push(o);else{const t=this.playersByElement.get(e);t&&t.length&&(o.parentPlayer=zv(t)),r.push(o)}}else A_(t,s.fromStyles),o.onDestroy(()=>k_(t,s.toStyles)),A.push(o),u.has(t)&&r.push(o)}),A.forEach(e=>{const t=i.get(e.element);if(t&&t.length){const n=zv(t);e.setRealPlayer(n)}}),r.forEach(e=>{e.parentPlayer?e.syncPlayerEvents(e.parentPlayer):e.destroy()});for(let D=0;D<g.length;D++){const e=g[D],t=e[Ob];if(Kb(e,g_),t&&t.hasAnimation)continue;let n=[];if(s.size){let t=s.get(e);t&&t.length&&n.push(...t);let r=this.driver.query(e,__,!0);for(let e=0;e<r.length;e++){let t=s.get(r[e]);t&&t.length&&n.push(...t)}}const r=n.filter(e=>!e.destroyed);r.length?zb(this,e,r):this.processLeaveNode(e)}return g.length=0,k.forEach(e=>{this.players.push(e),e.onDone(()=>{e.destroy();const t=this.players.indexOf(e);this.players.splice(t,1)}),e.play()}),k}elementContainsData(e,t){let n=!1;const r=t[Ob];return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(t)&&(n=!0),this.playersByQueriedElement.has(t)&&(n=!0),this.statesByElement.has(t)&&(n=!0),this._fetchNamespace(e).elementContainsData(t)||n}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,n,r,i){let o=[];if(t){const t=this.playersByQueriedElement.get(e);t&&(o=t)}else{const t=this.playersByElement.get(e);if(t){const e=!i||i==xb;t.forEach(t=>{t.queued||(e||t.triggerName==r)&&o.push(t)})}}return(n||r)&&(o=o.filter(e=>!(n&&n!=e.namespaceId||r&&r!=e.triggerName))),o}_beforeAnimationBuild(e,t,n){const r=t.element,i=t.isRemovalTransition?void 0:e,o=t.isRemovalTransition?void 0:t.triggerName;for(const s of t.timelines){const e=s.element,a=e!==r,l=Xv(n,e,[]);this._getPreviousPlayers(e,a,i,o,t.toState).forEach(e=>{const t=e.getRealPlayer();t.beforeDestroy&&t.beforeDestroy(),e.destroy(),l.push(e)})}A_(r,t.fromStyles)}_buildAnimation(e,t,n,r,i,o){const s=t.triggerName,a=t.element,l=[],u=new Set,c=new Set,h=t.timelines.map(t=>{const h=t.element;u.add(h);const d=h[Ob];if(d&&d.removedBeforeQueried)return new Bv(t.duration,t.delay);const p=h!==a,f=function(e){const t=[];return function e(t,n){for(let r=0;r<t.length;r++){const i=t[r];i instanceof Wv?e(i.players,n):n.push(i)}}(e,t),t}((n.get(h)||Nb).map(e=>e.getRealPlayer())).filter(e=>!!e.element&&e.element===h),g=i.get(h),m=o.get(h),y=Gv(0,this._normalizer,0,t.keyframes,g,m),v=this._buildPlayer(t,y,f);if(t.subTimeline&&r&&c.add(h),p){const t=new Ub(e,s,h);t.setRealPlayer(v),l.push(t)}return v});l.forEach(e=>{Xv(this.playersByQueriedElement,e.element,[]).push(e),e.onDone(()=>(function(e,t,n){let r;if(e instanceof Map){if(r=e.get(t)){if(r.length){const e=r.indexOf(n);r.splice(e,1)}0==r.length&&e.delete(t)}}else if(r=e[t]){if(r.length){const e=r.indexOf(n);r.splice(e,1)}0==r.length&&delete e[t]}return r})(this.playersByQueriedElement,e.element,e))}),u.forEach(e=>Hb(e,v_));const d=zv(h);return d.onDestroy(()=>{u.forEach(e=>Kb(e,v_)),k_(a,t.toStyles)}),c.forEach(e=>{Xv(r,e,[]).push(d)}),d}_buildPlayer(e,t,n){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,n):new Bv(e.duration,e.delay)}}class Ub{constructor(e,t,n){this.namespaceId=e,this.triggerName=t,this.element=n,this._player=new Bv,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(n=>Qv(e,t,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Xv(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function Vb(e){return e&&1===e.nodeType}function jb(e,t){const n=e.style.display;return e.style.display=null!=t?t:"none",n}function qb(e,t,n,r,i){const o=[];n.forEach(e=>o.push(jb(e)));const s=[];r.forEach((n,r)=>{const o={};n.forEach(e=>{const n=o[e]=t.computeStyle(r,e,i);n&&0!=n.length||(r[Ob]=Rb,s.push(r))}),e.set(r,o)});let a=0;return n.forEach(e=>jb(e,o[a++])),s}function Bb(e,t){const n=new Map;if(e.forEach(e=>n.set(e,[])),0==t.length)return n;const r=new Set(t),i=new Map;return t.forEach(e=>{const t=function e(t){if(!t)return 1;let o=i.get(t);if(o)return o;const s=t.parentNode;return o=n.has(s)?s:r.has(s)?1:e(s),i.set(t,o),o}(e);1!==t&&n.get(t).push(e)}),n}const Wb="$$classes";function Hb(e,t){if(e.classList)e.classList.add(t);else{let n=e[Wb];n||(n=e[Wb]={}),n[t]=!0}}function Kb(e,t){if(e.classList)e.classList.remove(t);else{let n=e[Wb];n&&delete n[t]}}function zb(e,t,n){zv(n).onDone(()=>e.processLeaveNode(t))}function Gb(e,t,n){const r=n.get(e);if(!r)return!1;let i=t.get(e);return i?r.forEach(e=>i.add(e)):t.set(e,r),n.delete(e),!0}class Qb{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._triggerCache={},this.onRemovalComplete=(e,t)=>{},this._transitionEngine=new Fb(e,t,n),this._timelineEngine=new Cb(e,t,n),this._transitionEngine.onRemovalComplete=(e,t)=>this.onRemovalComplete(e,t)}registerTrigger(e,t,n,r,i){const o=e+"-"+r;let s=this._triggerCache[o];if(!s){const e=[],t=G_(this._driver,i,e);if(e.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${e.join("\n - ")}`);s=function(e,t){return new _b(e,t)}(r,t),this._triggerCache[o]=s}this._transitionEngine.registerTrigger(t,r,s)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,n,r){this._transitionEngine.insertNode(e,t,n,r)}onRemove(e,t,n,r){this._transitionEngine.removeNode(e,t,r||!1,n)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,n,r){if("@"==n.charAt(0)){const[e,i]=Jv(n);this._timelineEngine.command(e,t,i,r)}else this._transitionEngine.trigger(e,t,n,r)}listen(e,t,n,r,i){if("@"==n.charAt(0)){const[e,r]=Jv(n);return this._timelineEngine.listen(e,t,r,i)}return this._transitionEngine.listen(e,t,n,r,i)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function $b(e,t){let n=null,r=null;return Array.isArray(t)&&t.length?(n=Xb(t[0]),t.length>1&&(r=Xb(t[t.length-1]))):t&&(n=Xb(t)),n||r?new Yb(e,n,r):null}let Yb=(()=>{class e{constructor(t,n,r){this._element=t,this._startStyles=n,this._endStyles=r,this._state=0;let i=e.initialStylesByElement.get(t);i||e.initialStylesByElement.set(t,i={}),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&k_(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(k_(this._element,this._initialStyles),this._endStyles&&(k_(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(e.initialStylesByElement.delete(this._element),this._startStyles&&(A_(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(A_(this._element,this._endStyles),this._endStyles=null),k_(this._element,this._initialStyles),this._state=3)}}return e.initialStylesByElement=new WeakMap,e})();function Xb(e){let t=null;const n=Object.keys(e);for(let r=0;r<n.length;r++){const i=n[r];Jb(i)&&((t=t||{})[i]=e[i])}return t}function Jb(e){return"display"===e||"position"===e}const Zb=3,ew="animation",tw="animationend",nw=1e3;class rw{constructor(e,t,n,r,i,o,s){this._element=e,this._name=t,this._duration=n,this._delay=r,this._easing=i,this._fillMode=o,this._onDoneFn=s,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=e=>this._handleCallback(e)}apply(){!function(e,t){const n=uw(e,"").trim();n.length&&(function(e,t){let n=0;for(let r=0;r<e.length;r++)","===e.charAt(r)&&n++}(n),t=`${n}, ${t}`),lw(e,"",t)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),aw(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){iw(this._element,this._name,"paused")}resume(){iw(this._element,this._name,"running")}setPosition(e){const t=ow(this._element,this._name);this._position=e*this._duration,lw(this._element,"Delay",`-${this._position}ms`,t)}getPosition(){return this._position}_handleCallback(e){const t=e._ngTestManualTimestamp||Date.now(),n=parseFloat(e.elapsedTime.toFixed(Zb))*nw;e.animationName==this._name&&Math.max(t-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),aw(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(e,t){const n=uw(e,"").split(","),r=sw(n,t);r>=0&&(n.splice(r,1),lw(e,"",n.join(",")))}(this._element,this._name))}}function iw(e,t,n){lw(e,"PlayState",n,ow(e,t))}function ow(e,t){const n=uw(e,"");return n.indexOf(",")>0?sw(n.split(","),t):sw([n],t)}function sw(e,t){for(let n=0;n<e.length;n++)if(e[n].indexOf(t)>=0)return n;return-1}function aw(e,t,n){n?e.removeEventListener(tw,t):e.addEventListener(tw,t)}function lw(e,t,n,r){const i=ew+t;if(null!=r){const t=e.style[i];if(t.length){const e=t.split(",");e[r]=n,n=e.join(",")}}e.style[i]=n}function uw(e,t){return e.style[ew+t]}const cw="forwards",hw="linear";class dw{constructor(e,t,n,r,i,o,s,a){this.element=e,this.keyframes=t,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=s,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=o||hw,this.totalTime=r+i,this._buildStyler()}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(e=>e()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(e){this._styler.setPosition(e)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new rw(this.element,this.animationName,this._duration,this._delay,this.easing,cw,()=>this.finish())}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}beforeDestroy(){this.init();const e={};if(this.hasStarted()){const t=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(e[n]=t?this._finalStyles[n]:V_(this.element,n))})}this.currentSnapshot=e}}class pw extends Bv{constructor(e,t){super(),this.element=e,this._startingStyles={},this.__initialized=!1,this._styles=u_(t)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(e=>{this._startingStyles[e]=this.element.style[e]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(e=>this.element.style.setProperty(e,this._styles[e])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(e=>{const t=this._startingStyles[e];t?this.element.style.setProperty(e,t):this.element.style.removeProperty(e)}),this._startingStyles=null,super.destroy())}}const fw="gen_css_kf_",gw=" ";class mw{constructor(){this._count=0,this._head=document.querySelector("head"),this._warningIssued=!1}validateStyleProperty(e){return o_(e)}matchesElement(e,t){return s_(e,t)}containsElement(e,t){return a_(e,t)}query(e,t,n){return l_(e,t,n)}computeStyle(e,t,n){return window.getComputedStyle(e)[t]}buildKeyframeElement(e,t,n){n=n.map(e=>u_(e));let r=`@keyframes ${t} {\n`,i="";n.forEach(e=>{i=gw;const t=parseFloat(e.offset);r+=`${i}${100*t}% {\n`,i+=gw,Object.keys(e).forEach(t=>{const n=e[t];switch(t){case"offset":return;case"easing":return void(n&&(r+=`${i}animation-timing-function: ${n};\n`));default:return void(r+=`${i}${t}: ${n};\n`)}}),r+=`${i}}\n`}),r+="}\n";const o=document.createElement("style");return o.innerHTML=r,o}animate(e,t,n,r,i,o=[],s){s&&this._notifyFaultyScrubber();const a=o.filter(e=>e instanceof dw),l={};L_(n,r)&&a.forEach(e=>{let t=e.currentSnapshot;Object.keys(t).forEach(e=>l[e]=t[e])});const u=function(e){let t={};return e&&(Array.isArray(e)?e:[e]).forEach(e=>{Object.keys(e).forEach(n=>{"offset"!=n&&"easing"!=n&&(t[n]=e[n])})}),t}(t=F_(e,t,l));if(0==n)return new pw(e,u);const c=`${fw}${this._count++}`,h=this.buildKeyframeElement(e,c,t);document.querySelector("head").appendChild(h);const d=$b(e,t),p=new dw(e,t,c,n,r,i,u,d);return p.onDestroy(()=>(function(e){e.parentNode.removeChild(e)})(h)),p}_notifyFaultyScrubber(){this._warningIssued||(console.warn("@angular/animations: please load the web-animations.js polyfill to allow programmatic access...\n","  visit http://bit.ly/IWukam to learn more about using the web-animation-js polyfill."),this._warningIssued=!0)}}class yw{constructor(e,t,n,r){this.element=e,this.keyframes=t,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,n){return e.animate(t,n)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(t=>{"offset"!=t&&(e[t]=this._finished?this._finalKeyframe[t]:V_(this.element,t))}),this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}}class vw{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(_w().toString()),this._cssKeyframesDriver=new mw}validateStyleProperty(e){return o_(e)}matchesElement(e,t){return s_(e,t)}containsElement(e,t){return a_(e,t)}query(e,t,n){return l_(e,t,n)}computeStyle(e,t,n){return window.getComputedStyle(e)[t]}overrideWebAnimationsSupport(e){this._isNativeImpl=e}animate(e,t,n,r,i,o=[],s){if(!s&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(e,t,n,r,i,o);const a={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(a.easing=i);const l={},u=o.filter(e=>e instanceof yw);L_(n,r)&&u.forEach(e=>{let t=e.currentSnapshot;Object.keys(t).forEach(e=>l[e]=t[e])});const c=$b(e,t=F_(e,t=t.map(e=>T_(e,!1)),l));return new yw(e,t,a,c)}}function _w(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}class bw extends Lv{constructor(e,t){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(t.body,{id:"0",encapsulation:Ge.None,styles:[],data:{animation:[]}})}build(e){const t=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(e)?Vv(e):e;return Ew(this._renderer,null,t,"register",[n]),new ww(t,this._renderer)}}class ww extends Fv{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Cw(this._id,e,t||{},this._renderer)}}class Cw{constructor(e,t,n,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return Ew(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset")}setPosition(e){this._command("setPosition",e)}getPosition(){return 0}}function Ew(e,t,n,r,i){return e.setProperty(t,`@@${n}:${r}`,i)}const Tw="@",Sw="@.disabled";class Iw{constructor(e,t,n){this.delegate=e,this.engine=t,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),t.onRemovalComplete=(e,t)=>{t&&t.parentNode(e)&&t.removeChild(e.parentNode,e)}}createRenderer(e,t){const n=this.delegate.createRenderer(e,t);if(!(e&&t&&t.data&&t.data.animation)){let e=this._rendererCache.get(n);return e||(e=new kw("",n,this.engine),this._rendererCache.set(n,e)),e}const r=t.id,i=t.id+"-"+this._currentId;return this._currentId++,this.engine.register(i,e),t.data.animation.forEach(t=>this.engine.registerTrigger(r,i,e,t.name,t)),new Aw(this,i,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,n){e>=0&&e<this._microtaskId?this._zone.run(()=>t(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(e=>{const[t,n]=e;t(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([t,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}class kw{constructor(e,t,n){this.namespaceId=e,this.delegate=t,this.engine=n,this.destroyNode=this.delegate.destroyNode?e=>t.destroyNode(e):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,n){this.delegate.insertBefore(e,t,n),this.engine.onInsert(this.namespaceId,t,e,!0)}removeChild(e,t,n){this.engine.onRemove(this.namespaceId,t,this.delegate,n)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,n,r){this.delegate.setAttribute(e,t,n,r)}removeAttribute(e,t,n){this.delegate.removeAttribute(e,t,n)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,n,r){this.delegate.setStyle(e,t,n,r)}removeStyle(e,t,n){this.delegate.removeStyle(e,t,n)}setProperty(e,t,n){t.charAt(0)==Tw&&t==Sw?this.disableAnimations(e,!!n):this.delegate.setProperty(e,t,n)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,n){return this.delegate.listen(e,t,n)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class Aw extends kw{constructor(e,t,n,r){super(t,n,r),this.factory=e,this.namespaceId=t}setProperty(e,t,n){t.charAt(0)==Tw?"."==t.charAt(1)&&t==Sw?this.disableAnimations(e,n=void 0===n||!!n):this.engine.process(this.namespaceId,e,t.substr(1),n):this.delegate.setProperty(e,t,n)}listen(e,t,n){if(t.charAt(0)==Tw){const r=function(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(e);let i=t.substr(1),o="";return i.charAt(0)!=Tw&&([i,o]=function(e){const t=e.indexOf(".");return[e.substring(0,t),e.substr(t+1)]}(i)),this.engine.listen(this.namespaceId,r,i,o,e=>{this.factory.scheduleListenerCallback(e._data||-1,n,e)})}return this.delegate.listen(e,t,n)}}class Nw extends Qb{constructor(e,t,n){super(e.body,t,n)}}function Dw(){return"function"==typeof _w()?new vw:new mw}function Rw(){return new pb}function Ow(e,t,n){return new Iw(e,t,n)}const Pw=new ke("AnimationModuleType");class xw{}function Mw(e){return function(e){return new w(t=>({unsubscribe:e.onSnapshot(t)}))}(e).pipe(se())}function Lw(e){return Mw(e).pipe(B(e=>({payload:e,type:"query"})))}function Fw(e){return Lw(e).pipe(B(e=>e.payload.docChanges().map(e=>({type:e.type,payload:e}))))}function Uw(e,t){return Lw(e).pipe(B(e=>e.payload.docChanges()),vh((e,n)=>(function(e,t,n){return t.forEach(t=>{n.indexOf(t.type)>-1&&(e=function(e,t){switch(t.type){case"added":e[t.newIndex]&&e[t.newIndex].doc.ref.isEqual(t.doc.ref)||e.splice(t.newIndex,0,t);break;case"modified":(null==e[t.oldIndex]||e[t.oldIndex].doc.ref.isEqual(t.doc.ref))&&(t.oldIndex!==t.newIndex?(e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t)):e.splice(t.newIndex,1,t));break;case"removed":e[t.oldIndex]&&e[t.oldIndex].doc.ref.isEqual(t.doc.ref)&&e.splice(t.oldIndex,1)}return e}(e,t))}),e})(e,n,t),[]),B(e=>e.map(e=>({type:e.type,payload:e}))))}function Vw(e){return e&&0!==e.length||(e=["added","removed","modified"]),e}class jw{constructor(e,t,n){this.ref=e,this.query=t,this.afs=n}stateChanges(e){return e&&0!==e.length?this.afs.scheduler.keepUnstableUntilFirst(this.afs.scheduler.runOutsideAngular(Fw(this.query))).pipe(B(t=>t.filter(t=>e.indexOf(t.type)>-1)),Wc(e=>e.length>0)):this.afs.scheduler.keepUnstableUntilFirst(this.afs.scheduler.runOutsideAngular(Fw(this.query)))}auditTrail(e){return this.stateChanges(e).pipe(vh((e,t)=>[...e,...t],[]))}snapshotChanges(e){const t=Vw(e),n=Uw(this.query,t),r=this.afs.scheduler.runOutsideAngular(n);return this.afs.scheduler.keepUnstableUntilFirst(r)}valueChanges(e={}){const t=Lw(this.query),n=this.afs.scheduler.runOutsideAngular(t);return this.afs.scheduler.keepUnstableUntilFirst(n).pipe(B(t=>t.payload.docs.map(t=>e.idField?Object.assign({},t.data(),{[e.idField]:t.id}):t.data())))}get(e){return z(this.query.get(e)).pipe(Ug(this.afs.scheduler.zone))}add(e){return this.ref.add(e)}doc(e){return new qw(this.ref.doc(e),this.afs)}}class qw{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const n=this.ref.collection(e),{ref:r,query:i}=Qw(n,t);return new jw(r,i,this.afs)}snapshotChanges(){const e=Mw(this.ref).pipe(B(e=>({payload:e,type:"value"}))),t=this.afs.scheduler.runOutsideAngular(e);return this.afs.scheduler.keepUnstableUntilFirst(t)}valueChanges(){return this.snapshotChanges().pipe(B(e=>e.payload.data()))}get(e){return z(this.ref.get(e)).pipe(Ug(this.afs.scheduler.zone))}}class Bw{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?this.afs.scheduler.keepUnstableUntilFirst(this.afs.scheduler.runOutsideAngular(Fw(this.query))).pipe(B(t=>t.filter(t=>e.indexOf(t.type)>-1)),Wc(e=>e.length>0)):this.afs.scheduler.keepUnstableUntilFirst(this.afs.scheduler.runOutsideAngular(Fw(this.query)))}auditTrail(e){return this.stateChanges(e).pipe(vh((e,t)=>[...e,...t],[]))}snapshotChanges(e){const t=Vw(e),n=Uw(this.query,t),r=this.afs.scheduler.runOutsideAngular(n);return this.afs.scheduler.keepUnstableUntilFirst(r)}valueChanges(){const e=Lw(this.query),t=this.afs.scheduler.runOutsideAngular(e);return this.afs.scheduler.keepUnstableUntilFirst(t).pipe(B(e=>e.payload.docs.map(e=>e.data())))}get(e){return z(this.query.get(e)).pipe(Ug(this.afs.scheduler.zone))}}const Ww=new ke("angularfire2.enableFirestorePersistence"),Hw=new ke("angularfire2.firestore.persistenceSettings"),Kw=new ke("angularfire2.firestore.settings"),zw=parseInt(qg.a.SDK_VERSION.split(".")[0]),Gw=zw<5||5==zw&&parseInt(qg.a.SDK_VERSION.split(".")[1])<8?{timestampsInSnapshots:!0}:{};function Qw(e,t=(e=>e)){return{query:t(e),ref:e}}let $w=class{constructor(e,t,n,r,i,o,s){this.scheduler=new Fg(o,i),this.firestore=o.runOutsideAngular(()=>{const n=Kg(e,o,t).firestore();return n.settings(r||Gw),n}),this.persistenceEnabled$=n&&!Xa(i)?o.runOutsideAngular(()=>{try{return z(this.firestore.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(e){return xc(!1)}}):xc(!1)}collection(e,t){let n;n="string"==typeof e?this.firestore.collection(e):e;const{ref:r,query:i}=Qw(n,t);return new jw(r,i,this)}collectionGroup(e,t){if(zw<6)throw"collection group queries require Firebase JS SDK >= 6.0";const n=t||(e=>e),r=this.firestore.collectionGroup(e);return new Bw(n(r),this)}doc(e){let t;return t="string"==typeof e?this.firestore.doc(e):e,new qw(t,this)}createId(){return this.firestore.collection("_").doc().id}};var Yw;n("6Joi");let Xw=Yw=class{static enablePersistence(e){return{ngModule:Yw,providers:[{provide:Ww,useValue:!0},{provide:Hw,useValue:e}]}}};n("NSPt");let Jw=class{};class Zw{}var eC=Ea(Cf,[Ef],(function(e){return function(e){const t={},n=[];let r=!1;for(let i=0;i<e.length;i++){const o=e[i];o.token===xt&&!0===o.value&&(r=!0),1073741824&o.flags&&n.push(o.token),o.index=i,t[Zn(o.token)]=o}return{factory:null,providersByKey:t,providers:e,modules:n,isRoot:r}}([Lr(512,ln,un,[[8,[kf,tg,og,Zg,lm,qm,jy,Ky,hv,yv,Cv,Mv]],[3,ln],We]),Lr(5120,Yi,Zo,[[3,Yi]]),Lr(4608,Ua,Va,[Yi,[2,Fa]]),Lr(5120,Di,es,[go]),Lr(5120,Wi,Hi,[]),Lr(5120,Rn,Xo,[]),Lr(5120,On,Jo,[]),Lr(4608,iu,ou,[$a]),Lr(6144,kt,null,[iu]),Lr(4608,Xl,Zl,[]),Lr(5120,_l,(function(e,t,n,r,i,o,s,a){return[new $l(e,t,n),new ru(r),new eu(i,o,s,a)]}),[$a,go,Gi,$a,$a,Xl,$i,[2,Jl]]),Lr(4608,bl,bl,[_l,go]),Lr(135680,El,El,[$a]),Lr(4608,Dl,Dl,[bl,El,Wi]),Lr(5120,h_,Dw,[]),Lr(5120,db,Rw,[]),Lr(4608,Qb,Nw,[$a,h_,db]),Lr(5120,gn,Ow,[Dl,Qb,go]),Lr(6144,Cl,null,[El]),Lr(4608,Co,Co,[go]),Lr(5120,Od,ff,[Wp]),Lr(4608,ef,ef,[]),Lr(6144,Jp,null,[ef]),Lr(135680,tf,tf,[Wp,Fo,ro,Lt,Jp]),Lr(4608,Zp,Zp,[]),Lr(5120,nf,uf,[Wp,Ja,rf]),Lr(5120,vf,yf,[gf]),Lr(5120,Qi,(function(e,t){return[e,t]}),[vf,vf]),Lr(4608,Uu,Uu,[]),Lr(4608,Ec,Ec,[]),Lr(4608,fy,gy,[$a,Gi,dy]),Lr(4608,my,my,[fy,py]),Lr(5120,sy,(function(e){return[e]}),[my]),Lr(4608,cy,cy,[]),Lr(6144,uy,null,[cy]),Lr(4608,hy,hy,[uy]),Lr(6144,Wm,null,[hy]),Lr(4608,Bm,yy,[Wm,Lt]),Lr(4608,iy,iy,[Bm]),Lr(5120,Hg,Kg,[Bg,go,[2,Wg]]),Lr(4608,$w,$w,[Bg,[2,Wg],[2,Ww],[2,Kw],Gi,go,[2,Hw]]),Lr(4608,Gg,Gg,[Bg,[2,Wg],[2,Lg],Gi,go]),Lr(4608,Lv,bw,[gn,$a]),Lr(4608,Qg,Qg,[Gg]),Lr(4608,by,by,[iy]),Lr(4608,_f,_f,[Wp,Od]),Lr(4608,bf,bf,[_f]),Lr(1073742336,Qa,Qa,[]),Lr(1024,tt,pu,[]),Lr(1024,Do,(function(){return[af(),af()]}),[]),Lr(512,gf,gf,[Lt]),Lr(1024,qi,(function(e,t,n){return[(r=e,ml("probe",vl),ml("coreTokens",Object.assign({},yl,(r||[]).reduce((e,t)=>(e[t.name]=t.token,e),{}))),()=>vl),mf(t),mf(n)];var r}),[[2,Do],gf,gf]),Lr(512,Bi,Bi,[[2,qi]]),Lr(131584,Mo,Mo,[go,$i,Lt,tt,ln,Bi]),Lr(1073742336,ts,ts,[Mo]),Lr(1073742336,fu,fu,[[3,fu]]),Lr(1024,of,hf,[[3,Wp]]),Lr(512,cd,hd,[]),Lr(512,$p,$p,[]),Lr(256,rf,{},[]),Lr(1024,Na,cf,[ka,[2,Da],rf]),Lr(512,Ra,Ra,[Na,ka]),Lr(512,ro,ro,[]),Lr(512,Fo,Bo,[ro,[2,jo]]),Lr(1024,Lp,(function(){return[[],[{path:"",component:Ia},{path:"proveedores",component:Sa,canActivate:[bf]},{path:"addprovee",component:Ic,canActivate:[bf]},{path:"editprovee/:id",component:wf,canActivate:[bf]},{path:"addpres",component:kc,canActivate:[bf]},{path:"presupuestos",component:Ac,canActivate:[bf]},{path:"editpres/:id",component:Nc,canActivate:[bf]},{path:"registro",component:Dc},{path:"iniciosesion",component:Rc},{path:"**",component:Ia}]]}),[]),Lr(1024,Wp,pf,[Mo,cd,$p,Ra,Lt,Fo,ro,Lp,rf,[2,Up],[2,xp]]),Lr(1073742336,lf,lf,[[2,of],[2,Wp]]),Lr(1073742336,Zw,Zw,[]),Lr(1073742336,Cc,Cc,[]),Lr(1073742336,Tc,Tc,[]),Lr(1073742336,Sc,Sc,[]),Lr(1073742336,vy,vy,[]),Lr(1073742336,_y,_y,[]),Lr(1073742336,zg,zg,[]),Lr(1073742336,Xw,Xw,[]),Lr(1073742336,Jw,Jw,[]),Lr(1073742336,xw,xw,[]),Lr(1073742336,Wf,Wf,[]),Lr(1073742336,Cf,Cf,[]),Lr(256,xt,!0,[]),Lr(256,dy,"XSRF-TOKEN",[]),Lr(256,py,"X-XSRF-TOKEN",[]),Lr(256,Bg,{apiKey:"AIzaSyB0pcVMk8n0Zf43hA_nE2WlkNKKhG8afMg",authDomain:"comprasapp-bb34b.firebaseapp.com",databaseURL:"https://comprasapp-bb34b.firebaseio.com",projectId:"comprasapp-bb34b",storageBucket:"comprasapp-bb34b.appspot.com",messagingSenderId:"35093441216",appId:"1:35093441216:web:d5caa96090cad5e98adb25",measurementId:"G-R8C7R6B5QR"},[]),Lr(256,Wg,void 0,[]),Lr(256,Pw,"BrowserAnimations",[]),Lr(256,Df,{default:Bf,config:{}},[])])}));(function(){if(rt)throw new Error("Cannot enable prod mode after platform setup.");nt=!1})(),du().bootstrapModuleFactory(eC).catch(e=>console.error(e))},zVF4:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("mrSG"),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(e,t){if(!e)throw s(t)},s=function(e){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},a=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},l={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],s=i+1<e.length,a=s?e[i+1]:0,l=i+2<e.length,u=l?e[i+2]:0,c=(15&a)<<2|u>>6,h=63&u;l||(h=64,s||(c=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[c],n[h])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(a(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=e[n++]))<<12|(63&(a=e[n++]))<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{o=e[n++];var a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0,a=++i<e.length?n[e.charAt(i)]:64,l=++i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==l)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==l&&r.push(a<<6&192|l))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},u=function(e){try{return l.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function c(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&(e[n]=c(e[n],t[n]));return e}var h=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}},e}();function d(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}var p="FirebaseError",f=function(e){function t(n,r){var i=e.call(this,r)||this;return i.code=n,i.name=p,Object.setPrototypeOf(i,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,g.prototype.create),i}return r.__extends(t,e),t}(Error),g=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=t[0]||{},i=this.service+"/"+e,o=this.errors[e],s=o?m(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",l=new f(i,a),u=0,c=Object.keys(r);u<c.length;u++){var h=c[u];"_"!==h.slice(-1)&&(h in l&&console.warn('Overwriting FirebaseError base field "'+h+'" can cause unexpected behavior.'),l[h]=r[h])}return l},e}();function m(e,t){return e.replace(y,(function(e,n){var r=t[n];return null!=r?r.toString():"<"+n+"?>"}))}var y=/\{\$([^}]+)}/g;function v(e){return JSON.parse(e)}var _=function(e){var t={},n={},r={},i="";try{var o=e.split(".");t=v(u(o[0])||""),n=v(u(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:t,claims:n,data:r,signature:i}},b=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"==typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],l=this.chain_[2],u=this.chain_[3],c=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=u^a&(l^u),o=1518500249):(i=a^l^u,o=1859775393):r<60?(i=a&l|u&(a|l),o=2400959708):(i=a^l^u,o=3395469782);var h=(s<<5|s>>>27)+i+c+o+n[r]&4294967295;c=u,u=l,l=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+u&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e},e}(),w=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((function(){e(n)})).catch((function(e){n.error(e)}))}return e.prototype.next=function(e){this.forEachObserver((function(t){t.next(e)}))},e.prototype.error=function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)},e.prototype.complete=function(){this.forEachObserver((function(e){e.complete()})),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return!0}return!1}(e)?e:{next:e,error:t,complete:n}).next&&(r.next=C),void 0===r.error&&(r.error=C),void 0===r.complete&&(r.complete=C);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),o},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}}))},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))},e}();function C(){}function E(e,t,n){var r="";switch(t){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return e+" failed: "+r+" argument "}t.CONSTANTS=i,t.Deferred=h,t.ErrorFactory=g,t.FirebaseError=f,t.Sha1=b,t.assert=o,t.assertionError=s,t.async=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){e.apply(void 0,n)})).catch((function(e){t&&t(e)}))}},t.base64=l,t.base64Decode=u,t.base64Encode=function(e){var t=a(e);return l.encodeByteArray(t,!0)},t.contains=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.createSubscribe=function(e,t){var n=new w(e,t);return n.subscribe.bind(n)},t.decode=_,t.deepCopy=function(e){return c(void 0,e)},t.deepExtend=c,t.errorPrefix=E,t.getUA=d,t.isAdmin=function(e){var t=_(e).claims;return"object"==typeof t&&!0===t.admin},t.isBrowser=function(){return"object"==typeof self&&self.self===self},t.isEmpty=function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},t.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(d())},t.isNode=function(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(e){return!1}},t.isNodeSdk=function(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN},t.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},t.isValidFormat=function(e){var t=_(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")},t.isValidTimestamp=function(e){var t=_(e).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"==typeof t&&(t.hasOwnProperty("nbf")?r=t.nbf:t.hasOwnProperty("iat")&&(r=t.iat),i=t.hasOwnProperty("exp")?t.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},t.issuedAtTime=function(e){var t=_(e).claims;return"object"==typeof t&&t.hasOwnProperty("iat")?t.iat:null},t.jsonEval=v,t.map=function(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r},t.querystring=function(e){for(var t=[],n=function(e,n){Array.isArray(n)?n.forEach((function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))})):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))},r=0,i=Object.entries(e);r<i.length;r++){var o=i[r];n(o[0],o[1])}return t.length?"&"+t.join("&"):""},t.querystringDecode=function(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=e.split("=");t[n[0]]=n[1]}})),t},t.safeGet=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0},t.stringLength=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t},t.stringToByteArray=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var s=i-55296;o(++r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(s<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},t.stringify=function(e){return JSON.stringify(e)},t.validateArgCount=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},t.validateCallback=function(e,t,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(E(e,t,r)+"must be a valid function.")},t.validateContextObject=function(e,t,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(E(e,t,r)+"must be a valid context object.")},t.validateNamespace=function(e,t,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(E(e,t,r)+"must be a valid firebase namespace.")}},zn8P:function(e,t){function n(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="zn8P"}},[[0,0]]]);